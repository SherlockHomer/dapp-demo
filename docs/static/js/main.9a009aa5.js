/*! For license information please see main.9a009aa5.js.LICENSE.txt */
(()=>{var e={70187:(e,t,n)=>{"use strict";n.d(t,{A:()=>xn});var r=n(56736),o=n(94400),i=n(51810),a=n(42340),s=n(13960),f=n(98696),c=n(666),l=n(63977),d=n.n(l),u=n(30385),h=n.n(u);const p=(0,s.createContext)({});var g=n(64399);const b="0x1E0049783F008A0085193E00003D00cd54003c71",y="0xfe8dc6394501a35ad1c4833f40f382e55dada4f3",v=function(){return{1:"0x458c761053bc46bc044bd7c9c68e58c5d44da45f",137:"0xd422e603cad822de9ff2ec61a8491164f748585a",66:"0xd422e603cad822de9ff2ec61a8491164f748585a"}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:1]},m=function(){return{1:"0x300b6acb1851acd39104b99bbe540e02ed6eeec1",137:"0xeb0647bfd3def182e7cbc5bc266cc81ceb83862d"}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:1]},C=function(){return{1:"0x411be70a215df02311d62f9a8cd201b38ae4effd",137:"0xde05fdad44c27365e4fbb91978dd778b4abd0575"}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:1]};var O=n(98036),w=n(54342);const E=["1","137","11155111","314"],_={1:["0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","0x6b175474e89094c44da98b954eedeac495271d0f","0xdac17f958d2ee523a2206206994597c13d831ec7","0x1f9840a85d5af5bf1d1762f925bdaddc4201f984","0x95ad61b0a150d79219dcf64e1e6cc01f0b64c4ce","0x75231f58b43240c9718dd58b4967c5114342a86c"],137:["0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x3c499c542cef5e3811e1192ce70d8cc03d5c3359","0xac51c4c48dc3116487ed4bc16542e27b5694da1b","0x0000000000000000000000000000000000001010","0x53e0bca35ec356bd5dddfebbd1fc0fd03fabad39","0x1bfd67037b42cf73acf2047067bd4f2c47d9bfd6","0x2c89bbc92bd86f8075d1decc58c7f4e0107f286b"],11155111:["0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x3c499c542cef5e3811e1192ce70d8cc03d5c3359","0xac51c4c48dc3116487ed4bc16542e27b5694da1b","0x0000000000000000000000000000000000001010","0x53e0bca35ec356bd5dddfebbd1fc0fd03fabad39","0x1bfd67037b42cf73acf2047067bd4f2c47d9bfd6","0x2c89bbc92bd86f8075d1decc58c7f4e0107f286b"],314:["0x7b90337f65faa2b2b8ed583ba1ba6eb0c9d7ea44","0x8460766edc62b525fc1fa4d628fc79229dc73031","0xba5cd7ef1414c33e3a250fb89ad7c8f49844762d","0x005e02a4a934142d8dd476f192d0dd9c381b16b4","0xaaef78eaf86dcf34f275288752e892424dda9341","0x44f0f7c774c42dba388fff55c8057a71d5952044","0x8ed1137f81bf8108731735902c9428511347de16","0x4f180e118e8b20eeb87899ce6a497d05dc8319b6","0x422849b355039bc58f2780cc4854919fc9cfaf94"]};const x=function(e){let{chainId:t}=e;const n=v(t),r=C(t),{account:o,provider:a}=(0,s.useContext)(p),[l,h]=(0,s.useState)(!1),b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0x68b3465833fb72A70ecDF485E0e4C7bD8665Fc45";return async()=>{try{h(!0);const n={types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},domain:{name:"USD Coin",version:"2",verifyingContract:(0,u.sample)(_[t]),chainId:t},primaryType:"Permit",message:{owner:(0,u.sample)(_[t]),spender:e,value:"25000000",nonce:5,deadline:`${d()().add(2,"day").unix()}`}},r=await a.request({method:"eth_signTypedData_v4",params:[o,JSON.stringify(n)]});w.log(r),(0,g.t)()}catch(n){w.log(n),(0,g.i)()}finally{h(!1)}}},[m,x]=(0,s.useState)(!1),S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0xef1c6e67703c7bd7107eed8303fbe6ec2554bf6b";return async()=>{try{x(!0);const n={types:{PermitSingle:[{name:"details",type:"PermitDetails"},{name:"spender",type:"address"},{name:"sigDeadline",type:"uint256"}],PermitDetails:[{name:"token",type:"address"},{name:"amount",type:"uint160"},{name:"expiration",type:"uint48"},{name:"nonce",type:"uint48"}],EIP712Domain:[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}]},domain:{name:"Permit2",chainId:t,verifyingContract:(0,u.sample)(_[t])},primaryType:"PermitSingle",message:{details:{token:(0,u.sample)(_[t]),amount:"1461501637330902918203684832716283019655932542975",expiration:`${d()().add(2,"day").unix()}`,nonce:"0"},spender:e,sigDeadline:`${d()().add(3,"day").unix()}`}},r=await a.request({method:"eth_signTypedData_v4",params:[o,JSON.stringify(n)]});w.log(r),(0,g.t)()}catch(n){w.log(n),(0,g.i)()}finally{x(!1)}}},[R,N]=(0,s.useState)(!1),T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0xef1c6e67703c7bd7107eed8303fbe6ec2554bf6b";return async()=>{try{N(!0);const n={types:{PermitBatch:[{name:"details",type:"PermitDetails[]"},{name:"spender",type:"address"},{name:"sigDeadline",type:"uint256"}],PermitDetails:[{name:"token",type:"address"},{name:"amount",type:"uint160"},{name:"expiration",type:"uint48"},{name:"nonce",type:"uint48"}],EIP712Domain:[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}]},domain:{name:"Permit2",chainId:t,verifyingContract:(0,u.sample)(_[t])},primaryType:"PermitBatch",message:{details:[{token:(0,u.sample)(_[t]),amount:"1461501637330902918203684832716283019655932542975",expiration:`${d()().add(2,"day").unix()}`,nonce:"0"},{token:(0,u.sample)(_[t]),amount:"1461501637330902918203684832716283019655932542975",expiration:`${d()().add(2,"day").unix()}`,nonce:"0"},{token:(0,u.sample)(_[t]),amount:"1461501637330902918203684832716283019655932542975",expiration:`${d()().add(2,"day").unix()}`,nonce:"0"},{token:(0,u.sample)(_[t]),amount:"1461501637330902918203684832716283019655932542975",expiration:`${d()().add(2,"day").unix()}`,nonce:"0"}],spender:e,sigDeadline:`${d()().add(2,"day").unix()}`}},r=await a.request({method:"eth_signTypedData_v4",params:[o,JSON.stringify(n)]});w.log(r),(0,g.t)()}catch(n){w.log(n),(0,g.i)()}finally{N(!1)}}};return(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"Permit & Permit2 & Permit2 Batch",children:E.includes(`${t}`)?(0,O.jsxs)(f.A,{gutter:8,children:[(0,O.jsxs)(c.A,{xs:24,lg:8,children:[(0,O.jsx)(i.$n,{block:!0,disabled:!o,onClick:b(),loading:l,style:{marginBottom:8},children:"Permit"}),!!n&&(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!o,onClick:b(n),loading:l,style:{marginBottom:8},children:"Black"}),!!r&&(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!o,onClick:b(r),loading:l,style:{marginBottom:8},children:"StrongBlack"}),(0,O.jsx)(i.$n,{block:!0,disabled:!o,onClick:b(y),loading:l,style:{marginBottom:8},children:"EOA"})]}),(0,O.jsxs)(c.A,{xs:24,lg:8,children:[(0,O.jsx)(i.$n,{block:!0,disabled:!o,onClick:S(),loading:m,style:{marginBottom:8},children:"Permit2"}),!!n&&(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!o,onClick:S(n),loading:m,style:{marginBottom:8},children:"Black"}),!!r&&(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!o,onClick:b(r),loading:m,style:{marginBottom:8},children:"StrongBlack"}),(0,O.jsx)(i.$n,{block:!0,disabled:!o,loading:m,onClick:S(y),style:{marginBottom:8},children:"EOA"})]}),(0,O.jsxs)(c.A,{xs:24,lg:8,children:[(0,O.jsx)(i.$n,{block:!0,disabled:!o,onClick:T(),loading:R,style:{marginBottom:8},children:"Permit2 Batch"}),!!n&&(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!o,onClick:T(n),loading:R,style:{marginBottom:8},children:"Black"}),!!r&&(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!o,onClick:b(r),loading:R,style:{marginBottom:8},children:"StrongBlack"}),(0,O.jsx)(i.$n,{block:!0,disabled:!o,onClick:T(y),loading:R,style:{marginBottom:8},children:"EOA"})]})]}):(0,O.jsx)(i.$n,{block:!0,disabled:!o,onClick:()=>{a.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x1"}]})},children:"\u6682\u4e0d\u652f\u6301\u8be5\u7f51\u7edc - \u5207\u6362\u5230 eth \u4e3b\u7f51"})})})};var S=n(51674),R=n(54342);const N=function(){const{account:e,chainId:t,provider:n}=(0,s.useContext)(p),[r,o]=(0,s.useState)(!1),a=function(){let{verifyingContract:r="0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC",fakeMsg:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async()=>{const a={domain:{chainId:t.toString(),name:"Ether Mail",verifyingContract:r,version:"1"},message:i?{"\u2062target\uff02:\uff02THIS IS THE FAKE TARGET\uff02,\uff02message":"THIS IS THE FAKE MESSAGE\uff02\u2062}\u2062 }\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u2062xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}:{contents:"Hello, Bob!",from:{name:"Cow",wallets:["0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826","0xDeaDbeefdEAdbeefdEadbEEFdeadbeEFdEaDbeeF"]},to:[{name:"Bob",wallets:["0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826","0xDeaDbeefdEAdbeefdEadbEEFdeadbeEFdEaDbeeF"]}]},primaryType:"Mail",types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Group:[{name:"name",type:"string"},{name:"members",type:"Person[]"}],Mail:[{name:"from",type:"Person"},{name:"to",type:"Person[]"},{name:"contents",type:"string"}],Person:[{name:"name",type:"string"},{name:"wallets",type:"address[]"}]}};try{o(!0);const t=await n.request({method:"eth_signTypedData_v4",params:[e,JSON.stringify(a)]});R.log(t),(0,g.t)()}catch(s){R.log(s),(0,g.i)()}finally{o(!1)}}};return(0,O.jsx)(c.A,{xs:24,lg:6,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"Sign Typed Data V4",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,disabled:!e,onClick:a(),loading:r,children:"eth_signTypedData_v4"}),(0,O.jsx)(i.$n,{block:!0,disabled:!e,onClick:a({verifyingContract:"34567890ihdauhfljadfja"}),loading:r,children:"eip712NotStandard"}),(0,O.jsx)(i.$n,{block:!0,disabled:!e,onClick:a({fakeMsg:!0}),loading:r,children:"longSignText"}),(0,O.jsx)(S.A,{content:"eip712NotStandard & longSignText",children:(0,O.jsx)(i.$n,{block:!0,disabled:!e,onClick:a({verifyingContract:"34567890ihdauhfljadfja",fakeMsg:!0}),loading:r,children:"both"})}),(0,O.jsx)(i.$n,{block:!0,disabled:!e,onClick:async()=>{const r={types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],OrderComponents:[{name:"offerer",type:"address"},{name:"zone",type:"address"},{name:"offer",type:"OfferItem[]"},{name:"consideration",type:"ConsiderationItem[]"},{name:"orderType",type:"uint8"},{name:"startTime",type:"uint256"},{name:"endTime",type:"uint256"},{name:"zoneHash",type:"bytes32"},{name:"salt",type:"uint256"},{name:"conduitKey",type:"bytes32"},{name:"counter",type:"uint256"}],OfferItem:[{name:"itemType",type:"uint8"},{name:"token",type:"address"},{name:"identifierOrCriteria",type:"uint256"},{name:"startAmount",type:"uint256"},{name:"endAmount",type:"uint256"}],ConsiderationItem:[{name:"itemType",type:"uint8"},{name:"token",type:"address"},{name:"identifierOrCriteria",type:"uint256"},{name:"startAmount",type:"uint256"},{name:"endAmount",type:"uint256"},{name:"recipient",type:"address"}]},primaryType:"OrderComponents",domain:{name:"Seaport",version:"1.1",chainId:t.toString(10),verifyingContract:"0x00000000006c3852cbEf3e08E8dF289169EdE581"},message:{offerer:"0x6c8ee01f1f8b62e987b3d18f6f28b22a0ada755f",offer:[{itemType:"2",token:"0xBC4CA0EdA7647A8aB7C2061c2E118A18a936f13D",identifierOrCriteria:"5547",startAmount:"1",endAmount:"1"},{itemType:"2",token:"0x5Af0D9827E0c53E4799BB226655A1de152A425a5",identifierOrCriteria:"5547",startAmount:"1",endAmount:"1"}],consideration:[{itemType:"0",token:"0x0000000000000000000000000000000000000000",identifierOrCriteria:"0",startAmount:"1",endAmount:"1",recipient:"0x6c8ee01f1f8b62e987b3d18f6f28b22a0ada755f"},{itemType:"0",token:"0x0000000000000000000000000000000000000000",identifierOrCriteria:"0",startAmount:"2475000000000000000",endAmount:"2475000000000000000",recipient:"0x0000a26b00c1F0DF003000390027140000fAa719"},{itemType:"0",token:"0x0000000000000000000000000000000000000000",identifierOrCriteria:"0",startAmount:"2475000000000000000",endAmount:"2475000000000000000",recipient:"0xA858DDc0445d8131daC4d1DE01f834ffcbA52Ef1"}],startTime:"1664436437",endTime:"1667028437",orderType:"2",zone:"0x004C00500000aD104D7DBd00e3ae0A5C00560C00",zoneHash:"0x0000000000000000000000000000000000000000000000000000000000000000",salt:"24446860302761739304752683030156737591518664810215442929818054330004503495628",conduitKey:"0x0000007b02230091a7ed01230072f7006a004d60a8d4e71d599b8104250f0000",totalOriginalConsiderationItems:"3",counter:"53"}};try{o(!0);const t=await n.request({method:"eth_signTypedData_v4",params:[e,JSON.stringify(r)]});R.log(t),(0,g.t)()}catch(i){R.log(i),(0,g.i)()}finally{o(!1)}},loading:r,children:"0 \u5143\u8d2d"})]})})})};var T=n(54342);const k=function(){const{account:e,chainId:t,provider:n}=(0,s.useContext)(p),[r,o]=(0,s.useState)(!1),[a,l]=(0,s.useState)(!1),d=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Example `personal_sign` message";return async()=>{try{l(!0);const r=await n.request({method:"personal_sign",params:[t,e,"Example password"]});T.log(r),(0,g.t)()}catch(r){T.log(r),(0,g.i)()}finally{l(!1)}}},[u,h]=(0,s.useState)(!1),b=[{type:"string",name:"Name",value:"Luo Quan Quan"},{type:"uint32",name:"age",value:"18"},{type:"string",name:"Hobby",value:"sing dance rap basketball"}],[y,v]=(0,s.useState)(!1);return(0,O.jsx)(i.Zp,{title:"signMessage",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsxs)(f.A,{gutter:16,children:[(0,O.jsx)(c.A,{xs:24,lg:8,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"Eth Sign",children:(0,O.jsx)(i.$x,{direction:"vertical",style:{width:"100%"},children:(0,O.jsx)(i.$n,{loading:r,disabled:!e,block:!0,onClick:async()=>{try{o(!0);const t="0x879a053d4800c6354e76c7985a865d2922c82fb5b3f4577b2fe08b998954f2e0",r=await n.request({method:"eth_sign",params:[e,t]});T.log(r),(0,g.t)()}catch(t){T.log(t),(0,g.i)()}finally{o(!1)}},children:"eth_sign"})})})}),(0,O.jsx)(c.A,{xs:24,lg:8,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"Personal Sign",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,disabled:!e,onClick:d(),loading:a,children:"personal_sign"}),(0,O.jsx)(i.$n,{block:!0,disabled:!e,onClick:d("0x010000000f1088000000000055f7428300000001fe0065d1d2ad2105ff003cff5c3c80db8b05601f46c35b79f5c6ff3ef6f703fc"),loading:a,children:"personal_sign_with_Garbled"}),(0,O.jsx)(i.$n,{block:!0,disabled:!e,onClick:d("\u6211\u53eb\u7f57\u5708\u5708"),loading:a,children:"personal_sign_with_Chinese_char"})]})})}),(0,O.jsx)(c.A,{xs:24,lg:8,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"Sign Typed Data",children:(0,O.jsx)(i.$x,{direction:"vertical",style:{width:"100%"},children:(0,O.jsx)(i.$n,{block:!0,disabled:!e,loading:u,onClick:async()=>{try{h(!0);const t=await n.request({method:"eth_signTypedData",params:[b,e]});T.log(t),(0,g.t)()}catch(t){T.log(t),(0,g.i)()}finally{h(!1)}},children:"eth_signTypedData_v1"})})})})]}),(0,O.jsxs)(f.A,{gutter:8,children:[(0,O.jsx)(c.A,{xs:24,lg:6,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"Sign Typed Data V3",children:(0,O.jsx)(i.$x,{direction:"vertical",style:{width:"100%"},children:(0,O.jsx)(i.$n,{block:!0,disabled:!e,onClick:async()=>{const r={types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Person:[{name:"name",type:"string"},{name:"wallet",type:"address"}],Mail:[{name:"from",type:"Person"},{name:"to",type:"Person"},{name:"contents",type:"string"}]},primaryType:"Mail",domain:{name:"Ether Mail",version:"1",chainId:t,verifyingContract:"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},message:{from:{name:"Cow",test:"0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826"},to:{name:"Bob",wallet:"0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB"},contents:"Hello, Bob!"}};try{v(!1);const t=await n.request({method:"eth_signTypedData_v3",params:[e,JSON.stringify(r)]});T.log(t),(0,g.t)()}catch(o){T.log(o),(0,g.i)()}finally{v(!1)}},loading:y,children:"eth_signTypedData_v3"})})})}),(0,O.jsx)(N,{account:e}),(0,O.jsx)(x,{chainId:t})]})]})})};function D(){const{chainId:e}=(0,s.useContext)(p);return(0,O.jsxs)(i.Zp,{title:"Network",children:["ChainId:",e]})}var P=n(10760);function A(e){let{loading:t,handleConnect:n,account:r,children:o,handleDisConnect:a=()=>P.Ay.error("not supported ~")}=e;return(0,O.jsx)(i.Zp,{title:"Connect status",children:(0,O.jsxs)(i.$x,{wrap:!0,children:[(0,O.jsx)(i.$n,{color:"primary",loading:t,disabled:!!r,onClick:n,children:"Connect Wallet"}),o,(0,O.jsx)(i.$n,{color:"danger",loading:t,disabled:!r,onClick:a,children:"Disconnect"})]})})}var I=n(54342);const K={4e3:"\u540c\u4e00\u4e2a DApp \u5df2\u7ecf\u53d1\u8d77\u4e86\u8fde\u63a5\u7f51\u7ad9\u8bf7\u6c42",4001:"\u7528\u6237\u62d2\u7edd\u8fde\u63a5"};function M(e){let{account:t,children:n}=e;return(0,O.jsx)(i.Zp,{title:"Current connected account",children:(0,O.jsxs)(i.$x,{direction:"vertical",children:[t||"--",n]})})}var j=n(14141),U=n(29559),L=n(51533);const W=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"numberOfTokens",type:"uint256"}],name:"mintNFTs",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],B=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mintBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newuri",type:"string"}],name:"setURI",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenid",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],X=[{chain:"Polygon",chainId:"0x89",address:"0xbfc5224DF96f01ad37D874E5a477aAFb92a5E970"}];const $=function(){const{account:e,provider:t,chainId:n}=(0,s.useContext)(p),r=v(n),o=C(n),[a,l]=(0,s.useState)({}),[d,u]=(0,s.useState)(!1),h=(0,s.useRef)();(0,s.useEffect)((()=>{(async()=>{const n=new URLSearchParams(window.location.search).get("nftAddress");if(e&&n){var r;null===(r=h.current)||void 0===r||r.scrollIntoView({behavior:"smooth"});const e=X.find((e=>{let{address:t}=e;return t===n}));e&&await t.request({method:"wallet_switchEthereumChain",params:[{chainId:e.chainId}]});const o=new j.NZ(n,W,new U.j(t,"any").getSigner());l(o)}})()}),[e,t]);const[g,m]=(0,s.useState)(!1),[w,E]=(0,s.useState)("1"),[_,x]=(0,s.useState)(!1),[S,R]=(0,s.useState)("3"),N=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return async()=>{try{x(!0);const n=await a.approve(t,S,{from:e});await n.wait(),P.Ay.success("\u6388\u6743\u6210\u529f")}catch(n){P.Ay.error("\u6388\u6743\u5931\u8d25")}finally{x(!1)}}},[T,k]=(0,s.useState)(!1),D=function(){let{spender:e=b,isApprove:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async()=>{try{k(!0);const n=await a.setApprovalForAll(e,t);await n.wait(),P.Ay.success("\u6388\u6743\u6210\u529f")}catch(n){P.Ay.error("\u6388\u6743\u5931\u8d25")}finally{k(!1)}}},[A,I]=(0,s.useState)("3"),[K,M]=(0,s.useState)(!1),[B,$]=(0,s.useState)(!1),H=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return async()=>{try{$(!0);const n=await a.transferFrom(e,t,A||"1",{from:e});await n.wait(),P.Ay.success("\u8f6c\u79fb\u6210\u529f")}catch(n){P.Ay.error("\u8f6c\u79fb\u5931\u8d25")}finally{$(!1)}}},q=a.address&&e;return(0,O.jsx)("div",{ref:h,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"ERC721",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(L.A,{type:"info",message:"\u5408\u96c6\u5730\u5740",description:a.address}),(0,O.jsx)(i.$n,{block:!0,loading:d,onClick:async()=>{try{u(!0);const e=new j.PM(W,"0x60806040523480156200001157600080fd5b506040518060400160405280600c81526020017f54657374446170704e46547300000000000000000000000000000000000000008152506040518060400160405280600381526020017f54444e000000000000000000000000000000000000000000000000000000000081525081600090816200008f919062000324565b508060019081620000a1919062000324565b5050506200040b565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200012c57607f821691505b602082108103620001425762000141620000e4565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620001ac7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826200016d565b620001b886836200016d565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b600062000205620001ff620001f984620001d0565b620001da565b620001d0565b9050919050565b6000819050919050565b6200022183620001e4565b6200023962000230826200020c565b8484546200017a565b825550505050565b600090565b6200025062000241565b6200025d81848462000216565b505050565b5b8181101562000285576200027960008262000246565b60018101905062000263565b5050565b601f821115620002d4576200029e8162000148565b620002a9846200015d565b81016020851015620002b9578190505b620002d1620002c8856200015d565b83018262000262565b50505b505050565b600082821c905092915050565b6000620002f960001984600802620002d9565b1980831691505092915050565b6000620003148383620002e6565b9150826002028217905092915050565b6200032f82620000aa565b67ffffffffffffffff8111156200034b576200034a620000b5565b5b62000357825462000113565b6200036482828562000289565b600060209050601f8311600181146200039c576000841562000387578287015190505b62000393858262000306565b86555062000403565b601f198416620003ac8662000148565b60005b82811015620003d657848901518255600182019150602085019450602081019050620003af565b86831015620003f65784890151620003f2601f891682620002e6565b8355505b6001600288020188555050505b505050505050565b612be6806200041b6000396000f3fe608060405234801561001057600080fd5b50600436106100f45760003560e01c806342842e0e11610097578063a22cb46511610066578063a22cb46514610283578063b88d4fde1461029f578063c87b56dd146102bb578063e985e9c5146102eb576100f4565b806342842e0e146101e95780636352211e1461020557806370a082311461023557806395d89b4114610265576100f4565b8063081812fc116100d3578063081812fc14610165578063095ea7b31461019557806323b872dd146101b15780633b4b1381146101cd576100f4565b80629a9b7b146100f957806301ffc9a71461011757806306fdde0314610147575b600080fd5b61010161031b565b60405161010e91906119ac565b60405180910390f35b610131600480360381019061012c9190611a33565b61032c565b60405161013e9190611a7b565b60405180910390f35b61014f61040e565b60405161015c9190611b26565b60405180910390f35b61017f600480360381019061017a9190611b74565b6104a0565b60405161018c9190611be2565b60405180910390f35b6101af60048036038101906101aa9190611c29565b6104e6565b005b6101cb60048036038101906101c69190611c69565b6105fd565b005b6101e760048036038101906101e29190611b74565b61065d565b005b61020360048036038101906101fe9190611c69565b6106ac565b005b61021f600480360381019061021a9190611b74565b6106cc565b60405161022c9190611be2565b60405180910390f35b61024f600480360381019061024a9190611cbc565b610752565b60405161025c91906119ac565b60405180910390f35b61026d610809565b60405161027a9190611b26565b60405180910390f35b61029d60048036038101906102989190611d15565b61089b565b005b6102b960048036038101906102b49190611e8a565b6108b1565b005b6102d560048036038101906102d09190611b74565b610913565b6040516102e29190611b26565b60405180910390f35b61030560048036038101906103009190611f0d565b6109ac565b6040516103129190611a7b565b60405180910390f35b60006103276006610a40565b905090565b60007f80ac58cd000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614806103f757507f5b5e139f000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b80610407575061040682610a4e565b5b9050919050565b60606000805461041d90611f7c565b80601f016020809104026020016040519081016040528092919081815260200182805461044990611f7c565b80156104965780601f1061046b57610100808354040283529160200191610496565b820191906000526020600020905b81548152906001019060200180831161047957829003601f168201915b5050505050905090565b60006104ab82610ab8565b6004600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b60006104f1826106cc565b90508073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610561576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105589061201f565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff16610580610b03565b73ffffffffffffffffffffffffffffffffffffffff1614806105af57506105ae816105a9610b03565b6109ac565b5b6105ee576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e5906120b1565b60405180910390fd5b6105f88383610b0b565b505050565b61060e610608610b03565b82610bc4565b61064d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161064490612143565b60405180910390fd5b610658838383610c59565b505050565b6000600190505b8181116106a8576106756006610f52565b60006106816006610a40565b905061069461068e610b03565b82610f68565b5080806106a090612192565b915050610664565b5050565b6106c7838383604051806020016040528060008152506108b1565b505050565b6000806106d883610f86565b9050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603610749576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161074090612226565b60405180910390fd5b80915050919050565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036107c2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107b9906122b8565b60405180910390fd5b600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b60606001805461081890611f7c565b80601f016020809104026020016040519081016040528092919081815260200182805461084490611f7c565b80156108915780601f1061086657610100808354040283529160200191610891565b820191906000526020600020905b81548152906001019060200180831161087457829003601f168201915b5050505050905090565b6108ad6108a6610b03565b8383610fc3565b5050565b6108c26108bc610b03565b83610bc4565b610901576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108f890612143565b60405180910390fd5b61090d8484848461112f565b50505050565b6060600060405180610160016040528061013c8152602001612a7561013c9139905060006109408461118b565b61094983611259565b6109528661118b565b604051602001610964939291906124b6565b6040516020818303038152906040529050600061098082611259565b604051602001610990919061255f565b6040516020818303038152906040529050809350505050919050565b6000600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b600081600001549050919050565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b610ac1816113d1565b610b00576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610af790612226565b60405180910390fd5b50565b600033905090565b816004600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff16610b7e836106cc565b73ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45050565b600080610bd0836106cc565b90508073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161480610c125750610c1181856109ac565b5b80610c5057508373ffffffffffffffffffffffffffffffffffffffff16610c38846104a0565b73ffffffffffffffffffffffffffffffffffffffff16145b91505092915050565b8273ffffffffffffffffffffffffffffffffffffffff16610c79826106cc565b73ffffffffffffffffffffffffffffffffffffffff1614610ccf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cc6906125f3565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610d3e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3590612685565b60405180910390fd5b610d4b8383836001611412565b8273ffffffffffffffffffffffffffffffffffffffff16610d6b826106cc565b73ffffffffffffffffffffffffffffffffffffffff1614610dc1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610db8906125f3565b60405180910390fd5b6004600082815260200190815260200160002060006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690556001600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055506001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4610f4d8383836001611418565b505050565b6001816000016000828254019250508190555050565b610f8282826040518060200160405280600081525061141e565b5050565b60006002600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603611031576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611028906126f1565b60405180910390fd5b80600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31836040516111229190611a7b565b60405180910390a3505050565b61113a848484610c59565b61114684848484611479565b611185576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161117c90612783565b60405180910390fd5b50505050565b60606000600161119a84611600565b01905060008167ffffffffffffffff8111156111b9576111b8611d5f565b5b6040519080825280601f01601f1916602001820160405280156111eb5781602001600182028036833780820191505090505b509050600082602001820190505b60011561124e578080600190039150507f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a8581611242576112416127a3565b5b049450600085036111f9575b819350505050919050565b6060600082510361127b576040518060200160405280600081525090506113cc565b6000604051806060016040528060408152602001612a3560409139905060006003600285516112aa91906127d2565b6112b49190612806565b60046112c09190612837565b905060006020826112d191906127d2565b67ffffffffffffffff8111156112ea576112e9611d5f565b5b6040519080825280601f01601f19166020018201604052801561131c5781602001600182028036833780820191505090505b509050818152600183018586518101602084015b8183101561138b576003830192508251603f8160121c168501518253600182019150603f81600c1c168501518253600182019150603f8160061c168501518253600182019150603f8116850151825360018201915050611330565b6003895106600181146113a557600281146113b5576113c0565b613d3d60f01b60028303526113c0565b603d60f81b60018303525b50505050508093505050505b919050565b60008073ffffffffffffffffffffffffffffffffffffffff166113f383610f86565b73ffffffffffffffffffffffffffffffffffffffff1614159050919050565b50505050565b50505050565b6114288383611753565b6114356000848484611479565b611474576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161146b90612783565b60405180910390fd5b505050565b600061149a8473ffffffffffffffffffffffffffffffffffffffff16611970565b156115f3578373ffffffffffffffffffffffffffffffffffffffff1663150b7a026114c3610b03565b8786866040518563ffffffff1660e01b81526004016114e594939291906128ce565b6020604051808303816000875af192505050801561152157506040513d601f19601f8201168201806040525081019061151e919061292f565b60015b6115a3573d8060008114611551576040519150601f19603f3d011682016040523d82523d6000602084013e611556565b606091505b50600081510361159b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161159290612783565b60405180910390fd5b805181602001fd5b63150b7a0260e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149150506115f8565b600190505b949350505050565b600080600090507a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000831061165e577a184f03e93ff9f4daa797ed6e38ed64bf6a1f0100000000000000008381611654576116536127a3565b5b0492506040810190505b6d04ee2d6d415b85acef8100000000831061169b576d04ee2d6d415b85acef81000000008381611691576116906127a3565b5b0492506020810190505b662386f26fc1000083106116ca57662386f26fc1000083816116c0576116bf6127a3565b5b0492506010810190505b6305f5e10083106116f3576305f5e10083816116e9576116e86127a3565b5b0492506008810190505b612710831061171857612710838161170e5761170d6127a3565b5b0492506004810190505b6064831061173b5760648381611731576117306127a3565b5b0492506002810190505b600a831061174a576001810190505b80915050919050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036117c2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117b9906129a8565b60405180910390fd5b6117cb816113d1565b1561180b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161180290612a14565b60405180910390fd5b611819600083836001611412565b611822816113d1565b15611862576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161185990612a14565b60405180910390fd5b6001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a461196c600083836001611418565b5050565b6000808273ffffffffffffffffffffffffffffffffffffffff163b119050919050565b6000819050919050565b6119a681611993565b82525050565b60006020820190506119c1600083018461199d565b92915050565b6000604051905090565b600080fd5b600080fd5b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b611a10816119db565b8114611a1b57600080fd5b50565b600081359050611a2d81611a07565b92915050565b600060208284031215611a4957611a486119d1565b5b6000611a5784828501611a1e565b91505092915050565b60008115159050919050565b611a7581611a60565b82525050565b6000602082019050611a906000830184611a6c565b92915050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611ad0578082015181840152602081019050611ab5565b60008484015250505050565b6000601f19601f8301169050919050565b6000611af882611a96565b611b028185611aa1565b9350611b12818560208601611ab2565b611b1b81611adc565b840191505092915050565b60006020820190508181036000830152611b408184611aed565b905092915050565b611b5181611993565b8114611b5c57600080fd5b50565b600081359050611b6e81611b48565b92915050565b600060208284031215611b8a57611b896119d1565b5b6000611b9884828501611b5f565b91505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611bcc82611ba1565b9050919050565b611bdc81611bc1565b82525050565b6000602082019050611bf76000830184611bd3565b92915050565b611c0681611bc1565b8114611c1157600080fd5b50565b600081359050611c2381611bfd565b92915050565b60008060408385031215611c4057611c3f6119d1565b5b6000611c4e85828601611c14565b9250506020611c5f85828601611b5f565b9150509250929050565b600080600060608486031215611c8257611c816119d1565b5b6000611c9086828701611c14565b9350506020611ca186828701611c14565b9250506040611cb286828701611b5f565b9150509250925092565b600060208284031215611cd257611cd16119d1565b5b6000611ce084828501611c14565b91505092915050565b611cf281611a60565b8114611cfd57600080fd5b50565b600081359050611d0f81611ce9565b92915050565b60008060408385031215611d2c57611d2b6119d1565b5b6000611d3a85828601611c14565b9250506020611d4b85828601611d00565b9150509250929050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611d9782611adc565b810181811067ffffffffffffffff82111715611db657611db5611d5f565b5b80604052505050565b6000611dc96119c7565b9050611dd58282611d8e565b919050565b600067ffffffffffffffff821115611df557611df4611d5f565b5b611dfe82611adc565b9050602081019050919050565b82818337600083830152505050565b6000611e2d611e2884611dda565b611dbf565b905082815260208101848484011115611e4957611e48611d5a565b5b611e54848285611e0b565b509392505050565b600082601f830112611e7157611e70611d55565b5b8135611e81848260208601611e1a565b91505092915050565b60008060008060808587031215611ea457611ea36119d1565b5b6000611eb287828801611c14565b9450506020611ec387828801611c14565b9350506040611ed487828801611b5f565b925050606085013567ffffffffffffffff811115611ef557611ef46119d6565b5b611f0187828801611e5c565b91505092959194509250565b60008060408385031215611f2457611f236119d1565b5b6000611f3285828601611c14565b9250506020611f4385828601611c14565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680611f9457607f821691505b602082108103611fa757611fa6611f4d565b5b50919050565b7f4552433732313a20617070726f76616c20746f2063757272656e74206f776e6560008201527f7200000000000000000000000000000000000000000000000000000000000000602082015250565b6000612009602183611aa1565b915061201482611fad565b604082019050919050565b6000602082019050818103600083015261203881611ffc565b9050919050565b7f4552433732313a20617070726f76652063616c6c6572206973206e6f7420746f60008201527f6b656e206f776e6572206f7220617070726f76656420666f7220616c6c000000602082015250565b600061209b603d83611aa1565b91506120a68261203f565b604082019050919050565b600060208201905081810360008301526120ca8161208e565b9050919050565b7f4552433732313a2063616c6c6572206973206e6f7420746f6b656e206f776e6560008201527f72206f7220617070726f76656400000000000000000000000000000000000000602082015250565b600061212d602d83611aa1565b9150612138826120d1565b604082019050919050565b6000602082019050818103600083015261215c81612120565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061219d82611993565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036121cf576121ce612163565b5b600182019050919050565b7f4552433732313a20696e76616c696420746f6b656e2049440000000000000000600082015250565b6000612210601883611aa1565b915061221b826121da565b602082019050919050565b6000602082019050818103600083015261223f81612203565b9050919050565b7f4552433732313a2061646472657373207a65726f206973206e6f74206120766160008201527f6c6964206f776e65720000000000000000000000000000000000000000000000602082015250565b60006122a2602983611aa1565b91506122ad82612246565b604082019050919050565b600060208201905081810360008301526122d181612295565b9050919050565b600081905092915050565b7f7b226e616d65223a2022546573742044617070204e4654732023000000000000600082015250565b6000612319601a836122d8565b9150612324826122e3565b601a82019050919050565b600061233a82611a96565b61234481856122d8565b9350612354818560208601611ab2565b80840191505092915050565b7f222c20226465736372697074696f6e223a2022546573742044617070204e465460008201527f7320666f722074657374696e672e222c2022696d616765223a2022646174613a60208201527f696d6167652f7376672b786d6c3b6261736536342c0000000000000000000000604082015250565b60006123e26055836122d8565b91506123ed82612360565b605582019050919050565b7f222c202261747472696275746573223a205b7b2274726169745f74797065223a60008201527f2022546f6b656e204964222c202276616c7565223a2022000000000000000000602082015250565b60006124546037836122d8565b915061245f826123f8565b603782019050919050565b7f227d5d7d00000000000000000000000000000000000000000000000000000000600082015250565b60006124a06004836122d8565b91506124ab8261246a565b600482019050919050565b60006124c18261230c565b91506124cd828661232f565b91506124d8826123d5565b91506124e4828561232f565b91506124ef82612447565b91506124fb828461232f565b915061250682612493565b9150819050949350505050565b7f646174613a6170706c69636174696f6e2f6a736f6e3b6261736536342c000000600082015250565b6000612549601d836122d8565b915061255482612513565b601d82019050919050565b600061256a8261253c565b9150612576828461232f565b915081905092915050565b7f4552433732313a207472616e736665722066726f6d20696e636f72726563742060008201527f6f776e6572000000000000000000000000000000000000000000000000000000602082015250565b60006125dd602583611aa1565b91506125e882612581565b604082019050919050565b6000602082019050818103600083015261260c816125d0565b9050919050565b7f4552433732313a207472616e7366657220746f20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b600061266f602483611aa1565b915061267a82612613565b604082019050919050565b6000602082019050818103600083015261269e81612662565b9050919050565b7f4552433732313a20617070726f766520746f2063616c6c657200000000000000600082015250565b60006126db601983611aa1565b91506126e6826126a5565b602082019050919050565b6000602082019050818103600083015261270a816126ce565b9050919050565b7f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560008201527f63656976657220696d706c656d656e7465720000000000000000000000000000602082015250565b600061276d603283611aa1565b915061277882612711565b604082019050919050565b6000602082019050818103600083015261279c81612760565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b60006127dd82611993565b91506127e883611993565b9250828201905080821115612800576127ff612163565b5b92915050565b600061281182611993565b915061281c83611993565b92508261282c5761282b6127a3565b5b828204905092915050565b600061284282611993565b915061284d83611993565b925082820261285b81611993565b9150828204841483151761287257612871612163565b5b5092915050565b600081519050919050565b600082825260208201905092915050565b60006128a082612879565b6128aa8185612884565b93506128ba818560208601611ab2565b6128c381611adc565b840191505092915050565b60006080820190506128e36000830187611bd3565b6128f06020830186611bd3565b6128fd604083018561199d565b818103606083015261290f8184612895565b905095945050505050565b60008151905061292981611a07565b92915050565b600060208284031215612945576129446119d1565b5b60006129538482850161291a565b91505092915050565b7f4552433732313a206d696e7420746f20746865207a65726f2061646472657373600082015250565b6000612992602083611aa1565b915061299d8261295c565b602082019050919050565b600060208201905081810360008301526129c181612985565b9050919050565b7f4552433732313a20746f6b656e20616c7265616479206d696e74656400000000600082015250565b60006129fe601c83611aa1565b9150612a09826129c8565b602082019050919050565b60006020820190508181036000830152612a2d816129f1565b905091905056fe4142434445464748494a4b4c4d4e4f505152535455565758595a6162636465666768696a6b6c6d6e6f707172737475767778797a303132333435363738392b2f3c737667206865696768743d22333530222077696474683d22333530222076696577426f783d2230203020313030203130302220786d6c6e733d22687474703a2f2f7777772e77332e6f72672f323030302f737667223e3c646566733e3c706174682069643d224d7950617468222066696c6c3d226e6f6e6522207374726f6b653d227265642220643d224d31302c3930205139302c39302039302c3435205139302c31302035302c3130205131302c31302031302c3430205131302c37302034352c3730205137302c37302037352c353022202f3e3c2f646566733e3c746578743e3c746578745061746820687265663d22234d7950617468223e517569636b2062726f776e20666f78206a756d7073206f76657220746865206c617a7920646f672e3c2f74657874506174683e3c2f746578743e3c2f7376673ea2646970667358221220922487cf7bfec55ad9cf0c646397333bb79204b1a8ef63134f78b23d697570ef64736f6c63430008120033",new U.j(t,"any").getSigner()),n=await e.deploy();await n.deployTransaction.wait(),l(n),P.Ay.success("\u521b\u5efa\u6210\u529f")}catch(e){P.Ay.error("\u521b\u5efa\u5931\u8d25")}finally{u(!1)}},disabled:a.address||!e,children:"Deploy"}),(0,O.jsx)(i.pd,{value:w,disabled:!q,placeholder:"\u8bf7\u8f93\u5165 mint \u6570\u91cf",onChange:E}),(0,O.jsx)(i.$n,{block:!0,loading:g,onClick:async()=>{try{m(!0);const t=await a.mintNFTs(w||"1",{from:e});await t.wait(),P.Ay.success("mint \u6210\u529f")}catch(t){P.Ay.error("mint \u5931\u8d25")}finally{m(!1)}},disabled:!q||!w,children:"Mint"}),(0,O.jsx)(i.pd,{placeholder:"\u8bf7\u8f93\u5165\u6388\u6743 nft id",value:S,onChange:R}),(0,O.jsx)(i.$n,{block:!0,loading:_,onClick:N(),disabled:!q||!S,children:"approve"}),!!r&&(0,O.jsx)(i.$n,{block:!0,color:"danger",loading:_,onClick:N(r),disabled:!q||!S,children:"approve Black Address"}),!!o&&(0,O.jsx)(i.$n,{block:!0,color:"danger",loading:_,onClick:N(o),disabled:!q||!S,children:"approve Strong Black Address"}),(0,O.jsx)(i.$n,{block:!0,color:"warning",loading:_,onClick:N(y),disabled:!q||!S,children:"approve to EOA"}),(0,O.jsx)(i.$n,{block:!0,loading:T,onClick:D(),disabled:!q,children:"setApprovalForAll"}),!!r&&(0,O.jsx)(i.$n,{block:!0,color:"danger",loading:T,onClick:D({spender:r}),disabled:!q,children:"setApprovalForAll Black Address"}),!!r&&(0,O.jsx)(i.$n,{block:!0,color:"danger",loading:T,onClick:D({spender:o}),disabled:!q,children:"setApprovalForAll Strong Black Address"}),(0,O.jsx)(i.$n,{block:!0,color:"warning",loading:T,onClick:D({spender:y}),disabled:!q,children:"setApprovalForAll to EOA"}),(0,O.jsx)(i.$n,{block:!0,onClick:D({isApprove:!1}),loading:T,disabled:!q,children:"revoke"}),(0,O.jsx)(i.pd,{value:A,placeholder:"\u8bf7\u8bbe\u7f6e\u8f6c\u79fb\u6570\u91cf",onChange:e=>{let{target:{value:t}}=e;I(t)}}),(0,O.jsx)(i.$n,{block:!0,onClick:async()=>{try{M(!0);const t=await a.transferFrom(e,b,A||"1",{from:e});await t.wait(),P.Ay.success("\u8f6c\u79fb\u6210\u529f")}catch(t){P.Ay.error("\u8f6c\u79fb\u5931\u8d25")}finally{M(!1)}},loading:K,disabled:!q,children:"\u8f6c\u79fb NFT"}),!!r&&(0,O.jsx)(i.$n,{block:!0,color:"danger",onClick:H(),loading:B,disabled:!q,children:"Transfer NFT to Black Address"}),!!o&&(0,O.jsx)(i.$n,{block:!0,color:"danger",onClick:H(o),loading:B,disabled:!q,children:"Transfer NFT to Strong Black Address"}),(0,O.jsx)(L.A,{type:"info",message:"\u6d4b\u8bd5 NFT",description:(0,O.jsx)(f.A,{gutter:12,children:X.map((e=>(0,O.jsx)(c.A,{children:(0,O.jsx)("a",{href:`/dapp-demo/?nftAddress=${e.address}`,children:e.chain})},e.address)))})})]})})})};var H=n(21220),q=n(46296);const F=[{chain:"Polygon",chainId:"0x89",address:"0x2bf22a1143f406C2DEb7ECEBfEd26755d1124683"}];const J=function(){const{account:e,provider:t,chainId:n}=(0,s.useContext)(p),r=v(n),o=C(n),[a,l]=(0,s.useState)({}),d=(0,s.useRef)(),[u,h]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(async()=>{const n=new URLSearchParams(window.location.search).get("erc1155Address");if(e&&n){var r;null===(r=d.current)||void 0===r||r.scrollIntoView({behavior:"smooth"});const e=F.find((e=>{let{address:t}=e;return t===n}));e&&await t.request({method:"wallet_switchEthereumChain",params:[{chainId:e.chainId}]});const o=new j.NZ(n,B,new U.j(t,"any").getSigner());l(o)}})()}),[e,t]);const[g,m]=(0,s.useState)(!1),[w,E]=(0,s.useState)("1, 2, 3"),[_,x]=(0,s.useState)("1, 5, 7"),[S,R]=(0,s.useState)(!1),N=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return async()=>{try{R(!0),await a.safeBatchTransferFrom(e,t,w.split(",").map(Number),_.split(",").map(Number),"0x")}catch(n){P.Ay.error(n.message)}finally{R(!1)}}},[T,k]=(0,s.useState)(!1),D=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;return async()=>{try{k(!0);const r=await a.setApprovalForAll(n,t,{from:e});await r.wait()}catch(r){P.Ay.error(r.message)}finally{k(!1)}}};return(0,O.jsx)("div",{ref:d,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"ERC1155",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(L.A,{type:"info",message:"\u5408\u96c6\u5730\u5740",description:a.address}),(0,O.jsx)(i.$n,{block:!0,loading:u,onClick:async()=>{try{h(!0);const e=new j.PM(B,"0x60806040523480156200001157600080fd5b5060405180608001604052806043815260200162003893604391396200003d816200006460201b60201c565b506200005e620000526200007960201b60201c565b6200008160201b60201c565b620004a8565b8060029081620000759190620003c1565b5050565b600033905090565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680620001c957607f821691505b602082108103620001df57620001de62000181565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620002497fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826200020a565b6200025586836200020a565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b6000620002a26200029c62000296846200026d565b62000277565b6200026d565b9050919050565b6000819050919050565b620002be8362000281565b620002d6620002cd82620002a9565b84845462000217565b825550505050565b600090565b620002ed620002de565b620002fa818484620002b3565b505050565b5b81811015620003225762000316600082620002e3565b60018101905062000300565b5050565b601f82111562000371576200033b81620001e5565b6200034684620001fa565b8101602085101562000356578190505b6200036e6200036585620001fa565b830182620002ff565b50505b505050565b600082821c905092915050565b6000620003966000198460080262000376565b1980831691505092915050565b6000620003b1838362000383565b9150826002028217905092915050565b620003cc8262000147565b67ffffffffffffffff811115620003e857620003e762000152565b5b620003f48254620001b0565b6200040182828562000326565b600060209050601f83116001811462000439576000841562000424578287015190505b620004308582620003a3565b865550620004a0565b601f1984166200044986620001e5565b60005b8281101562000473578489015182556001820191506020850194506020810190506200044c565b868310156200049357848901516200048f601f89168262000383565b8355505b6001600288020188555050505b505050505050565b6133db80620004b86000396000f3fe608060405234801561001057600080fd5b50600436106100e95760003560e01c80634e1273f41161008c578063a22cb46511610066578063a22cb46514610248578063e985e9c514610264578063f242432a14610294578063f2fde38b146102b0576100e9565b80634e1273f4146101f0578063715018a6146102205780638da5cb5b1461022a576100e9565b806306fdde03116100c857806306fdde031461016a5780630e89341c146101885780631f7fdffa146101b85780632eb2c2d6146101d4576100e9565b8062fdd58e146100ee57806301ffc9a71461011e57806302fe53051461014e575b600080fd5b61010860048036038101906101039190611bb3565b6102cc565b6040516101159190611c02565b60405180910390f35b61013860048036038101906101339190611c75565b610394565b6040516101459190611cbd565b60405180910390f35b61016860048036038101906101639190611e1e565b610476565b005b61017261048a565b60405161017f9190611ee6565b60405180910390f35b6101a2600480360381019061019d9190611f08565b6104c3565b6040516101af9190611ee6565b60405180910390f35b6101d260048036038101906101cd919061209e565b6104fe565b005b6101ee60048036038101906101e99190612159565b610518565b005b61020a600480360381019061020591906122eb565b6105b9565b6040516102179190612421565b60405180910390f35b6102286106d2565b005b6102326106e6565b60405161023f9190612452565b60405180910390f35b610262600480360381019061025d9190612499565b610710565b005b61027e600480360381019061027991906124d9565b610726565b60405161028b9190611cbd565b60405180910390f35b6102ae60048036038101906102a99190612519565b6107ba565b005b6102ca60048036038101906102c591906125b0565b61085b565b005b60008073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361033c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103339061264f565b60405180910390fd5b60008083815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b60007fd9b67a26000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061045f57507f0e89341c000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b8061046f575061046e826108de565b5b9050919050565b61047e610948565b610487816109c6565b50565b6040518060400160405280600781526020017f455243313135350000000000000000000000000000000000000000000000000081525081565b60606104ce826109d9565b6104d783610a6d565b6040516020016104e89291906126f7565b6040516020818303038152906040529050919050565b610506610948565b61051284848484610b3b565b50505050565b610520610d67565b73ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff161480610566575061056585610560610d67565b610726565b5b6105a5576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161059c90612798565b60405180910390fd5b6105b28585858585610d6f565b5050505050565b606081518351146105ff576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105f69061282a565b60405180910390fd5b6000835167ffffffffffffffff81111561061c5761061b611cf3565b5b60405190808252806020026020018201604052801561064a5781602001602082028036833780820191505090505b50905060005b84518110156106c75761069785828151811061066f5761066e61284a565b5b602002602001015185838151811061068a5761068961284a565b5b60200260200101516102cc565b8282815181106106aa576106a961284a565b5b602002602001018181525050806106c0906128a8565b9050610650565b508091505092915050565b6106da610948565b6106e46000611090565b565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b61072261071b610d67565b8383611156565b5050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b6107c2610d67565b73ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff161480610808575061080785610802610d67565b610726565b5b610847576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161083e90612798565b60405180910390fd5b61085485858585856112c2565b5050505050565b610863610948565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036108d2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108c990612962565b60405180910390fd5b6108db81611090565b50565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b610950610d67565b73ffffffffffffffffffffffffffffffffffffffff1661096e6106e6565b73ffffffffffffffffffffffffffffffffffffffff16146109c4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109bb906129ce565b60405180910390fd5b565b80600290816109d59190612bfa565b5050565b6060600280546109e890612a1d565b80601f0160208091040260200160405190810160405280929190818152602001828054610a1490612a1d565b8015610a615780601f10610a3657610100808354040283529160200191610a61565b820191906000526020600020905b815481529060010190602001808311610a4457829003601f168201915b50505050509050919050565b606060006001610a7c8461155d565b01905060008167ffffffffffffffff811115610a9b57610a9a611cf3565b5b6040519080825280601f01601f191660200182016040528015610acd5781602001600182028036833780820191505090505b509050600082602001820190505b600115610b30578080600190039150507f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a8581610b2457610b23612ccc565b5b04945060008503610adb575b819350505050919050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610baa576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ba190612d6d565b60405180910390fd5b8151835114610bee576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610be590612dff565b60405180910390fd5b6000610bf8610d67565b9050610c09816000878787876116b0565b60005b8451811015610cc257838181518110610c2857610c2761284a565b5b6020026020010151600080878481518110610c4657610c4561284a565b5b6020026020010151815260200190815260200160002060008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254610ca89190612e1f565b925050819055508080610cba906128a8565b915050610c0c565b508473ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb8787604051610d3a929190612e53565b60405180910390a4610d51816000878787876116b8565b610d60816000878787876116c0565b5050505050565b600033905090565b8151835114610db3576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610daa90612dff565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610e22576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e1990612efc565b60405180910390fd5b6000610e2c610d67565b9050610e3c8187878787876116b0565b60005b8451811015610fed576000858281518110610e5d57610e5c61284a565b5b602002602001015190506000858381518110610e7c57610e7b61284a565b5b60200260200101519050600080600084815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610f1d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f1490612f8e565b60405180910390fd5b81810360008085815260200190815260200160002060008c73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508160008085815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254610fd29190612e1f565b9250508190555050505080610fe6906128a8565b9050610e3f565b508473ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb8787604051611064929190612e53565b60405180910390a461107a8187878787876116b8565b6110888187878787876116c0565b505050505050565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036111c4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111bb90613020565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31836040516112b59190611cbd565b60405180910390a3505050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603611331576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161132890612efc565b60405180910390fd5b600061133b610d67565b9050600061134885611897565b9050600061135585611897565b90506113658389898585896116b0565b600080600088815260200190815260200160002060008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050858110156113fc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113f390612f8e565b60405180910390fd5b85810360008089815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508560008089815260200190815260200160002060008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546114b19190612e1f565b925050819055508773ffffffffffffffffffffffffffffffffffffffff168973ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff167fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f628a8a60405161152e929190613040565b60405180910390a4611544848a8a86868a6116b8565b611552848a8a8a8a8a611911565b505050505050505050565b600080600090507a184f03e93ff9f4daa797ed6e38ed64bf6a1f01000000000000000083106115bb577a184f03e93ff9f4daa797ed6e38ed64bf6a1f01000000000000000083816115b1576115b0612ccc565b5b0492506040810190505b6d04ee2d6d415b85acef810000000083106115f8576d04ee2d6d415b85acef810000000083816115ee576115ed612ccc565b5b0492506020810190505b662386f26fc10000831061162757662386f26fc10000838161161d5761161c612ccc565b5b0492506010810190505b6305f5e1008310611650576305f5e100838161164657611645612ccc565b5b0492506008810190505b612710831061167557612710838161166b5761166a612ccc565b5b0492506004810190505b60648310611698576064838161168e5761168d612ccc565b5b0492506002810190505b600a83106116a7576001810190505b80915050919050565b505050505050565b505050505050565b6116df8473ffffffffffffffffffffffffffffffffffffffff16611ae8565b1561188f578373ffffffffffffffffffffffffffffffffffffffff1663bc197c8187878686866040518663ffffffff1660e01b81526004016117259594939291906130be565b6020604051808303816000875af192505050801561176157506040513d601f19601f8201168201806040525081019061175e919061313b565b60015b6118065761176d613175565b806308c379a0036117c95750611781613197565b8061178c57506117cb565b806040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117c09190611ee6565b60405180910390fd5b505b6040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117fd90613299565b60405180910390fd5b63bc197c8160e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161461188d576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016118849061332b565b60405180910390fd5b505b505050505050565b60606000600167ffffffffffffffff8111156118b6576118b5611cf3565b5b6040519080825280602002602001820160405280156118e45781602001602082028036833780820191505090505b50905082816000815181106118fc576118fb61284a565b5b60200260200101818152505080915050919050565b6119308473ffffffffffffffffffffffffffffffffffffffff16611ae8565b15611ae0578373ffffffffffffffffffffffffffffffffffffffff1663f23a6e6187878686866040518663ffffffff1660e01b815260040161197695949392919061334b565b6020604051808303816000875af19250505080156119b257506040513d601f19601f820116820180604052508101906119af919061313b565b60015b611a57576119be613175565b806308c379a003611a1a57506119d2613197565b806119dd5750611a1c565b806040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611a119190611ee6565b60405180910390fd5b505b6040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611a4e90613299565b60405180910390fd5b63f23a6e6160e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614611ade576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611ad59061332b565b60405180910390fd5b505b505050505050565b6000808273ffffffffffffffffffffffffffffffffffffffff163b119050919050565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611b4a82611b1f565b9050919050565b611b5a81611b3f565b8114611b6557600080fd5b50565b600081359050611b7781611b51565b92915050565b6000819050919050565b611b9081611b7d565b8114611b9b57600080fd5b50565b600081359050611bad81611b87565b92915050565b60008060408385031215611bca57611bc9611b15565b5b6000611bd885828601611b68565b9250506020611be985828601611b9e565b9150509250929050565b611bfc81611b7d565b82525050565b6000602082019050611c176000830184611bf3565b92915050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b611c5281611c1d565b8114611c5d57600080fd5b50565b600081359050611c6f81611c49565b92915050565b600060208284031215611c8b57611c8a611b15565b5b6000611c9984828501611c60565b91505092915050565b60008115159050919050565b611cb781611ca2565b82525050565b6000602082019050611cd26000830184611cae565b92915050565b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611d2b82611ce2565b810181811067ffffffffffffffff82111715611d4a57611d49611cf3565b5b80604052505050565b6000611d5d611b0b565b9050611d698282611d22565b919050565b600067ffffffffffffffff821115611d8957611d88611cf3565b5b611d9282611ce2565b9050602081019050919050565b82818337600083830152505050565b6000611dc1611dbc84611d6e565b611d53565b905082815260208101848484011115611ddd57611ddc611cdd565b5b611de8848285611d9f565b509392505050565b600082601f830112611e0557611e04611cd8565b5b8135611e15848260208601611dae565b91505092915050565b600060208284031215611e3457611e33611b15565b5b600082013567ffffffffffffffff811115611e5257611e51611b1a565b5b611e5e84828501611df0565b91505092915050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611ea1578082015181840152602081019050611e86565b60008484015250505050565b6000611eb882611e67565b611ec28185611e72565b9350611ed2818560208601611e83565b611edb81611ce2565b840191505092915050565b60006020820190508181036000830152611f008184611ead565b905092915050565b600060208284031215611f1e57611f1d611b15565b5b6000611f2c84828501611b9e565b91505092915050565b600067ffffffffffffffff821115611f5057611f4f611cf3565b5b602082029050602081019050919050565b600080fd5b6000611f79611f7484611f35565b611d53565b90508083825260208201905060208402830185811115611f9c57611f9b611f61565b5b835b81811015611fc55780611fb18882611b9e565b845260208401935050602081019050611f9e565b5050509392505050565b600082601f830112611fe457611fe3611cd8565b5b8135611ff4848260208601611f66565b91505092915050565b600067ffffffffffffffff82111561201857612017611cf3565b5b61202182611ce2565b9050602081019050919050565b600061204161203c84611ffd565b611d53565b90508281526020810184848401111561205d5761205c611cdd565b5b612068848285611d9f565b509392505050565b600082601f83011261208557612084611cd8565b5b813561209584826020860161202e565b91505092915050565b600080600080608085870312156120b8576120b7611b15565b5b60006120c687828801611b68565b945050602085013567ffffffffffffffff8111156120e7576120e6611b1a565b5b6120f387828801611fcf565b935050604085013567ffffffffffffffff81111561211457612113611b1a565b5b61212087828801611fcf565b925050606085013567ffffffffffffffff81111561214157612140611b1a565b5b61214d87828801612070565b91505092959194509250565b600080600080600060a0868803121561217557612174611b15565b5b600061218388828901611b68565b955050602061219488828901611b68565b945050604086013567ffffffffffffffff8111156121b5576121b4611b1a565b5b6121c188828901611fcf565b935050606086013567ffffffffffffffff8111156121e2576121e1611b1a565b5b6121ee88828901611fcf565b925050608086013567ffffffffffffffff81111561220f5761220e611b1a565b5b61221b88828901612070565b9150509295509295909350565b600067ffffffffffffffff82111561224357612242611cf3565b5b602082029050602081019050919050565b600061226761226284612228565b611d53565b9050808382526020820190506020840283018581111561228a57612289611f61565b5b835b818110156122b3578061229f8882611b68565b84526020840193505060208101905061228c565b5050509392505050565b600082601f8301126122d2576122d1611cd8565b5b81356122e2848260208601612254565b91505092915050565b6000806040838503121561230257612301611b15565b5b600083013567ffffffffffffffff8111156123205761231f611b1a565b5b61232c858286016122bd565b925050602083013567ffffffffffffffff81111561234d5761234c611b1a565b5b61235985828601611fcf565b9150509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b61239881611b7d565b82525050565b60006123aa838361238f565b60208301905092915050565b6000602082019050919050565b60006123ce82612363565b6123d8818561236e565b93506123e38361237f565b8060005b838110156124145781516123fb888261239e565b9750612406836123b6565b9250506001810190506123e7565b5085935050505092915050565b6000602082019050818103600083015261243b81846123c3565b905092915050565b61244c81611b3f565b82525050565b60006020820190506124676000830184612443565b92915050565b61247681611ca2565b811461248157600080fd5b50565b6000813590506124938161246d565b92915050565b600080604083850312156124b0576124af611b15565b5b60006124be85828601611b68565b92505060206124cf85828601612484565b9150509250929050565b600080604083850312156124f0576124ef611b15565b5b60006124fe85828601611b68565b925050602061250f85828601611b68565b9150509250929050565b600080600080600060a0868803121561253557612534611b15565b5b600061254388828901611b68565b955050602061255488828901611b68565b945050604061256588828901611b9e565b935050606061257688828901611b9e565b925050608086013567ffffffffffffffff81111561259757612596611b1a565b5b6125a388828901612070565b9150509295509295909350565b6000602082840312156125c6576125c5611b15565b5b60006125d484828501611b68565b91505092915050565b7f455243313135353a2061646472657373207a65726f206973206e6f742061207660008201527f616c6964206f776e657200000000000000000000000000000000000000000000602082015250565b6000612639602a83611e72565b9150612644826125dd565b604082019050919050565b600060208201905081810360008301526126688161262c565b9050919050565b600081905092915050565b600061268582611e67565b61268f818561266f565b935061269f818560208601611e83565b80840191505092915050565b7f2e6a736f6e000000000000000000000000000000000000000000000000000000600082015250565b60006126e160058361266f565b91506126ec826126ab565b600582019050919050565b6000612703828561267a565b915061270f828461267a565b915061271a826126d4565b91508190509392505050565b7f455243313135353a2063616c6c6572206973206e6f7420746f6b656e206f776e60008201527f6572206f7220617070726f766564000000000000000000000000000000000000602082015250565b6000612782602e83611e72565b915061278d82612726565b604082019050919050565b600060208201905081810360008301526127b181612775565b9050919050565b7f455243313135353a206163636f756e747320616e6420696473206c656e67746860008201527f206d69736d617463680000000000000000000000000000000000000000000000602082015250565b6000612814602983611e72565b915061281f826127b8565b604082019050919050565b6000602082019050818103600083015261284381612807565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006128b382611b7d565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036128e5576128e4612879565b5b600182019050919050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160008201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b600061294c602683611e72565b9150612957826128f0565b604082019050919050565b6000602082019050818103600083015261297b8161293f565b9050919050565b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572600082015250565b60006129b8602083611e72565b91506129c382612982565b602082019050919050565b600060208201905081810360008301526129e7816129ab565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680612a3557607f821691505b602082108103612a4857612a476129ee565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302612ab07fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82612a73565b612aba8683612a73565b95508019841693508086168417925050509392505050565b6000819050919050565b6000612af7612af2612aed84611b7d565b612ad2565b611b7d565b9050919050565b6000819050919050565b612b1183612adc565b612b25612b1d82612afe565b848454612a80565b825550505050565b600090565b612b3a612b2d565b612b45818484612b08565b505050565b5b81811015612b6957612b5e600082612b32565b600181019050612b4b565b5050565b601f821115612bae57612b7f81612a4e565b612b8884612a63565b81016020851015612b97578190505b612bab612ba385612a63565b830182612b4a565b50505b505050565b600082821c905092915050565b6000612bd160001984600802612bb3565b1980831691505092915050565b6000612bea8383612bc0565b9150826002028217905092915050565b612c0382611e67565b67ffffffffffffffff811115612c1c57612c1b611cf3565b5b612c268254612a1d565b612c31828285612b6d565b600060209050601f831160018114612c645760008415612c52578287015190505b612c5c8582612bde565b865550612cc4565b601f198416612c7286612a4e565b60005b82811015612c9a57848901518255600182019150602085019450602081019050612c75565b86831015612cb75784890151612cb3601f891682612bc0565b8355505b6001600288020188555050505b505050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b7f455243313135353a206d696e7420746f20746865207a65726f2061646472657360008201527f7300000000000000000000000000000000000000000000000000000000000000602082015250565b6000612d57602183611e72565b9150612d6282612cfb565b604082019050919050565b60006020820190508181036000830152612d8681612d4a565b9050919050565b7f455243313135353a2069647320616e6420616d6f756e7473206c656e6774682060008201527f6d69736d61746368000000000000000000000000000000000000000000000000602082015250565b6000612de9602883611e72565b9150612df482612d8d565b604082019050919050565b60006020820190508181036000830152612e1881612ddc565b9050919050565b6000612e2a82611b7d565b9150612e3583611b7d565b9250828201905080821115612e4d57612e4c612879565b5b92915050565b60006040820190508181036000830152612e6d81856123c3565b90508181036020830152612e8181846123c3565b90509392505050565b7f455243313135353a207472616e7366657220746f20746865207a65726f20616460008201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b6000612ee6602583611e72565b9150612ef182612e8a565b604082019050919050565b60006020820190508181036000830152612f1581612ed9565b9050919050565b7f455243313135353a20696e73756666696369656e742062616c616e636520666f60008201527f72207472616e7366657200000000000000000000000000000000000000000000602082015250565b6000612f78602a83611e72565b9150612f8382612f1c565b604082019050919050565b60006020820190508181036000830152612fa781612f6b565b9050919050565b7f455243313135353a2073657474696e6720617070726f76616c2073746174757360008201527f20666f722073656c660000000000000000000000000000000000000000000000602082015250565b600061300a602983611e72565b915061301582612fae565b604082019050919050565b6000602082019050818103600083015261303981612ffd565b9050919050565b60006040820190506130556000830185611bf3565b6130626020830184611bf3565b9392505050565b600081519050919050565b600082825260208201905092915050565b600061309082613069565b61309a8185613074565b93506130aa818560208601611e83565b6130b381611ce2565b840191505092915050565b600060a0820190506130d36000830188612443565b6130e06020830187612443565b81810360408301526130f281866123c3565b9050818103606083015261310681856123c3565b9050818103608083015261311a8184613085565b90509695505050505050565b60008151905061313581611c49565b92915050565b60006020828403121561315157613150611b15565b5b600061315f84828501613126565b91505092915050565b60008160e01c9050919050565b600060033d11156131945760046000803e613191600051613168565b90505b90565b600060443d10613224576131a9611b0b565b60043d036004823e80513d602482011167ffffffffffffffff821117156131d1575050613224565b808201805167ffffffffffffffff8111156131ef5750505050613224565b80602083010160043d03850181111561320c575050505050613224565b61321b82602001850186611d22565b82955050505050505b90565b7f455243313135353a207472616e7366657220746f206e6f6e2d4552433131353560008201527f526563656976657220696d706c656d656e746572000000000000000000000000602082015250565b6000613283603483611e72565b915061328e82613227565b604082019050919050565b600060208201905081810360008301526132b281613276565b9050919050565b7f455243313135353a204552433131353552656365697665722072656a6563746560008201527f6420746f6b656e73000000000000000000000000000000000000000000000000602082015250565b6000613315602883611e72565b9150613320826132b9565b604082019050919050565b6000602082019050818103600083015261334481613308565b9050919050565b600060a0820190506133606000830188612443565b61336d6020830187612443565b61337a6040830186611bf3565b6133876060830185611bf3565b81810360808301526133998184613085565b9050969550505050505056fea2646970667358221220de231ea0ba52331673a6ab1f561443459e5e047d956a2026f062e8977c23fe6d64736f6c63430008110033697066733a2f2f626166796265696478666d777963677a6370347632746f67666c70716832676e69627565786a79346d347171777870376e68336a78357a6c6834792f",new U.j(t,"any").getSigner()),n=await e.deploy();await n.deployTransaction.wait(),l(n),P.Ay.success("\u521b\u5efa\u6210\u529f")}catch(e){P.Ay.error("\u521b\u5efa\u5931\u8d25")}finally{h(!1)}},disabled:a.address||!e,children:"Deploy"}),(0,O.jsxs)("div",{children:[(0,O.jsx)(H.A.Title,{level:5,children:"Token IDs"}),(0,O.jsx)(q.A,{value:w,onChange:e=>E(e.target.value)})]}),(0,O.jsxs)("div",{children:[(0,O.jsx)(H.A.Title,{level:5,children:"Token Amounts"}),(0,O.jsx)(q.A,{value:_,onChange:e=>x(e.target.value)})]}),(0,O.jsx)(i.$n,{block:!0,loading:g,onClick:async()=>{try{m(!0);const t=[e,w.split(",").map(Number),_.split(",").map(Number),"0x"];await a.mintBatch(...t),P.Ay.success("mint \u6210\u529f")}catch(t){P.Ay.error("mint \u5931\u8d25")}finally{m(!1)}},disabled:!a.address||!e,children:"Mint"}),(0,O.jsx)(i.$n,{block:!0,loading:S,onClick:N(),disabled:!a.address,children:"Transfer"}),!!r&&(0,O.jsx)(i.$n,{block:!0,color:"danger",loading:S,onClick:N(r),disabled:!a.address,children:"Transfer Black Address"}),!!o&&(0,O.jsx)(i.$n,{block:!0,color:"danger",loading:S,onClick:N(o),disabled:!a.address,children:"Transfer Strong Black Address"}),(0,O.jsx)(i.$n,{block:!0,loading:T,onClick:D(),disabled:!a.address,children:"setApprovalForAll"}),!!r&&(0,O.jsx)(i.$n,{block:!0,color:"danger",loading:T,onClick:D(!0,r),disabled:!a.address,children:"setApprovalForAll Black Address"}),!!o&&(0,O.jsx)(i.$n,{block:!0,color:"danger",loading:T,onClick:D(!0,o),disabled:!a.address,children:"setApprovalForAll Strong Black Address"}),(0,O.jsx)(i.$n,{block:!0,loading:T,onClick:D(!0,y),disabled:!a.address,children:"setApprovalForAll to EOA"}),(0,O.jsx)(i.$n,{block:!0,loading:T,onClick:D(!1),disabled:!a.address,children:"revoke"}),(0,O.jsx)(L.A,{type:"info",message:"\u6d4b\u8bd5 NFT",description:(0,O.jsx)(f.A,{gutter:12,children:F.map((e=>(0,O.jsx)(c.A,{children:(0,O.jsx)("a",{href:`/dapp-demo/?erc1155Address=${e.address}`,children:e.chain})},e.address)))})})]})})})};const V=function(){return(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(i.$x,{direction:"vertical",style:{width:"100%"},children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"NFT",children:(0,O.jsxs)(f.A,{gutter:12,children:[(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)($,{})}),(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(J,{})})]})})})})};const G=function(){const{account:e,provider:t}=(0,s.useContext)(p),[n,r]=(0,s.useState)(!1),o=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async()=>{try{r(!0),await t.request({method:"eth_sendTransaction",params:[{from:e,to:y,value:`0x${(10**9).toString(16)}`,...n}]})}catch(o){P.Ay.error(o.message)}finally{r(!1)}}},a=`0x${21e3.toString(16)}`,f=`0x${(300*10**9).toString(16)}`,l=`0x${(400*10**9).toString(16)}`,d=`0x${(40*10**9).toString(16)}`;return(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"Gas Checker - dapp \u5404\u79cd\u4f20\u53c2",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{loading:n,block:!0,onClick:o({gas:a,gasPrice:f,maxFeePerGas:l,maxPriorityFeePerGas:d}),children:"all"}),(0,O.jsx)(i.$n,{loading:n,block:!0,onClick:o({gas:a,gasPrice:f}),children:"Legacy"}),(0,O.jsx)(i.$n,{loading:n,block:!0,onClick:o({gas:a,maxFeePerGas:l,maxPriorityFeePerGas:d}),children:"1559"}),(0,O.jsx)(i.$n,{loading:n,block:!0,onClick:o({gas:a,gasPrice:f,maxFeePerGas:l}),children:"gasPrice & maxFeePerGas"}),(0,O.jsx)(i.$n,{loading:n,block:!0,onClick:o({gas:a,gasPrice:f,maxPriorityFeePerGas:d}),children:"gasPrice & maxPriorityFeePerGas"}),(0,O.jsx)(i.$n,{loading:n,block:!0,onClick:o({gas:a,maxFeePerGas:l}),children:"maxFeePerGas"}),(0,O.jsx)(i.$n,{loading:n,block:!0,onClick:o({gas:a,maxPriorityFeePerGas:d}),children:"maxPriorityFeePerGas"}),(0,O.jsx)(i.$n,{loading:n,block:!0,onClick:o({gas:`0x${10..toString(16)}`,gasPrice:f,maxFeePerGas:l,maxPriorityFeePerGas:d}),children:"Low gas Limit"})]})})})};const z=function(){const{account:e,chainId:t,provider:n}=(0,s.useContext)(p),r=v(t),o=C(t),[a,f]=(0,s.useState)(!1),[l,d]=(0,s.useState)(!1),u=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return async()=>{try{d(!0);const r={from:e,to:t,value:`0x${(10**9).toString(16)}`};await n.request({method:"eth_sendTransaction",params:[r]})}catch(r){P.Ay.error(r.message)}finally{d(!1)}}},[h,g]=(0,s.useState)(!1),[b,m]=(0,s.useState)(!1),[w,E]=(0,s.useState)(!1),[_,x]=(0,s.useState)(!1),[S,R]=(0,s.useState)(!1),[N,T]=(0,s.useState)(!1);return(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"BatchTransfer",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,loading:a,onClick:async()=>{try{f(!0),await n.request({method:"eth_sendTransaction",params:[{from:e,to:y,value:`0x${(10**10).toString(16)}`}]})}catch(t){P.Ay.error(t.message)}finally{f(!1)}},disabled:!e,children:"transfer baseCoin"}),!!r&&(0,O.jsx)(i.$n,{block:!0,color:"danger",loading:l,onClick:u(),disabled:!e,children:"transfer baseCoin to GrayAddress"}),!!o&&(0,O.jsx)(i.$n,{block:!0,color:"danger",loading:l,onClick:u(o),disabled:!e,children:"transfer baseCoin to Strong Black Address"}),(0,O.jsx)(i.$n,{block:!0,loading:h,onClick:async()=>{try{g(!0),await n.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x89"}]}),await n.request({method:"eth_sendTransaction",params:[{from:e,to:"0xd152f549545093347a162dce210e7293f1452150",value:"0x6f05b59d3b20000",data:"0xe63d38ed000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000fe8dc6394501a35ad1c4833f40f382e55dada4f3000000000000000000000000e5a85089a3da45b5460a59b1d4cf181e01fe7681000000000000000000000000f27b3ba38ea4077423f8edaae0e2c9fedb8fda6d0000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000016345785d8a000000000000000000000000000000000000000000000000000002c68af0bb14000000000000000000000000000000000000000000000000000002c68af0bb140000"}]})}catch(t){P.Ay.error(t.message)}finally{g(!1)}},disabled:!e,children:"batchTransfer baseCoin"}),(0,O.jsx)(i.$n,{block:!0,onClick:async()=>{try{g(!0),await n.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x89"}]}),await n.request({method:"eth_sendTransaction",params:[{from:e,to:"0xd152f549545093347a162dce210e7293f1452150",value:"0x6f05b59d3b20000",data:"0xe6d3d38ed000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000fe8dc6394501a35ad1c4833f40f382e55dada4f3000000000000000000000000e5a85089a3da45b5460a59b1d4cf181e01fe7681000000000000000000000000f27b3ba38ea4077423f8edaae0e2c9fedb8fda6d0000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000016345785d8a000000000000000000000000000000000000000000000000000002c68af0bb14000000000000000000000000000000000000000000000000000002c68af0bb1400001121"}]})}catch(t){P.Ay.error(t.message)}finally{g(!1)}},disabled:!e,children:"transferBaseTokenWithError"})]})})})},Y=[{inputs:[{internalType:"uint256",name:"initialAmount",type:"uint256"},{internalType:"string",name:"tokenName",type:"string"},{internalType:"uint8",name:"decimalUnits",type:"uint8"},{internalType:"string",name:"tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}];var Z=n(54342);const Q="anchorUsedTokens",ee="CIRCLE_LUO",te=[{chain:"Polygon",symbol:ee,chainId:137,address:"0x6615a6c72b04f8Ec45cd2a3576e403c111623111"},{chain:"Polygon",symbol:"USDT",chainId:137,address:"0xc2132d05d31c914a87c6611c10748aeb04b58e8f"},{chain:"Polygon",symbol:"QUANQU...QUAN",chainId:137,address:"0x6Ed7E67F6ee4833Fd4b461c0ce5F1949c133d4ed"},{chain:"Holesky Test Network",symbol:ee,chainId:17e3,address:"0x76bC79EB3bf2156a148793E8363D81c663B18957"}];const ne=function(){const e=(0,s.useRef)(),t=`${window.location.origin}/dapp-demo/favicon.png`,{account:n,provider:r,chainId:o}=(0,s.useContext)(p),a=v(o),l=C(o),[d,u]=(0,s.useState)(4),[m,w]=(0,s.useState)(),[E,_]=(0,s.useState)({}),[x,S]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(async()=>{const t=new URLSearchParams(window.location.search).get("tokenAddress");if(n&&t){var o;S(!1),w(void 0),_({}),u(4),null===(o=e.current)||void 0===o||o.scrollIntoView({behavior:"smooth"});const i=te.find((e=>{let{address:n}=e;return n===t}));i&&await r.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${i.chainId.toString(16)}`}]});const a=new j.NZ(t,Y,new U.j(r,"any").getSigner()),s=await a.symbol();w(s);const f=await a.decimals();(await a.balanceOf(n)).eq(0)?S(!0):S(!1),u(f),_(a)}})()}),[n,r]);const[R,N]=(0,s.useState)(!1),[T,k]=(0,s.useState)(!1),[D,P]=(0,s.useState)(!1),A=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;return async()=>{try{t&&P(!0),await E.transfer(r,`${10**d}`,{from:n,gasLimit:void 0,gas:void 0,...e})}catch(o){Z.log(o),(0,g.i)()}finally{P(!1)}}},[I,K]=(0,s.useState)(!1),M=e=>{let{gasInfo:t,needLoading:r=!0,amount:o="12222222222123234324324234234324232342",spender:i=b}=e;return async()=>{try{r&&K(!0),await E.approve(i,o,{from:n,...t})}catch(e){Z.log(e),(0,g.i)()}finally{K(!1)}}},[W,B]=(0,s.useState)(!1),X=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return async()=>{try{B(!0),await E.increaseAllowance(e,""+100*10**d,{from:n})}catch(t){Z.log(t),(0,g.i)()}finally{B(!1)}}},[$,H]=(0,s.useState)(!1);return(0,O.jsx)(c.A,{xs:24,lg:12,ref:e,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:m||"--",extra:!E.address&&(0,O.jsx)("strong",{children:(0,O.jsx)("a",{href:`#${Q}`,children:"Common token"})}),children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(L.A,{type:"info",message:"Contract address",description:E.address||""}),(0,O.jsx)(i.$n,{block:!0,loading:R,onClick:async()=>{try{N(!0);const e=new j.PM(Y,"0x6101406040523480156200001257600080fd5b506040516200323e3803806200323e83398181016040528101906200003891906200065b565b82806040518060400160405280600181526020017f310000000000000000000000000000000000000000000000000000000000000081525085848682600390816200008491906200094c565b5081600490816200009691906200094c565b5080600560006101000a81548160ff021916908360ff160217905550505050620000d5620000c9620001ce60201b60201c565b620001d660201b60201c565b60008280519060200120905060008280519060200120905060007f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f90508260e081815250508161010081815250504660a081815250506200013e8184846200029c60201b60201c565b608081815250503073ffffffffffffffffffffffffffffffffffffffff1660c08173ffffffffffffffffffffffffffffffffffffffff1681525050806101208181525050505050505050620001c433600560009054906101000a900460ff16600a620001ab919062000bb6565b86620001b8919062000c07565b620002d860201b60201c565b5050505062000dfb565b600033905090565b6000600560019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b60008383834630604051602001620002b995949392919062000cc3565b6040516020818303038152906040528051906020012090509392505050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036200034a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620003419062000d81565b60405180910390fd5b6200035e600083836200044560201b60201c565b806002600082825462000372919062000da3565b92505081905550806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405162000425919062000dde565b60405180910390a362000441600083836200044a60201b60201c565b5050565b505050565b505050565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b620004788162000463565b81146200048457600080fd5b50565b60008151905062000498816200046d565b92915050565b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b620004f382620004a8565b810181811067ffffffffffffffff82111715620005155762000514620004b9565b5b80604052505050565b60006200052a6200044f565b9050620005388282620004e8565b919050565b600067ffffffffffffffff8211156200055b576200055a620004b9565b5b6200056682620004a8565b9050602081019050919050565b60005b838110156200059357808201518184015260208101905062000576565b60008484015250505050565b6000620005b6620005b0846200053d565b6200051e565b905082815260208101848484011115620005d557620005d4620004a3565b5b620005e284828562000573565b509392505050565b600082601f8301126200060257620006016200049e565b5b8151620006148482602086016200059f565b91505092915050565b600060ff82169050919050565b62000635816200061d565b81146200064157600080fd5b50565b60008151905062000655816200062a565b92915050565b6000806000806080858703121562000678576200067762000459565b5b6000620006888782880162000487565b945050602085015167ffffffffffffffff811115620006ac57620006ab6200045e565b5b620006ba87828801620005ea565b9350506040620006cd8782880162000644565b925050606085015167ffffffffffffffff811115620006f157620006f06200045e565b5b620006ff87828801620005ea565b91505092959194509250565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200075e57607f821691505b60208210810362000774576200077362000716565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620007de7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826200079f565b620007ea86836200079f565b95508019841693508086168417925050509392505050565b6000819050919050565b60006200082d62000827620008218462000463565b62000802565b62000463565b9050919050565b6000819050919050565b62000849836200080c565b62000861620008588262000834565b848454620007ac565b825550505050565b600090565b6200087862000869565b620008858184846200083e565b505050565b5b81811015620008ad57620008a16000826200086e565b6001810190506200088b565b5050565b601f821115620008fc57620008c6816200077a565b620008d1846200078f565b81016020851015620008e1578190505b620008f9620008f0856200078f565b8301826200088a565b50505b505050565b600082821c905092915050565b6000620009216000198460080262000901565b1980831691505092915050565b60006200093c83836200090e565b9150826002028217905092915050565b62000957826200070b565b67ffffffffffffffff811115620009735762000972620004b9565b5b6200097f825462000745565b6200098c828285620008b1565b600060209050601f831160018114620009c45760008415620009af578287015190505b620009bb85826200092e565b86555062000a2b565b601f198416620009d4866200077a565b60005b82811015620009fe57848901518255600182019150602085019450602081019050620009d7565b8683101562000a1e578489015162000a1a601f8916826200090e565b8355505b6001600288020188555050505b505050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60008160011c9050919050565b6000808291508390505b600185111562000ac15780860481111562000a995762000a9862000a33565b5b600185161562000aa95780820291505b808102905062000ab98562000a62565b945062000a79565b94509492505050565b60008262000adc576001905062000baf565b8162000aec576000905062000baf565b816001811462000b05576002811462000b105762000b46565b600191505062000baf565b60ff84111562000b255762000b2462000a33565b5b8360020a91508482111562000b3f5762000b3e62000a33565b5b5062000baf565b5060208310610133831016604e8410600b841016171562000b805782820a90508381111562000b7a5762000b7962000a33565b5b62000baf565b62000b8f848484600162000a6f565b9250905081840481111562000ba95762000ba862000a33565b5b81810290505b9392505050565b600062000bc38262000463565b915062000bd0836200061d565b925062000bff7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff848462000aca565b905092915050565b600062000c148262000463565b915062000c218362000463565b925082820262000c318162000463565b9150828204841483151762000c4b5762000c4a62000a33565b5b5092915050565b6000819050919050565b62000c678162000c52565b82525050565b62000c788162000463565b82525050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600062000cab8262000c7e565b9050919050565b62000cbd8162000c9e565b82525050565b600060a08201905062000cda600083018862000c5c565b62000ce9602083018762000c5c565b62000cf8604083018662000c5c565b62000d07606083018562000c6d565b62000d16608083018462000cb2565b9695505050505050565b600082825260208201905092915050565b7f45524332303a206d696e7420746f20746865207a65726f206164647265737300600082015250565b600062000d69601f8362000d20565b915062000d768262000d31565b602082019050919050565b6000602082019050818103600083015262000d9c8162000d5a565b9050919050565b600062000db08262000463565b915062000dbd8362000463565b925082820190508082111562000dd85762000dd762000a33565b5b92915050565b600060208201905062000df5600083018462000c6d565b92915050565b60805160a05160c05160e05161010051610120516123f362000e4b6000396000610ed901526000610f1b01526000610efa01526000610e2f01526000610e8501526000610eae01526123f36000f3fe608060405234801561001057600080fd5b50600436106101165760003560e01c8063715018a6116100a2578063a457c2d711610071578063a457c2d7146102e5578063a9059cbb14610315578063d505accf14610345578063dd62ed3e14610361578063f2fde38b1461039157610116565b8063715018a61461026f5780637ecebe00146102795780638da5cb5b146102a957806395d89b41146102c757610116565b8063313ce567116100e9578063313ce567146101b75780633644e515146101d557806339509351146101f357806340c10f191461022357806370a082311461023f57610116565b806306fdde031461011b578063095ea7b31461013957806318160ddd1461016957806323b872dd14610187575b600080fd5b6101236103ad565b60405161013091906115f5565b60405180910390f35b610153600480360381019061014e91906116b0565b61043f565b604051610160919061170b565b60405180910390f35b610171610462565b60405161017e9190611735565b60405180910390f35b6101a1600480360381019061019c9190611750565b61046c565b6040516101ae919061170b565b60405180910390f35b6101bf61049b565b6040516101cc91906117bf565b60405180910390f35b6101dd6104ae565b6040516101ea91906117f3565b60405180910390f35b61020d600480360381019061020891906116b0565b6104bd565b60405161021a919061170b565b60405180910390f35b61023d600480360381019061023891906116b0565b6104f4565b005b6102596004803603810190610254919061180e565b61050a565b6040516102669190611735565b60405180910390f35b610277610552565b005b610293600480360381019061028e919061180e565b610566565b6040516102a09190611735565b60405180910390f35b6102b16105b6565b6040516102be919061184a565b60405180910390f35b6102cf6105e0565b6040516102dc91906115f5565b60405180910390f35b6102ff60048036038101906102fa91906116b0565b610672565b60405161030c919061170b565b60405180910390f35b61032f600480360381019061032a91906116b0565b6106e9565b60405161033c919061170b565b60405180910390f35b61035f600480360381019061035a91906118bd565b61070c565b005b61037b6004803603810190610376919061195f565b61084e565b6040516103889190611735565b60405180910390f35b6103ab60048036038101906103a6919061180e565b6108d5565b005b6060600380546103bc906119ce565b80601f01602080910402602001604051908101604052809291908181526020018280546103e8906119ce565b80156104355780601f1061040a57610100808354040283529160200191610435565b820191906000526020600020905b81548152906001019060200180831161041857829003601f168201915b5050505050905090565b60008061044a610958565b9050610457818585610960565b600191505092915050565b6000600254905090565b600080610477610958565b9050610484858285610b29565b61048f858585610bb5565b60019150509392505050565b600560009054906101000a900460ff1681565b60006104b8610e2b565b905090565b6000806104c8610958565b90506104e98185856104da858961084e565b6104e49190611a2e565b610960565b600191505092915050565b6104fc610f45565b6105068282610fc3565b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b61055a610f45565b6105646000611119565b565b60006105af600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206111df565b9050919050565b6000600560019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6060600480546105ef906119ce565b80601f016020809104026020016040519081016040528092919081815260200182805461061b906119ce565b80156106685780601f1061063d57610100808354040283529160200191610668565b820191906000526020600020905b81548152906001019060200180831161064b57829003601f168201915b5050505050905090565b60008061067d610958565b9050600061068b828661084e565b9050838110156106d0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c790611ad4565b60405180910390fd5b6106dd8286868403610960565b60019250505092915050565b6000806106f4610958565b9050610701818585610bb5565b600191505092915050565b8342111561074f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161074690611b40565b60405180910390fd5b60007f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c988888861077e8c6111ed565b8960405160200161079496959493929190611b60565b60405160208183030381529060405280519060200120905060006107b78261124b565b905060006107c782878787611265565b90508973ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614610837576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082e90611c0d565b60405180910390fd5b6108428a8a8a610960565b50505050505050505050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b6108dd610f45565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff160361094c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161094390611c9f565b60405180910390fd5b61095581611119565b50565b600033905090565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036109cf576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109c690611d31565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610a3e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a3590611dc3565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92583604051610b1c9190611735565b60405180910390a3505050565b6000610b35848461084e565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8114610baf5781811015610ba1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b9890611e2f565b60405180910390fd5b610bae8484848403610960565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610c24576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c1b90611ec1565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610c93576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c8a90611f53565b60405180910390fd5b610c9e838383611290565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610d24576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d1b90611fe5565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051610e129190611735565b60405180910390a3610e25848484611295565b50505050565b60007f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff16148015610ea757507f000000000000000000000000000000000000000000000000000000000000000046145b15610ed4577f00000000000000000000000000000000000000000000000000000000000000009050610f42565b610f3f7f00000000000000000000000000000000000000000000000000000000000000007f00000000000000000000000000000000000000000000000000000000000000007f000000000000000000000000000000000000000000000000000000000000000061129a565b90505b90565b610f4d610958565b73ffffffffffffffffffffffffffffffffffffffff16610f6b6105b6565b73ffffffffffffffffffffffffffffffffffffffff1614610fc1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610fb890612051565b60405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603611032576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611029906120bd565b60405180910390fd5b61103e60008383611290565b80600260008282546110509190611a2e565b92505081905550806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516111019190611735565b60405180910390a361111560008383611295565b5050565b6000600560019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600081600001549050919050565b600080600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020905061123a816111df565b9150611245816112d4565b50919050565b600061125e611258610e2b565b836112ea565b9050919050565b60008060006112768787878761131d565b91509150611283816113ff565b8192505050949350505050565b505050565b505050565b600083838346306040516020016112b59594939291906120dd565b6040516020818303038152906040528051906020012090509392505050565b6001816000016000828254019250508190555050565b600082826040516020016112ff9291906121a8565b60405160208183030381529060405280519060200120905092915050565b6000807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08360001c11156113585760006003915091506113f6565b60006001878787876040516000815260200160405260405161137d94939291906121df565b6020604051602081039080840390855afa15801561139f573d6000803e3d6000fd5b505050602060405103519050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036113ed576000600192509250506113f6565b80600092509250505b94509492505050565b6000600481111561141357611412612224565b5b81600481111561142657611425612224565b5b031561156257600160048111156114405761143f612224565b5b81600481111561145357611452612224565b5b03611493576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161148a9061229f565b60405180910390fd5b600260048111156114a7576114a6612224565b5b8160048111156114ba576114b9612224565b5b036114fa576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114f19061230b565b60405180910390fd5b6003600481111561150e5761150d612224565b5b81600481111561152157611520612224565b5b03611561576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016115589061239d565b60405180910390fd5b5b50565b600081519050919050565b600082825260208201905092915050565b60005b8381101561159f578082015181840152602081019050611584565b60008484015250505050565b6000601f19601f8301169050919050565b60006115c782611565565b6115d18185611570565b93506115e1818560208601611581565b6115ea816115ab565b840191505092915050565b6000602082019050818103600083015261160f81846115bc565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006116478261161c565b9050919050565b6116578161163c565b811461166257600080fd5b50565b6000813590506116748161164e565b92915050565b6000819050919050565b61168d8161167a565b811461169857600080fd5b50565b6000813590506116aa81611684565b92915050565b600080604083850312156116c7576116c6611617565b5b60006116d585828601611665565b92505060206116e68582860161169b565b9150509250929050565b60008115159050919050565b611705816116f0565b82525050565b600060208201905061172060008301846116fc565b92915050565b61172f8161167a565b82525050565b600060208201905061174a6000830184611726565b92915050565b60008060006060848603121561176957611768611617565b5b600061177786828701611665565b935050602061178886828701611665565b92505060406117998682870161169b565b9150509250925092565b600060ff82169050919050565b6117b9816117a3565b82525050565b60006020820190506117d460008301846117b0565b92915050565b6000819050919050565b6117ed816117da565b82525050565b600060208201905061180860008301846117e4565b92915050565b60006020828403121561182457611823611617565b5b600061183284828501611665565b91505092915050565b6118448161163c565b82525050565b600060208201905061185f600083018461183b565b92915050565b61186e816117a3565b811461187957600080fd5b50565b60008135905061188b81611865565b92915050565b61189a816117da565b81146118a557600080fd5b50565b6000813590506118b781611891565b92915050565b600080600080600080600060e0888a0312156118dc576118db611617565b5b60006118ea8a828b01611665565b97505060206118fb8a828b01611665565b965050604061190c8a828b0161169b565b955050606061191d8a828b0161169b565b945050608061192e8a828b0161187c565b93505060a061193f8a828b016118a8565b92505060c06119508a828b016118a8565b91505092959891949750929550565b6000806040838503121561197657611975611617565b5b600061198485828601611665565b925050602061199585828601611665565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806119e657607f821691505b6020821081036119f9576119f861199f565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000611a398261167a565b9150611a448361167a565b9250828201905080821115611a5c57611a5b6119ff565b5b92915050565b7f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f7760008201527f207a65726f000000000000000000000000000000000000000000000000000000602082015250565b6000611abe602583611570565b9150611ac982611a62565b604082019050919050565b60006020820190508181036000830152611aed81611ab1565b9050919050565b7f45524332305065726d69743a206578706972656420646561646c696e65000000600082015250565b6000611b2a601d83611570565b9150611b3582611af4565b602082019050919050565b60006020820190508181036000830152611b5981611b1d565b9050919050565b600060c082019050611b7560008301896117e4565b611b82602083018861183b565b611b8f604083018761183b565b611b9c6060830186611726565b611ba96080830185611726565b611bb660a0830184611726565b979650505050505050565b7f45524332305065726d69743a20696e76616c6964207369676e61747572650000600082015250565b6000611bf7601e83611570565b9150611c0282611bc1565b602082019050919050565b60006020820190508181036000830152611c2681611bea565b9050919050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160008201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b6000611c89602683611570565b9150611c9482611c2d565b604082019050919050565b60006020820190508181036000830152611cb881611c7c565b9050919050565b7f45524332303a20617070726f76652066726f6d20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b6000611d1b602483611570565b9150611d2682611cbf565b604082019050919050565b60006020820190508181036000830152611d4a81611d0e565b9050919050565b7f45524332303a20617070726f766520746f20746865207a65726f20616464726560008201527f7373000000000000000000000000000000000000000000000000000000000000602082015250565b6000611dad602283611570565b9150611db882611d51565b604082019050919050565b60006020820190508181036000830152611ddc81611da0565b9050919050565b7f45524332303a20696e73756666696369656e7420616c6c6f77616e6365000000600082015250565b6000611e19601d83611570565b9150611e2482611de3565b602082019050919050565b60006020820190508181036000830152611e4881611e0c565b9050919050565b7f45524332303a207472616e736665722066726f6d20746865207a65726f20616460008201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b6000611eab602583611570565b9150611eb682611e4f565b604082019050919050565b60006020820190508181036000830152611eda81611e9e565b9050919050565b7f45524332303a207472616e7366657220746f20746865207a65726f206164647260008201527f6573730000000000000000000000000000000000000000000000000000000000602082015250565b6000611f3d602383611570565b9150611f4882611ee1565b604082019050919050565b60006020820190508181036000830152611f6c81611f30565b9050919050565b7f45524332303a207472616e7366657220616d6f756e742065786365656473206260008201527f616c616e63650000000000000000000000000000000000000000000000000000602082015250565b6000611fcf602683611570565b9150611fda82611f73565b604082019050919050565b60006020820190508181036000830152611ffe81611fc2565b9050919050565b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572600082015250565b600061203b602083611570565b915061204682612005565b602082019050919050565b6000602082019050818103600083015261206a8161202e565b9050919050565b7f45524332303a206d696e7420746f20746865207a65726f206164647265737300600082015250565b60006120a7601f83611570565b91506120b282612071565b602082019050919050565b600060208201905081810360008301526120d68161209a565b9050919050565b600060a0820190506120f260008301886117e4565b6120ff60208301876117e4565b61210c60408301866117e4565b6121196060830185611726565b612126608083018461183b565b9695505050505050565b600081905092915050565b7f1901000000000000000000000000000000000000000000000000000000000000600082015250565b6000612171600283612130565b915061217c8261213b565b600282019050919050565b6000819050919050565b6121a261219d826117da565b612187565b82525050565b60006121b382612164565b91506121bf8285612191565b6020820191506121cf8284612191565b6020820191508190509392505050565b60006080820190506121f460008301876117e4565b61220160208301866117b0565b61220e60408301856117e4565b61221b60608301846117e4565b95945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b7f45434453413a20696e76616c6964207369676e61747572650000000000000000600082015250565b6000612289601883611570565b915061229482612253565b602082019050919050565b600060208201905081810360008301526122b88161227c565b9050919050565b7f45434453413a20696e76616c6964207369676e6174757265206c656e67746800600082015250565b60006122f5601f83611570565b9150612300826122bf565b602082019050919050565b60006020820190508181036000830152612324816122e8565b9050919050565b7f45434453413a20696e76616c6964207369676e6174757265202773272076616c60008201527f7565000000000000000000000000000000000000000000000000000000000000602082015250565b6000612387602283611570565b91506123928261232b565b604082019050919050565b600060208201905081810360008301526123b68161237a565b905091905056fea26469706673582212205e8d7bb733a28b307c6266e71d7fce8f78067e564cdf5e388464ca543c2ea25b64736f6c63430008120033",new U.j(r,"any").getSigner()),t=await e.deploy(1e15,ee,d,ee);await t.deployTransaction.wait(),_(t)}catch(e){Z.log(e),(0,g.i)()}finally{N(!1)}},disabled:!n,children:"Deploy Contract"}),(0,O.jsx)(i.$n,{block:!0,loading:T,onClick:async()=>{try{k(!0),await r.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:E.address,symbol:m,decimals:d,image:t}}})}catch(e){Z.log(e),(0,g.i)()}finally{k(!1)}},disabled:!E.address,children:"\u3010EIP 747\u3011Add Token to wallet"}),x?(0,O.jsx)(f.A,{gutter:12,children:(0,O.jsxs)(c.A,{xs:24,lg:24,children:["\u68c0\u6d4b\u5230\u4f60\u7684\u5730\u5740\u6ca1\u6709",m,"\u4ee3\u5e01"]})}):(0,O.jsxs)(f.A,{gutter:12,children:[(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(i.Zp,{title:"Approve Token",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,style:{marginBottom:8},loading:I,onClick:M({}),disabled:!E.address||!n,children:"approve"}),(0,O.jsx)(i.$n,{block:!0,color:"warning",style:{marginBottom:8},loading:I,onClick:M({spender:y}),disabled:!E.address||!n,children:"To EOA"}),(0,O.jsx)(i.$n,{block:!0,style:{marginBottom:8},loading:I,onClick:M({gasInfo:{gasLimit:6e4,gasPrice:"20000000000"},amount:"0"}),disabled:!E.address||!n,children:"revoke"}),(0,O.jsx)(i.$n,{block:!0,style:{marginBottom:8},loading:I,onClick:M({spender:y,amount:"0"}),disabled:!E.address||!n,children:"revoke to EOA"}),(0,O.jsx)(i.$n,{block:!0,style:{marginBottom:8},loading:W,onClick:X(),disabled:!E.address||!n,children:"increaseAllowance"}),(0,O.jsx)(i.$n,{block:!0,color:"warning",style:{marginBottom:8},loading:W,onClick:X(y),disabled:!E.address||!n,children:"increaseAllowance to EOA"}),(0,O.jsx)(i.$n,{block:!0,style:{marginBottom:8},loading:$,onClick:async()=>{try{H(!0),await E.decreaseAllowance(b,""+100*10**d,{from:n})}catch(e){Z.log(e),(0,g.i)()}finally{H(!1)}},disabled:!E.address||!n,children:"decreaseAllowance"}),!!a&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(i.$n,{block:!0,color:"danger",style:{marginBottom:8},loading:I,onClick:M({spender:a}),disabled:!E.address||!n,children:"To Gray Address"}),(0,O.jsx)(i.$n,{block:!0,style:{marginBottom:8},loading:I,onClick:M({spender:a,amount:"0"}),disabled:!E.address||!n,children:"revoke Gray Address"})]}),!!l&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(i.$n,{block:!0,color:"danger",style:{marginBottom:8},loading:I,onClick:M({spender:l}),disabled:!E.address||!n,children:"To StrongBlack Address"}),(0,O.jsx)(i.$n,{block:!0,style:{marginBottom:8},loading:I,onClick:M({spender:l,amount:"0"}),disabled:!E.address||!n,children:"revoke StrongBlack Address"})]})]})})}),(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(i.Zp,{title:"Transfer Token",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,style:{marginBottom:8},loading:D,onClick:A(),disabled:!E.address||!n,children:"transfer"}),!!a&&(0,O.jsx)(i.$n,{block:!0,color:"danger",style:{marginBottom:8},loading:D,onClick:A(void 0,!0,a),disabled:!E.address||!n,children:"To Black Address"}),!!l&&(0,O.jsx)(i.$n,{block:!0,color:"danger",style:{marginBottom:8},loading:D,onClick:A(void 0,!0,l),disabled:!E.address||!n,children:"To StrongBlack Address"})]})})})]}),(0,O.jsx)("div",{id:Q}),(0,O.jsx)(L.A,{type:"info",message:"Common token",description:Object.entries(h().groupBy(te,"chain")).map((e=>{let[t,n]=e;return(0,O.jsxs)(f.A,{gutter:12,children:[(0,O.jsx)(c.A,{children:t}),n.map((e=>(0,O.jsx)(c.A,{children:(0,O.jsx)("a",{href:`${["luoquanquan.github.io","localhost"].includes(window.location.hostname)?"/dapp-demo":""}/?tokenAddress=${e.address}`,children:e.symbol})},e.address)))]},t)}))})]})})})};var re=n(82645),oe=n(7784),ie=n(54342);const ae="0x2",se=e=>e?e*10**9:"",fe=e=>e?`0x${(+e).toString(16)}`:"";const ce=function(){const[e]=re.A.useForm(),[t,n]=(0,s.useState)(ae),{account:r,provider:o}=(0,s.useContext)(p),[a,f]=(0,s.useState)(!1);return(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"\u7ec4\u88c5\u4ea4\u6613",children:(0,O.jsx)(i.$x,{direction:"vertical",style:{width:"100%"},children:(0,O.jsxs)(re.A,{form:e,layout:"vertical",onFinish:async()=>{try{f(!0);const n=e.getFieldsValue(),i={from:r,to:y,type:t,value:fe(n.value),data:fe(n.data),gas:fe(n.gasLimit)};t===ae?(i.maxPriorityFeePerGas=fe(se(n.maxPriorityFeePerGas)),i.maxFeePerGas=fe(se(n.maxFeePerGas))):i.gasPrice=fe(se(n.gasPrice)),await o.request({method:"eth_sendTransaction",params:[i]})}catch(n){ie.log,P.Ay.error(n.message)}finally{ie.log(`Current log: 1 ${Date.now()}`),f(!1)}},onValuesChange:e=>{n(e.type)},initialValues:{type:ae,to:y,gasPrice:50,maxFeePerGas:35.00000029,maxPriorityFeePerGas:35,gasLimit:21e3},children:[(0,O.jsx)(re.A.Item,{label:"to",name:"to",children:(0,O.jsx)(q.A,{placeholder:"to"})}),(0,O.jsx)(re.A.Item,{label:"type",name:"type",children:(0,O.jsxs)(oe.Ay.Group,{children:[(0,O.jsx)(oe.Ay.Button,{value:"0x0",children:"Legacy"}),(0,O.jsx)(oe.Ay.Button,{value:ae,children:"EIP 1559"})]})}),t===ae?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(re.A.Item,{label:"maxFeePerGas(Gwei)",name:"maxFeePerGas",children:(0,O.jsx)(q.A,{type:"float",min:0,placeholder:"maxFeePerGas(Gwei)"})}),(0,O.jsx)(re.A.Item,{label:"maxPriorityFeePerGas(Gwei)",name:"maxPriorityFeePerGas",children:(0,O.jsx)(q.A,{type:"float",min:0,placeholder:"maxPriorityFeePerGas(Gwei)"})})]}):(0,O.jsx)(re.A.Item,{label:"gasPrice(Gwei)",name:"gasPrice",children:(0,O.jsx)(q.A,{type:"float",placeholder:"gasPrice(Gwei)",min:0})}),(0,O.jsx)(re.A.Item,{label:"gasLimit",name:"gasLimit",children:(0,O.jsx)(q.A,{ype:"number",min:0,placeholder:"gasLimit"})}),(0,O.jsx)(re.A.Item,{label:"value",name:"value",children:(0,O.jsx)(q.A,{placeholder:"value"})}),(0,O.jsx)(re.A.Item,{label:"data",name:"data",children:(0,O.jsx)(q.A,{placeholder:"data"})}),(0,O.jsx)(re.A.Item,{children:(0,O.jsx)(i.$n,{block:!0,type:"submit",disabled:!r,loading:a,children:"Submit"})})]})})})})};function le(){return(0,O.jsx)(i.Zp,{title:"signTransaction",children:(0,O.jsxs)(r.A,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsxs)(f.A,{gutter:16,children:[(0,O.jsx)(ne,{}),(0,O.jsx)(V,{})]}),(0,O.jsxs)(f.A,{gutter:16,children:[(0,O.jsx)(G,{}),(0,O.jsx)(z,{})]}),(0,O.jsx)(f.A,{gutter:16,children:(0,O.jsx)(ce,{})})]})})}function de(e){let{href:t,disabled:n=!1,children:r}=e;return(0,O.jsx)(i.$n,{block:!0,onClick:()=>{window.open(t)},disabled:n,children:r})}const ue=function(){const{account:e,chainId:t}=(0,s.useContext)(p);return(0,O.jsx)(i.Zp,{title:"Tools",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(de,{href:`https://app.scamsniffer.io/permits/${e||""}`,children:"Scam Sniffer"}),(0,O.jsx)(de,{href:`https://revoke.cash/zh/address/${e||""}?chainId=${t}`,children:"revoke.cash"}),(0,O.jsx)(de,{href:"https://faucets.pk910.de/",children:"PoWFaucet"})]})})};var he=n(54342);const pe=function(){const{account:e,provider:t}=(0,s.useContext)(p),[n,r]=(0,s.useState)(!1);return(0,O.jsx)(i.Zp,{title:"Rare cases",children:(0,O.jsx)(i.$x,{direction:"vertical",style:{width:"100%"},children:(0,O.jsx)(i.$n,{block:!0,loading:n,onClick:async()=>{try{r(!0),await t.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x1"}]}),await t.request({method:"eth_sendTransaction",params:[{from:e,to:"0x5283D291DBCF85356A21bA090E6db59121208b44",value:"0x0",data:"0xf123991e00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000095b247ccce49df14e87a8f20f12fcd23877873c600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000fe4f44bee93503346a3ac9ee5a26b130a5796d60000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000f"}]}),(0,g.t)()}catch(n){he.log(n),(0,g.i)()}finally{r(!1)}},children:"invoke eigenLayer"})})})};var ge=n(54342);const be=function(){const{account:e,provider:t}=(0,s.useContext)(p),[n,r]=(0,s.useState)(!1),[o,a]=(0,s.useState)(!1),f=(e,n)=>async()=>{try{a(!0),await t.request({method:"wallet_switchEthereumChain",params:[{chainId:e}]}),await t.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:n,symbol:"tokenAddress",decimals:4,image:`${window.location.origin}/dapp-demo/favicon.png`}}}),(0,g.t)()}catch(r){ge.log(r),(0,g.i)()}finally{a(!1)}},[c,l]=(0,s.useState)(!1),d=(n,r)=>async()=>{try{l(!0),await t.request({method:"wallet_switchEthereumChain",params:[{chainId:n}]}),await t.request({method:"eth_sendTransaction",params:[{from:e,to:y,value:`0x${(10**15).toString(16)}`,...r}]}),(0,g.t)()}catch(o){ge.log(o),(0,g.i)()}finally{l(!1)}};return(0,O.jsx)(i.Zp,{title:"Test For Default Gas ~",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,disabled:!e,onClick:async()=>{try{r(!0),await t.request({method:"wallet_addEthereumChain",params:[{chainId:"0x4268",rpcUrls:["https://rpc.ankr.com/eth_holesky"],chainName:"Holesky Test",nativeCurrency:{name:"Holesky ETH",decimals:18,symbol:"ETH"},blockExplorerUrls:["https://holesky.etherscan.io/"]}]}),(0,g.t)()}catch(e){ge.log(e),(0,g.i)()}finally{r(!1)}},loading:n,children:"Add Holesky Test Network"}),(0,O.jsx)(i.$n,{block:!0,disabled:!e,loading:o,onClick:f("0x4268","0x7ad6a7eb39e97f08a7deb05c87496d340e08d54f"),children:"Add Holesky Test Network Token"}),(0,O.jsx)(i.$n,{block:!0,disabled:!e,loading:o,onClick:f("0x41","0x7ad6a7eb39e97f08a7deb05c87496d340e08d54f"),children:"Add OKC Test Network Token"}),(0,O.jsx)(i.$n,{block:!0,disabled:!e,loading:c,onClick:d("0x41",{gasPrice:`0x${(15*10**9).toString(16)}`,gas:"0x5208"}),children:"Send OKC BaseToken WithGas(Legacy)"}),(0,O.jsx)(i.$n,{block:!0,disabled:!e,loading:c,onClick:d("0x41"),children:"Send OKC BaseToken WithoutGas(Legacy)"}),(0,O.jsx)(i.$n,{block:!0,disabled:!e,loading:c,onClick:d("0x4268",{maxFeePerGas:`0x${(2.1*10**9).toString(16)}`,maxPriorityFeePerGas:`0x${(2*10**9).toString(16)}`,gas:"0x5208"}),children:"Send Holesky BaseToken WithGas(eip-1559)"}),(0,O.jsx)(i.$n,{block:!0,disabled:!e,loading:c,onClick:d("0x4268"),children:"Send Holesky BaseToken WithoutGas(eip-1559)"})]})})};const ye=function(e){let{title:t,onChange:n,value:r}=e;return(0,O.jsxs)("div",{style:{marginBottom:"4px"},children:[(0,O.jsxs)("div",{style:{marginBottom:"6px"},children:[t,":"]}),(0,O.jsx)(i.pd,{onChange:n,value:r,placeholder:`please input ${t}`})]})},ve=[{chainId:"0x1",to:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",type:"Withdraw",callData:"0x2e1a7d4d0000000000000000000000000000000000000000000000000113984d6c161224"},{chainId:"0x1",to:"0xf3de3c0d654fda23dad170f0f320a92172509127",type:"Swap",callData:"0x9871efa400000000003065c160aa2dc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000186cc6acd4b00000000000000000000000000000000000000000000001624abe35390291bd2922b00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000001b0000000000000003b6d03404103e658a8acab924a9a2d3750e6cf3fb932a186"},{chainId:"0x1",to:"0x6759acd57cb5ea451a3edf397734edddfc123049",type:"ClaimReward",callData:"0x1aee31d000000000000000000000000000000000000000000000000000000000000055870000000000000000000000000000000000000000000004af8fb048d4d3c00000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000688be1b4000000000000000000000000000000000000000000000000000000000000001ccff4fed2422710342400de4540d21d13f72c3e3bb57f3d1759efcbd84c453a2a58241509043ff46cd89e68a0db051d67565bc28e7683af08c5e07a461e5569c2000000000000000000000000000000000000000000000000000000000000000fe935acc1666ba975c8724ef514ed5d5166d4cbd2d4e653fd95ae03cffe5f3d3c88e25a461c06a8bd0dd9b0ab12a0b69e927fdc12415446a3ca908cc326d01266a486435bbc196d1f46aa27c2d143c088584ee8b027e3ca66fa13aa135dcf3b649bbe3ee92d8369cca580a154a185e60b929f306d70b6c7d613e0f843d44dfbed0346fcc15e93aa73bfbdd913c5185b27da7f481a0d31d7ddbaf272455b2af6f3e2dbb4fbfcd9f32113537747f974ac3872046169ce6cb6c8d9f262856bb93199d742d16150f00b4e984cdf9e471c36a0488df21f1aef3c4754a58b65012cc484a91e49606211faeae8e77678807815ea258e63cf95cf160db5464c175d9eba0c06710e754fb59ba898bba1127346c870f2aee05c22c952ce4412ea517c4586b431adffe7cc25c6e1c190fff148f31a21752775abeb1aa707ae7a7fe5bb0ff22c6c220eb496842c14dac711e270b6d469aa5e3e7c6d9971c4de9c4dcd02535c822004b41aeb7f85b9f6e46c71a451cb5fb86b03e0dcf18fb59b7af3db96ee6c6c5726934831a61a96855d33955db5ad5bc9b5b904fd048ab42010479076017e2997c1afa732779d9256af31d8525d2bb50eba01907f7c6cfea62b90759ea7a96b377a72a7db91b2606459fa309908ccbd3f61d32fcaab3c874d37d09784167cbf"},{chainId:"0x1",to:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",type:"Token Approval",callData:"0x095ea7b3000000000000000000000000e92b586627cca7a83dc919cc7127196d70f55a0600000000000000000000000000000000000000000000000005278ab4012fa000"},{chainId:"0x1",to:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",type:"Send Token",callData:"0xa9059cbb000000000000000000000000b2db21f72d616aff10a4d043ee678dd24d042d8300000000000000000000000000000000000000000000000000000000000001f4"},{chainId:"0x1",to:"0x5d22045daceab03b158031ecb7d9d06fad24609b",type:"Bridge",callData:"0x00aeef8a05fe4940c19493b7facbc012677989fa504d88e14ec33628281ca4957c16979400b333e3142fe16b78628f19bb15afddaef437e72d6d7f5c6c20c6801a27fba60000000000000000000000000000000000000000000000000000000039ebfcb3"},{chainId:"0x1",to:"0x29469395eaf6f95920e59f858042f0e28d98a20b",type:"Take Order",callData:"0x619a309f000000000000000000000000218e312ff5181290a46e3f87a73a8ad40c05a9440000000000000000000000003bb4fa84b120ac0dbb4a6bb0442fe2c47e324a93000000000000000000000000bd3531da5cf5857e7cfaa92426877b022e612cf8000000000000000000000000000000000000000000000000000000000000138d0000000000000000000000000000000000000000000000006dc5f7174d5700000000000000000000000000000000000000000000000000000000000066a8f5e7000000000000000000000000000000000000000000000000000000000000089800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002328000000000000000000000000000000000000000000000000000000000004eb3f00000000000000000000000000000000000000000000000000000000000001600000000000000000000000000fcbfc0a67985ee0803def22343ec4aeed02760e000000000000000000000000bd3531da5cf5857e7cfaa92426877b022e612cf807206b8e31b6516d7eff87d5c922fe0f37d7855bb0803032f6a33095f47e7428000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000688dff1b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009e26d5f76ef2bea3b8158493c99513be0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000007f65e95cbe1600000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000002a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000412acf1861718edf92830de444a5581fef5c3496901833ddb906e2a35286bc714026af28759c752bc2e3f9f92967121ee760c6cee9c503771edf2a5e1dcf85c9f31c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000599b0fe6317ee97fd93d9b3cb06121fb8aba5422920fe884780df9a802d7718f9b3c3b76c79692fadc2c1bc2beeac8c68160a54535698f8a32c2363c890c516c851b0137e7406af68e5d010513ff70a3aaed9afeb8661116e6ce00000000000000"},{chainId:"0x1",to:"0x29469395eaf6f95920e59f858042f0e28d98a20b",type:"Borrow",callData:"0xe263967e0000000000000000000000008ee0033f81aa75d222b43b2b4571eb2bbd0c185a000000000000000000000000bd3531da5cf5857e7cfaa92426877b022e612cf800000000000000000000000000000000000000000000000053444835ec580000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006f05b59d3b20000000000000000000000000000000000000000000000000000000000000000232800000000000000000000000000000000a95f35e70e6d3acf9b0de1543e8713d40000000000000000000000000000000000000000000000000000000066d408a5000000000000000000000000000000000000000000000000000000000000019a000000000000000000000000473ca1d29a136b935a96380ea342f296b4eea82c00000000000000000000000000000000000000000000000000000000000001a0000000000000000000000000000000000000000000000000058d15e17628000000000000000000000000000000000000000000000000000000000000000013a200000000000000000000000000000000000000000000000000000000000000a241df57db0d7b160709d45400c6d8d4804b83c431f5245c5a3832f5d143add2d1437a549f64da1d3dc37b489c717d52bc66fff13efb398522f959490efc003cdf1b482935865df9ab5812aa98505c0f80c5d20ad232f7d947b007908419cb17dc9b570811373f3152966dcc047a692510a9dcfeaef0b6bcedcb513c637d39bb4ab11c000000000000000000000000000000000000000000000000000000000137e74b000000000000000000000000000000000000000000000000000000000000"},{chainId:"0x1",to:"0x0000000000000068f116a894984e2db1123eb395",type:"Cancel Order",callData:"0xfd9f1e10000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000a01ab398e7b55e74d222992d5f286cf3ba5a75cb000000000000000000000000df2d4bffec010debd302674c9fb9cda99bb5e8520000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000066342016000000000000000000000000000000000000000000000000000000006635715e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cc8155b224ff88b70000007b02230091a7ed01230072f7006a004d60a8d4e71d599b8104250f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c2e0ca5fe0b9abe1b86f3cc0b865448908d20a16a01ab398e7b55e74d222992d5f286cf3ba5a75cb0000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e848000000000000000000000000000000000000000000000000000000000001e8480000000000000000000000000a01ab398e7b55e74d222992d5f286cf3ba5a75cb"},{chainId:"0x38",to:"0x3556e8b925ee20c1fc6a00107fd449522338f7fd",type:"Bet",callData:"0x35bcf347000000000000000000000000000000000000000000000037d61f16d37c5800007f2c395d9fee4afa5b24c23db4ffb34c02239e22c812f971e2171035c5ae04a300000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000041c83a001a319cd670d414286d79d6c1581fb2728187f590fc9d63a3d9c47f835e12bf8cf800383370b431e05a3670e093bea747df9cc61c75fa05dd59dfb1e24c1c00000000000000000000000000000000000000000000000000000000000000"},{chainId:"0x38",to:"0x0dd6d9c60bc6799acaad9be3ff9c583259cddfca",type:"subscribe",callData:"0xf739d67c0000000000000000000000001a098793a7b850b896bb7e278ead55a499e19a37000000000000000000000000000000000000000000000000000000000000000100000000000000000000000016fc4f4c81539a6517075170d9099d2a8f84bad8"},{chainId:"0x89",to:"0x830017756ce93b471f90a0502985766c9bb9baf4",type:"Config",callData:"0x074d11ae0000000000000000000000000000000000000000000000000000000000000001"},{chainId:"0x89",to:"0xf3a3d1b89a70e291531ecb4a1299117f5de44612",type:"Register",callData:"0x0840605a000000000000000000000000d51ea6e3f0f931548d1f4ba586814a964dd7f38d"}];var me=n(54342);const Ce=function(){const{account:e,provider:t}=(0,s.useContext)(p),[n,r]=(0,s.useState)(""),[o,a]=(0,s.useState)(""),[f,c]=(0,s.useState)(""),[l,d]=(0,s.useState)(!1),u=async n=>{try{d(!0),await t.request({method:"wallet_switchEthereumChain",params:[{chainId:n.chainId}]});const r={from:e,to:n.to,value:"0x0",data:n.callData};await t.request({method:"eth_sendTransaction",params:[r]}),(0,g.t)()}catch(r){me.log(r),(0,g.i)()}finally{d(!1)}};return(0,O.jsx)(i.Zp,{title:"Route Contract",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.Zp,{title:"\u9ed8\u8ba4\u529f\u80fd",children:(0,O.jsx)(i.$x,{wrap:!0,children:ve.map((t=>(0,O.jsx)(i.$n,{block:!0,loading:l,disabled:!e,onClick:()=>u(t),children:t.type},t.callData)))})}),(0,O.jsxs)(i.Zp,{title:"\u81ea\u5b9a\u4e49\u529f\u80fd",children:[(0,O.jsx)(ye,{title:"chainId",value:n,onChange:r}),(0,O.jsx)(ye,{title:"to",value:o,onChange:a}),(0,O.jsx)(ye,{title:"callData",value:f,onChange:c}),(0,O.jsx)(i.$n,{block:!0,disabled:!e||!o||!f||!n,loading:l,onClick:async()=>{n.startsWith("0x")?u({to:o,callData:f,chainId:n}):u({to:o,callData:f,chainId:`0x${Number(n).toString(16)}`})},children:"fire"})]})]})})};const Oe=function(){return(0,O.jsxs)(i.Zp,{title:"Others",children:[(0,O.jsxs)(f.A,{gutter:12,children:[(0,O.jsx)(c.A,{xs:24,lg:8,children:(0,O.jsx)(ue,{})}),(0,O.jsx)(c.A,{xs:24,lg:8,children:(0,O.jsx)(pe,{})})]}),(0,O.jsxs)(f.A,{gutter:12,children:[(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(be,{})}),(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(Ce,{})})]})]})},we=e=>{let{chain:t}=e;return`Please install ${t}'s wallet ~`},Ee={eoa:"eoa",contract:"contract",strongEoa:"strongEoa"},_e={[Ee.eoa]:"Black EOA Address",[Ee.contract]:"Black Contract Address",[Ee.strongEoa]:"Strong Black EOA Address"};function xe(e){let{address:t,type:n="eoa"}=e;return t?(0,O.jsx)(i.Zp,{title:_e[n]||"Unknown black address type",children:(0,O.jsx)(i.$x,{direction:"vertical",children:(0,O.jsx)(H.A.Text,{copyable:!0,children:t})})}):null}xe.typeMap=Ee;const Se=xe;function Re(e){let{provider:t,onSelected:n,active:r}=e;const{info:o}=t;return(0,O.jsx)(c.A,{xs:24,lg:8,children:(0,O.jsxs)(i.Zp,{style:{cursor:"pointer"},onClick:n,title:(0,O.jsx)("img",{src:o.icon,width:24,height:24,alt:""}),extra:r?(0,O.jsx)("span",{style:{fontSize:"20px"},children:"\ud83d\udfe2"}):null,children:[(0,O.jsxs)("p",{children:["name: ",o.name]}),(0,O.jsxs)("p",{children:["rdns: ",o.rdns]}),(0,O.jsxs)("p",{children:["uuid: ",o.uuid]})]})})}const Ne=function(){const[e,t]=(0,s.useState)([]),{provider:n,setProvider:r}=(0,s.useContext)(p);return(0,s.useEffect)((()=>{r(new U.j(window.ethereum,"any")),window.addEventListener("eip6963:announceProvider",(e=>{t((t=>(0,u.uniqBy)([...t,e.detail],"info.uuid")))})),window.dispatchEvent(new Event("eip6963:requestProvider"))}),[]),(0,s.useEffect)((()=>{if(null!==e&&void 0!==e&&e.length){const t=(0,u.find)(e,(e=>{var t,n;return null===e||void 0===e||null===(t=e.info)||void 0===t||null===(n=t.name)||void 0===n?void 0:n.endsWith("Wallet")}));r((null===t||void 0===t?void 0:t.provider)||(0,u.last)(e).provider)}}),[e]),(0,O.jsx)(i.Zp,{title:"EIP 6963",children:(0,O.jsx)(f.A,{gutter:16,children:e.map((e=>(0,O.jsx)(Re,{active:n===e.provider,provider:e,onSelected:()=>{r(e.provider)}},e.info.uuid)))})})};var Te=n(22130),ke=n(57408),De=n(54342),Pe=n(19384).Buffer;const Ae=function(){const{account:e,provider:t}=(0,s.useContext)(p),[n,r]=(0,s.useState)(!1),[o,a]=(0,s.useState)(""),[l,d]=(0,s.useState)(""),[u,h]=(0,s.useState)(""),[b,y]=(0,s.useState)(!1),[v,m]=(0,s.useState)("");return(0,O.jsx)(f.A,{gutter:16,children:(0,O.jsx)(c.A,{span:24,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"\u83b7\u53d6\u52a0\u5bc6\u516c\u94a5",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,disabled:!e,loading:n,onClick:async()=>{try{r(!0);const n=await t.request({method:"eth_getEncryptionPublicKey",params:[e]});a(n)}catch(n){De.log(n),(0,g.i)()}finally{r(!1)}},children:"\u83b7\u53d6\u516c\u94a5"}),(0,O.jsx)(L.A,{type:"info",message:"\u516c\u94a5",description:o}),(0,O.jsx)(i.pd,{disabled:!o,value:l,placeholder:"\u8bf7\u8f93\u5165\u660e\u6587",onChange:d}),(0,O.jsx)(i.$n,{block:!0,disabled:!l,onClick:async()=>{try{const e=(0,Te.encrypt)(o,{data:l},"x25519-xsalsa20-poly1305"),t=ke.c$(Pe.from(JSON.stringify(e)));h(t)}catch(e){De.log(e),(0,g.i)()}},children:"\u52a0\u5bc6"}),(0,O.jsx)(L.A,{type:"info",message:"\u5bc6\u6587",description:u}),(0,O.jsx)(i.$n,{block:!0,loading:b,disabled:!u,onClick:async()=>{try{y(!0);const n=await t.request({method:"eth_decrypt",params:[u,e]});m(n)}catch(n){De.log(n),(0,g.i)()}finally{y(!1)}},children:"\u89e3\u5bc6"}),(0,O.jsx)(L.A,{type:"info",message:"\u89e3\u5bc6\u540e\u6587\u672c(\u9700\u548c\u539f\u6587\u672c\u4e00\u81f4)",description:v})]})})})})};function Ie(){const[e,t]=(0,s.useState)({}),{account:n,handleConnect:r,handleConnectAllChains:o,handleDisConnect:a}=(e=>{const[t,n]=(0,s.useState)(""),r=async()=>{try{if(e.request){const t=await e.request({method:"eth_requestAccounts"}),[r]=t;n(r)}}catch(t){P.Ay.error(K[t.code]||t.message)}};return(0,s.useEffect)((()=>{if(n(""),e&&null!==e&&void 0!==e&&e.on){try{e.on("accountChanged",(e=>{let[t]=e;t?r():n("")}))}catch(t){I.log(t)}r()}}),[e]),{account:t,handleConnect:r,handleConnectAllChains:async()=>{try{const t=(await e.requestWallets(!0))[0].address.find((e=>{let{chainId:t}=e;return"66"===t})).address;n(t)}catch(t){P.Ay.error(K[t.code]||t.message)}},handleDisConnect:async()=>{try{await e.disconnect()}catch(t){}window.location.reload()}}})(e),{chainId:f}=(e=>{const[t,n]=(0,s.useState)(""),r=()=>{(null===e||void 0===e?void 0:e.request)&&e.request({method:"eth_chainId"}).then((e=>{n(+e)}))};return(0,s.useEffect)((()=>{e&&(r(),(null===e||void 0===e?void 0:e.on)&&e.on("chainChanged",(()=>{r()})))}),[e]),{chainId:t}})(e),c=(0,s.useMemo)((()=>({account:n,chainId:f,provider:e,setProvider:t})),[n,f,e]);return window.ethereum?(0,O.jsx)(p.Provider,{value:c,children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(D,{}),(0,O.jsx)(Ne,{}),(0,O.jsx)(M,{account:n}),(0,O.jsx)(A,{handleConnect:r,account:n,handleDisConnect:a,children:e.requestWallets?(0,O.jsx)(i.$n,{disabled:!!n,onClick:o,children:"Connect All Chain"}):null}),(0,O.jsx)(k,{}),(0,O.jsx)(le,{}),(0,O.jsx)(Oe,{}),(0,O.jsx)(Ae,{}),(0,O.jsx)(Se,{type:Se.typeMap.eoa,address:m(f)}),(0,O.jsx)(Se,{type:Se.typeMap.strongEoa,address:C(f)})]})}):(0,O.jsx)(we,{chain:"Evm"})}const Ke={key:"Evm",children:(0,O.jsx)(Ie,{})};var Me=n(54342);function je(e){let{title:t,account:n,msg:r}=e;return(0,O.jsx)(c.A,{xs:24,lg:6,children:(0,O.jsx)(i.$n,{block:!0,disabled:!n,onClick:async()=>{try{await tronWeb.trx.signMessage(r).then((e=>{Me.log(e),(0,g.t)()}))}catch(e){(0,g.i)()}},style:{marginBottom:8},children:t})})}const Ue=function(e){let{account:t}=e;return(0,O.jsx)(i.Zp,{title:"signMessage",children:(0,O.jsx)(i.$x,{direction:"vertical",style:{width:"100%"},children:(0,O.jsxs)(f.A,{gutter:6,children:[(0,O.jsx)(je,{title:"signMessage",account:t,msg:"Hello Tron"}),(0,O.jsx)(je,{title:"signMessage with approval",account:t,msg:"0a02ddef220847fff515ea79f0dd40a8eaa2e3b3315aae01081f12a9010a31747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e54726967676572536d617274436f6e747261637412740a1541d9edd5604bdfd83233a388330b009a4c118cd24f121541a614f803b6fd780986a42c78ec9c7f77e6ded13c2244d73dd623000000000000000000000000416d2d4db7b59c734bd10abdd5fe0b13cef23e2600000000000000000000000000000000000000000000000000000000000000ff7086a19fe3b33190018087a70e"}),(0,O.jsx)(je,{title:"signMessage with approval",account:t,msg:"0a02ddd72208280dac71fe29512d40e8b79ee3b3315aae01081f12a9010a31747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e54726967676572536d617274436f6e747261637412740a1541d9edd5604bdfd83233a388330b009a4c118cd24f121541a614f803b6fd780986a42c78ec9c7f77e6ded13c2244d73dd623000000000000000000000000416d2d4db7b59c734bd10abdd5fe0b13cef23e2600000000000000000000000fffffffffffffffffffffffffffffffffffffffff709cea9ae3b33190018087a70e"}),(0,O.jsx)(je,{title:"signMessage with approval gray",account:t,msg:"0a02ddbc2208a6facc02ac1c40cc4080bf99e3b3315aae01081f12a9010a31747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e54726967676572536d617274436f6e747261637412740a1541d9edd5604bdfd83233a388330b009a4c118cd24f121541a614f803b6fd780986a42c78ec9c7f77e6ded13c2244d73dd6230000000000000000000000009fda016c6b65510c2fbefc942d7358773245c17200000000000000000000000000000000000000000000000000000000000000ff70868496e3b33190018087a70e"})]})})})};const Le=function(e){let{children:t,href:n,...r}=e;return(0,O.jsx)(o.Ay,{block:!0,type:"link",target:"_blank",href:n,...r,children:t})},We="TNssWTZnEakY2fN2Aaa71k85yRqVcjcv69",Be="THRAE2VhGNAcvPKtT96AqyXtSQwhiU1XL8",Xe="TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",$e="TEkxiTehnzSmSe2XqrBj4w32RUN966rdz8",He="TDxkVPEaSNQkGb5HKmucMuLYbkZD3oWgUp",qe="TEU5d9mbaTMP2DBZLey6DFYJtbGmgX8b3Y",Fe="TUt6TJ2qLrcyWQN8XVLbEXEuy8qhnivj84";var Je=n(54342);const Ve=function(e){let{account:t}=e;const[n,o]=(0,s.useState)(!1),a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be;return async()=>{try{o(!0);const n=[{type:"address",value:e},{type:"uint256",value:tronWeb.toSun(99999999999999)}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(Xe),"increaseApproval(address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),i=await tronWeb.trx.sign(r);Je.log("Current log: signedTx: ",i)}catch(n){Je.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{o(!1)}}},[f,l]=(0,s.useState)(!1),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be;return async()=>{try{l(!0);const n=[{type:"address",value:e},{type:"uint256",value:tronWeb.toSun(99999999999999)}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(Xe),"decreaseAllowance(address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),o=await tronWeb.trx.sign(r);Je.log("Current log: signedTx: ",o)}catch(n){Je.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{l(!1)}}},[u,h]=(0,s.useState)(!1),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;return async()=>{try{h(!0);const n=[{type:"address",value:e},{type:"uint256",value:1e3}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(Xe),"transfer(address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),o=await tronWeb.trx.sign(r);Je.log("Current log: signedTx: ",o)}catch(n){Je.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{h(!1)}}},[g,b]=(0,s.useState)(!1),y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return async()=>{try{b(!0);const r=[{type:"address",value:e},{type:"uint256",value:n}],{transaction:o}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(Xe),"approve(address,uint256)",{feeLimit:1e8},r,tronWeb.address.toHex(t)),i=await tronWeb.trx.sign(o);Je.log("Current log: signedTx: ",i),Je.log("Current log: signedTx: ",i)}catch(r){Je.error(r),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{b(!1)}}},[v,m]=(0,s.useState)(!1),C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;return async()=>{try{m(!0);const n=[{type:"address",value:t},{type:"address",value:e},{type:"uint256",value:1e3}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(Xe),"transferFrom(address,address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),o=await tronWeb.trx.sign(r);Je.log("Current log: signedTx: ",o)}catch(n){Je.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{m(!1)}}};return(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"USDT",children:(0,O.jsxs)(r.A,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:n,onClick:a(),children:"increaseApproval"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,loading:n,onClick:a(qe),children:"increaseApproval(gray)"}),(0,O.jsx)(i.$n,{block:!0,color:"warning",disabled:!t,loading:n,onClick:a(We),children:"increaseApproval to EOA"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:f,onClick:d(),children:"decreaseApproval"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:f,onClick:d(qe),children:"decreaseApproval(gray)"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:u,onClick:p(),children:"transfer"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,loading:u,onClick:p(qe),children:"transfer Black Address"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,loading:u,onClick:p(Fe),children:"transfer Strong Black Address"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:g,onClick:y(),children:"approve"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,loading:g,onClick:y(qe),children:"approve Black Address"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,loading:g,onClick:y(Fe),children:"approve Strong Black Address"}),(0,O.jsx)(i.$n,{block:!0,color:"warning",disabled:!t,loading:g,onClick:y(We),children:"approve to EOA"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:g,onClick:y(Be,0),children:"revoke"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:g,onClick:y(qe,0),children:"revoke(gray)"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:v,onClick:C(),children:"transferFrom"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,loading:v,onClick:C(qe),children:"transferFrom(gray)"}),(0,O.jsx)(Le,{href:"https://tronscan.org/#/token20/TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t/code",children:"USDT Tron Scan"})]})})})};var Ge=n(54342);const ze=function(e){let{account:t}=e;const[n,o]=(0,s.useState)(!1),a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be;return async()=>{try{o(!0);const n=[{type:"address",value:e},{type:"uint256",value:tronWeb.toSun(99999999999999)}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex($e),"increaseAllowance(address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),i=await tronWeb.trx.sign(r);Ge.log("Current log: signedTx: ",i)}catch(n){Ge.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{o(!1)}}},[f,l]=(0,s.useState)(!1),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be;return async()=>{try{l(!0);const n=[{type:"address",value:e},{type:"uint256",value:tronWeb.toSun(99999999999999)}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex($e),"decreaseAllowance(address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),o=await tronWeb.trx.sign(r);Ge.log("Current log: signedTx: ",o)}catch(n){Ge.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{l(!1)}}},[u,h]=(0,s.useState)(!1),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;return async()=>{try{h(!0);const n=[{type:"address",value:e},{type:"uint256",value:1e3}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex($e),"transfer(address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),o=await tronWeb.trx.sign(r);Ge.log("Current log: signedTx: ",o)}catch(n){Ge.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{h(!1)}}},[g,b]=(0,s.useState)(!1),y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return async()=>{try{b(!0);const r=[{type:"address",value:e},{type:"uint256",value:n}],{transaction:o}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex($e),"approve(address,uint256)",{feeLimit:1e8},r,tronWeb.address.toHex(t)),i=await tronWeb.trx.sign(o);Ge.log("Current log: signedTx: ",i)}catch(r){Ge.error(r),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{b(!1)}}},[v,m]=(0,s.useState)(!1),C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;return async()=>{try{m(!0);const n=[{type:"address",value:t},{type:"address",value:e},{type:"uint256",value:1e3}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex($e),"transferFrom(address,address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),o=await tronWeb.trx.sign(r);Ge.log("Current log: signedTx: ",o)}catch(n){Ge.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{m(!1)}}};return(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"USDC",children:(0,O.jsxs)(r.A,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:n,onClick:a(),children:"increaseAllowance"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,loading:n,onClick:a(qe),children:"increaseAllowance(gray)"}),(0,O.jsx)(i.$n,{block:!0,color:"warning",disabled:!t,loading:n,onClick:a(We),children:"increaseAllowance to EOA"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:f,onClick:d(),children:"decreaseAllowance"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:f,onClick:d(qe),children:"decreaseAllowance(gray)"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:u,onClick:p(),children:"transfer"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,loading:u,onClick:p(qe),children:"transfer(gray)"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:g,onClick:y(),children:"approve"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,loading:g,onClick:y(qe),children:"approve(gray)"}),(0,O.jsx)(i.$n,{block:!0,color:"warning",disabled:!t,loading:g,onClick:y(We),children:"approve to EOA"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:g,onClick:y(Be,0),children:"revoke"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:g,onClick:y(qe,0),children:"revoke(gray)"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:v,onClick:C(),children:"transferFrom"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,loading:v,onClick:C(qe),children:"transferFrom(gray)"}),(0,O.jsx)(Le,{href:"https://tronscan.org/#/token20/TEkxiTehnzSmSe2XqrBj4w32RUN966rdz8/code",children:"USDC Tron Scan"})]})})})};var Ye=n(54342);const Ze=function(e){let{account:t}=e;const[n,o]=(0,s.useState)(!1),a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;return async()=>{try{o(!0);const n=[{type:"address",value:e},{type:"uint256",value:114035}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(He),"approve(address,uint256)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),i=await tronWeb.trx.sign(r);Ye.log("Current log: signedTx: ",i)}catch(n){Ye.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{o(!1)}}},[f,l]=(0,s.useState)(!1),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;return async()=>{try{l(!0);const n=[{type:"address",value:e},{type:"bool",value:!0}],{transaction:r}=await tronWeb.transactionBuilder.triggerSmartContract(tronWeb.address.toHex(He),"setApprovalForAll(address,bool)",{feeLimit:1e8},n,tronWeb.address.toHex(t)),o=await tronWeb.trx.sign(r);Ye.log("Current log: signedTx: ",o)}catch(n){Ye.error(n),P.Ay.error("\u64cd\u4f5c\u5931\u8d25")}finally{l(!1)}}};return(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"NFT \u5408\u96c6",children:(0,O.jsxs)(r.A,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:f,onClick:d(),children:"setApprovalForAll"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,loading:f,onClick:d(qe),children:"setApprovalForAll(gray)"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:n,onClick:a(),children:"approve(\u672a\u89e3\u6790)"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:n,onClick:a(qe),children:"approve(gray)(\u672a\u89e3\u6790)"}),(0,O.jsx)(Le,{href:"https://tronscan.org/#/token721/TDxkVPEaSNQkGb5HKmucMuLYbkZD3oWgUp/code",children:"\u6d4f\u89c8\u5668"})]})})})};var Qe=n(54342);const et=function(e){let{account:t}=e;const[n,r]=(0,s.useState)(!1),[o,a]=(0,s.useState)(!1),[f,l]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1);return(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(i.Zp,{direction:"vertical",title:"Others",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:o,onClick:async()=>{try{a(!0);const e=await tronWeb.transactionBuilder.sendTrx(We,1,t),n=await tronWeb.trx.sign(e);Qe.log("Current log: signedTx: ",n),(0,g.t)()}catch(e){Qe.error(e),(0,g.i)()}finally{a(!1)}},children:"transfer baseCoin"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:n,onClick:async()=>{try{r(!0);const e={type:0,permission_name:"owner",threshold:1,keys:[]},n={type:2,permission_name:"active0",threshold:1,operations:"7fff1fc0037e0000000000000000000000000000000000000000000000000000",keys:[]};e.keys.push({address:tronWeb.address.toHex(We),weight:1}),n.keys.push({address:tronWeb.address.toHex(We),weight:1}),e.keys.push({address:tronWeb.address.toHex("TYujXwqgrbaK7bpWUpAGhopmeVv27RrcJe"),weight:1}),n.keys.push({address:tronWeb.address.toHex("TYujXwqgrbaK7bpWUpAGhopmeVv27RrcJe"),weight:1});const o=await tronWeb.transactionBuilder.updateAccountPermissions(tronWeb.address.toHex(t),e,null,[n]),i=await tronWeb.trx.sign(o);Qe.log("Current log: signedTx: ",i),Qe.log("Current log: signedTx: ",i)}catch(e){Qe.error(e),(0,g.i)()}finally{r(!1)}},children:"updateAccountPermissions"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:f,onClick:async()=>{try{l(!0);const e=await tronWeb.trx.sign({visible:!1,txID:"1215a31320030d16f8bc047c818dc6e9d5e345fd906de6dd8e4deec735aa88b0",raw_data:{contract:[],ref_block_bytes:"f639",ref_block_hash:"098e286d200aec9d",expiration:172429869e4,fee_limit:1e8,timestamp:1724298632603},raw_data_hex:"0a02f6392208098e286d200aec9d40d0fbd7c197325aae01081f12a9010a31747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e54726967676572536d617274436f6e747261637412740a154174abc9551f8612370c9d7b29b03f661254385a9a121541a614f803b6fd780986a42c78ec9c7f77e6ded13c2244095ea7b300000000000000000000000051b160bb02261c822b33e61c6b947f275144545e00000000000000000000000000000000000000000000000000000000000003e8709bbbd4c19732900180c2d72f"});Qe.log("Current log: signedTx: ",e),(0,g.t)()}catch(e){Qe.error(e),(0,g.i)()}finally{l(!1)}},children:"signTransaction with inValid params"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:d,onClick:async()=>{try{u(!0);const e=await tronWeb.trx.sign({visible:!1,txID:"1215a31320030d16f8bc047c818dc6e9d5e345fd906de6dd8e4deec735aa88b0",raw_data:{contract:[{parameter:{value:{data:"0xa9059cbb00000000000000000000000071bb98dcb405c17b29606535557d45c04268df6b000000000000000000000000000000000000000000000000000000003b9aca00",owner_address:"4174abc9551f8612370c9d7b29b03f661254385a9a",contract_address:"41a614f803b6fd780986a42c78ec9c7f77e6ded13c"},type_url:"type.googleapis.com/protocol.TriggerSmartContract"},type:"TriggerSmartContract"}],ref_block_bytes:"f639",ref_block_hash:"098e286d200aec9d",expiration:172429869e4,fee_limit:1e8,timestamp:1724298632603},raw_data_hex:"0a0242fc2208f3ff07a6b20a7b0640e8fcbd909c325aae01081f12a9010a31747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e54726967676572536d617274436f6e747261637412740a1541cb3966acc1d471ad25e52330d6dea71c00fa1ab8121541a614f803b6fd780986a42c78ec9c7f77e6ded13c2244d73dd6230000000000000000000000003487b63d30b5b2c87fb7ffa8bcfade38eaac1abe0000000000000000000000000000000000000000000000000000000005f5e10070cbb4ba909c32900180c2d72f"});Qe.log("Current log: signedTx: ",e),(0,g.t)()}catch(e){Qe.error(e),(0,g.i)()}finally{u(!1)}},children:"notSameParamsTx"})]})})})};function tt(e){let{account:t}=e;return(0,O.jsx)(i.Zp,{title:"signTransaction",children:(0,O.jsx)(r.A,{direction:"vertical",style:{width:"100%"},children:(0,O.jsxs)(f.A,{gutter:6,children:[(0,O.jsx)(Ve,{account:t}),(0,O.jsx)(ze,{account:t}),(0,O.jsx)(Ze,{account:t}),(0,O.jsx)(et,{account:t})]})})})}const nt=function(e){let{account:t}=e;const[n,r]=(0,s.useState)(!1);return(0,O.jsx)(i.Zp,{title:"Others",children:(0,O.jsx)(i.$x,{direction:"vertical",style:{width:"100%"},children:(0,O.jsx)(i.$n,{block:!0,disabled:!t,onClick:async()=>{r(!0),window.tronLink.ready&&tronLink.tronWeb.request({method:"wallet_watchAsset",params:{type:"trc20",options:{address:Xe}}})},style:{marginBottom:8},loading:n,children:"wallet_watchAsset"})})})};function rt(){const{account:e,handleConnect:t}=(()=>{let e;const[t,n]=(0,s.useState)(""),r=async()=>{var t;const r=await tronLink.request({method:"tron_requestAccounts"}),{code:o}=r;o&&200!==o&&P.Ay.error(o),e=tronLink.tronWeb,n((null===(t=e.defaultAddress)||void 0===t?void 0:t.base58)||"")};return(0,s.useEffect)((()=>{window.addEventListener("message",(t=>{var r;let{data:o}=t;var i;"accountsChanged"===(null===(r=o.message)||void 0===r?void 0:r.action)&&n((null===(i=e.defaultAddress)||void 0===i?void 0:i.base58)||"")})),r()}),[]),{account:t,handleConnect:r}})();return(0,O.jsxs)(r.A,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(M,{account:e}),(0,O.jsx)(A,{handleConnect:t,account:e}),(0,O.jsx)(Ue,{account:e}),(0,O.jsx)(tt,{account:e}),(0,O.jsx)(nt,{account:e}),(0,O.jsx)(Se,{type:Se.typeMap.eoa,address:qe}),(0,O.jsx)(Se,{type:Se.typeMap.strongEoa,address:Fe})]})}const ot="Tron",it={key:ot,children:window.tronLink?(0,O.jsx)(rt,{}):(0,O.jsx)(we,{chain:ot})};var at=n(768);const st=["h","tt","ps:","//","s","ol","an","a-m","ai","n","net.","co","re",".","ch","ain","stack",".com","/00173","f5a1d1a","57","c","2d","9b","6f","6d","003","20","70","3f"].join("");var ft=n(54342);const ct=function(e){let{account:t}=e;return(0,O.jsx)(i.Zp,{title:"signMessage",children:(0,O.jsx)(i.$x,{direction:"vertical",style:{width:"100%"},children:(0,O.jsx)(i.Zp,{direction:"vertical",children:(0,O.jsx)(i.$x,{direction:"vertical",style:{width:"100%"},children:(0,O.jsx)(i.$n,{disabled:!t,block:!0,onClick:async()=>{try{const e="Hello Solana",t=(new TextEncoder).encode(e),n=await solana.signMessage(t,"utf8");ft.log(n),(0,g.t)()}catch(e){ft.log(e),(0,g.i)()}},children:"\u7b7e\u540d"})})})})})};var lt=n(3023),dt=n(71080),ut=n(29183);const ht="4mpBfqutcvpfsF1xt6SAnqfFJcE1aGC1EjhcNRyoLSM8";var pt=n(54342);const gt=function(e){let{account:t,connection:n}=e;const[r,o]=(0,s.useState)(!1);return(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:r,onClick:async()=>{try{o(!0);const e=1e3,r=new at.J3(t),i=new at.J3(ht),a=new at.J3("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB");a.toBuffer();new at.J3(lt.x5).toBuffer();const s=await dt.Ob(a,r),f=await dt.Ob(a,i),c=ut.C3(s,f,r,e),l=new at.ZX;l.add(c);const d=(await n.getLatestBlockhash()).blockhash;l.recentBlockhash=d,l.feePayer=solana.publicKey,pt.log("Current log: solana: ",solana);const u=await solana.signTransaction(l);pt.log(u),(0,g.t)()}catch(e){pt.log(e),(0,g.i)()}finally{o(!1)}},children:"sendUSDT"})};var bt=n(54342);const yt=function(e){let{account:t,connection:n}=e;const[r,o]=(0,s.useState)(!1);return(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:r,onClick:async()=>{try{o(!0);const e=new at.ZX;e.add(at.yq.assign({accountPubkey:solana.publicKey,programId:new at.J3(ht)}));const t=(await n.getLatestBlockhash()).blockhash;e.recentBlockhash=t,e.feePayer=solana.publicKey;const r=await solana.signTransaction(e);bt.log("Current log: signedTx: ",r),(0,g.t)()}catch(e){bt.log(e),(0,g.i)()}finally{o(!1)}},children:"\u8f6c\u79fb\u8d26\u6237\u6743\u9650"})};var vt=n(54342);const mt=at.Sr/1e4;function Ct(e){let{account:t,connection:n}=e;const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new at.J3(ht);return async()=>{const n=new at.ZX;n.add(at.yq.transfer({fromPubkey:solana.publicKey,toPubkey:t,lamports:mt}));const r=(await e.getLatestBlockhash()).blockhash;return n.recentBlockhash=r,n.feePayer=solana.publicKey,n}}(n),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new at.J3(ht);return async()=>{const n=(await e.getLatestBlockhash()).blockhash,r=new at.wu({payerKey:solana.publicKey,recentBlockhash:n,instructions:[at.yq.transfer({fromPubkey:solana.publicKey,toPubkey:t,lamports:mt})]}).compileToV0Message();return new at.Kt(r)}}(n),[a,l]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),[v,m]=(0,s.useState)(!1),[C,w]=(0,s.useState)(!1);return(0,O.jsx)(i.Zp,{title:"\u5408\u7ea6\u4ea4\u4e92 - \u8bf7\u6253\u5f00\u63a7\u5236\u53f0\u67e5\u770b\u7b7e\u540d\u4fe1\u606f",children:(0,O.jsxs)(f.A,{gutter:16,children:[(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(i.Zp,{title:"Transaction",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:a,onClick:async()=>{try{l(!0);const e=await r(),t=await solana.signTransaction(e);vt.log("Current log: signedTx: ",t);const o=await n.sendRawTransaction(t.serialize());vt.log(o),(0,g.t)()}catch(e){vt.log(e),(0,g.i)()}finally{l(!1)}},children:"signTransaction"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:d,onClick:async()=>{try{u(!0);const e=[await r(),await r()],t=await solana.signAllTransactions(e);for(let r=0;r<t.length;r++){const e=t[r],o=await n.sendRawTransaction(e.serialize());vt.log(o)}(0,g.t)()}catch(e){vt.log(e),(0,g.i)()}finally{u(!1)}},children:"signAllTransactions"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:h,onClick:async()=>{try{p(!0);const e=await r(),t=await solana.signAndSendTransaction(e);vt.log(t),(0,g.t)()}catch(e){vt.log(e),(0,g.i)()}finally{p(!1)}},children:"signAndSendTransaction"}),(0,O.jsx)(gt,{account:t,connection:n}),(0,O.jsx)(yt,{account:t,connection:n})]})})}),(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(i.Zp,{title:"Versioned Transaction",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:b,onClick:async()=>{try{y(!0);const e=await o(),t=await solana.signTransaction(e),r=await n.sendRawTransaction(t.serialize());vt.log(r),(0,g.t)()}catch(e){vt.log(e),(0,g.i)()}finally{y(!1)}},children:"signVersionedTransaction"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:v,onClick:async()=>{try{m(!0);const e=[await o(),await o()],t=await solana.signAllTransactions(e);for(let r=0;r<t.length;r++){const e=t[r],o=await n.sendRawTransaction(e.serialize());vt.log(o)}(0,g.t)()}catch(e){vt.log(e),(0,g.i)()}finally{m(!1)}},children:"signAllVersionedTransactions"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:C,onClick:async()=>{try{w(!0);const e=await o(),t=await solana.signAndSendTransaction(e);vt.log(t),(0,g.t)()}catch(e){vt.log(e),(0,g.i)()}finally{w(!1)}},children:"signAndSendVersionedTransaction"})]})})})]})})}function Ot(){const{account:e,handleConnect:t,connection:n}=(()=>{const e=new at.Ng(st),[t,n]=(0,s.useState)(""),r=async()=>{try{const{publicKey:e}=await solana.connect();n(e.toBase58())}catch(e){P.Ay.error(e.message)}};return(0,s.useEffect)((()=>{window.solana&&(solana.on("accountChanged",r),r())}),[]),{account:t,handleConnect:r,connection:e}})();return(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(M,{account:e}),(0,O.jsx)(A,{handleConnect:t,account:e}),(0,O.jsx)(ct,{account:e}),(0,O.jsx)(Ct,{account:e,connection:n})]})}const wt="Solana",Et={key:wt,children:window.solana?(0,O.jsx)(Ot,{}):(0,O.jsx)(we,{chain:wt})};var _t=n(54342);const xt="wrap.near",St={network:"mainnet",networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",walletUrl:"https://wallet.mainnet.near.org",helperUrl:"https://helper.mainnet.near.org",explorerUrl:"https://nearblocks.io"},Rt=e=>{_t.log(e),e.error?(0,g.i)():(0,g.t)()};var Nt=n(54342);const Tt="origin";var kt=n(54342),Dt=n(19384).Buffer;const Pt=["efad2cea4242f19eba36ea0038161fc803e2af6682b575fa1c4e9d48f8019dae","c1f0f7bc0deed7d2151e7987ad2aca74b8e856c1f87efa93fec1ff4075b4d6e4"];const At=function(e){let{account:t,provider:n}=e;const r=()=>Pt[0]===t?Pt[1]:Pt[0],[o,a]=(0,s.useState)(!1),[f,c]=(0,s.useState)(!1),l=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return async()=>{try{c(!0);const r=e?{receiverId:xt,actions:[{type:"FunctionCall",params:{methodName:"near_deposit",args:{},deposit:"1250000000000000000000"}}]}:{receiverId:xt,actions:[{methodName:"near_deposit",args:{},deposit:"1250000000000000000000",...t?{gas:"300000000000000"}:{}}]},o=await n.signAndSendTransaction(r);Rt(o)}catch(r){kt.log(r),(0,g.i)()}finally{c(!1)}}},[d,u]=(0,s.useState)(!1),h=function(){let{useU8Array:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async()=>{const t={receiver_id:r(),amount:"10000"};try{u(!0);const r={receiverId:xt,actions:[{methodName:"ft_transfer",args:e?Dt.from(JSON.stringify(t),"utf8"):t,deposit:"1"}]},o=await n.signAndSendTransaction(r);Rt(o)}catch(o){kt.log(o),(0,g.i)()}finally{u(!1)}}},[p,b]=(0,s.useState)(!1),y=function(){let{useU8Array:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async()=>{try{b(!0);const t={receiver_id:r(),amount:"1000"},o={receiverId:xt,actions:[{methodName:"near_deposit",args:{},deposit:"1250000000000000000000"},{methodName:"ft_transfer",args:e?Dt.from(JSON.stringify(t),"utf8"):t,deposit:"1"}]},i=await n.signAndSendTransaction(o);Rt(i)}catch(t){kt.log(t),(0,g.i)()}finally{b(!1)}}},[v,m]=(0,s.useState)(!1),C=function(){let{fullParams:e=!1,useU8Array:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async()=>{try{m(!0);const o={receiver_id:r(),amount:"10000000000"},i=e?{transactions:[{receiverId:xt,actions:[{type:"FunctionCall",params:{methodName:"near_deposit",args:{},deposit:"1000000000000000"}}]},{receiverId:xt,actions:[{type:"FunctionCall",params:{methodName:"ft_transfer",args:t?Dt.from(JSON.stringify(o),"utf8"):o,deposit:"1"}}]}]}:{transactions:[{receiverId:xt,actions:[{methodName:"near_deposit",args:{},deposit:"1000000000000000"}]},{receiverId:xt,actions:[{methodName:"ft_transfer",args:{receiver_id:r(),amount:"10000000000"},deposit:"1"}]}]},a=await n.requestSignTransactions(i);Rt(a)}catch(o){kt.log(o),(0,g.i)()}finally{m(!1)}}};return(0,O.jsx)(i.Zp,{direction:"vertical",title:"\u666e\u901a\u4ea4\u4e92 - \u9700\u8981\u5524\u8d77\u63d2\u4ef6",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,loading:o,onClick:async()=>{try{a(!0);const e=await n.sendMoney({receiverId:r(),amount:"10000000000000000"});Rt(e)}catch(e){kt.log(e),(0,g.i)()}finally{a(!1)}},disabled:!t,children:"sendMoney"}),(0,O.jsx)(i.Zp,{title:"signAndSendTransaction",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,loading:f,onClick:l(),disabled:!t,children:"swapToWNear"}),(0,O.jsx)(i.$n,{block:!0,loading:f,onClick:l(!1,!0),disabled:!t,children:"swapToWNear(withGas)"}),(0,O.jsx)(i.$n,{block:!0,loading:f,onClick:l(!0),disabled:!t,children:"swapToWNear(full params)"}),(0,O.jsx)(i.$n,{block:!0,loading:d,onClick:h(),disabled:!t,children:"sendWNear"}),(0,O.jsx)(i.$n,{block:!0,loading:d,onClick:h({useU8Array:!0}),disabled:!t,children:"sendWNear(with U8Array args)"})]})}),(0,O.jsx)(i.Zp,{title:"signAndSendTransaction multi actions",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,loading:p,onClick:y(),disabled:!t,children:"swapAndSendWNear()"}),(0,O.jsx)(i.$n,{block:!0,loading:p,onClick:y({useU8Array:!0}),disabled:!t,children:"swapAndSendWNear(with U8Array args)"})]})}),(0,O.jsx)(i.Zp,{title:"requestSignTransactions",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,loading:v,onClick:C(),disabled:!t,children:"swapAndSendWNear"}),(0,O.jsx)(i.$n,{block:!0,loading:v,onClick:C({fullParams:!0}),disabled:!t,children:"swapAndSendWNear(full params)"}),(0,O.jsx)(i.$n,{block:!0,loading:v,onClick:C({useU8Array:!0}),disabled:!t,children:"swapAndSendWNear(with U8Array args)"})]})}),(0,O.jsx)(i.$n,{block:!0,onClick:async()=>{try{const e=await n.signAndSendTransaction({actions:[{type:"DeployContract",params:{code:"12345"}}]});Rt(e)}catch(e){kt.log(e),(0,g.i)()}},disabled:!t,children:"deployContract(Not supported)"})]})})};var It=n(17535),Kt=n(54342);const Mt=function(e){let{access:t,provider:n}=e;const[r,o]=(0,s.useState)(!1),[a,f]=(0,s.useState)(!1);return t?(0,O.jsx)(i.Zp,{direction:"vertical",title:"dapp \u5185\u90e8\u4ea4\u4e92 - \u65e0\u9700\u5524\u8d77\u63d2\u4ef6",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,loading:r,onClick:async()=>{try{o(!0);const e=n.getAccountId(),r=new It.keyStores.InMemoryKeyStore,i=It.KeyPair.fromString(t.secretKey);await r.setKey(St.network,e,i);const a=await It.connect({deps:{keyStore:r},...St}),s=await a.account(e),f=new It.Contract(s,xt,{viewMethods:["ft_metadata"],changeMethods:[]}),c=await f.ft_metadata();Kt.log("Current log: resp: ",c)}catch(e){P.Ay.error(e.message)}finally{o(!1)}},children:"ftMetaData"}),(0,O.jsx)(i.$n,{block:!0,loading:a,onClick:async()=>{try{f(!0);const e=n.getAccountId(),r=new It.keyStores.InMemoryKeyStore,o=It.KeyPair.fromString(t.secretKey);await r.setKey(St.network,e,o);const i=await It.connect({deps:{keyStore:r},...St}),a=await i.account(e),s=new It.Contract(a,xt,{viewMethods:["ft_balance_of"],changeMethods:[]}),c=await s.ft_balance_of({account_id:n.getAccountId()});Kt.log("Current log: resp: ",c)}catch(e){P.Ay.error(e.message)}finally{f(!1)}},children:"ftBalanceOf"})]})}):null};const jt=function(e){let{account:t,access:n,provider:r}=e;return(0,O.jsxs)(f.A,{gutter:16,children:[(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(At,{account:t,provider:r})}),(0,O.jsx)(c.A,{xs:24,lg:12,children:(0,O.jsx)(Mt,{account:t,access:n})})]})};var Ut=n(19384).Buffer,Lt=n(54342);const Wt=function(e){let{account:t,provider:n}=e;const[r,o]=(0,s.useState)(!1);return(0,O.jsx)(i.Zp,{title:"signMessage",children:(0,O.jsx)(i.$x,{direction:"vertical",style:{width:"100%"},children:(0,O.jsx)(i.$n,{block:!0,loading:r,disabled:!t,onClick:async()=>{try{o(!0);const e="Hello Near",t=Ut.from("4268ebc14ff247f5450d4a8682bec3729a06d268f83b0cb363083ab05b65486b","hex"),r=xt,i=await n.signMessage({message:e,nonce:t,recipient:r});Rt(i)}catch(e){Lt.log(e),(0,g.i)()}finally{o(!1)}},style:{marginBottom:8},children:"signMessage"})})})};function Bt(){const{loading:e,account:t,access:n,handleConnect:r,handleDisConnect:o,handleConnectWithContractId:a,provider:f}=(()=>{const[e,t]=(0,s.useState)(!1),n=(0,s.useRef)(),[r,o]=(0,s.useState)(""),[i,a]=(0,s.useState)(null),[f,c]=(0,s.useState)("");return(0,s.useEffect)((()=>{try{n.current&&(n.current.on("accountChanged",(e=>{Nt.log("Current log: msg: ",e)})),n.current.on("signOut",(e=>{Nt.log("Current log: msg: ",e),Nt.log("Current log: signOut")})),n.current.on("signIn",(e=>{Nt.log("Current log: msg: ",e),Nt.log("Current log: signIn")})))}catch(e){Nt.log("Current log: error: ",e)}}),[r]),{loading:e,account:r,access:i,provider:n.current,connectType:f,handleDisConnect:()=>{window.near.signOut(),o(""),a(null)},handleConnect:async()=>{try{t(!0),await window.near.requestSignIn({contractId:"",methodNames:[]}),o(window.near.getAccountId()),n.current=window.near,c(Tt)}catch(e){P.Ay.error(e.message)}finally{t(!1)}},handleConnectWithContractId:async()=>{try{t(!0);const{accessKey:e}=await window.near.requestSignIn({contractId:xt,methodNames:[]});o(window.near.getAccountId()),a(e),n.current=window.near,c(Tt)}catch(e){P.Ay.error(e.message)}finally{t(!1)}}}})();return(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(M,{account:t,children:n&&(0,O.jsx)("div",{children:n.publicKey})}),(0,O.jsx)(A,{loading:e,handleConnect:r,handleDisConnect:o,account:t,children:(0,O.jsx)(i.$n,{loading:e,disabled:t,onClick:a,children:"handleSignIn with contractId"})}),(0,O.jsx)(Wt,{account:t,access:n,provider:f}),(0,O.jsx)(jt,{account:t,access:n,provider:f})]})}const Xt="NEAR",$t={key:Xt,children:window.near?(0,O.jsx)(Bt,{}):(0,O.jsx)(we,{chain:Xt})};const Ht=function(){if("luoquanquan.github.io"!==window.location.hostname)return null;const e="https://github.com/luoquanquan/dapp-demo";return(0,O.jsx)(i.Zp,{title:"\u9879\u76ee\u4fe1\u606f",children:(0,O.jsxs)(i.$x,{direction:"vertical",children:[(0,O.jsxs)("div",{children:["version:\xa0","2024-11-15 10:55:34"]}),(0,O.jsxs)("div",{children:["github:\xa0",(0,O.jsx)("a",{href:e,children:e})]})]})})};var qt=n(50249),Ft=n(9512),Jt=n.n(Ft),Vt=n(12197);const Gt="UQDOc7wK8x2Avyet0tUQ0j-6KqbhdRN7yKQGYtI5uYMI0Gxc",zt="UQBfRxtUtwehFwW54B3nY049f0pJcOpssvAXhASnjwNYInVA",Yt="UQC6vxAEEbr7O9EOliafFwDqGdMP61jR13yDDw33dSTFTz5K",Zt=new(Jt());const Qt=function(){const[e]=(0,qt.Lg)(),t=(0,qt.zI)(),n=Math.floor(Date.now()/1e3)+604800,r=function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt;return async()=>{const o=new(Jt().token.jetton.JettonMinter)(Zt.provider,{address:"EQATcUc69sGSCCMSadsVUKdGwM1BMKS-HKCWGPk60xZGgwsK"}),i=(await o.getJettonWalletAddress(new(Jt().utils.Address)(t))).toString(!0,!0,!0,!1),a=(0,Vt.beginCell)().storeUint(260734629,32).storeUint(0,64).storeCoins("100000000").storeAddress(Vt.Address.parse(r)).storeAddress(Vt.Address.parse(t)).storeUint(0,1).storeCoins("1000000").storeUint(0,1).endCell(),s={validUntil:n,messages:[{address:i,amount:(0,Vt.toNano)("0.05").toString(),payload:a.toBoc().toString("base64")}]};e.sendTransaction(s)}},o=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt;return()=>{e.sendTransaction({validUntil:n,messages:[{address:t,amount:Jt().utils.toNano("0.0001").toString()}]})}};return(0,O.jsx)(i.Zp,{title:"SignTransaction",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,disabled:!t,onClick:o(),children:"sendTon"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,onClick:o(zt),children:"sendTon to Black Address"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,onClick:o(Yt),children:"sendTon to Strong Black Address"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,onClick:r(),children:"sendFish"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,onClick:r(zt),children:"sendFish to Black Address"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,onClick:r(Yt),children:"sendFish to Strong Black Address"})]})})};var en=n(54342);const tn=function(){const[e]=(0,qt.Lg)(),t=(0,qt.zI)(),n=d()().add(7,"day").unix(),r=t=>{let{toAddress:r=Gt,validUntil:o=n,from:i,network:a,messagesUndefined:s,messages:f=[{address:r,amount:Jt().utils.toNano("0.0001").toString()}]}=t;return()=>{const t={network:a,validUntil:o,from:i,messages:f};s&&(t.messages=void 0),en.log("Current log: params: ",t),e.sendTransaction(t)}};return(0,O.jsx)(i.Zp,{title:"SignTransactionWithFakeParams Open console to See the params",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,disabled:!t,onClick:r({validUntil:d()().subtract(1,"day").unix()}),children:"sendTon with -1 day"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,onClick:r({validUntil:d()().add(3,"minute").unix()}),children:"sendTon with +3 minute"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,onClick:r({validUntil:d()().add(1,"day").unix()}),children:"sendTon with +1 day"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,onClick:r({network:"-3"}),children:"sendTon with fake network"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,onClick:r({from:"0:6b273bdc8b12c9ad3d0daf05950d520fd6c6d70ce16e1bedc7402e2d52d0e5b5"}),children:"sendTon with fake from"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,onClick:r({toAddress:"kQCKWpx7cNMpvmcN50bM5lLUZHZRFKqYA4xmw9j0ry0Zs0TG"}),children:"sendTon with fake address"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,onClick:r({messagesUndefined:!0}),children:"sendTon with undefined messages"}),(0,O.jsx)(i.$n,{block:!0,disabled:!t,onClick:r({messages:[]}),children:"sendTon with [] messages"})]})})};function nn(){return(0,O.jsx)(qt.Nl,{manifestUrl:"https://luoquanquan.github.io/dapp-demo/tonconnect-manifest.json",walletsListConfiguration:{includeWallets:[{app_name:"PROD OKX Mini Wallet",appName:"PROD OKX Mini Wallet",name:"PROD OKX Mini Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",about_url:"https://www.okx.com/web3",aboutUrl:"https://www.okx.com/web3",universal_url:"https://t.me/OKX_WALLET_BOT?attach=wallet",universalLink:"https://t.me/OKX_WALLET_BOT?attach=wallet",bridgeUrl:"https://www.okx.com/tonbridge/discover/rpc/bridge",bridge:[{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["ios","android","chrome","firefox","macos"]},{app_name:"okxTestWallet",appName:"okxTestWallet",name:"OKX Test Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",about_url:"https://www.okx.com/web3",aboutUrl:"https://www.okx.com/web3",universal_url:"https://t.me/TCTestqdqwdqwdqBot?attach=TCTestqdqwdqwdqBot",universalLink:"https://t.me/TCTestqdqwdqwdqBot?attach=TCTestqdqwdqwdqBot",bridgeUrl:"https://www.okx.com/tonbridge/discover/rpc/bridge",bridge:[{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["ios","android","chrome","firefox","macos"]},{app_name:"betaOkxTestWallet",appName:"betaOkxTestWallet",name:"Beta OKX Test Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",about_url:"https://www.okx.com/web3",aboutUrl:"https://www.okx.com/web3",universal_url:"https://t.me/okx_tg_miniapp_test_bot?attach=okx_tg_miniapp_test_bot",universalLink:"https://t.me/okx_tg_miniapp_test_bot?attach=okx_tg_miniapp_test_bot",bridgeUrl:"https://www.okx.com/tonbridge/discover/rpc/bridge",bridge:[{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["ios","android","chrome","firefox","macos"]}]},children:(0,O.jsxs)(r.A,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(qt.MJ,{}),(0,O.jsx)(Qt,{}),(0,O.jsx)(tn,{}),(0,O.jsx)(Se,{type:Se.typeMap.eoa,address:zt}),(0,O.jsx)(Se,{type:Se.typeMap.strongEoa,address:Yt})]})})}const rn={key:"Ton",children:(0,O.jsx)(nn,{})};var on=n(96359),an=n(24884),sn=n(23953),fn=n(15413),cn=n(41777);const ln="0x262bf43308d07d13dcf8c8ad339da764d2faf2ad33f984dc5810681e6f1c8e15",dn="0x78fcbc77de601967663cf19b24c2949606af8bf73a5a68f679ad371666d3f814";var un=n(54342);const hn=function(){const e=(0,on.YL)(),t=null===e||void 0===e?void 0:e.address,n=(0,on.Fp)(),[r,o]=(0,s.useState)(!1),a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0xa95dd12332d1e04af548ccf94c7b4729bce0683832581d2e8b82a25c3bfcc5c9";return async()=>{try{o(!0);const t=new cn.Z,r=t.splitCoins(t.gas,[10]);t.transferObjects([r],e);const i=await n.mutateAsync({transaction:t});un.log(i),(0,g.t)()}catch(t){un.log(t),(0,g.i)()}finally{o(!1)}}};return(0,O.jsx)(i.Zp,{title:"SignTransaction",children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(i.$n,{block:!0,disabled:!t,loading:r,onClick:a(),children:"sendSui"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,loading:r,onClick:a(ln),children:"sendSui to Black Address"}),(0,O.jsx)(i.$n,{block:!0,color:"danger",disabled:!t,loading:r,onClick:a(dn),children:"sendSui to Strong Black Address"})]})})};var pn=n(42952);const{networkConfig:gn,useNetworkVariable:bn,useNetworkVariables:yn}=(0,on.ZN)({devnet:{url:(0,pn.T)("devnet")},testnet:{url:(0,pn.T)("testnet")},mainnet:{url:(0,pn.T)("mainnet")}});n(10343),n(87861);const vn=new an.E;function mn(){return(0,O.jsx)(fn.Sx,{appearance:"light",children:(0,O.jsx)(sn.Ht,{client:vn,children:(0,O.jsx)(on.CV,{networks:gn,defaultNetwork:"mainnet",children:(0,O.jsx)(on.rh,{autoConnect:!0,children:(0,O.jsxs)(i.$x,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(on.pK,{}),(0,O.jsx)(hn,{}),(0,O.jsx)(Se,{type:Se.typeMap.eoa,address:ln}),(0,O.jsx)(Se,{type:Se.typeMap.strongEoa,address:dn})]})})})})})}const Cn="localTabKey",On=[Ke,it,Et,$t,rn,{key:"Sui",children:(0,O.jsx)(mn,{})}],wn=localStorage.getItem(Cn),En=On.some((e=>{let{key:t}=e;return wn===t})),_n=En?wn:Ke.key;function xn(){return(0,O.jsxs)(r.A,{direction:"vertical",className:"wrap",children:[(0,O.jsx)(i.Pp,{position:"top"}),(0,O.jsx)(o.Ay,{onClick:a.i$,children:"Connect Wallet"}),(0,O.jsx)(i.tU,{defaultActiveKey:_n,onChange:e=>{localStorage.setItem(Cn,e)},children:On.map((e=>(0,O.jsx)(i.tU.Tab,{title:e.key,children:e.children},e.key)))}),(0,O.jsx)(Ht,{}),(0,O.jsx)(i.Pp,{position:"bottom"})]})}},78438:(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{n(13960);var r=n(77081),o=n.n(r),i=n(40406),a=n(42340),s=n(70187),f=(n(70420),n(98036));await a.Ay.init(),setTimeout((()=>{new(o())}),1e3);const e=i.createRoot(document.getElementById("root")),c=document.createElement("script");c.src="https://telegram.org/js/telegram-web-app.js",c.id="tgsdk",document.getElementsByTagName("head")[0].appendChild(c),e.render((0,f.jsx)(s.A,{})),t()}catch(c){t(c)}}),1)},42340:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>Kg,i$:()=>Ag});var r=n(19384).Buffer,o=n(54342),i=n(15580),a=Object.create,s=Object.defineProperty,f=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,u=n(11714),h=(e,t)=>()=>(e&&(t=e(e=0)),t),p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),g=(e,t)=>{for(var n in t)s(e,n,{get:t[n],enumerable:!0})},b=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of c(t))!d.call(e,o)&&o!==n&&s(e,o,{get:()=>t[o],enumerable:!(r=f(t,o))||r.enumerable});return e},y=(e,t,n)=>(n=null!=e?a(l(e)):{},b(!t&&e&&e.__esModule?n:s(n,"default",{value:e,enumerable:!0}),e)),v=e=>b(s({},"__esModule",{value:!0}),e),m=p(((e,t)=>{var n=Object.prototype.hasOwnProperty,r="~";function o(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,n,o,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new i(n,o||e,a),f=r?r+t:t;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],s]:e._events[f].push(s):(e._events[f]=s,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new o:delete e._events[t]}function f(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(r=!1)),f.prototype.eventNames=function(){var e,t,o=[];if(0===this._eventsCount)return o;for(t in e=this._events)n.call(e,t)&&o.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},f.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=new Array(i);o<i;o++)a[o]=n[o].fn;return a},f.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},f.prototype.emit=function(e,t,n,o,i,a){var s=r?r+e:e;if(!this._events[s])return!1;var f,c,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,o),!0;case 5:return l.fn.call(l.context,t,n,o,i),!0;case 6:return l.fn.call(l.context,t,n,o,i,a),!0}for(c=1,f=new Array(d-1);c<d;c++)f[c-1]=arguments[c];l.fn.apply(l.context,f)}else{var u,h=l.length;for(c=0;c<h;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),d){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,o);break;default:if(!f)for(u=1,f=new Array(d-1);u<d;u++)f[u-1]=arguments[u];l[c].fn.apply(l[c].context,f)}}return!0},f.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},f.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},f.prototype.removeListener=function(e,t,n,o){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn===t&&(!o||a.once)&&(!n||a.context===n)&&s(this,i);else{for(var f=0,c=[],l=a.length;f<l;f++)(a[f].fn!==t||o&&!a[f].once||n&&a[f].context!==n)&&c.push(a[f]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},f.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new o,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=r,f.EventEmitter=f,typeof t<"u"&&(t.exports=f)})),C=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IJSONRpcProvider=e.IJSONRpcConnection=void 0;e.IJSONRpcConnection=class{};e.IJSONRpcProvider=class{constructor(e){}}})),O=p((e=>{Object.defineProperty(e,"__esModule",{value:!0})})),w=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(C(),e),n(O(),e)})),E=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRpcUrl=function(e,t,r){var o;let i=n(e);return(null===(o=t.rpcMap)||void 0===o?void 0:o[i.reference])||""},e.getChainId=function(e){return e.includes(":")?e.split(":")[1]:e},e.convertChainIdToNumber=function(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))},e.parseChainId=n,e.mergeArrays=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[...new Set([...e,...t])]};var t=":";function n(e){let[n,r]=e.split(t);return{namespace:n,reference:r}}})),_=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setGlobal=e.getGlobal=void 0;var t={};e.getGlobal=e=>t[e];e.setGlobal=(e,n)=>{t[e]=n}})),x=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(E(),e),n(_(),e)})),S=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GENERIC_SUBPROVIDER_NAME=e.RPC_URL=e.STORAGE=e.CONTEXT=e.WC_VERSION=e.PROTOCOL=e.RELAY_URL=e.LOGGER=void 0,e.LOGGER="error",e.RELAY_URL="wss://relay.walletconnect.com",e.PROTOCOL="wc",e.WC_VERSION=2,e.CONTEXT="universal_provider",e.STORAGE=`${e.PROTOCOL}@${e.WC_VERSION}:${e.CONTEXT}:`,e.RPC_URL="https://rpc.walletconnect.com/v1/",e.GENERIC_SUBPROVIDER_NAME="generic"})),R=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PROVIDER_EVENTS=void 0,e.PROVIDER_EVENTS={DEFAULT_CHAIN_CHANGED:"default_chain_changed",UPDATE_NAMESPACES:"update_name_spaces"}})),N=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(S(),e),n(R(),e)})),T=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectorState=e.CONNECT_JSONRPC_VER=e.OKXCONNECTOR_MESSAGE_TTL=e.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE=e.OKXCONNECTOR_WS_URL_LIST=e.OKXCONNECTOR_WS_URL_IDX_KEY=e.OKXCONNECTOR_WS_URL_2=e.OKXCONNECTOR_WS_URL_1=e.EVENT_EMITTER_MAX_LISTENERS=void 0,e.EVENT_EMITTER_MAX_LISTENERS=10,e.OKXCONNECTOR_WS_URL_1="wss://wsdexpri.okx.com/ws/v1/wallet-connect-relay",e.OKXCONNECTOR_WS_URL_2="wss://wsdexpri.coinall.ltd/ws/v1/wallet-connect-relay",e.OKXCONNECTOR_WS_URL_IDX_KEY="wuik",e.OKXCONNECTOR_WS_URL_LIST=[e.OKXCONNECTOR_WS_URL_1,e.OKXCONNECTOR_WS_URL_2],e.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE={TIME_OUT:3990,CANCELED:3991,FINISHED:3992},e.OKXCONNECTOR_MESSAGE_TTL=3e5,e.CONNECT_JSONRPC_VER="2.0",e.ConnectorState={InitState:0,Connecting:1,Connected:2,Disconnected:3,OnError:4}})),k=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OKXCONNECTOR_STORAGE_CIPHER_METHOD=e.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV=e.OKXCONNECTOR_STORAGER_CRYPTO_SALT=e.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD=e.OKXCONNECTOR_TON_KEY=e.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE=e.OKXCONNECTOR_TOKEN_CACHE=e.OKXCONNECTOR_JWT_KEY=e.OKXCONNECTOR_SESSION_PREFIX_KEY=e.OKXCONNECTOR_CRYPTO_KEY=e.OKXCONNECTOR_CACHE_KEY_DAPP=e.OKXCONNECTOR_CACHE_KEY=void 0,e.OKXCONNECTOR_CACHE_KEY="ck",e.OKXCONNECTOR_CACHE_KEY_DAPP="ck_dapp",e.OKXCONNECTOR_CRYPTO_KEY="cck_k",e.OKXCONNECTOR_SESSION_PREFIX_KEY="cspk_",e.OKXCONNECTOR_JWT_KEY="cjk_k",e.OKXCONNECTOR_TOKEN_CACHE="ct",e.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE="csp",e.OKXCONNECTOR_TON_KEY="OKXStorage_ctc",e.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD="scp",e.OKXCONNECTOR_STORAGER_CRYPTO_SALT="scs",e.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV="scpc",e.OKXCONNECTOR_STORAGE_CIPHER_METHOD="aes-256-cbc"})),D=p((()=>{})),P=p(((e,t)=>{!function(e){var t=function(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;t++)n[t]=e[t];return n},n=function(){throw new Error("no PRNG")},r=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var i=t(),a=t([1]),s=t([56129,1]),f=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(e,t,n,r){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n,e[t+4]=r>>24&255,e[t+5]=r>>16&255,e[t+6]=r>>8&255,e[t+7]=255&r}function g(e,t,n,r,o){var i,a=0;for(i=0;i<o;i++)a|=e[t+i]^n[r+i];return(1&a-1>>>8)-1}function b(e,t,n,r){return g(e,t,n,r,16)}function y(e,t,n,r){return g(e,t,n,r,32)}function v(e,t,n,r){!function(e,t,n,r){for(var o,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,f=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,c=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,l=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,u=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,b=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,y=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,v=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,m=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,C=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,O=i,w=a,E=s,_=f,x=c,S=l,R=d,N=u,T=h,k=p,D=g,P=b,A=y,I=v,K=m,M=C,j=0;j<20;j+=2)O^=(o=(A^=(o=(T^=(o=(x^=(o=O+A|0)<<7|o>>>25)+O|0)<<9|o>>>23)+x|0)<<13|o>>>19)+T|0)<<18|o>>>14,S^=(o=(w^=(o=(I^=(o=(k^=(o=S+w|0)<<7|o>>>25)+S|0)<<9|o>>>23)+k|0)<<13|o>>>19)+I|0)<<18|o>>>14,D^=(o=(R^=(o=(E^=(o=(K^=(o=D+R|0)<<7|o>>>25)+D|0)<<9|o>>>23)+K|0)<<13|o>>>19)+E|0)<<18|o>>>14,M^=(o=(P^=(o=(N^=(o=(_^=(o=M+P|0)<<7|o>>>25)+M|0)<<9|o>>>23)+_|0)<<13|o>>>19)+N|0)<<18|o>>>14,O^=(o=(_^=(o=(E^=(o=(w^=(o=O+_|0)<<7|o>>>25)+O|0)<<9|o>>>23)+w|0)<<13|o>>>19)+E|0)<<18|o>>>14,S^=(o=(x^=(o=(N^=(o=(R^=(o=S+x|0)<<7|o>>>25)+S|0)<<9|o>>>23)+R|0)<<13|o>>>19)+N|0)<<18|o>>>14,D^=(o=(k^=(o=(T^=(o=(P^=(o=D+k|0)<<7|o>>>25)+D|0)<<9|o>>>23)+P|0)<<13|o>>>19)+T|0)<<18|o>>>14,M^=(o=(K^=(o=(I^=(o=(A^=(o=M+K|0)<<7|o>>>25)+M|0)<<9|o>>>23)+A|0)<<13|o>>>19)+I|0)<<18|o>>>14;O=O+i|0,w=w+a|0,E=E+s|0,_=_+f|0,x=x+c|0,S=S+l|0,R=R+d|0,N=N+u|0,T=T+h|0,k=k+p|0,D=D+g|0,P=P+b|0,A=A+y|0,I=I+v|0,K=K+m|0,M=M+C|0,e[0]=O>>>0&255,e[1]=O>>>8&255,e[2]=O>>>16&255,e[3]=O>>>24&255,e[4]=w>>>0&255,e[5]=w>>>8&255,e[6]=w>>>16&255,e[7]=w>>>24&255,e[8]=E>>>0&255,e[9]=E>>>8&255,e[10]=E>>>16&255,e[11]=E>>>24&255,e[12]=_>>>0&255,e[13]=_>>>8&255,e[14]=_>>>16&255,e[15]=_>>>24&255,e[16]=x>>>0&255,e[17]=x>>>8&255,e[18]=x>>>16&255,e[19]=x>>>24&255,e[20]=S>>>0&255,e[21]=S>>>8&255,e[22]=S>>>16&255,e[23]=S>>>24&255,e[24]=R>>>0&255,e[25]=R>>>8&255,e[26]=R>>>16&255,e[27]=R>>>24&255,e[28]=N>>>0&255,e[29]=N>>>8&255,e[30]=N>>>16&255,e[31]=N>>>24&255,e[32]=T>>>0&255,e[33]=T>>>8&255,e[34]=T>>>16&255,e[35]=T>>>24&255,e[36]=k>>>0&255,e[37]=k>>>8&255,e[38]=k>>>16&255,e[39]=k>>>24&255,e[40]=D>>>0&255,e[41]=D>>>8&255,e[42]=D>>>16&255,e[43]=D>>>24&255,e[44]=P>>>0&255,e[45]=P>>>8&255,e[46]=P>>>16&255,e[47]=P>>>24&255,e[48]=A>>>0&255,e[49]=A>>>8&255,e[50]=A>>>16&255,e[51]=A>>>24&255,e[52]=I>>>0&255,e[53]=I>>>8&255,e[54]=I>>>16&255,e[55]=I>>>24&255,e[56]=K>>>0&255,e[57]=K>>>8&255,e[58]=K>>>16&255,e[59]=K>>>24&255,e[60]=M>>>0&255,e[61]=M>>>8&255,e[62]=M>>>16&255,e[63]=M>>>24&255}(e,t,n,r)}function m(e,t,n,r){!function(e,t,n,r){for(var o,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,f=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,c=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,l=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,u=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,b=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,y=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,v=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,m=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,C=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,O=0;O<20;O+=2)i^=(o=(y^=(o=(h^=(o=(c^=(o=i+y|0)<<7|o>>>25)+i|0)<<9|o>>>23)+c|0)<<13|o>>>19)+h|0)<<18|o>>>14,l^=(o=(a^=(o=(v^=(o=(p^=(o=l+a|0)<<7|o>>>25)+l|0)<<9|o>>>23)+p|0)<<13|o>>>19)+v|0)<<18|o>>>14,g^=(o=(d^=(o=(s^=(o=(m^=(o=g+d|0)<<7|o>>>25)+g|0)<<9|o>>>23)+m|0)<<13|o>>>19)+s|0)<<18|o>>>14,C^=(o=(b^=(o=(u^=(o=(f^=(o=C+b|0)<<7|o>>>25)+C|0)<<9|o>>>23)+f|0)<<13|o>>>19)+u|0)<<18|o>>>14,i^=(o=(f^=(o=(s^=(o=(a^=(o=i+f|0)<<7|o>>>25)+i|0)<<9|o>>>23)+a|0)<<13|o>>>19)+s|0)<<18|o>>>14,l^=(o=(c^=(o=(u^=(o=(d^=(o=l+c|0)<<7|o>>>25)+l|0)<<9|o>>>23)+d|0)<<13|o>>>19)+u|0)<<18|o>>>14,g^=(o=(p^=(o=(h^=(o=(b^=(o=g+p|0)<<7|o>>>25)+g|0)<<9|o>>>23)+b|0)<<13|o>>>19)+h|0)<<18|o>>>14,C^=(o=(m^=(o=(v^=(o=(y^=(o=C+m|0)<<7|o>>>25)+C|0)<<9|o>>>23)+y|0)<<13|o>>>19)+v|0)<<18|o>>>14;e[0]=i>>>0&255,e[1]=i>>>8&255,e[2]=i>>>16&255,e[3]=i>>>24&255,e[4]=l>>>0&255,e[5]=l>>>8&255,e[6]=l>>>16&255,e[7]=l>>>24&255,e[8]=g>>>0&255,e[9]=g>>>8&255,e[10]=g>>>16&255,e[11]=g>>>24&255,e[12]=C>>>0&255,e[13]=C>>>8&255,e[14]=C>>>16&255,e[15]=C>>>24&255,e[16]=d>>>0&255,e[17]=d>>>8&255,e[18]=d>>>16&255,e[19]=d>>>24&255,e[20]=u>>>0&255,e[21]=u>>>8&255,e[22]=u>>>16&255,e[23]=u>>>24&255,e[24]=h>>>0&255,e[25]=h>>>8&255,e[26]=h>>>16&255,e[27]=h>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,n,r)}var C=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function O(e,t,n,r,o,i,a){var s,f,c=new Uint8Array(16),l=new Uint8Array(64);for(f=0;f<16;f++)c[f]=0;for(f=0;f<8;f++)c[f]=i[f];for(;o>=64;){for(v(l,c,a,C),f=0;f<64;f++)e[t+f]=n[r+f]^l[f];for(s=1,f=8;f<16;f++)s=s+(255&c[f])|0,c[f]=255&s,s>>>=8;o-=64,t+=64,r+=64}if(o>0)for(v(l,c,a,C),f=0;f<o;f++)e[t+f]=n[r+f]^l[f];return 0}function w(e,t,n,r,o){var i,a,s=new Uint8Array(16),f=new Uint8Array(64);for(a=0;a<16;a++)s[a]=0;for(a=0;a<8;a++)s[a]=r[a];for(;n>=64;){for(v(f,s,o,C),a=0;a<64;a++)e[t+a]=f[a];for(i=1,a=8;a<16;a++)i=i+(255&s[a])|0,s[a]=255&i,i>>>=8;n-=64,t+=64}if(n>0)for(v(f,s,o,C),a=0;a<n;a++)e[t+a]=f[a];return 0}function E(e,t,n,r,o){var i=new Uint8Array(32);m(i,r,o,C);for(var a=new Uint8Array(8),s=0;s<8;s++)a[s]=r[s+16];return w(e,t,n,a,i)}function _(e,t,n,r,o,i,a){var s=new Uint8Array(32);m(s,i,a,C);for(var f=new Uint8Array(8),c=0;c<8;c++)f[c]=i[c+16];return O(e,t,n,r,o,f,s)}var x=function(e){var t,n,r,o,i,a,s,f;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,n=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|n<<3),r=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(n>>>10|r<<6),o=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(r>>>7|o<<9),i=255&e[8]|(255&e[9])<<8,this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,a=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(i>>>14|a<<2),s=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(a>>>11|s<<5),f=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(s>>>8|f<<8),this.r[9]=f>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function S(e,t,n,r,o,i){var a=new x(i);return a.update(n,r,o),a.finish(e,t),0}function R(e,t,n,r,o,i){var a=new Uint8Array(16);return S(a,0,n,r,o,i),b(e,t,a,0)}function N(e,t,n,r,o){var i;if(n<32)return-1;for(_(e,0,t,0,n,r,o),S(e,16,e,32,n-32,e),i=0;i<16;i++)e[i]=0;return 0}function T(e,t,n,r,o){var i,a=new Uint8Array(32);if(n<32||(E(a,0,32,r,o),0!==R(t,16,t,32,n-32,a)))return-1;for(_(e,0,t,0,n,r,o),i=0;i<32;i++)e[i]=0;return 0}function k(e,t){var n;for(n=0;n<16;n++)e[n]=0|t[n]}function P(e){var t,n,r=1;for(t=0;t<16;t++)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-65536*r;e[0]+=r-1+37*(r-1)}function A(e,t,n){for(var r,o=~(n-1),i=0;i<16;i++)r=o&(e[i]^t[i]),e[i]^=r,t[i]^=r}function I(e,n){var r,o,i,a=t(),s=t();for(r=0;r<16;r++)s[r]=n[r];for(P(s),P(s),P(s),o=0;o<2;o++){for(a[0]=s[0]-65517,r=1;r<15;r++)a[r]=s[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,A(s,a,1-i)}for(r=0;r<16;r++)e[2*r]=255&s[r],e[2*r+1]=s[r]>>8}function K(e,t){var n=new Uint8Array(32),r=new Uint8Array(32);return I(n,e),I(r,t),y(n,0,r,0)}function M(e){var t=new Uint8Array(32);return I(t,e),1&t[0]}function j(e,t){var n;for(n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function U(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]+n[r]}function L(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]-n[r]}function W(e,t,n){var r,o,i=0,a=0,s=0,f=0,c=0,l=0,d=0,u=0,h=0,p=0,g=0,b=0,y=0,v=0,m=0,C=0,O=0,w=0,E=0,_=0,x=0,S=0,R=0,N=0,T=0,k=0,D=0,P=0,A=0,I=0,K=0,M=n[0],j=n[1],U=n[2],L=n[3],W=n[4],B=n[5],X=n[6],$=n[7],H=n[8],q=n[9],F=n[10],J=n[11],V=n[12],G=n[13],z=n[14],Y=n[15];i+=(r=t[0])*M,a+=r*j,s+=r*U,f+=r*L,c+=r*W,l+=r*B,d+=r*X,u+=r*$,h+=r*H,p+=r*q,g+=r*F,b+=r*J,y+=r*V,v+=r*G,m+=r*z,C+=r*Y,a+=(r=t[1])*M,s+=r*j,f+=r*U,c+=r*L,l+=r*W,d+=r*B,u+=r*X,h+=r*$,p+=r*H,g+=r*q,b+=r*F,y+=r*J,v+=r*V,m+=r*G,C+=r*z,O+=r*Y,s+=(r=t[2])*M,f+=r*j,c+=r*U,l+=r*L,d+=r*W,u+=r*B,h+=r*X,p+=r*$,g+=r*H,b+=r*q,y+=r*F,v+=r*J,m+=r*V,C+=r*G,O+=r*z,w+=r*Y,f+=(r=t[3])*M,c+=r*j,l+=r*U,d+=r*L,u+=r*W,h+=r*B,p+=r*X,g+=r*$,b+=r*H,y+=r*q,v+=r*F,m+=r*J,C+=r*V,O+=r*G,w+=r*z,E+=r*Y,c+=(r=t[4])*M,l+=r*j,d+=r*U,u+=r*L,h+=r*W,p+=r*B,g+=r*X,b+=r*$,y+=r*H,v+=r*q,m+=r*F,C+=r*J,O+=r*V,w+=r*G,E+=r*z,_+=r*Y,l+=(r=t[5])*M,d+=r*j,u+=r*U,h+=r*L,p+=r*W,g+=r*B,b+=r*X,y+=r*$,v+=r*H,m+=r*q,C+=r*F,O+=r*J,w+=r*V,E+=r*G,_+=r*z,x+=r*Y,d+=(r=t[6])*M,u+=r*j,h+=r*U,p+=r*L,g+=r*W,b+=r*B,y+=r*X,v+=r*$,m+=r*H,C+=r*q,O+=r*F,w+=r*J,E+=r*V,_+=r*G,x+=r*z,S+=r*Y,u+=(r=t[7])*M,h+=r*j,p+=r*U,g+=r*L,b+=r*W,y+=r*B,v+=r*X,m+=r*$,C+=r*H,O+=r*q,w+=r*F,E+=r*J,_+=r*V,x+=r*G,S+=r*z,R+=r*Y,h+=(r=t[8])*M,p+=r*j,g+=r*U,b+=r*L,y+=r*W,v+=r*B,m+=r*X,C+=r*$,O+=r*H,w+=r*q,E+=r*F,_+=r*J,x+=r*V,S+=r*G,R+=r*z,N+=r*Y,p+=(r=t[9])*M,g+=r*j,b+=r*U,y+=r*L,v+=r*W,m+=r*B,C+=r*X,O+=r*$,w+=r*H,E+=r*q,_+=r*F,x+=r*J,S+=r*V,R+=r*G,N+=r*z,T+=r*Y,g+=(r=t[10])*M,b+=r*j,y+=r*U,v+=r*L,m+=r*W,C+=r*B,O+=r*X,w+=r*$,E+=r*H,_+=r*q,x+=r*F,S+=r*J,R+=r*V,N+=r*G,T+=r*z,k+=r*Y,b+=(r=t[11])*M,y+=r*j,v+=r*U,m+=r*L,C+=r*W,O+=r*B,w+=r*X,E+=r*$,_+=r*H,x+=r*q,S+=r*F,R+=r*J,N+=r*V,T+=r*G,k+=r*z,D+=r*Y,y+=(r=t[12])*M,v+=r*j,m+=r*U,C+=r*L,O+=r*W,w+=r*B,E+=r*X,_+=r*$,x+=r*H,S+=r*q,R+=r*F,N+=r*J,T+=r*V,k+=r*G,D+=r*z,P+=r*Y,v+=(r=t[13])*M,m+=r*j,C+=r*U,O+=r*L,w+=r*W,E+=r*B,_+=r*X,x+=r*$,S+=r*H,R+=r*q,N+=r*F,T+=r*J,k+=r*V,D+=r*G,P+=r*z,A+=r*Y,m+=(r=t[14])*M,C+=r*j,O+=r*U,w+=r*L,E+=r*W,_+=r*B,x+=r*X,S+=r*$,R+=r*H,N+=r*q,T+=r*F,k+=r*J,D+=r*V,P+=r*G,A+=r*z,I+=r*Y,C+=(r=t[15])*M,a+=38*(w+=r*U),s+=38*(E+=r*L),f+=38*(_+=r*W),c+=38*(x+=r*B),l+=38*(S+=r*X),d+=38*(R+=r*$),u+=38*(N+=r*H),h+=38*(T+=r*q),p+=38*(k+=r*F),g+=38*(D+=r*J),b+=38*(P+=r*V),y+=38*(A+=r*G),v+=38*(I+=r*z),m+=38*(K+=r*Y),i=(r=(i+=38*(O+=r*j))+(o=1)+65535)-65536*(o=Math.floor(r/65536)),a=(r=a+o+65535)-65536*(o=Math.floor(r/65536)),s=(r=s+o+65535)-65536*(o=Math.floor(r/65536)),f=(r=f+o+65535)-65536*(o=Math.floor(r/65536)),c=(r=c+o+65535)-65536*(o=Math.floor(r/65536)),l=(r=l+o+65535)-65536*(o=Math.floor(r/65536)),d=(r=d+o+65535)-65536*(o=Math.floor(r/65536)),u=(r=u+o+65535)-65536*(o=Math.floor(r/65536)),h=(r=h+o+65535)-65536*(o=Math.floor(r/65536)),p=(r=p+o+65535)-65536*(o=Math.floor(r/65536)),g=(r=g+o+65535)-65536*(o=Math.floor(r/65536)),b=(r=b+o+65535)-65536*(o=Math.floor(r/65536)),y=(r=y+o+65535)-65536*(o=Math.floor(r/65536)),v=(r=v+o+65535)-65536*(o=Math.floor(r/65536)),m=(r=m+o+65535)-65536*(o=Math.floor(r/65536)),C=(r=C+o+65535)-65536*(o=Math.floor(r/65536)),i=(r=(i+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(r/65536)),a=(r=a+o+65535)-65536*(o=Math.floor(r/65536)),s=(r=s+o+65535)-65536*(o=Math.floor(r/65536)),f=(r=f+o+65535)-65536*(o=Math.floor(r/65536)),c=(r=c+o+65535)-65536*(o=Math.floor(r/65536)),l=(r=l+o+65535)-65536*(o=Math.floor(r/65536)),d=(r=d+o+65535)-65536*(o=Math.floor(r/65536)),u=(r=u+o+65535)-65536*(o=Math.floor(r/65536)),h=(r=h+o+65535)-65536*(o=Math.floor(r/65536)),p=(r=p+o+65535)-65536*(o=Math.floor(r/65536)),g=(r=g+o+65535)-65536*(o=Math.floor(r/65536)),b=(r=b+o+65535)-65536*(o=Math.floor(r/65536)),y=(r=y+o+65535)-65536*(o=Math.floor(r/65536)),v=(r=v+o+65535)-65536*(o=Math.floor(r/65536)),m=(r=m+o+65535)-65536*(o=Math.floor(r/65536)),C=(r=C+o+65535)-65536*(o=Math.floor(r/65536)),i+=o-1+37*(o-1),e[0]=i,e[1]=a,e[2]=s,e[3]=f,e[4]=c,e[5]=l,e[6]=d,e[7]=u,e[8]=h,e[9]=p,e[10]=g,e[11]=b,e[12]=y,e[13]=v,e[14]=m,e[15]=C}function B(e,t){W(e,t,t)}function X(e,n){var r,o=t();for(r=0;r<16;r++)o[r]=n[r];for(r=253;r>=0;r--)B(o,o),2!==r&&4!==r&&W(o,o,n);for(r=0;r<16;r++)e[r]=o[r]}function $(e,n){var r,o=t();for(r=0;r<16;r++)o[r]=n[r];for(r=250;r>=0;r--)B(o,o),1!==r&&W(o,o,n);for(r=0;r<16;r++)e[r]=o[r]}function H(e,n,r){var o,i,a=new Uint8Array(32),f=new Float64Array(80),c=t(),l=t(),d=t(),u=t(),h=t(),p=t();for(i=0;i<31;i++)a[i]=n[i];for(a[31]=127&n[31]|64,a[0]&=248,j(f,r),i=0;i<16;i++)l[i]=f[i],u[i]=c[i]=d[i]=0;for(c[0]=u[0]=1,i=254;i>=0;--i)A(c,l,o=a[i>>>3]>>>(7&i)&1),A(d,u,o),U(h,c,d),L(c,c,d),U(d,l,u),L(l,l,u),B(u,h),B(p,c),W(c,d,c),W(d,l,h),U(h,c,d),L(c,c,d),B(l,c),L(d,u,p),W(c,d,s),U(c,c,u),W(d,d,c),W(c,u,p),W(u,l,f),B(l,h),A(c,l,o),A(d,u,o);for(i=0;i<16;i++)f[i+16]=c[i],f[i+32]=d[i],f[i+48]=l[i],f[i+64]=u[i];var g=f.subarray(32),b=f.subarray(16);return X(g,g),W(b,b,g),I(e,b),0}function q(e,t){return H(e,t,o)}function F(e,t){return n(t,32),q(e,t)}function J(e,t,n){var o=new Uint8Array(32);return H(o,n,t),m(e,r,o,C)}x.prototype.blocks=function(e,t,n){for(var r,o,i,a,s,f,c,l,d,u,h,p,g,b,y,v,m,C,O,w=this.fin?0:2048,E=this.h[0],_=this.h[1],x=this.h[2],S=this.h[3],R=this.h[4],N=this.h[5],T=this.h[6],k=this.h[7],D=this.h[8],P=this.h[9],A=this.r[0],I=this.r[1],K=this.r[2],M=this.r[3],j=this.r[4],U=this.r[5],L=this.r[6],W=this.r[7],B=this.r[8],X=this.r[9];n>=16;)u=d=0,u+=(E+=8191&(r=255&e[t+0]|(255&e[t+1])<<8))*A,u+=(_+=8191&(r>>>13|(o=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*X),u+=(x+=8191&(o>>>10|(i=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*B),u+=(S+=8191&(i>>>7|(a=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*W),d=(u+=(R+=8191&(a>>>4|(s=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*L))>>>13,u&=8191,u+=(N+=s>>>1&8191)*(5*U),u+=(T+=8191&(s>>>14|(f=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*j),u+=(k+=8191&(f>>>11|(c=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*M),u+=(D+=8191&(c>>>8|(l=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*K),h=d+=(u+=(P+=l>>>5|w)*(5*I))>>>13,h+=E*I,h+=_*A,h+=x*(5*X),h+=S*(5*B),d=(h+=R*(5*W))>>>13,h&=8191,h+=N*(5*L),h+=T*(5*U),h+=k*(5*j),h+=D*(5*M),d+=(h+=P*(5*K))>>>13,h&=8191,p=d,p+=E*K,p+=_*I,p+=x*A,p+=S*(5*X),d=(p+=R*(5*B))>>>13,p&=8191,p+=N*(5*W),p+=T*(5*L),p+=k*(5*U),p+=D*(5*j),g=d+=(p+=P*(5*M))>>>13,g+=E*M,g+=_*K,g+=x*I,g+=S*A,d=(g+=R*(5*X))>>>13,g&=8191,g+=N*(5*B),g+=T*(5*W),g+=k*(5*L),g+=D*(5*U),b=d+=(g+=P*(5*j))>>>13,b+=E*j,b+=_*M,b+=x*K,b+=S*I,d=(b+=R*A)>>>13,b&=8191,b+=N*(5*X),b+=T*(5*B),b+=k*(5*W),b+=D*(5*L),y=d+=(b+=P*(5*U))>>>13,y+=E*U,y+=_*j,y+=x*M,y+=S*K,d=(y+=R*I)>>>13,y&=8191,y+=N*A,y+=T*(5*X),y+=k*(5*B),y+=D*(5*W),v=d+=(y+=P*(5*L))>>>13,v+=E*L,v+=_*U,v+=x*j,v+=S*M,d=(v+=R*K)>>>13,v&=8191,v+=N*I,v+=T*A,v+=k*(5*X),v+=D*(5*B),m=d+=(v+=P*(5*W))>>>13,m+=E*W,m+=_*L,m+=x*U,m+=S*j,d=(m+=R*M)>>>13,m&=8191,m+=N*K,m+=T*I,m+=k*A,m+=D*(5*X),C=d+=(m+=P*(5*B))>>>13,C+=E*B,C+=_*W,C+=x*L,C+=S*U,d=(C+=R*j)>>>13,C&=8191,C+=N*M,C+=T*K,C+=k*I,C+=D*A,O=d+=(C+=P*(5*X))>>>13,O+=E*X,O+=_*B,O+=x*W,O+=S*L,d=(O+=R*U)>>>13,O&=8191,O+=N*j,O+=T*M,O+=k*K,O+=D*I,E=u=8191&(d=(d=((d+=(O+=P*A)>>>13)<<2)+d|0)+(u&=8191)|0),_=h+=d>>>=13,x=p&=8191,S=g&=8191,R=b&=8191,N=y&=8191,T=v&=8191,k=m&=8191,D=C&=8191,P=O&=8191,t+=16,n-=16;this.h[0]=E,this.h[1]=_,this.h[2]=x,this.h[3]=S,this.h[4]=R,this.h[5]=N,this.h[6]=T,this.h[7]=k,this.h[8]=D,this.h[9]=P},x.prototype.finish=function(e,t){var n,r,o,i,a=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=n,n=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,a[0]=this.h[0]+5,n=a[0]>>>13,a[0]&=8191,i=1;i<10;i++)a[i]=this.h[i]+n,n=a[i]>>>13,a[i]&=8191;for(a[9]-=8192,r=(1^n)-1,i=0;i<10;i++)a[i]&=r;for(r=~r,i=0;i<10;i++)this.h[i]=this.h[i]&r|a[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,i=1;i<8;i++)o=(this.h[i]+this.pad[i]|0)+(o>>>16)|0,this.h[i]=65535&o;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},x.prototype.update=function(e,t,n){var r,o;if(this.leftover){for((o=16-this.leftover)>n&&(o=n),r=0;r<o;r++)this.buffer[this.leftover+r]=e[t+r];if(n-=o,t+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(o=n-n%16,this.blocks(e,t,o),t+=o,n-=o),n){for(r=0;r<n;r++)this.buffer[this.leftover+r]=e[t+r];this.leftover+=n}};var V=N,G=T;var z=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Y(e,t,n,r){for(var o,i,a,s,f,c,l,d,u,h,p,g,b,y,v,m,C,O,w,E,_,x,S,R,N,T,k=new Int32Array(16),D=new Int32Array(16),P=e[0],A=e[1],I=e[2],K=e[3],M=e[4],j=e[5],U=e[6],L=e[7],W=t[0],B=t[1],X=t[2],$=t[3],H=t[4],q=t[5],F=t[6],J=t[7],V=0;r>=128;){for(w=0;w<16;w++)E=8*w+V,k[w]=n[E+0]<<24|n[E+1]<<16|n[E+2]<<8|n[E+3],D[w]=n[E+4]<<24|n[E+5]<<16|n[E+6]<<8|n[E+7];for(w=0;w<80;w++)if(o=P,i=A,a=I,s=K,f=M,c=j,l=U,L,u=W,h=B,p=X,g=$,b=H,y=q,v=F,J,S=65535&(x=J),R=x>>>16,N=65535&(_=L),T=_>>>16,S+=65535&(x=(H>>>14|M<<18)^(H>>>18|M<<14)^(M>>>9|H<<23)),R+=x>>>16,N+=65535&(_=(M>>>14|H<<18)^(M>>>18|H<<14)^(H>>>9|M<<23)),T+=_>>>16,S+=65535&(x=H&q^~H&F),R+=x>>>16,N+=65535&(_=M&j^~M&U),T+=_>>>16,S+=65535&(x=z[2*w+1]),R+=x>>>16,N+=65535&(_=z[2*w]),T+=_>>>16,_=k[w%16],R+=(x=D[w%16])>>>16,N+=65535&_,T+=_>>>16,N+=(R+=(S+=65535&x)>>>16)>>>16,S=65535&(x=O=65535&S|R<<16),R=x>>>16,N=65535&(_=C=65535&N|(T+=N>>>16)<<16),T=_>>>16,S+=65535&(x=(W>>>28|P<<4)^(P>>>2|W<<30)^(P>>>7|W<<25)),R+=x>>>16,N+=65535&(_=(P>>>28|W<<4)^(W>>>2|P<<30)^(W>>>7|P<<25)),T+=_>>>16,R+=(x=W&B^W&X^B&X)>>>16,N+=65535&(_=P&A^P&I^A&I),T+=_>>>16,d=65535&(N+=(R+=(S+=65535&x)>>>16)>>>16)|(T+=N>>>16)<<16,m=65535&S|R<<16,S=65535&(x=g),R=x>>>16,N=65535&(_=s),T=_>>>16,R+=(x=O)>>>16,N+=65535&(_=C),T+=_>>>16,A=o,I=i,K=a,M=s=65535&(N+=(R+=(S+=65535&x)>>>16)>>>16)|(T+=N>>>16)<<16,j=f,U=c,L=l,P=d,B=u,X=h,$=p,H=g=65535&S|R<<16,q=b,F=y,J=v,W=m,w%16===15)for(E=0;E<16;E++)_=k[E],S=65535&(x=D[E]),R=x>>>16,N=65535&_,T=_>>>16,_=k[(E+9)%16],S+=65535&(x=D[(E+9)%16]),R+=x>>>16,N+=65535&_,T+=_>>>16,C=k[(E+1)%16],S+=65535&(x=((O=D[(E+1)%16])>>>1|C<<31)^(O>>>8|C<<24)^(O>>>7|C<<25)),R+=x>>>16,N+=65535&(_=(C>>>1|O<<31)^(C>>>8|O<<24)^C>>>7),T+=_>>>16,C=k[(E+14)%16],R+=(x=((O=D[(E+14)%16])>>>19|C<<13)^(C>>>29|O<<3)^(O>>>6|C<<26))>>>16,N+=65535&(_=(C>>>19|O<<13)^(O>>>29|C<<3)^C>>>6),T+=_>>>16,T+=(N+=(R+=(S+=65535&x)>>>16)>>>16)>>>16,k[E]=65535&N|T<<16,D[E]=65535&S|R<<16;S=65535&(x=W),R=x>>>16,N=65535&(_=P),T=_>>>16,_=e[0],R+=(x=t[0])>>>16,N+=65535&_,T+=_>>>16,T+=(N+=(R+=(S+=65535&x)>>>16)>>>16)>>>16,e[0]=P=65535&N|T<<16,t[0]=W=65535&S|R<<16,S=65535&(x=B),R=x>>>16,N=65535&(_=A),T=_>>>16,_=e[1],R+=(x=t[1])>>>16,N+=65535&_,T+=_>>>16,T+=(N+=(R+=(S+=65535&x)>>>16)>>>16)>>>16,e[1]=A=65535&N|T<<16,t[1]=B=65535&S|R<<16,S=65535&(x=X),R=x>>>16,N=65535&(_=I),T=_>>>16,_=e[2],R+=(x=t[2])>>>16,N+=65535&_,T+=_>>>16,T+=(N+=(R+=(S+=65535&x)>>>16)>>>16)>>>16,e[2]=I=65535&N|T<<16,t[2]=X=65535&S|R<<16,S=65535&(x=$),R=x>>>16,N=65535&(_=K),T=_>>>16,_=e[3],R+=(x=t[3])>>>16,N+=65535&_,T+=_>>>16,T+=(N+=(R+=(S+=65535&x)>>>16)>>>16)>>>16,e[3]=K=65535&N|T<<16,t[3]=$=65535&S|R<<16,S=65535&(x=H),R=x>>>16,N=65535&(_=M),T=_>>>16,_=e[4],R+=(x=t[4])>>>16,N+=65535&_,T+=_>>>16,T+=(N+=(R+=(S+=65535&x)>>>16)>>>16)>>>16,e[4]=M=65535&N|T<<16,t[4]=H=65535&S|R<<16,S=65535&(x=q),R=x>>>16,N=65535&(_=j),T=_>>>16,_=e[5],R+=(x=t[5])>>>16,N+=65535&_,T+=_>>>16,T+=(N+=(R+=(S+=65535&x)>>>16)>>>16)>>>16,e[5]=j=65535&N|T<<16,t[5]=q=65535&S|R<<16,S=65535&(x=F),R=x>>>16,N=65535&(_=U),T=_>>>16,_=e[6],R+=(x=t[6])>>>16,N+=65535&_,T+=_>>>16,T+=(N+=(R+=(S+=65535&x)>>>16)>>>16)>>>16,e[6]=U=65535&N|T<<16,t[6]=F=65535&S|R<<16,S=65535&(x=J),R=x>>>16,N=65535&(_=L),T=_>>>16,_=e[7],R+=(x=t[7])>>>16,N+=65535&_,T+=_>>>16,T+=(N+=(R+=(S+=65535&x)>>>16)>>>16)>>>16,e[7]=L=65535&N|T<<16,t[7]=J=65535&S|R<<16,V+=128,r-=128}return r}function Z(e,t,n){var r,o=new Int32Array(8),i=new Int32Array(8),a=new Uint8Array(256),s=n;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,i[0]=4089235720,i[1]=2227873595,i[2]=4271175723,i[3]=1595750129,i[4]=2917565137,i[5]=725511199,i[6]=4215389547,i[7]=327033209,Y(o,i,t,n),n%=128,r=0;r<n;r++)a[r]=t[s-n+r];for(a[n]=128,a[(n=256-128*(n<112?1:0))-9]=0,p(a,n-8,s/536870912|0,s<<3),Y(o,i,a,n),r=0;r<8;r++)p(e,8*r,o[r],i[r]);return 0}function Q(e,n){var r=t(),o=t(),i=t(),a=t(),s=t(),f=t(),l=t(),d=t(),u=t();L(r,e[1],e[0]),L(u,n[1],n[0]),W(r,r,u),U(o,e[0],e[1]),U(u,n[0],n[1]),W(o,o,u),W(i,e[3],n[3]),W(i,i,c),W(a,e[2],n[2]),U(a,a,a),L(s,o,r),L(f,a,i),U(l,a,i),U(d,o,r),W(e[0],s,f),W(e[1],d,l),W(e[2],l,f),W(e[3],s,d)}function ee(e,t,n){var r;for(r=0;r<4;r++)A(e[r],t[r],n)}function te(e,n){var r=t(),o=t(),i=t();X(i,n[2]),W(r,n[0],i),W(o,n[1],i),I(e,o),e[31]^=M(r)<<7}function ne(e,t,n){var r,o;for(k(e[0],i),k(e[1],a),k(e[2],a),k(e[3],i),o=255;o>=0;--o)ee(e,t,r=n[o/8|0]>>(7&o)&1),Q(t,e),Q(e,e),ee(e,t,r)}function re(e,n){var r=[t(),t(),t(),t()];k(r[0],l),k(r[1],d),k(r[2],a),W(r[3],l,d),ne(e,r,n)}function oe(e,r,o){var i,a=new Uint8Array(64),s=[t(),t(),t(),t()];for(o||n(r,32),Z(a,r,32),a[0]&=248,a[31]&=127,a[31]|=64,re(s,a),te(e,s),i=0;i<32;i++)r[i+32]=e[i];return 0}var ie=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ae(e,t){var n,r,o,i;for(r=63;r>=32;--r){for(n=0,o=r-32,i=r-12;o<i;++o)t[o]+=n-16*t[r]*ie[o-(r-32)],n=Math.floor((t[o]+128)/256),t[o]-=256*n;t[o]+=n,t[r]=0}for(n=0,o=0;o<32;o++)t[o]+=n-(t[31]>>4)*ie[o],n=t[o]>>8,t[o]&=255;for(o=0;o<32;o++)t[o]-=n*ie[o];for(r=0;r<32;r++)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function se(e){var t,n=new Float64Array(64);for(t=0;t<64;t++)n[t]=e[t];for(t=0;t<64;t++)e[t]=0;ae(e,n)}function fe(e,n,r,o){var i,a,s=new Uint8Array(64),f=new Uint8Array(64),c=new Uint8Array(64),l=new Float64Array(64),d=[t(),t(),t(),t()];Z(s,o,32),s[0]&=248,s[31]&=127,s[31]|=64;var u=r+64;for(i=0;i<r;i++)e[64+i]=n[i];for(i=0;i<32;i++)e[32+i]=s[32+i];for(Z(c,e.subarray(32),r+32),se(c),re(d,c),te(e,d),i=32;i<64;i++)e[i]=o[i];for(Z(f,e,r+64),se(f),i=0;i<64;i++)l[i]=0;for(i=0;i<32;i++)l[i]=c[i];for(i=0;i<32;i++)for(a=0;a<32;a++)l[i+a]+=f[i]*s[a];return ae(e.subarray(32),l),u}function ce(e,n,r,o){var s,c=new Uint8Array(32),l=new Uint8Array(64),d=[t(),t(),t(),t()],u=[t(),t(),t(),t()];if(r<64||function(e,n){var r=t(),o=t(),s=t(),c=t(),l=t(),d=t(),u=t();return k(e[2],a),j(e[1],n),B(s,e[1]),W(c,s,f),L(s,s,e[2]),U(c,e[2],c),B(l,c),B(d,l),W(u,d,l),W(r,u,s),W(r,r,c),$(r,r),W(r,r,s),W(r,r,c),W(r,r,c),W(e[0],r,c),B(o,e[0]),W(o,o,c),K(o,s)&&W(e[0],e[0],h),B(o,e[0]),W(o,o,c),K(o,s)?-1:(M(e[0])===n[31]>>7&&L(e[0],i,e[0]),W(e[3],e[0],e[1]),0)}(u,o))return-1;for(s=0;s<r;s++)e[s]=n[s];for(s=0;s<32;s++)e[s+32]=o[s];if(Z(l,e,r),se(l),ne(d,u,l),re(u,n.subarray(32)),Q(d,u),te(c,d),r-=64,y(n,0,c,0)){for(s=0;s<r;s++)e[s]=0;return-1}for(s=0;s<r;s++)e[s]=n[s+64];return r}var le=16,de=64,ue=32,he=64;function pe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function ge(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function be(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:m,crypto_stream_xor:_,crypto_stream:E,crypto_stream_salsa20_xor:O,crypto_stream_salsa20:w,crypto_onetimeauth:S,crypto_onetimeauth_verify:R,crypto_verify_16:b,crypto_verify_32:y,crypto_secretbox:N,crypto_secretbox_open:T,crypto_scalarmult:H,crypto_scalarmult_base:q,crypto_box_beforenm:J,crypto_box_afternm:V,crypto_box:function(e,t,n,r,o,i){var a=new Uint8Array(32);return J(a,o,i),V(e,t,n,r,a)},crypto_box_open:function(e,t,n,r,o,i){var a=new Uint8Array(32);return J(a,o,i),G(e,t,n,r,a)},crypto_box_keypair:F,crypto_hash:Z,crypto_sign:fe,crypto_sign_keypair:oe,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:le,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:de,crypto_sign_PUBLICKEYBYTES:ue,crypto_sign_SECRETKEYBYTES:he,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:f,L:ie,pack25519:I,unpack25519:j,M:W,A:U,S:B,Z:L,pow2523:$,add:Q,set25519:k,modL:ae,scalarmult:ne,scalarbase:re},e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,n){ge(e,t,n),pe(n,t);for(var r=new Uint8Array(32+e.length),o=new Uint8Array(r.length),i=0;i<e.length;i++)r[i+32]=e[i];return N(o,r,r.length,t,n),o.subarray(le)},e.secretbox.open=function(e,t,n){ge(e,t,n),pe(n,t);for(var r=new Uint8Array(le+e.length),o=new Uint8Array(r.length),i=0;i<e.length;i++)r[i+le]=e[i];return r.length<32||0!==T(o,r,r.length,t,n)?null:o.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=le,e.scalarMult=function(e,t){if(ge(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var n=new Uint8Array(32);return H(n,e,t),n},e.scalarMult.base=function(e){if(ge(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return q(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,n,r,o){var i=e.box.before(r,o);return e.secretbox(t,n,i)},e.box.before=function(e,t){ge(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var n=new Uint8Array(32);return J(n,e,t),n},e.box.after=e.secretbox,e.box.open=function(t,n,r,o){var i=e.box.before(r,o);return e.secretbox.open(t,n,i)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return F(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(ge(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return q(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(ge(e,t),t.length!==he)throw new Error("bad secret key size");var n=new Uint8Array(de+e.length);return fe(n,e,e.length,t),n},e.sign.open=function(e,t){if(ge(e,t),t.length!==ue)throw new Error("bad public key size");var n=new Uint8Array(e.length),r=ce(n,e,e.length,t);if(r<0)return null;for(var o=new Uint8Array(r),i=0;i<o.length;i++)o[i]=n[i];return o},e.sign.detached=function(t,n){for(var r=e.sign(t,n),o=new Uint8Array(de),i=0;i<o.length;i++)o[i]=r[i];return o},e.sign.detached.verify=function(e,t,n){if(ge(e,t,n),t.length!==de)throw new Error("bad signature size");if(n.length!==ue)throw new Error("bad public key size");var r,o=new Uint8Array(de+e.length),i=new Uint8Array(de+e.length);for(r=0;r<de;r++)o[r]=t[r];for(r=0;r<e.length;r++)o[r+de]=e[r];return ce(i,o,o.length,n)>=0},e.sign.keyPair=function(){var e=new Uint8Array(ue),t=new Uint8Array(he);return oe(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(ge(e),e.length!==he)throw new Error("bad secret key size");for(var t=new Uint8Array(ue),n=0;n<t.length;n++)t[n]=e[32+n];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(ge(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(ue),n=new Uint8Array(he),r=0;r<32;r++)n[r]=e[r];return oe(t,n,!0),{publicKey:t,secretKey:n}},e.sign.publicKeyLength=ue,e.sign.secretKeyLength=he,e.sign.seedLength=32,e.sign.signatureLength=de,e.hash=function(e){ge(e);var t=new Uint8Array(64);return Z(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return ge(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===g(e,0,t,0,e.length)},e.setPRNG=function(e){n=e},function(){var t=typeof self<"u"?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG((function(e,n){var r,o=new Uint8Array(n);for(r=0;r<n;r+=65536)t.getRandomValues(o.subarray(r,r+Math.min(n-r,65536)));for(r=0;r<n;r++)e[r]=o[r];be(o)}))}else typeof u<"u"&&((t=D())&&t.randomBytes&&e.setPRNG((function(e,n){var r,o=t.randomBytes(n);for(r=0;r<n;r++)e[r]=o[r];be(o)})))}()}(typeof t<"u"&&t.exports?t.exports:self.nacl=self.nacl||{})})),A=p(((e,t)=>{var n,o;n=e,o=function(){var e={};function t(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");var t,n=unescape(encodeURIComponent(e)),r=new Uint8Array(n.length);for(t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return r},e.encodeUTF8=function(e){var t,n=[];for(t=0;t<e.length;t++)n.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(n.join("")))},typeof atob>"u"?typeof r.from<"u"?(e.encodeBase64=function(e){return r.from(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(r.from(e,"base64"),0))}):(e.encodeBase64=function(e){return new r(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(new r(e,"base64"),0))}):(e.encodeBase64=function(e){var t,n=[],r=e.length;for(t=0;t<r;t++)n.push(String.fromCharCode(e[t]));return btoa(n.join(""))},e.decodeBase64=function(e){t(e);var n,r=atob(e),o=new Uint8Array(r.length);for(n=0;n<r.length;n++)o[n]=r.charCodeAt(n);return o}),e},typeof t<"u"&&t.exports?t.exports=o():(n.nacl||(n.nacl={}),n.nacl.util=o())}));function I(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(255!==n[a])throw new TypeError(i+" is ambiguous");n[a]=o}var s=e.length,f=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,o=0;e[t]===f;)r++,t++;for(var i=(e.length-t)*c+1>>>0,a=new Uint8Array(i);e[t];){var l=n[e.charCodeAt(t)];if(255===l)return;for(var d=0,u=i-1;(0!==l||d<o)&&-1!==u;u--,d++)l+=s*a[u]>>>0,a[u]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");o=d,t++}if(" "!==e[t]){for(var h=i-o;h!==i&&0===a[h];)h++;for(var p=new Uint8Array(r+(i-h)),g=r;h!==i;)p[g++]=a[h++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,i=t.length;o!==i&&0===t[o];)o++,n++;for(var a=(i-o)*l+1>>>0,c=new Uint8Array(a);o!==i;){for(var d=t[o],u=0,h=a-1;(0!==d||u<r)&&-1!==h;h--,u++)d+=256*c[h]>>>0,c[h]=d%s>>>0,d=d/s>>>0;if(0!==d)throw new Error("Non-zero carry");r=u,o++}for(var p=a-r;p!==a&&0===c[p];)p++;for(var g=f.repeat(n);p<a;++p)g+=e.charAt(c[p]);return g},decodeUnsafe:d,decode:function(e){var n=d(e);if(n)return n;throw new Error(`Non-${t} character`)}}}var K,M=h((()=>{K=I})),j={};g(j,{coerce:()=>X,empty:()=>U,equals:()=>B,fromHex:()=>W,fromString:()=>H,isBinary:()=>$,toHex:()=>L,toString:()=>q});var U,L,W,B,X,$,H,q,F,J,V,G,z,Y,Z,Q,ee,te=h((()=>{U=new Uint8Array(0),L=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),""),W=e=>{let t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):U},B=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},X=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},$=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),H=e=>(new TextEncoder).encode(e),q=e=>(new TextDecoder).decode(e)})),ne=h((()=>{M(),te(),F=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},J=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseDecode=n}decode(e){if("string"==typeof e){if(e[0]===this.prefix)return this.baseDecode(e.slice(1));throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}throw Error("Can only multibase decode strings")}or(e){let t={[this.prefix]:this,...e.decoders||{[e.prefix]:e}};return new V(t)}},V=class e{constructor(e){this.decoders=e}or(t){let n=t.decoders||{[t.prefix]:t};return new e({...this.decoders,...n})}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},G=class{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new F(e,t,n),this.decoder=new J(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},z=e=>{let{name:t,prefix:n,encode:r,decode:o}=e;return new G(t,n,r,o)},Y=e=>{let{prefix:t,name:n,alphabet:r}=e,{encode:o,decode:i}=K(r,n);return z({prefix:t,name:n,encode:o,decode:e=>X(i(e))})},Z=(e,t,n,r)=>{let o={};for(let l=0;l<t.length;++l)o[t[l]]=l;let i=e.length;for(;"="===e[i-1];)--i;let a=new Uint8Array(i*n/8|0),s=0,f=0,c=0;for(let l=0;l<i;++l){let t=o[e[l]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);f=f<<n|t,s+=n,s>=8&&(s-=8,a[c++]=255&f>>s)}if(s>=n||255&f<<8-s)throw new SyntaxError("Unexpected end of data");return a},Q=(e,t,n)=>{let r="="===t[t.length-1],o=(1<<n)-1,i="",a=0,s=0;for(let f=0;f<e.length;++f)for(s=s<<8|e[f],a+=8;a>n;)a-=n,i+=t[o&s>>a];if(a&&(i+=t[o&s<<n-a]),r)for(;i.length*n&7;)i+="=";return i},ee=e=>{let{name:t,prefix:n,bitsPerChar:r,alphabet:o}=e;return z({prefix:n,name:t,encode:e=>Q(e,o,r),decode:e=>Z(e,o,r,t)})}})),re={};g(re,{identity:()=>oe});var oe,ie=h((()=>{ne(),te(),oe=z({prefix:"\0",name:"identity",encode:e=>q(e),decode:e=>H(e)})})),ae={};g(ae,{base2:()=>se});var se,fe=h((()=>{ne(),se=ee({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})})),ce={};g(ce,{base8:()=>le});var le,de=h((()=>{ne(),le=ee({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})})),ue={};g(ue,{base10:()=>he});var he,pe=h((()=>{ne(),he=Y({prefix:"9",name:"base10",alphabet:"0123456789"})})),ge={};g(ge,{base16:()=>be,base16upper:()=>ye});var be,ye,ve=h((()=>{ne(),be=ee({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ye=ee({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})})),me={};g(me,{base32:()=>Ce,base32hex:()=>_e,base32hexpad:()=>Se,base32hexpadupper:()=>Re,base32hexupper:()=>xe,base32pad:()=>we,base32padupper:()=>Ee,base32upper:()=>Oe,base32z:()=>Ne});var Ce,Oe,we,Ee,_e,xe,Se,Re,Ne,Te=h((()=>{ne(),Ce=ee({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Oe=ee({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),we=ee({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ee=ee({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_e=ee({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),xe=ee({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Se=ee({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Re=ee({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ne=ee({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})})),ke={};g(ke,{base36:()=>De,base36upper:()=>Pe});var De,Pe,Ae=h((()=>{ne(),De=Y({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Pe=Y({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})})),Ie={};g(Ie,{base58btc:()=>Ke,base58flickr:()=>Me});var Ke,Me,je=h((()=>{ne(),Ke=Y({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Me=Y({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})})),Ue={};g(Ue,{base64:()=>Le,base64pad:()=>We,base64url:()=>Be,base64urlpad:()=>Xe});var Le,We,Be,Xe,$e=h((()=>{ne(),Le=ee({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),We=ee({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Be=ee({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Xe=ee({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})}));function He(e,t,n){t=t||[];for(var r=n=n||0;e>=Ge;)t[n++]=255&e|Je,e/=128;for(;e&Ve;)t[n++]=255&e|Je,e>>>=7;return t[n]=0|e,He.bytes=n-r+1,t}function qe(e,t){var n,r=0,o=0,i=t=t||0,a=e.length;do{if(i>=a)throw qe.bytes=0,new RangeError("Could not decode varint");n=e[i++],r+=o<28?(n&Ze)<<o:(n&Ze)*Math.pow(2,o),o+=7}while(n>=Ye);return qe.bytes=i-t,r}var Fe,Je,Ve,Ge,ze,Ye,Ze,Qe,et,tt,nt,rt,ot,it,at,st,ft,ct=h((()=>{Fe=He,Je=128,Ve=-128,Ge=Math.pow(2,31),ze=qe,Ye=128,Ze=127,Qe=Math.pow(2,7),et=Math.pow(2,14),tt=Math.pow(2,21),nt=Math.pow(2,28),rt=Math.pow(2,35),ot=Math.pow(2,42),it=Math.pow(2,49),at=Math.pow(2,56),st=Math.pow(2,63),ft={encode:Fe,decode:ze,encodingLength:function(e){return e<Qe?1:e<et?2:e<tt?3:e<nt?4:e<rt?5:e<ot?6:e<it?7:e<at?8:e<st?9:10}}})),lt={};g(lt,{decode:()=>dt,encodeTo:()=>ut,encodingLength:()=>ht});var dt,ut,ht,pt=h((()=>{ct(),dt=e=>[ft.decode(e),ft.decode.bytes],ut=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ft.encode(e,t,n),t},ht=e=>ft.encodingLength(e)})),gt={};g(gt,{Digest:()=>mt,create:()=>bt,decode:()=>yt,equals:()=>vt});var bt,yt,vt,mt,Ct=h((()=>{te(),pt(),bt=(e,t)=>{let n=t.byteLength,r=ht(e),o=r+ht(n),i=new Uint8Array(o+n);return ut(e,i,0),ut(n,i,r),i.set(t,o),new mt(e,n,t,i)},yt=e=>{let t=X(e),[n,r]=dt(t),[o,i]=dt(t.subarray(r)),a=t.subarray(r+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new mt(n,o,a,t)},vt=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&B(e.bytes,t.bytes),mt=class{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}})),Ot={};g(Ot,{Hasher:()=>Et,from:()=>wt});var wt,Et,_t=h((()=>{Ct(),wt=e=>{let{name:t,code:n,encode:r}=e;return new Et(t,n,r)},Et=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}async digest(e){if(e instanceof Uint8Array){let t=await this.encode(e);return bt(this.code,t)}throw Error("Unknown type, must be binary type")}}})),xt={};g(xt,{sha256:()=>Rt,sha512:()=>Nt});var St,Rt,Nt,Tt=h((()=>{_t(),Rt=wt({name:"sha2-256",code:18,encode:(St=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)))("SHA-256")}),Nt=wt({name:"sha2-512",code:19,encode:St("SHA-512")})})),kt={};g(kt,{identity:()=>Dt});var Dt,Pt=h((()=>{_t(),te(),Dt=wt({name:"identity",code:0,encode:e=>X(e)})})),At={};g(At,{code:()=>Mt,decode:()=>Ut,encode:()=>jt,name:()=>Kt});var It,Kt,Mt,jt,Ut,Lt=h((()=>{te(),It=e=>X(e),({name:Kt,code:Mt,encode:jt,decode:Ut}={name:"raw",code:85,decode:It,encode:It})})),Wt={};g(Wt,{code:()=>Xt,decode:()=>Ht,encode:()=>$t,name:()=>Bt});var Bt,Xt,$t,Ht,qt,Ft,Jt,Vt,Gt,zt,Yt,Zt,Qt,en,tn,nn,rn=h((()=>{({name:Bt,code:Xt,encode:$t,decode:Ht}={name:"json",code:512,encode:e=>(new TextEncoder).encode(JSON.stringify(e)),decode:e=>JSON.parse((new TextDecoder).decode(e))})})),on=h((()=>{pt(),Ct(),je(),Te(),te(),qt=class e{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:en,byteLength:en,code:Qt,version:Qt,multihash:Qt,bytes:Qt,_baseCache:en,asCID:en})}toV0(){if(0===this.version)return this;{let{code:t,multihash:n}=this;if(t!==Gt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==zt)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(n)}}toV1(){switch(this.version){case 0:{let{code:t,digest:n}=this.multihash,r=bt(t,n);return e.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&vt(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:r}=this;return 0===n?Jt(t,r,e||Ke.encoder):Vt(t,r,e||Ce.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return tn(/^0\.0/,nn),!(!e||!e[Zt]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof e)return t;if(null!=t&&t.asCID===t){let{version:n,code:r,multihash:o,bytes:i}=t;return new e(n,r,o,i||Yt(n,r,o.bytes))}if(null!=t&&!0===t[Zt]){let{version:n,multihash:r,code:o}=t,i=yt(r);return e.create(n,o,i)}return null}static create(t,n,r){if("number"!=typeof n)throw new Error("String codecs are no longer supported");switch(t){case 0:if(n!==Gt)throw new Error(`Version 0 CID must use dag-pb (code: ${Gt}) block encoding`);return new e(t,n,r,r.bytes);case 1:{let o=Yt(t,n,r.bytes);return new e(t,n,r,o)}default:throw new Error("Invalid version")}}static createV0(t){return e.create(0,Gt,t)}static createV1(t,n){return e.create(1,t,n)}static decode(t){let[n,r]=e.decodeFirst(t);if(r.length)throw new Error("Incorrect length");return n}static decodeFirst(t){let n=e.inspectBytes(t),r=n.size-n.multihashSize,o=X(t.subarray(r,r+n.multihashSize));if(o.byteLength!==n.multihashSize)throw new Error("Incorrect length");let i=o.subarray(n.multihashSize-n.digestSize),a=new mt(n.multihashCode,n.digestSize,i,o);return[0===n.version?e.createV0(a):e.createV1(n.codec,a),t.subarray(n.size)]}static inspectBytes(e){let t=0,n=()=>{let[n,r]=dt(e.subarray(t));return t+=r,n},r=n(),o=Gt;if(18===r?(r=0,t=0):1===r&&(o=n()),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);let i=t,a=n(),s=n(),f=t+s;return{version:r,codec:o,multihashCode:a,digestSize:s,multihashSize:f-i,size:f}}static parse(t,n){let[r,o]=Ft(t,n),i=e.decode(o);return i._baseCache.set(r,t),i}},Ft=(e,t)=>{switch(e[0]){case"Q":{let n=t||Ke;return[Ke.prefix,n.decode(`${Ke.prefix}${e}`)]}case Ke.prefix:{let n=t||Ke;return[Ke.prefix,n.decode(e)]}case Ce.prefix:{let n=t||Ce;return[Ce.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Jt=(e,t,n)=>{let{prefix:r}=n;if(r!==Ke.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);let o=t.get(r);if(null==o){let o=n.encode(e).slice(1);return t.set(r,o),o}return o},Vt=(e,t,n)=>{let{prefix:r}=n,o=t.get(r);if(null==o){let o=n.encode(e);return t.set(r,o),o}return o},Gt=112,zt=18,Yt=(e,t,n)=>{let r=ht(e),o=r+ht(t),i=new Uint8Array(o+n.byteLength);return ut(e,i,0),ut(t,i,r),i.set(n,o),i},Zt=Symbol.for("@ipld/js-cid/CID"),Qt={writable:!1,configurable:!1,enumerable:!0},en={writable:!1,enumerable:!1,configurable:!1},tn=(e,t)=>{if(!e.test("0.0.0-dev"))throw new Error(t);o.warn(t)},nn="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n"})),an=h((()=>{on(),pt(),te(),_t(),Ct()})),sn={};g(sn,{CID:()=>qt,bases:()=>fn,bytes:()=>j,codecs:()=>ln,digest:()=>gt,hasher:()=>Ot,hashes:()=>cn,varint:()=>lt});var fn,cn,ln,dn=h((()=>{ie(),fe(),de(),pe(),ve(),Te(),Ae(),je(),$e(),Tt(),Pt(),Lt(),rn(),an(),fn={...re,...ae,...ce,...ue,...ge,...me,...ke,...Ie,...Ue},cn={...xt,...kt},ln={raw:At,json:Wt}}));var un=h((()=>{}));function hn(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}var pn,gn,bn,yn,vn=h((()=>{dn(),un(),pn=hn("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),gn=hn("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{let t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),bn={utf8:pn,"utf-8":pn,hex:fn.base16,latin1:gn,ascii:gn,binary:gn,...fn},yn=bn})),mn={};function Cn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",n=yn[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}g(mn,{toString:()=>Cn});var On=h((()=>{vn()})),wn=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mul=Math.imul||function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16&65535)*r+n*(t>>>16&65535)<<16>>>0)|0},e.add=function(e,t){return e+t|0},e.sub=function(e,t){return e-t|0},e.rotl=function(e,t){return e<<t|e>>>32-t},e.rotr=function(e,t){return e<<32-t|e>>>t},e.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(t){return e.isInteger(t)&&t>=-e.MAX_SAFE_INTEGER&&t<=e.MAX_SAFE_INTEGER}})),En=p((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=wn();function n(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>8,t[n+1]=e>>>0,t}function r(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t}function o(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function i(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function a(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function s(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function f(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>24,t[n+1]=e>>>16,t[n+2]=e>>>8,t[n+3]=e>>>0,t}function c(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24,t}function l(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),f(e/4294967296>>>0,t,n),f(e>>>0,t,n+4),t}function d(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),c(e>>>0,t,n),c(e/4294967296>>>0,t,n+4),t}e.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},e.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},e.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},e.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},e.writeUint16BE=n,e.writeInt16BE=n,e.writeUint16LE=r,e.writeInt16LE=r,e.readInt32BE=o,e.readUint32BE=i,e.readInt32LE=a,e.readUint32LE=s,e.writeUint32BE=f,e.writeInt32BE=f,e.writeUint32LE=c,e.writeInt32LE=c,e.readInt64BE=function(e,t){void 0===t&&(t=0);var n=o(e,t),r=o(e,t+4);return 4294967296*n+r-4294967296*(r>>31)},e.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*i(e,t)+i(e,t+4)},e.readInt64LE=function(e,t){void 0===t&&(t=0);var n=a(e,t);return 4294967296*a(e,t+4)+n-4294967296*(n>>31)},e.readUint64LE=function(e,t){void 0===t&&(t=0);var n=s(e,t);return 4294967296*s(e,t+4)+n},e.writeUint64BE=l,e.writeInt64BE=l,e.writeUint64LE=d,e.writeInt64LE=d,e.readUintBE=function(e,t,n){if(void 0===n&&(n=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintBE: array is too short for the given bitLength");for(var r=0,o=1,i=e/8+n-1;i>=n;i--)r+=t[i]*o,o*=256;return r},e.readUintLE=function(e,t,n){if(void 0===n&&(n=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintLE: array is too short for the given bitLength");for(var r=0,o=1,i=n;i<n+e/8;i++)r+=t[i]*o,o*=256;return r},e.writeUintBE=function(e,n,r,o){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===o&&(o=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!t.isSafeInteger(n))throw new Error("writeUintBE value must be an integer");for(var i=1,a=e/8+o-1;a>=o;a--)r[a]=n/i&255,i*=256;return r},e.writeUintLE=function(e,n,r,o){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===o&&(o=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!t.isSafeInteger(n))throw new Error("writeUintLE value must be an integer");for(var i=1,a=o;a<o+e/8;a++)r[a]=n/i&255,i*=256;return r},e.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},e.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},e.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},e.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},e.writeFloat32BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e),t},e.writeFloat32LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e,!0),t},e.writeFloat64BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e),t},e.writeFloat64LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e,!0),t}})),_n=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}})),xn=p((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=En(),n=_n();e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var r=function(){function r(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return r.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},r.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},r.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._temp),this.reset()},r.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[n++],t--;this._bufferLength===this.blockSize&&(i(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(n=i(this._temp,this._state,e,n,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[n++],t--;return this},r.prototype.finish=function(e){if(!this._finished){var n=this._bytesHashed,r=this._bufferLength,o=n/536870912|0,a=n<<3,s=n%64<56?64:128;this._buffer[r]=128;for(var f=r+1;f<s-8;f++)this._buffer[f]=0;t.writeUint32BE(o,this._buffer,s-8),t.writeUint32BE(a,this._buffer,s-4),i(this._temp,this._state,this._buffer,0,s),this._finished=!0}for(f=0;f<this.digestLength/4;f++)t.writeUint32BE(this._state[f],e,4*f);return this},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},r.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},r.prototype.cleanSavedState=function(e){n.wipe(e.state),e.buffer&&n.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},r}();e.SHA256=r;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function i(e,n,r,i,a){for(;a>=64;){for(var s=n[0],f=n[1],c=n[2],l=n[3],d=n[4],u=n[5],h=n[6],p=n[7],g=0;g<16;g++){var b=i+4*g;e[g]=t.readUint32BE(r,b)}for(g=16;g<64;g++){var y=e[g-2],v=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10,m=((y=e[g-15])>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;e[g]=(v+e[g-7]|0)+(m+e[g-16]|0)}for(g=0;g<64;g++){v=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&u^~d&h)|0)+(p+(o[g]+e[g]|0)|0)|0,m=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&f^s&c^f&c)|0;p=h,h=u,u=d,d=l+v|0,l=c,c=f,f=s,s=v+m|0}n[0]+=s,n[1]+=f,n[2]+=c,n[3]+=l,n[4]+=d,n[5]+=u,n[6]+=h,n[7]+=p,i+=64,a-=64}return i}e.hash=function(e){var t=new r;t.update(e);var n=t.digest();return t.clean(),n}})),Sn=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.logDebug=function(){if(typeof o<"u")try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t||window?.okxLogDebug)&&o.log("[OKX_CONNECT_SDK]",...n)}catch{}},e.logError=function(){if(typeof o<"u")try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t||window?.okxLogDebug)&&o.error("[OKX_CONNECT_SDK]",...n)}catch{}},e.logWarning=function(){if(typeof o<"u")try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t||window?.okxLogDebug)&&o.warn("[OKX_CONNECT_SDK]",...n)}catch{}};var t=!1})),Rn=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.safeJsonParse=function(e){if("string"!=typeof e)throw(0,t.logDebug)(e),new Error("Cannot safe json parse value of type "+typeof e);try{return r(e)}catch(ji){return o.error("safeJsonParse error:",ji),e}},e.safeJsonStringify=function(e){return"string"==typeof e?e:n(e)||""};var t=Sn(),n=e=>JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString()+"n":t)),r=e=>{let t=e.replace(/:(\b\d{17,}|\b(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))(?=[,\}\]]|$)/g,(e=>`"${e}n"`));return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))}})),Nn=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.okxfromString=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=s[t];if((0,n.logDebug)("okxfromstring ====> "),!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)},e.okxtoString=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=s[t];if((0,n.logDebug)("okxtoString ====> "),!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)},e.alloc=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Uint8Array(e)},e.allocUnsafe=r;var t=(dn(),v(sn)),n=Sn();function r(){return new Uint8Array(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}function o(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}var i=o("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),a=o("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{let t=r((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),s=Object.assign({utf8:i,"utf-8":i,hex:t.bases.base16,latin1:a,ascii:a,binary:a},t.bases)})),Tn=p((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.isValidObject=e.RANDOM_LENGTH=e.isBrowser=e.resolveLocalStorage=e.hasLocalStorage=e.hasBuiltInWebSocket=e.resolveWebSocketImplementation=void 0,e.hexToByteArray=function(e){if(e.length%2!==0)throw new Error(`Cannot convert ${e} to bytesArray`);let t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n/2]=parseInt(e.slice(n,n+2),16);return t},e.toHexString=function(e){let t="";return e.forEach((e=>{t+=("0"+(255&e).toString(16)).slice(-2)})),t},e.concatUint8Arrays=function(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n},e.splitToUint8Arrays=function(e,t){if(t>=e.length)throw new Error("Index is out of buffer");let n=e.slice(0,t),r=e.slice(t);return[n,r]},e.base64encode=function(e,t){let n;return e instanceof Uint8Array?n=e:("string"!=typeof e&&(e=(0,s.safeJsonStringify)(e)),n=o.default.decodeUTF8(e)),function(e,t){let n=o.default.encodeBase64(e);return t?encodeURIComponent(n):n}(n,t)},e.base64decode=function(e,t){let n=function(e,t){return t&&(e=decodeURIComponent(e)),o.default.decodeBase64(e)}(e,t);return{toString:()=>o.default.encodeUTF8(n),toObject(){try{return(0,s.safeJsonParse)(o.default.encodeUTF8(n))}catch{return null}},toUint8Array:()=>n}},e.checkWSUrl=function(e){let t=e.match(new RegExp(/^\w+:/,"gi"));if(!t||!t.length)return!1;let n=t[0];return void 0!==n&&new RegExp("^wss?:").test(n)},e.hashKey=d,e.generateRandomBytes32=u,e.generateTopic=function(){let e=u();return(0,f.logDebug)(`generate topic called ${e}`),d((0,i.toString)(e,l))},e.isIos=function(){let e=navigator.userAgent,t=navigator.maxTouchPoints||0,n=/iPad|iPhone|iPod/.test(e)&&!window.MSStream,r=e.includes("Mac")&&t>1;return(0,f.logDebug)(`utils isIos >>>isIOSDevice: ${n}    >> isIPadOS: ${r}`),n||r};var r=t(P()),o=t(A()),i=(On(),v(mn)),a=xn(),s=Rn(),f=Sn(),c=Nn(),l="base16";e.resolveWebSocketImplementation=()=>typeof WebSocket<"u"?WebSocket:typeof n.g<"u"&&typeof n.g.WebSocket<"u"?n.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:WebSocket;e.hasBuiltInWebSocket=()=>typeof WebSocket<"u"||typeof n.g<"u"&&typeof n.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u";e.hasLocalStorage=()=>typeof n.g<"u"&&typeof n.g.localStorage<"u"||typeof window<"u"&&typeof window.localStorage<"u";e.resolveLocalStorage=()=>typeof n.g<"u"&&typeof n.g.localStorage<"u"?n.g.localStorage:typeof window<"u"&&typeof window.localStorage<"u"?window.localStorage:localStorage;function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;(0,f.logDebug)(`hash key called ${e}`);let n=(0,a.hash)((0,c.okxfromString)(e,t));return(0,i.toString)(n,t)}function u(){return r.default.randomBytes(e.RANDOM_LENGTH)}e.isBrowser=()=>typeof window<"u",e.RANDOM_LENGTH=32;e.isValidObject=e=>Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length})),kn=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};function n(e,n){return t(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{var o,i;if(null!==(o=n?.signal)&&void 0!==o&&o.aborted)return void r(new Error("Delay aborted"));let a=setTimeout((()=>t()),e);null===(i=n?.signal)||void 0===i||i.addEventListener("abort",(()=>{clearTimeout(a),r(new Error("Delay aborted"))}))}))}))}Object.defineProperty(e,"__esModule",{value:!0}),e.callForSuccess=function(e,r){return t(this,void 0,void 0,(function*(){var t,o;let i=null!==(t=r?.attempts)&&void 0!==t?t:3,a=null!==(o=r?.delayMs)&&void 0!==o?o:800;if("function"!=typeof e)throw new Error("Expected a function, got "+typeof e);let s,f=0;for(;f<i;)try{return yield e()}catch(c){s=c,f++,f<i&&(yield n(a))}throw s}))},e.delay=n})),Dn=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ERROR=e.STANDARD_ERROR_MAP=e.SERVER_ERROR_CODE_RANGE=e.RESERVED_ERROR_CODES=e.SERVER_ERROR=e.INTERNAL_ERROR=e.INVALID_PARAMS=e.METHOD_NOT_FOUND=e.INVALID_REQUEST=e.PARSE_ERROR=e.OKX_CONNECT_ERROR_CODES=e.OKXConnectError=void 0;var t,n,r=class e extends Error{constructor(n,r){null==r&&(r=function(e){return e==t.UNKNOWN_ERROR?"unknown error":e==t.BAD_REQUEST_ERROR?"bad request error":e==t.ALREADY_CONNECTED_ERROR?"already connected error":e==t.NOT_CONNECTED_ERROR?"not connected error":e==t.UNKNOWN_APP_ERROR?"unknown app error":e==t.USER_REJECTS_ERROR?"user rejects error":e==t.METHOD_NOT_SUPPORTED?"method not supported":e==t.CONNECTION_ERROR?"connect error":"unknown error"}(n)),super(r),this.code=n,this.message=`${e.prefix} ${r?"\n"+r:""}`,Object.setPrototypeOf(this,e.prototype)}toJSON(){return{message:this.message,code:this.code}}};e.OKXConnectError=r,r.prefix="[OKX_CONNECT_SDK_ERROR]",(n=t||(e.OKX_CONNECT_ERROR_CODES=t={}))[n.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",n[n.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",n[n.ALREADY_CONNECTED_ERROR=11]="ALREADY_CONNECTED_ERROR",n[n.NOT_CONNECTED_ERROR=12]="NOT_CONNECTED_ERROR",n[n.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",n[n.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",n[n.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",n[n.CHAIN_NOT_SUPPORTED=500]="CHAIN_NOT_SUPPORTED",n[n.WALLET_NOT_SUPPORTED=600]="WALLET_NOT_SUPPORTED",n[n.CONNECTION_ERROR=700]="CONNECTION_ERROR",e.PARSE_ERROR="PARSE_ERROR",e.INVALID_REQUEST="INVALID_REQUEST",e.METHOD_NOT_FOUND="METHOD_NOT_FOUND",e.INVALID_PARAMS="INVALID_PARAMS",e.INTERNAL_ERROR="INTERNAL_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.RESERVED_ERROR_CODES=[-32700,-32600,-32601,-32602,-32603],e.SERVER_ERROR_CODE_RANGE=[-32e3,-32099],e.STANDARD_ERROR_MAP={[e.PARSE_ERROR]:{code:-32700,message:"Parse error"},[e.INVALID_REQUEST]:{code:-32600,message:"Invalid Request"},[e.METHOD_NOT_FOUND]:{code:-32601,message:"Method not found"},[e.INVALID_PARAMS]:{code:-32602,message:"Invalid params"},[e.INTERNAL_ERROR]:{code:-32603,message:"Internal error"},[e.SERVER_ERROR]:{code:-32e3,message:"Server error"}},e.DEFAULT_ERROR=e.SERVER_ERROR})),Pn=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OKX_CONNECT_ERROR_CODES=e.OKXConnectError=void 0;var t=Dn();Object.defineProperty(e,"OKXConnectError",{enumerable:!0,get:function(){return t.OKXConnectError}}),Object.defineProperty(e,"OKX_CONNECT_ERROR_CODES",{enumerable:!0,get:function(){return t.OKX_CONNECT_ERROR_CODES}})})),An=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NameSpaceKeyCosmos=e.NameSpaceKeyAptos=e.NameSpaceKeyBtc=e.NameSpaceKeySui=e.NameSpaceKeyTON=e.NameSpaceKeySOL=e.NameSpaceKeyEip155=void 0,e.NameSpaceKeyEip155="eip155",e.NameSpaceKeySOL="solana",e.NameSpaceKeyTON="ton",e.NameSpaceKeySui="sui",e.NameSpaceKeyBtc="btc",e.NameSpaceKeyAptos="aptos",e.NameSpaceKeyCosmos="cosmos"})),In=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tgwalletName=e.tonConnectSdkVersion=e.standardDeeplink=e.standardUniversalLink=e.okxDeeplink=void 0,e.okxDeeplink="okx://web3",e.standardUniversalLink="https://www.okx.com/download",e.standardDeeplink=`${e.okxDeeplink}/wallet/connect`,e.tonConnectSdkVersion="1",e.tgwalletName="OKX_WALLET_BOT"})),Kn=p((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};function n(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function r(e){return"result"in e}function o(e){return"error"in e}Object.defineProperty(e,"__esModule",{value:!0}),e.isJsonRpcPayload=n,e.isJsonRpcRequest=function(e){return n(e)&&"method"in e},e.isJsonRpcResponse=function(e){return n(e)&&(r(e)||o(e))},e.isJsonRpcResult=r,e.isJsonRpcError=o,e.payloadId=l,e.getBigIntRpcId=function(){let e=BigInt(Date.now())*BigInt(1e6),t=BigInt(c.getNextValue());return e+t},e.formatJsonRpcRequest=function(e,t,n){return{id:n||l(),jsonrpc:"2.0",method:e,params:t}},e.formatJsonRpcResult=function(e,t){return{id:e,jsonrpc:"2.0",result:t}},e.formatJsonRpcError=function(e,t,n){return{id:e,jsonrpc:"2.0",error:p(t,n)}},e.isReservedErrorCode=d,e.getError=u,e.getErrorByCode=h,e.formatErrorMessage=p,e.isHttpUrl=function(e){return g(e,"^https?:")},e.isWsUrl=function(e){return g(e,"^wss?:")},e.parseConnectionError=function(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${t}`):e};var i=Dn(),a=t(P()),s=class{constructor(e){this.i=1;8===e?new Uint8Array(1):16===e?new Uint16Array(1):new Uint32Array(1);this.initialValue=a.default.randomBytes(e/8)[0]}getNextValue(){return this.initialValue+this.i++}},f=new s(8),c=new s(16);function l(){return 1e3*Date.now()+f.getNextValue()}function d(e){return i.RESERVED_ERROR_CODES.includes(e)}function u(e){return Object.keys(i.STANDARD_ERROR_MAP).includes(e)?i.STANDARD_ERROR_MAP[e]:i.STANDARD_ERROR_MAP[i.DEFAULT_ERROR]}function h(e){return Object.values(i.STANDARD_ERROR_MAP).find((t=>t.code===e))||i.STANDARD_ERROR_MAP[i.DEFAULT_ERROR]}function p(e,t){return typeof e>"u"?u(i.INTERNAL_ERROR):("string"==typeof e&&(e=Object.assign(Object.assign({},u(i.SERVER_ERROR)),{message:e})),typeof t<"u"&&(e.data=t),d(e.code)&&(e=h(e.code)),e)}function g(e,t){let n=function(e){let t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return!(typeof n>"u")&&new RegExp(t).test(n)}})),Mn=p((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.IEngine=e.ISignClient=e.ISignClientEvents=e.IEngineEvents=void 0;var n=t(m()),r=class extends n.default{constructor(){super()}};e.IEngineEvents=r;var o=class extends n.default{constructor(){super()}};e.ISignClientEvents=o;e.ISignClient=class{constructor(e){this.data=e}};e.IEngine=class{constructor(e){this.client=e}}})),jn=p((e=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TONCHAIN=void 0,(t||(e.TONCHAIN=t={})).MAINNET="-239"})),Un=p((e=>{var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.CONNECT_ITEM_ERROR_CODES=void 0,(n=t||(e.CONNECT_ITEM_ERROR_CODES=t={}))[n.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",n[n.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})),Ln=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CONNECT_ITEM_ERROR_CODES=e.TONCHAIN=void 0;var t=jn();Object.defineProperty(e,"TONCHAIN",{enumerable:!0,get:function(){return t.TONCHAIN}});var n=Un();Object.defineProperty(e,"CONNECT_ITEM_ERROR_CODES",{enumerable:!0,get:function(){return n.CONNECT_ITEM_ERROR_CODES}})})),Wn=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.creatOKXWalletInfo=function(){return{appName:"okxAppWallet",name:"OKX Wallet",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",aboutUrl:"https://www.okx.com/web3",universalLink:t.standardUniversalLink,deepLink:t.standardDeeplink,platforms:["ios","android"]}},e.creatOKXMiniAppWalletInfo=function(){return{appName:"okxMiniApp",name:"OKX Mini Wallet",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",aboutUrl:"https://www.okx.com/web3",universalLink:`https://t.me/${t.tgwalletName}/start`,deepLink:"",platforms:["ios","android","macos","windows"]}};var t=In()})),Bn=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.creatOKXMiniAppWalletInfo=e.creatOKXWalletInfo=e.ISignClientEvents=e.IEngine=e.IEngineEvents=e.ISignClient=e.getBigIntRpcId=e.formatJsonRpcRequest=e.isJsonRpcError=e.isJsonRpcResponse=e.parseConnectionError=e.isHttpUrl=e.formatJsonRpcError=void 0;var r=Kn();Object.defineProperty(e,"formatJsonRpcError",{enumerable:!0,get:function(){return r.formatJsonRpcError}}),Object.defineProperty(e,"isHttpUrl",{enumerable:!0,get:function(){return r.isHttpUrl}}),Object.defineProperty(e,"parseConnectionError",{enumerable:!0,get:function(){return r.parseConnectionError}}),Object.defineProperty(e,"isJsonRpcResponse",{enumerable:!0,get:function(){return r.isJsonRpcResponse}}),Object.defineProperty(e,"isJsonRpcError",{enumerable:!0,get:function(){return r.isJsonRpcError}}),Object.defineProperty(e,"formatJsonRpcRequest",{enumerable:!0,get:function(){return r.formatJsonRpcRequest}}),Object.defineProperty(e,"getBigIntRpcId",{enumerable:!0,get:function(){return r.getBigIntRpcId}});var o=Mn();Object.defineProperty(e,"ISignClient",{enumerable:!0,get:function(){return o.ISignClient}}),Object.defineProperty(e,"IEngineEvents",{enumerable:!0,get:function(){return o.IEngineEvents}}),Object.defineProperty(e,"IEngine",{enumerable:!0,get:function(){return o.IEngine}}),Object.defineProperty(e,"ISignClientEvents",{enumerable:!0,get:function(){return o.ISignClientEvents}}),n(Ln(),e);var i=Wn();Object.defineProperty(e,"creatOKXWalletInfo",{enumerable:!0,get:function(){return i.creatOKXWalletInfo}}),Object.defineProperty(e,"creatOKXMiniAppWalletInfo",{enumerable:!0,get:function(){return i.creatOKXMiniAppWalletInfo}})})),Xn=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.okxDeeplink=e.tonConnectSdkVersion=e.standardDeeplink=e.standardUniversalLink=e.NameSpaceKeyCosmos=e.NameSpaceKeyAptos=e.NameSpaceKeyBtc=e.NameSpaceKeySui=e.NameSpaceKeyTON=e.NameSpaceKeySOL=e.NameSpaceKeyEip155=void 0,n(Pn(),e);var r=An();Object.defineProperty(e,"NameSpaceKeyEip155",{enumerable:!0,get:function(){return r.NameSpaceKeyEip155}}),Object.defineProperty(e,"NameSpaceKeySOL",{enumerable:!0,get:function(){return r.NameSpaceKeySOL}}),Object.defineProperty(e,"NameSpaceKeyTON",{enumerable:!0,get:function(){return r.NameSpaceKeyTON}}),Object.defineProperty(e,"NameSpaceKeySui",{enumerable:!0,get:function(){return r.NameSpaceKeySui}}),Object.defineProperty(e,"NameSpaceKeyBtc",{enumerable:!0,get:function(){return r.NameSpaceKeyBtc}}),Object.defineProperty(e,"NameSpaceKeyAptos",{enumerable:!0,get:function(){return r.NameSpaceKeyAptos}}),Object.defineProperty(e,"NameSpaceKeyCosmos",{enumerable:!0,get:function(){return r.NameSpaceKeyCosmos}});var o=In();Object.defineProperty(e,"standardUniversalLink",{enumerable:!0,get:function(){return o.standardUniversalLink}}),Object.defineProperty(e,"standardDeeplink",{enumerable:!0,get:function(){return o.standardDeeplink}}),Object.defineProperty(e,"tonConnectSdkVersion",{enumerable:!0,get:function(){return o.tonConnectSdkVersion}}),Object.defineProperty(e,"okxDeeplink",{enumerable:!0,get:function(){return o.okxDeeplink}}),n(Bn(),e)})),$n=p(((e,t)=>{!function(r,o){var i="function",a="undefined",s="object",f="string",c="major",l="model",d="name",u="type",h="vendor",p="version",g="architecture",b="console",y="mobile",v="tablet",m="smarttv",C="wearable",O="embedded",w="Amazon",E="Apple",_="ASUS",x="BlackBerry",S="Browser",R="Chrome",N="Firefox",T="Google",k="Huawei",D="LG",P="Microsoft",A="Motorola",I="Opera",K="Samsung",M="Sharp",j="Sony",U="Xiaomi",L="Zebra",W="Facebook",B="Chromium OS",X="Mac OS",$=" Browser",H=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},q=function(e,t){return typeof e===f&&-1!==F(t).indexOf(F(e))},F=function(e){return e.toLowerCase()},J=function(e,t){if(typeof e===f)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,500)},V=function(e,t){for(var n,r,a,f,c,l,d=0;d<t.length&&!c;){var u=t[d],h=t[d+1];for(n=r=0;n<u.length&&!c&&u[n];)if(c=u[n++].exec(e))for(a=0;a<h.length;a++)l=c[++r],typeof(f=h[a])===s&&f.length>0?2===f.length?typeof f[1]==i?this[f[0]]=f[1].call(this,l):this[f[0]]=f[1]:3===f.length?typeof f[1]!==i||f[1].exec&&f[1].test?this[f[0]]=l?l.replace(f[1],f[2]):o:this[f[0]]=l?f[1].call(this,l,f[2]):o:4===f.length&&(this[f[0]]=l?f[3].call(this,l.replace(f[1],f[2])):o):this[f]=l||o;d+=2}},G=function(e,t){for(var n in t)if(typeof t[n]===s&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(q(t[n][r],e))return"?"===n?o:n}else if(q(t[n],e))return"?"===n?o:n;return t.hasOwnProperty("*")?t["*"]:e},z={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,I+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[p,[d,I+" GX"]],[/\bopr\/([\w\.]+)/i],[p,[d,I]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[d,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/quark(?:pc)?\/([-\w\.]+)/i],[p,[d,"Quark"]],[/\bddg\/([\w\.]+)/i],[p,[d,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UC"+S]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[d,"Smart Lenovo "+S]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+S],p],[/\bfocus\/([\w\.]+)/i],[p,[d,N+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,I+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,I+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI "+S]],[/fxios\/([-\w\.]+)/i],[p,[d,N]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360"+$]],[/\b(qq)\/([\w\.]+)/i],[[d,/(.+)/,"$1Browser"],p],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1"+$],p],[/samsungbrowser\/([\w\.]+)/i],[p,[d,K+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/metasr[\/ ]?([\d\.]+)/i],[p,[d,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[d,"Sogou Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[d,p],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,W],p],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,R+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,R+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android "+S]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,G,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/(wolvic)\/([\w\.]+)/i],[d,p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,N+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,[p,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[d,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,F]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",F]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[h,K],[u,v]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[l,[h,K],[u,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[h,E],[u,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[h,E],[u,v]],[/(macintosh);/i],[l,[h,E]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[h,M],[u,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[h,k],[u,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[h,k],[u,y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[l,/_/g," "],[h,U],[u,y]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[h,U],[u,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[h,"OPPO"],[u,y]],[/\b(opd2\d{3}a?) bui/i],[l,[h,"OPPO"],[u,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[h,"Vivo"],[u,y]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[l,[h,"Realme"],[u,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[h,A],[u,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[h,A],[u,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[h,D],[u,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[h,D],[u,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[h,"Lenovo"],[u,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[h,"Nokia"],[u,y]],[/(pixel c)\b/i],[l,[h,T],[u,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[h,T],[u,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[h,j],[u,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[h,j],[u,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[h,"OnePlus"],[u,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[h,w],[u,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[h,w],[u,y]],[/(playbook);[-\w\),; ]+(rim)/i],[l,h,[u,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[h,x],[u,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[h,_],[u,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[h,_],[u,y]],[/(nexus 9)/i],[l,[h,"HTC"],[u,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[l,/_/g," "],[u,y]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[l,[h,"TCL"],[u,v]],[/(itel) ((\w+))/i],[[h,F],l,[u,G,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[h,"Acer"],[u,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[h,"Meizu"],[u,y]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[l,[h,"Ulefone"],[u,y]],[/droid.+; (a(?:015|06[35]|142p?))/i],[l,[h,"Nothing"],[u,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,l,[u,y]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,l,[u,v]],[/(surface duo)/i],[l,[h,P],[u,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[h,"Fairphone"],[u,y]],[/(u304aa)/i],[l,[h,"AT&T"],[u,y]],[/\bsie-(\w*)/i],[l,[h,"Siemens"],[u,y]],[/\b(rct\w+) b/i],[l,[h,"RCA"],[u,v]],[/\b(venue[\d ]{2,7}) b/i],[l,[h,"Dell"],[u,v]],[/\b(q(?:mv|ta)\w+) b/i],[l,[h,"Verizon"],[u,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[h,"Barnes & Noble"],[u,v]],[/\b(tm\d{3}\w+) b/i],[l,[h,"NuVision"],[u,v]],[/\b(k88) b/i],[l,[h,"ZTE"],[u,v]],[/\b(nx\d{3}j) b/i],[l,[h,"ZTE"],[u,y]],[/\b(gen\d{3}) b.+49h/i],[l,[h,"Swiss"],[u,y]],[/\b(zur\d{3}) b/i],[l,[h,"Swiss"],[u,v]],[/\b((zeki)?tb.*\b) b/i],[l,[h,"Zeki"],[u,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],l,[u,v]],[/\b(ns-?\w{0,9}) b/i],[l,[h,"Insignia"],[u,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[h,"NextBook"],[u,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],l,[u,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],l,[u,y]],[/\b(ph-1) /i],[l,[h,"Essential"],[u,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[h,"Envizen"],[u,v]],[/\b(trio[-\w\. ]+) b/i],[l,[h,"MachSpeed"],[u,v]],[/\btu_(1491) b/i],[l,[h,"Rotor"],[u,v]],[/(shield[\w ]+) b/i],[l,[h,"Nvidia"],[u,v]],[/(sprint) (\w+)/i],[h,l,[u,y]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[h,P],[u,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[h,L],[u,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[h,L],[u,y]],[/smart-tv.+(samsung)/i],[h,[u,m]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[h,K],[u,m]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,D],[u,m]],[/(apple) ?tv/i],[h,[l,E+" TV"],[u,m]],[/crkey/i],[[l,R+"cast"],[h,T],[u,m]],[/droid.+aft(\w+)( bui|\))/i],[l,[h,w],[u,m]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[h,M],[u,m]],[/(bravia[\w ]+)( bui|\))/i],[l,[h,j],[u,m]],[/(mitv-\w{5}) bui/i],[l,[h,U],[u,m]],[/Hbbtv.*(technisat) (.*);/i],[h,l,[u,m]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,J],[l,J],[u,m]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,l,[u,b]],[/droid.+; (shield) bui/i],[l,[h,"Nvidia"],[u,b]],[/(playstation [345portablevi]+)/i],[l,[h,j],[u,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[h,P],[u,b]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[l,[h,K],[u,C]],[/((pebble))app/i],[h,l,[u,C]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[h,E],[u,C]],[/droid.+; (glass) \d/i],[l,[h,T],[u,C]],[/droid.+; (wt63?0{2,3})\)/i],[l,[h,L],[u,C]],[/(quest( \d| pro)?)/i],[l,[h,W],[u,C]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[u,O]],[/(aeobc)\b/i],[l,[h,w],[u,O]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[l,[u,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[u,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[u,y]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[d,[p,G,z]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,G,z],[d,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,X],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,x]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,N+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[d,R+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,B],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,p]]},Z=function(e,t){if(typeof e===s&&(t=e,e=o),!(this instanceof Z))return new Z(e,t).getResult();var n=typeof r!==a&&r.navigator?r.navigator:o,b=e||(n&&n.userAgent?n.userAgent:""),m=n&&n.userAgentData?n.userAgentData:o,C=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(Y,t):Y,O=n&&n.userAgent==b;return this.getBrowser=function(){var e={};return e[d]=o,e[p]=o,V.call(e,b,C.browser),e[c]=function(e){return typeof e===f?e.replace(/[^\d\.]/g,"").split(".")[0]:o}(e[p]),O&&n&&n.brave&&typeof n.brave.isBrave==i&&(e[d]="Brave"),e},this.getCPU=function(){var e={};return e[g]=o,V.call(e,b,C.cpu),e},this.getDevice=function(){var e={};return e[h]=o,e[l]=o,e[u]=o,V.call(e,b,C.device),O&&!e[u]&&m&&m.mobile&&(e[u]=y),O&&"Macintosh"==e[l]&&n&&typeof n.standalone!==a&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[l]="iPad",e[u]=v),e},this.getEngine=function(){var e={};return e[d]=o,e[p]=o,V.call(e,b,C.engine),e},this.getOS=function(){var e={};return e[d]=o,e[p]=o,V.call(e,b,C.os),O&&!e[d]&&m&&m.platform&&"Unknown"!=m.platform&&(e[d]=m.platform.replace(/chrome os/i,B).replace(/macos/i,X)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return b},this.setUA=function(e){return b=typeof e===f&&e.length>500?J(e,500):e,this},this.setUA(b),this};Z.VERSION="1.0.39",Z.BROWSER=H([d,p,c]),Z.CPU=H([g]),Z.DEVICE=H([l,h,u,b,y,m,v,C,O]),Z.ENGINE=Z.OS=H([d,p]),typeof e!==a?(typeof t!==a&&t.exports&&(e=t.exports=Z),e.UAParser=Z):typeof define===i&&n.amdO?define((function(){return Z})):typeof r!==a&&(r.UAParser=Z);var Q=typeof r!==a&&(r.jQuery||r.Zepto);if(Q&&!Q.ua){var ee=new Z;Q.ua=ee.getResult(),Q.ua.get=function(){return ee.getUA()},Q.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var n in t)Q.ua[n]=t[n]}}}("object"==typeof window?window:e)})),Hn=p((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.openLink=o,e.openLinkBlank=function(e){o(e,"_blank")},e.openDeeplinkWithFallback=function(e,t){let n=setTimeout((()=>{s("safari")||a("android")&&s("firefox")||t()}),500);window.addEventListener("blur",(()=>clearTimeout(n)),{once:!0}),o(e,"_self")},e.isMobileUserAgent=function(){let e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.slice(0,4)))&&(e=!0),e;var t},e.getUserAgent=i,e.isOS=a,e.isBrowser=s;var n=t($n()),r=Sn();function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_self";(0,r.logDebug)("openLink",e,t),window.open(e,t,"noopener noreferrer")}function i(){var e,t,r;let o,i=(new n.default).getResult(),a=null===(e=i.os.name)||void 0===e?void 0:e.toLowerCase();switch(!0){case"ipad"===(null===(t=i.device.model)||void 0===t?void 0:t.toLowerCase()):o="ipad";break;case"ios"===a:o="ios";break;case"android"===a:o="android";break;case"mac os"===a:o="macos";break;case"linux"===a:o="linux";break;case a?.includes("windows"):o="windows"}let s,f=null===(r=i.browser.name)||void 0===r?void 0:r.toLowerCase();switch(!0){case"chrome"===f:s="chrome";break;case"firefox"===f:s="firefox";break;case f?.includes("safari"):s="safari";break;case f?.includes("opera"):s="opera"}return{os:o,browser:s}}function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(i().os)}function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(i().browser)}})),qn=p((e=>{var t,n,r,o,i,a,s;Object.defineProperty(e,"__esModule",{value:!0}),e.isTmaPlatform=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(h)},e.isInTMA=g,e.isInTelegramBrowser=function(){var e;let t=!(null===(e=(0,f.getWindow)())||void 0===e||!e.TelegramWebview);return(g()||t)&&"unknown"===h},e.sendExpand=function(){y("web_app_expand",{})},e.sendOpenTelegramLink=function(e,t){let n=new URL(e);if("http:"!==n.protocol&&"https:"!==n.protocol){if(t)return t();throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url protocol is not supported: ${n}`)}if("t.me"!==n.hostname){if(t)return t();throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url host is not supported: ${n}`)}let r=n.pathname+n.search;b()||function(e){return m(p,e)>=0}("6.1")?y("web_app_open_tg_link",{path_full:r}):(0,d.openLinkBlank)("https://t.me"+r)},e.versionCompare=m;var f=Fn(),c=Sn(),l=Xn(),d=Hn(),u={};try{u=function(e){e=e.replace(/^#/,"");let t={};if(!e.length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=v(e),t;let n=e.indexOf("?");if(n>=0){let r=e.substr(0,n);t._path=v(r),e=e.substr(n+1)}let r=function(e){let t={};if(!e.length)return t;let n,r,o,i,a=e.split("&");for(n=0;n<a.length;n++)r=a[n].split("="),o=v(r[0]),i=null==r[1]?null:v(r[1]),t[o]=i;return t}(e);for(let o in r)t[o]=r[o];return t}(location.hash.toString())}catch{}var h="unknown";if(u?.tgWebAppPlatform&&(h=null!==(t=u.tgWebAppPlatform)&&void 0!==t?t:"unknown"),"unknown"===h){let e=(0,f.getWindow)();h=null!==(o=null===(r=null===(n=e?.Telegram)||void 0===n?void 0:n.WebApp)||void 0===r?void 0:r.platform)&&void 0!==o?o:"unknown"}var p="6.0";if(u?.tgWebAppVersion&&(p=u.tgWebAppVersion),!p){let e=(0,f.getWindow)();p=null!==(s=null===(a=null===(i=e?.Telegram)||void 0===i?void 0:i.WebApp)||void 0===a?void 0:a.version)&&void 0!==s?s:"6.0"}function g(){var e;return"unknown"!==h||!(null===(e=(0,f.getWindow)())||void 0===e||!e.TelegramWebviewProxy)}function b(){try{let e=(0,f.getWindow)();return!!e&&(null!=e.parent&&e!==e.parent)}catch{return!1}}function y(e,t){try{let n=(0,f.getWindow)();if(!n)throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to parent window: window is not defined");if(void 0!==n.TelegramWebviewProxy)(0,c.logDebug)("postEvent",e,t),n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));else if(n.external&&"notify"in n.external)(0,c.logDebug)("postEvent",e,t),n.external.notify(JSON.stringify({eventType:e,eventData:t}));else{if(!b())throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to TMA");{let r="*",o=JSON.stringify({eventType:e,eventData:t});(0,c.logDebug)("postEvent",e,t),n.parent.postMessage(o,r)}}}catch(Ui){(0,c.logError)(`Can't post event to parent window: ${Ui}`)}}function v(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch{return e}}function m(e,t){"string"!=typeof e&&(e=""),"string"!=typeof t&&(t="");let n,r,o,i,a=e.replace(/^\s+|\s+$/g,"").split("."),s=t.replace(/^\s+|\s+$/g,"").split(".");for(n=Math.max(a.length,s.length),r=0;r<n;r++)if(o=parseInt(a[r])||0,i=parseInt(s[r])||0,o!==i)return o>i?1:-1;return 0}})),Fn=p((e=>{var t,n,r,i;Object.defineProperty(e,"__esModule",{value:!0}),e.removeUrlLastSlash=d,e.addPathToUrl=function(e,t){return d(e)+"/"+t},e.getUniversalLink=u,e.openOKXDeeplink=function(e){var t;let n=u(e),r=!(null===(t=h())||void 0===t||!t.TelegramWebviewProxy);if(o.log("openOKXDeeplink fullUrl:",n),(0,c.isIos)())r?window.open(n,"_blank"):(o.log("windowOpen[before]: ",Date.now()),window?.okxLogDebug?window.open(n,"_blank"):window.open(n,"_self"),o.log("windowOpen[after]: ",Date.now()));else{let t=null;r?t=window.open(e,"_blank"):window.location.href=e}},e.openOKXDeeplinkWithFallback=function(e){var t;let n=u(e),r=!(null===(t=h())||void 0===t||!t.TelegramWebviewProxy);o.log("openOKXDeeplinkWithFallback fullUrl:",n);let i=!1,s=a.standardUniversalLink;if((0,c.isIos)())r?window.open(n,"_blank"):(o.log("windowOpen[before]: ",Date.now()),window?.okxLogDebug?window.open(n,"_blank"):window.open(n,"_self"),o.log("windowOpen[after]: ",Date.now()));else{let t=null;r?t=window.open(e,"_blank"):window.location.href=e,setTimeout((()=>{i||(t?t.open(s,"_self"):window.open(s,"_blank"))}),3e3),window.addEventListener("blur",(()=>{i=!0}),{once:!0}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(i=!0)}))}},e.getWindow=h,e.isTelegramUrl=function(e){if(!e)return!1;let t=new URL(e);return"tg:"===t.protocol||"t.me"===t.hostname},e.encodeTelegramUrlParameters=function(e){let t=e;return t=t.replace(/\./g,"%2E"),t=t.replace(/-/g,"%2D"),t=t.replace(/_/g,"%5F"),t=t.replace(/&/g,"-"),t=t.replace(/=/g,"__"),t=t.replace(/%/g,"--"),t},e.encodeConnectParams=function(e){let t=JSON.stringify(e);(0,s.logDebug)("url encodeConnectParams connectRequestStr ",t);let n=(new TextEncoder).encode(t);return btoa(String.fromCharCode(...n))},e.encodeTWAConnectURLParams=function(e){let t=JSON.stringify({topic:e.topic,clientId:e.clientId});(0,s.logDebug)("url encodeConnectParams connectRequestStr",t);let n=(new TextEncoder).encode(t);return btoa(String.fromCharCode(...n))},e.getAppWalletDeepLink=function(e){return`${a.standardDeeplink}?param=${e}`},e.getTelegramWalletTWAUrl=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={okxconnect:"",redirect:"",extraparams:""};e&&(r.okxconnect=e),t&&(r.redirect=t);let o=JSON.stringify(r),i=(new TextEncoder).encode(o),a=btoa(String.fromCharCode(...i));return(0,s.logDebug)("[TWA] open link:",r,a),e||t?n?`http://localhost:5173?tgWebAppStartParam=${a}`:`https://t.me/${f.tgwalletName}/start?startapp=${a}`:n?"http://localhost:5173":`https://t.me/${f.tgwalletName}/start`},e.openOKXTMAWalletlinkWithFallback=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r,o,i,a;(0,s.logDebug)("[TWA] open link:",e,"browserDebug ==> ",t),t?window.open(e,"_blank"):null!==(r=null===(n=h())||void 0===n?void 0:n.Telegram)&&void 0!==r&&r.WebApp?null===(a=null===(i=null===(o=h())||void 0===o?void 0:o.Telegram)||void 0===i?void 0:i.WebApp)||void 0===a||a.openTelegramLink(e):(0,l.sendOpenTelegramLink)(e)},e.isInTMA=y,e.isInTelegramBrowser=function(){var e;let t=!(null===(e=h())||void 0===e||!e.TelegramWebview);return(y()||t)&&"unknown"===b};var a=Xn(),s=Sn(),f=In(),c=Tn(),l=qn();function d(e){return"/"===e.slice(-1)?e.slice(0,-1):e}function u(e){let t=encodeURIComponent(e);return`${a.standardUniversalLink}?deeplink=${t}`}function h(){if(typeof window<"u")return window}function p(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch{return e}}var g={};try{g=function(e){let t={};if(!(e=e.replace(/^#/,"")).length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=p(e),t;let n=e.indexOf("?");if(n>=0){let r=e.substr(0,n);t._path=p(r),e=e.substr(n+1)}let r=function(e){let t={};if(!e.length)return t;let n,r,o,i,a=e.split("&");for(n=0;n<a.length;n++)r=a[n].split("="),o=p(r[0]),i=null==r[1]?null:p(r[1]),t[o]=i;return t}(e);for(let o in r)t[o]=r[o];return t}(location.hash.toString())}catch{}var b="unknown";if(g?.tgWebAppPlatform&&(b=null!==(t=g.tgWebAppPlatform)&&void 0!==t?t:"unknown"),"unknown"===b){let e=h();b=null!==(i=null===(r=null===(n=e?.Telegram)||void 0===n?void 0:n.WebApp)||void 0===r?void 0:r.platform)&&void 0!==i?i:"unknown"}function y(){var e;return"unknown"!==b||!(null===(e=h())||void 0===e||!e.TelegramWebviewProxy)}})),Jn=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isBrowser=e.isOS=e.isMobileUserAgent=e.openDeeplinkWithFallback=e.openLinkBlank=e.openLink=e.isValidObject=e.isIos=e.base64decode=e.base64encode=e.splitToUint8Arrays=e.concatUint8Arrays=e.toHexString=e.hexToByteArray=e.encodeTWAConnectURLParams=e.encodeConnectParams=e.openOKXTMAWalletlinkWithFallback=e.getTelegramWalletTWAUrl=e.getAppWalletDeepLink=e.encodeTelegramUrlParameters=e.isTelegramUrl=e.openOKXDeeplinkWithFallback=e.openOKXDeeplink=e.getUniversalLink=e.safeJsonStringify=e.safeJsonParse=e.logWarning=e.logError=e.logDebug=e.callForSuccess=void 0;var t=kn();Object.defineProperty(e,"callForSuccess",{enumerable:!0,get:function(){return t.callForSuccess}});var n=Sn();Object.defineProperty(e,"logDebug",{enumerable:!0,get:function(){return n.logDebug}}),Object.defineProperty(e,"logError",{enumerable:!0,get:function(){return n.logError}}),Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return n.logWarning}});var r=Rn();Object.defineProperty(e,"safeJsonParse",{enumerable:!0,get:function(){return r.safeJsonParse}}),Object.defineProperty(e,"safeJsonStringify",{enumerable:!0,get:function(){return r.safeJsonStringify}});var o=Fn();Object.defineProperty(e,"getUniversalLink",{enumerable:!0,get:function(){return o.getUniversalLink}}),Object.defineProperty(e,"openOKXDeeplink",{enumerable:!0,get:function(){return o.openOKXDeeplink}}),Object.defineProperty(e,"openOKXDeeplinkWithFallback",{enumerable:!0,get:function(){return o.openOKXDeeplinkWithFallback}}),Object.defineProperty(e,"isTelegramUrl",{enumerable:!0,get:function(){return o.isTelegramUrl}}),Object.defineProperty(e,"encodeTelegramUrlParameters",{enumerable:!0,get:function(){return o.encodeTelegramUrlParameters}}),Object.defineProperty(e,"getAppWalletDeepLink",{enumerable:!0,get:function(){return o.getAppWalletDeepLink}}),Object.defineProperty(e,"getTelegramWalletTWAUrl",{enumerable:!0,get:function(){return o.getTelegramWalletTWAUrl}}),Object.defineProperty(e,"openOKXTMAWalletlinkWithFallback",{enumerable:!0,get:function(){return o.openOKXTMAWalletlinkWithFallback}}),Object.defineProperty(e,"encodeConnectParams",{enumerable:!0,get:function(){return o.encodeConnectParams}}),Object.defineProperty(e,"encodeTWAConnectURLParams",{enumerable:!0,get:function(){return o.encodeTWAConnectURLParams}});var i=Tn();Object.defineProperty(e,"hexToByteArray",{enumerable:!0,get:function(){return i.hexToByteArray}}),Object.defineProperty(e,"toHexString",{enumerable:!0,get:function(){return i.toHexString}}),Object.defineProperty(e,"concatUint8Arrays",{enumerable:!0,get:function(){return i.concatUint8Arrays}}),Object.defineProperty(e,"splitToUint8Arrays",{enumerable:!0,get:function(){return i.splitToUint8Arrays}}),Object.defineProperty(e,"base64encode",{enumerable:!0,get:function(){return i.base64encode}}),Object.defineProperty(e,"base64decode",{enumerable:!0,get:function(){return i.base64decode}}),Object.defineProperty(e,"isIos",{enumerable:!0,get:function(){return i.isIos}}),Object.defineProperty(e,"isValidObject",{enumerable:!0,get:function(){return i.isValidObject}});var a=Hn();Object.defineProperty(e,"openLink",{enumerable:!0,get:function(){return a.openLink}}),Object.defineProperty(e,"openLinkBlank",{enumerable:!0,get:function(){return a.openLinkBlank}}),Object.defineProperty(e,"openDeeplinkWithFallback",{enumerable:!0,get:function(){return a.openDeeplinkWithFallback}}),Object.defineProperty(e,"isMobileUserAgent",{enumerable:!0,get:function(){return a.isMobileUserAgent}}),Object.defineProperty(e,"isOS",{enumerable:!0,get:function(){return a.isOS}}),Object.defineProperty(e,"isBrowser",{enumerable:!0,get:function(){return a.isBrowser}})})),Vn=p(((e,t)=>{var r,o;r=e,o=function(){var e=e||function(e){var t;if(typeof window<"u"&&window.crypto&&(t=window.crypto),typeof self<"u"&&self.crypto&&(t=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(t=globalThis.crypto),!t&&typeof window<"u"&&window.msCrypto&&(t=window.msCrypto),!t&&typeof n.g<"u"&&n.g.crypto&&(t=n.g.crypto),!t&&"function"==typeof u)try{t=D()}catch{}var r=function(){if(t){if("function"==typeof t.getRandomValues)try{return t.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof t.randomBytes)try{return t.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),i={},a=i.lib={},s=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),(!t.hasOwnProperty("init")||this.init===t.init)&&(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},f=a.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=a<<24-(r+i)%4*8}else for(var s=0;s<o;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(r());return new f.init(t,e)}}),c=i.enc={},l=c.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new f.init(n,t/2)}},d=c.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new f.init(n,t)}},h=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,o=r.words,i=r.sigBytes,a=this.blockSize,s=i/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,l=e.min(4*c,i);if(c){for(var d=0;d<c;d+=a)this._doProcessBlock(o,d);n=o.splice(0,c),r.sigBytes-=l}return new f.init(n,l)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(a.Hasher=p.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),i.algo={});return i}(Math);return e},"object"==typeof e?t.exports=e=o():"function"==typeof define&&n.amdO?define([],o):r.CryptoJS=o()})),Gn=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib,r=n.Base,o=n.WordArray,i=t.x64={};i.Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var i=e[r];n.push(i.high),n.push(i.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,o=0;o<n;o++)t[o]=t[o].clone();return e}})}(),e},"object"==typeof e?t.exports=e=o(Vn()):"function"==typeof define&&n.amdO?define(["./core"],o):o(r.CryptoJS)})),zn=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,n=t.init,r=t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||typeof Uint8ClampedArray<"u"&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],o=0;o<t;o++)r[o>>>2]|=e[o]<<24-o%4*8;n.call(this,r,t)}else n.apply(this,arguments)};r.prototype=t}}(),e.lib.WordArray},"object"==typeof e?t.exports=e=o(Vn()):"function"==typeof define&&n.amdO?define(["./core"],o):o(r.CryptoJS)})),Yn=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib.WordArray,r=t.enc;function o(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var i=t[o>>>2]>>>16-o%4*8&65535;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>1]|=e.charCodeAt(o)<<16-o%2*16;return n.create(r,2*t)}},r.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var a=o(t[i>>>2]>>>16-i%4*8&65535);r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>1]|=o(e.charCodeAt(i)<<16-i%2*16);return n.create(r,2*t)}}}(),e.enc.Utf16},"object"==typeof e?t.exports=e=o(Vn()):"function"==typeof define&&n.amdO?define(["./core"],o):o(r.CryptoJS)})),Zn=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib.WordArray;t.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],i=0;i<n;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<n;s++)o.push(r.charAt(a>>>6*(3-s)&63));var f=r.charAt(64);if(f)for(;o.length%4;)o.push(f);return o.join("")},parse:function(e){var t=e.length,r=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<r.length;i++)o[r.charCodeAt(i)]=i}var a=r.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return function(e,t,r){for(var o=[],i=0,a=0;a<t;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2|r[e.charCodeAt(a)]>>>6-a%4*2;o[i>>>2]|=s<<24-i%4*8,i++}return n.create(o,i)}(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64},"object"==typeof e?t.exports=e=o(Vn()):"function"==typeof define&&n.amdO?define(["./core"],o):o(r.CryptoJS)})),Qn=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib.WordArray;t.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var n=e.words,r=e.sigBytes,o=t?this._safe_map:this._map;e.clamp();for(var i=[],a=0;a<r;a+=3)for(var s=(n[a>>>2]>>>24-a%4*8&255)<<16|(n[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|n[a+2>>>2]>>>24-(a+2)%4*8&255,f=0;f<4&&a+.75*f<r;f++)i.push(o.charAt(s>>>6*(3-f)&63));var c=o.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e,t){void 0===t&&(t=!0);var r=e.length,o=t?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var a=0;a<o.length;a++)i[o.charCodeAt(a)]=a}var s=o.charAt(64);if(s){var f=e.indexOf(s);-1!==f&&(r=f)}return function(e,t,r){for(var o=[],i=0,a=0;a<t;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2|r[e.charCodeAt(a)]>>>6-a%4*2;o[i>>>2]|=s<<24-i%4*8,i++}return n.create(o,i)}(e,r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url},"object"==typeof e?t.exports=e=o(Vn()):"function"==typeof define&&n.amdO?define(["./core"],o):o(r.CryptoJS)})),er=p(((e,t)=>{var r,o;r=e,o=function(e){return function(t){var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,a=n.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var f=a.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,o=e[r];e[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,a=e[t+0],f=e[t+1],h=e[t+2],p=e[t+3],g=e[t+4],b=e[t+5],y=e[t+6],v=e[t+7],m=e[t+8],C=e[t+9],O=e[t+10],w=e[t+11],E=e[t+12],_=e[t+13],x=e[t+14],S=e[t+15],R=i[0],N=i[1],T=i[2],k=i[3];R=c(R,N,T,k,a,7,s[0]),k=c(k,R,N,T,f,12,s[1]),T=c(T,k,R,N,h,17,s[2]),N=c(N,T,k,R,p,22,s[3]),R=c(R,N,T,k,g,7,s[4]),k=c(k,R,N,T,b,12,s[5]),T=c(T,k,R,N,y,17,s[6]),N=c(N,T,k,R,v,22,s[7]),R=c(R,N,T,k,m,7,s[8]),k=c(k,R,N,T,C,12,s[9]),T=c(T,k,R,N,O,17,s[10]),N=c(N,T,k,R,w,22,s[11]),R=c(R,N,T,k,E,7,s[12]),k=c(k,R,N,T,_,12,s[13]),T=c(T,k,R,N,x,17,s[14]),R=l(R,N=c(N,T,k,R,S,22,s[15]),T,k,f,5,s[16]),k=l(k,R,N,T,y,9,s[17]),T=l(T,k,R,N,w,14,s[18]),N=l(N,T,k,R,a,20,s[19]),R=l(R,N,T,k,b,5,s[20]),k=l(k,R,N,T,O,9,s[21]),T=l(T,k,R,N,S,14,s[22]),N=l(N,T,k,R,g,20,s[23]),R=l(R,N,T,k,C,5,s[24]),k=l(k,R,N,T,x,9,s[25]),T=l(T,k,R,N,p,14,s[26]),N=l(N,T,k,R,m,20,s[27]),R=l(R,N,T,k,_,5,s[28]),k=l(k,R,N,T,h,9,s[29]),T=l(T,k,R,N,v,14,s[30]),R=d(R,N=l(N,T,k,R,E,20,s[31]),T,k,b,4,s[32]),k=d(k,R,N,T,m,11,s[33]),T=d(T,k,R,N,w,16,s[34]),N=d(N,T,k,R,x,23,s[35]),R=d(R,N,T,k,f,4,s[36]),k=d(k,R,N,T,g,11,s[37]),T=d(T,k,R,N,v,16,s[38]),N=d(N,T,k,R,O,23,s[39]),R=d(R,N,T,k,_,4,s[40]),k=d(k,R,N,T,a,11,s[41]),T=d(T,k,R,N,p,16,s[42]),N=d(N,T,k,R,y,23,s[43]),R=d(R,N,T,k,C,4,s[44]),k=d(k,R,N,T,E,11,s[45]),T=d(T,k,R,N,S,16,s[46]),R=u(R,N=d(N,T,k,R,h,23,s[47]),T,k,a,6,s[48]),k=u(k,R,N,T,v,10,s[49]),T=u(T,k,R,N,x,15,s[50]),N=u(N,T,k,R,b,21,s[51]),R=u(R,N,T,k,E,6,s[52]),k=u(k,R,N,T,p,10,s[53]),T=u(T,k,R,N,O,15,s[54]),N=u(N,T,k,R,f,21,s[55]),R=u(R,N,T,k,m,6,s[56]),k=u(k,R,N,T,S,10,s[57]),T=u(T,k,R,N,y,15,s[58]),N=u(N,T,k,R,_,21,s[59]),R=u(R,N,T,k,g,6,s[60]),k=u(k,R,N,T,w,10,s[61]),T=u(T,k,R,N,h,15,s[62]),N=u(N,T,k,R,C,21,s[63]),i[0]=i[0]+R|0,i[1]=i[1]+N|0,i[2]=i[2]+T|0,i[3]=i[3]+k|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var i=t.floor(r/4294967296),a=r;n[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(o+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,f=s.words,c=0;c<4;c++){var l=f[c];f[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,r,o,i,a){var s=e+(t&n|~t&r)+o+a;return(s<<i|s>>>32-i)+t}function l(e,t,n,r,o,i,a){var s=e+(t&r|n&~r)+o+a;return(s<<i|s>>>32-i)+t}function d(e,t,n,r,o,i,a){var s=e+(t^n^r)+o+a;return(s<<i|s>>>32-i)+t}function u(e,t,n,r,o,i,a){var s=e+(n^(t|~r))+o+a;return(s<<i|s>>>32-i)+t}n.MD5=i._createHelper(f),n.HmacMD5=i._createHmacHelper(f)}(Math),e.MD5},"object"==typeof e?t.exports=e=o(Vn()):"function"==typeof define&&n.amdO?define(["./core"],o):o(r.CryptoJS)})),tr=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib,r=n.WordArray,o=n.Hasher,i=t.algo,a=[],s=i.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],f=n[4],c=0;c<80;c++){if(c<16)a[c]=0|e[t+c];else{var l=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=l<<1|l>>>31}var d=(r<<5|r>>>27)+f+a[c];d+=c<20?1518500249+(o&i|~o&s):c<40?1859775393+(o^i^s):c<60?(o&i|o&s|i&s)-1894007588:(o^i^s)-899497514,f=s,s=i,i=o<<30|o>>>2,o=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+f|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=o._createHelper(s),t.HmacSHA1=o._createHmacHelper(s)}(),e.SHA1},"object"==typeof e?t.exports=e=o(Vn()):"function"==typeof define&&n.amdO?define(["./core"],o):o(r.CryptoJS)})),nr=p(((e,t)=>{var r,o;r=e,o=function(e){return function(t){var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,a=n.algo,s=[],f=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,o=0;o<64;)e(r)&&(o<8&&(s[o]=n(t.pow(r,.5))),f[o]=n(t.pow(r,1/3)),o++),r++}();var c=[],l=a.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],l=n[5],d=n[6],u=n[7],h=0;h<64;h++){if(h<16)c[h]=0|e[t+h];else{var p=c[h-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,b=c[h-2],y=(b<<15|b>>>17)^(b<<13|b>>>19)^b>>>10;c[h]=g+c[h-7]+y+c[h-16]}var v=r&o^r&i^o&i,m=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),C=u+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&d)+f[h]+c[h];u=d,d=l,l=s,s=a+C|0,a=i,i=o,o=r,r=C+(m+v)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+d|0,n[7]=n[7]+u|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=t.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(l),n.HmacSHA256=i._createHmacHelper(l)}(Math),e.SHA256},"object"==typeof e?t.exports=e=o(Vn()):"function"==typeof define&&n.amdO?define(["./core"],o):o(r.CryptoJS)})),rr=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib.WordArray,r=t.algo,o=r.SHA256,i=r.SHA224=o.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=o._createHelper(i),t.HmacSHA224=o._createHmacHelper(i)}(),e.SHA224},"object"==typeof e?t.exports=e=o(Vn(),nr()):"function"==typeof define&&n.amdO?define(["./core","./sha256"],o):o(r.CryptoJS)})),or=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib.Hasher,r=t.x64,o=r.Word,i=r.WordArray,a=t.algo;function s(){return o.create.apply(o,arguments)}var f=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=s()}();var l=a.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],l=n[5],d=n[6],u=n[7],h=r.high,p=r.low,g=o.high,b=o.low,y=i.high,v=i.low,m=a.high,C=a.low,O=s.high,w=s.low,E=l.high,_=l.low,x=d.high,S=d.low,R=u.high,N=u.low,T=h,k=p,D=g,P=b,A=y,I=v,K=m,M=C,j=O,U=w,L=E,W=_,B=x,X=S,$=R,H=N,q=0;q<80;q++){var F,J,V=c[q];if(q<16)J=V.high=0|e[t+2*q],F=V.low=0|e[t+2*q+1];else{var G=c[q-15],z=G.high,Y=G.low,Z=(z>>>1|Y<<31)^(z>>>8|Y<<24)^z>>>7,Q=(Y>>>1|z<<31)^(Y>>>8|z<<24)^(Y>>>7|z<<25),ee=c[q-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,oe=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),ie=c[q-7],ae=ie.high,se=ie.low,fe=c[q-16],ce=fe.high,le=fe.low;J=(J=(J=Z+ae+((F=Q+se)>>>0<Q>>>0?1:0))+re+((F+=oe)>>>0<oe>>>0?1:0))+ce+((F+=le)>>>0<le>>>0?1:0),V.high=J,V.low=F}var de,ue=j&L^~j&B,he=U&W^~U&X,pe=T&D^T&A^D&A,ge=k&P^k&I^P&I,be=(T>>>28|k<<4)^(T<<30|k>>>2)^(T<<25|k>>>7),ye=(k>>>28|T<<4)^(k<<30|T>>>2)^(k<<25|T>>>7),ve=(j>>>14|U<<18)^(j>>>18|U<<14)^(j<<23|U>>>9),me=(U>>>14|j<<18)^(U>>>18|j<<14)^(U<<23|j>>>9),Ce=f[q],Oe=Ce.high,we=Ce.low,Ee=$+ve+((de=H+me)>>>0<H>>>0?1:0),_e=ye+ge;$=B,H=X,B=L,X=W,L=j,W=U,j=K+(Ee=(Ee=(Ee=Ee+ue+((de+=he)>>>0<he>>>0?1:0))+Oe+((de+=we)>>>0<we>>>0?1:0))+J+((de+=F)>>>0<F>>>0?1:0))+((U=M+de|0)>>>0<M>>>0?1:0)|0,K=A,M=I,A=D,I=P,D=T,P=k,T=Ee+(be+pe+(_e>>>0<ye>>>0?1:0))+((k=de+_e|0)>>>0<de>>>0?1:0)|0}p=r.low=p+k,r.high=h+T+(p>>>0<k>>>0?1:0),b=o.low=b+P,o.high=g+D+(b>>>0<P>>>0?1:0),v=i.low=v+I,i.high=y+A+(v>>>0<I>>>0?1:0),C=a.low=C+M,a.high=m+K+(C>>>0<M>>>0?1:0),w=s.low=w+U,s.high=O+j+(w>>>0<U>>>0?1:0),_=l.low=_+W,l.high=E+L+(_>>>0<W>>>0?1:0),S=d.low=S+X,d.high=x+B+(S>>>0<X>>>0?1:0),N=u.low=N+H,u.high=R+$+(N>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=n._createHelper(l),t.HmacSHA512=n._createHmacHelper(l)}(),e.SHA512},"object"==typeof e?t.exports=e=o(Vn(),Gn()):"function"==typeof define&&n.amdO?define(["./core","./x64-core"],o):o(r.CryptoJS)})),ir=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.x64,r=n.Word,o=n.WordArray,i=t.algo,a=i.SHA512,s=i.SHA384=a.extend({_doReset:function(){this._hash=new o.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=a._createHelper(s),t.HmacSHA384=a._createHmacHelper(s)}(),e.SHA384},"object"==typeof e?t.exports=e=o(Vn(),Gn(),or()):"function"==typeof define&&n.amdO?define(["./core","./x64-core","./sha512"],o):o(r.CryptoJS)})),ar=p(((e,t)=>{var r,o;r=e,o=function(e){return function(t){var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,a=n.x64.Word,s=n.algo,f=[],c=[],l=[];!function(){for(var e=1,t=0,n=0;n<24;n++){f[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var o=1,i=0;i<24;i++){for(var s=0,d=0,u=0;u<7;u++){if(1&o){var h=(1<<u)-1;h<32?d^=1<<h:s^=1<<h-32}128&o?o=o<<1^113:o<<=1}l[i]=a.create(s,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=a.create()}();var u=s.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,o=0;o<r;o++){var i=e[t+2*o],a=e[t+2*o+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(N=n[o]).high^=a,N.low^=i}for(var s=0;s<24;s++){for(var u=0;u<5;u++){for(var h=0,p=0,g=0;g<5;g++)h^=(N=n[u+5*g]).high,p^=N.low;var b=d[u];b.high=h,b.low=p}for(u=0;u<5;u++){var y=d[(u+4)%5],v=d[(u+1)%5],m=v.high,C=v.low;for(h=y.high^(m<<1|C>>>31),p=y.low^(C<<1|m>>>31),g=0;g<5;g++)(N=n[u+5*g]).high^=h,N.low^=p}for(var O=1;O<25;O++){var w=(N=n[O]).high,E=N.low,_=f[O];_<32?(h=w<<_|E>>>32-_,p=E<<_|w>>>32-_):(h=E<<_-32|w>>>64-_,p=w<<_-32|E>>>64-_);var x=d[c[O]];x.high=h,x.low=p}var S=d[0],R=n[0];for(S.high=R.high,S.low=R.low,u=0;u<5;u++)for(g=0;g<5;g++){var N=n[O=u+5*g],T=d[O],k=d[(u+1)%5+5*g],D=d[(u+2)%5+5*g];N.high=T.high^~k.high&D.high,N.low=T.low^~k.low&D.low}N=n[0];var P=l[s];N.high^=P.high,N.low^=P.low}},_doFinalize:function(){var e=this._data,n=e.words,r=(this._nDataBytes,8*e.sigBytes),i=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/i)*i>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,f=s/8,c=[],l=0;l<f;l++){var d=a[l],u=d.high,h=d.low;u=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),c.push(h),c.push(u)}return new o.init(c,s)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=i._createHelper(u),n.HmacSHA3=i._createHmacHelper(u)}(Math),e.SHA3},"object"==typeof e?t.exports=e=o(Vn(),Gn()):"function"==typeof define&&n.amdO?define(["./core","./x64-core"],o):o(r.CryptoJS)})),sr=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib,r=n.WordArray,o=n.Hasher,i=t.algo,a=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),c=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),l=r.create([0,1518500249,1859775393,2400959708,2840853838]),d=r.create([1352829926,1548603684,1836072691,2053994217,0]),u=i.RIPEMD160=o.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,o=e[r];e[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i,u,m,C,O,w,E,_,x,S,R,N=this._hash.words,T=l.words,k=d.words,D=a.words,P=s.words,A=f.words,I=c.words;for(w=i=N[0],E=u=N[1],_=m=N[2],x=C=N[3],S=O=N[4],n=0;n<80;n+=1)R=i+e[t+D[n]]|0,R+=n<16?h(u,m,C)+T[0]:n<32?p(u,m,C)+T[1]:n<48?g(u,m,C)+T[2]:n<64?b(u,m,C)+T[3]:y(u,m,C)+T[4],R=(R=v(R|=0,A[n]))+O|0,i=O,O=C,C=v(m,10),m=u,u=R,R=w+e[t+P[n]]|0,R+=n<16?y(E,_,x)+k[0]:n<32?b(E,_,x)+k[1]:n<48?g(E,_,x)+k[2]:n<64?p(E,_,x)+k[3]:h(E,_,x)+k[4],R=(R=v(R|=0,I[n]))+S|0,w=S,S=x,x=v(_,10),_=E,E=R;R=N[1]+m+x|0,N[1]=N[2]+C+S|0,N[2]=N[3]+O+w|0,N[3]=N[4]+i+E|0,N[4]=N[0]+u+_|0,N[0]=R},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,i=o.words,a=0;a<5;a++){var s=i[a];i[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return o},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function h(e,t,n){return e^t^n}function p(e,t,n){return e&t|~e&n}function g(e,t,n){return(e|~t)^n}function b(e,t,n){return e&n|t&~n}function y(e,t,n){return e^(t|~n)}function v(e,t){return e<<t|e>>>32-t}t.RIPEMD160=o._createHelper(u),t.HmacRIPEMD160=o._createHmacHelper(u)}(Math),e.RIPEMD160},"object"==typeof e?t.exports=e=o(Vn()):"function"==typeof define&&n.amdO?define(["./core"],o):o(r.CryptoJS)})),fr=p(((e,t)=>{var r,o;r=e,o=function(e){!function(){var t=e,n=t.lib.Base,r=t.enc.Utf8;t.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,o=4*n;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,f=a.words,c=0;c<n;c++)s[c]^=1549556828,f[c]^=909522486;i.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}()},"object"==typeof e?t.exports=e=o(Vn()):"function"==typeof define&&n.amdO?define(["./core"],o):o(r.CryptoJS)})),cr=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib,r=n.Base,o=n.WordArray,i=t.algo,a=i.SHA256,s=i.HMAC,f=i.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=s.create(n.hasher,e),i=o.create(),a=o.create([1]),f=i.words,c=a.words,l=n.keySize,d=n.iterations;f.length<l;){var u=r.update(t).finalize(a);r.reset();for(var h=u.words,p=h.length,g=u,b=1;b<d;b++){g=r.finalize(g),r.reset();for(var y=g.words,v=0;v<p;v++)h[v]^=y[v]}i.concat(u),c[0]++}return i.sigBytes=4*l,i}});t.PBKDF2=function(e,t,n){return f.create(n).compute(e,t)}}(),e.PBKDF2},"object"==typeof e?t.exports=e=o(Vn(),nr(),fr()):"function"==typeof define&&n.amdO?define(["./core","./sha256","./hmac"],o):o(r.CryptoJS)})),lr=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib,r=n.Base,o=n.WordArray,i=t.algo,a=i.MD5,s=i.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),a=o.create(),s=a.words,f=r.keySize,c=r.iterations;s.length<f;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var l=1;l<c;l++)n=i.finalize(n),i.reset();a.concat(n)}return a.sigBytes=4*f,a}});t.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),e.EvpKDF},"object"==typeof e?t.exports=e=o(Vn(),tr(),fr()):"function"==typeof define&&n.amdO?define(["./core","./sha1","./hmac"],o):o(r.CryptoJS)})),dr=p(((e,t)=>{var r,o;r=e,o=function(e){e.lib.Cipher||function(){var t=e,n=t.lib,r=n.Base,o=n.WordArray,i=n.BufferedBlockAlgorithm,a=t.enc,s=(a.Utf8,a.Base64),f=t.algo.EvpKDF,c=n.Cipher=i.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:b}return function(t){return{encrypt:function(n,r,o){return e(r).encrypt(t,n,r,o)},decrypt:function(n,r,o){return e(r).decrypt(t,n,r,o)}}}}()}),l=(n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),d=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),u=l.CBC=function(){var e=d.extend();function t(e,t,n){var r,o=this._iv;o?(r=o,this._iv=void 0):r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,o=r.blockSize;t.call(this,e,n,o),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+o)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,o=r.blockSize,i=e.slice(n,n+o);r.decryptBlock(e,n),t.call(this,e,n,o),this._prevBlock=i}}),e}(),h=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,a=[],s=0;s<r;s+=4)a.push(i);var f=o.create(a,r);e.concat(f)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},p=(n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:u,padding:h}),reset:function(){var e;c.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),g=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?o.create([1398893684,1701076831]).concat(n).concat(t):t).toString(s)},parse:function(e){var t,n=s.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=o.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),p.create({ciphertext:n,salt:t})}},b=n.SerializableCipher=r.extend({cfg:r.extend({format:g}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=e.createEncryptor(n,r),i=o.finalize(t),a=o.cfg;return p.create({ciphertext:i,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(t.kdf={}).OpenSSL={execute:function(e,t,n,r,i){if(r||(r=o.random(8)),i)var a=f.create({keySize:t+n,hasher:i}).compute(e,r);else a=f.create({keySize:t+n}).compute(e,r);var s=o.create(a.words.slice(t),4*n);return a.sigBytes=4*t,p.create({key:a,iv:s,salt:r})}},v=n.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:y}),encrypt:function(e,t,n,r){var o=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize,r.salt,r.hasher);r.iv=o.iv;var i=b.encrypt.call(this,e,t,o.key,r);return i.mixIn(o),i},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var o=r.kdf.execute(n,e.keySize,e.ivSize,t.salt,r.hasher);return r.iv=o.iv,b.decrypt.call(this,e,t,o.key,r)}})}()},"object"==typeof e?t.exports=e=o(Vn(),lr()):"function"==typeof define&&n.amdO?define(["./core","./evpkdf"],o):o(r.CryptoJS)})),ur=p(((e,t)=>{var r,o;r=e,o=function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function n(e,t,n,r){var o,i=this._iv;i?(o=i.slice(0),this._iv=void 0):o=this._prevBlock,r.encryptBlock(o,0);for(var a=0;a<n;a++)e[t+a]^=o[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize;n.call(this,e,t,o,r),this._prevBlock=e.slice(t,t+o)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize,i=e.slice(t,t+o);n.call(this,e,t,o,r),this._prevBlock=i}}),t}(),e.mode.CFB},"object"==typeof e?t.exports=e=o(Vn(),dr()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],o):o(r.CryptoJS)})),hr=p(((e,t)=>{var r,o;r=e,o=function(e){return e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,i=this._counter;o&&(i=this._counter=o.slice(0),this._iv=void 0);var a=i.slice(0);n.encryptBlock(a,0),i[r-1]=i[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=a[s]}});return t.Decryptor=n,t}(),e.mode.CTR},"object"==typeof e?t.exports=e=o(Vn(),dr()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],o):o(r.CryptoJS)})),pr=p(((e,t)=>{var r,o;r=e,o=function(e){return e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function n(e){if(255===(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}var r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize,i=this._iv,a=this._counter;i&&(a=this._counter=i.slice(0),this._iv=void 0),function(e){0===(e[0]=n(e[0]))&&(e[1]=n(e[1]))}(a);var s=a.slice(0);r.encryptBlock(s,0);for(var f=0;f<o;f++)e[t+f]^=s[f]}});return t.Decryptor=r,t}(),e.mode.CTRGladman},"object"==typeof e?t.exports=e=o(Vn(),dr()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],o):o(r.CryptoJS)})),gr=p(((e,t)=>{var r,o;r=e,o=function(e){return e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,i=this._keystream;o&&(i=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(i,0);for(var a=0;a<r;a++)e[t+a]^=i[a]}});return t.Decryptor=n,t}(),e.mode.OFB},"object"==typeof e?t.exports=e=o(Vn(),dr()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],o):o(r.CryptoJS)})),br=p(((e,t)=>{var r,o;r=e,o=function(e){return e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.mode.ECB},"object"==typeof e?t.exports=e=o(Vn(),dr()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],o):o(r.CryptoJS)})),yr=p(((e,t)=>{var r,o;r=e,o=function(e){return e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,o=r-n%r,i=n+o-1;e.clamp(),e.words[i>>>2]|=o<<24-i%4*8,e.sigBytes+=o},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923},"object"==typeof e?t.exports=e=o(Vn(),dr()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],o):o(r.CryptoJS)})),vr=p(((e,t)=>{var r,o;r=e,o=function(e){return e.pad.Iso10126={pad:function(t,n){var r=4*n,o=r-t.sigBytes%r;t.concat(e.lib.WordArray.random(o-1)).concat(e.lib.WordArray.create([o<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126},"object"==typeof e?t.exports=e=o(Vn(),dr()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],o):o(r.CryptoJS)})),mr=p(((e,t)=>{var r,o;r=e,o=function(e){return e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971},"object"==typeof e?t.exports=e=o(Vn(),dr()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],o):o(r.CryptoJS)})),Cr=p(((e,t)=>{var r,o;r=e,o=function(e){return e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},e.pad.ZeroPadding},"object"==typeof e?t.exports=e=o(Vn(),dr()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],o):o(r.CryptoJS)})),Or=p(((e,t)=>{var r,o;r=e,o=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding},"object"==typeof e?t.exports=e=o(Vn(),dr()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],o):o(r.CryptoJS)})),wr=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib.CipherParams,r=t.enc.Hex;t.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){var t=r.parse(e);return n.create({ciphertext:t})}}}(),e.format.Hex},"object"==typeof e?t.exports=e=o(Vn(),dr()):"function"==typeof define&&n.amdO?define(["./core","./cipher-core"],o):o(r.CryptoJS)})),Er=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib.BlockCipher,r=t.algo,o=[],i=[],a=[],s=[],f=[],c=[],l=[],d=[],u=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var p=r^r<<1^r<<2^r<<3^r<<4;p=p>>>8^255&p^99,o[n]=p,i[p]=n;var g=e[n],b=e[g],y=e[b],v=257*e[p]^16843008*p;a[n]=v<<24|v>>>8,s[n]=v<<16|v>>>16,f[n]=v<<8|v>>>24,c[n]=v,v=16843009*y^65537*b^257*g^16843008*n,l[p]=v<<24|v>>>8,d[p]=v<<16|v>>>16,u[p]=v<<8|v>>>24,h[p]=v,n?(n=g^e[e[e[y^g]]],r^=e[e[r]]):n=r=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],g=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],a=0;a<r;a++)a<n?i[a]=t[a]:(c=i[a-1],a%n?n>6&&a%n==4&&(c=o[c>>>24]<<24|o[c>>>16&255]<<16|o[c>>>8&255]<<8|o[255&c]):(c=o[(c=c<<8|c>>>24)>>>24]<<24|o[c>>>16&255]<<16|o[c>>>8&255]<<8|o[255&c],c^=p[a/n|0]<<24),i[a]=i[a-n]^c);for(var s=this._invKeySchedule=[],f=0;f<r;f++){if(a=r-f,f%4)var c=i[a];else c=i[a-4];s[f]=f<4||a<=4?c:l[o[c>>>24]]^d[o[c>>>16&255]]^u[o[c>>>8&255]]^h[o[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,f,c,o)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,d,u,h,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,o,i,a,s){for(var f=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],d=e[t+2]^n[2],u=e[t+3]^n[3],h=4,p=1;p<f;p++){var g=r[c>>>24]^o[l>>>16&255]^i[d>>>8&255]^a[255&u]^n[h++],b=r[l>>>24]^o[d>>>16&255]^i[u>>>8&255]^a[255&c]^n[h++],y=r[d>>>24]^o[u>>>16&255]^i[c>>>8&255]^a[255&l]^n[h++],v=r[u>>>24]^o[c>>>16&255]^i[l>>>8&255]^a[255&d]^n[h++];c=g,l=b,d=y,u=v}g=(s[c>>>24]<<24|s[l>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^n[h++],b=(s[l>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&c])^n[h++],y=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[c>>>8&255]<<8|s[255&l])^n[h++],v=(s[u>>>24]<<24|s[c>>>16&255]<<16|s[l>>>8&255]<<8|s[255&d])^n[h++],e[t]=g,e[t+1]=b,e[t+2]=y,e[t+3]=v},keySize:8});t.AES=n._createHelper(g)}(),e.AES},"object"==typeof e?t.exports=e=o(Vn(),Zn(),er(),lr(),dr()):"function"==typeof define&&n.amdO?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(r.CryptoJS)})),_r=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib,r=n.WordArray,o=n.BlockCipher,i=t.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],f=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=i.DES=o.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=a[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var o=this._subKeys=[],i=0;i<16;i++){var c=o[i]=[],l=f[i];for(n=0;n<24;n++)c[n/6|0]|=t[(s[n]-1+l)%28]<<31-n%6,c[4+(n/6|0)]|=t[28+(s[n+24]-1+l)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var d=this._invSubKeys=[];for(n=0;n<16;n++)d[n]=o[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],u.call(this,4,252645135),u.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),u.call(this,1,1431655765);for(var r=0;r<16;r++){for(var o=n[r],i=this._lBlock,a=this._rBlock,s=0,f=0;f<8;f++)s|=c[f][((a^o[f])&l[f])>>>0];this._lBlock=a,this._rBlock=i^s}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,u.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),u.call(this,16,65535),u.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function u(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function h(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}t.DES=o._createHelper(d);var p=i.TripleDES=o.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),o=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(r.create(t)),this._des2=d.createEncryptor(r.create(n)),this._des3=d.createEncryptor(r.create(o))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=o._createHelper(p)}(),e.TripleDES},"object"==typeof e?t.exports=e=o(Vn(),Zn(),er(),lr(),dr()):"function"==typeof define&&n.amdO?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(r.CryptoJS)})),xr=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib.StreamCipher,r=t.algo,o=r.RC4=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],o=0;o<256;o++)r[o]=o;o=0;for(var i=0;o<256;o++){var a=o%n,s=t[a>>>2]>>>24-a%4*8&255;i=(i+r[o]+s)%256;var f=r[o];r[o]=r[i],r[i]=f}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,n=this._j,r=0,o=0;o<4;o++){n=(n+e[t=(t+1)%256])%256;var i=e[t];e[t]=e[n],e[n]=i,r|=e[(e[t]+e[n])%256]<<24-8*o}return this._i=t,this._j=n,r}t.RC4=n._createHelper(o);var a=r.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});t.RC4Drop=n._createHelper(a)}(),e.RC4},"object"==typeof e?t.exports=e=o(Vn(),Zn(),er(),lr(),dr()):"function"==typeof define&&n.amdO?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(r.CryptoJS)})),Sr=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib.StreamCipher,r=t.algo,o=[],i=[],a=[],s=r.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)f.call(this);for(n=0;n<8;n++)o[n]^=r[n+4&7];if(t){var i=t.words,a=i[0],s=i[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=c>>>16|4294901760&l,u=l<<16|65535&c;for(o[0]^=c,o[1]^=d,o[2]^=l,o[3]^=u,o[4]^=c,o[5]^=d,o[6]^=l,o[7]^=u,n=0;n<4;n++)f.call(this)}},_doProcessBlock:function(e,t){var n=this._X;f.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)o[r]=16711935&(o[r]<<8|o[r]>>>24)|4278255360&(o[r]<<24|o[r]>>>8),e[t+r]^=o[r]},blockSize:4,ivSize:2});function f(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,s=r>>>16,f=((o*o>>>17)+o*s>>>15)+s*s,c=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=f^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.Rabbit=n._createHelper(s)}(),e.Rabbit},"object"==typeof e?t.exports=e=o(Vn(),Zn(),er(),lr(),dr()):"function"==typeof define&&n.amdO?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(r.CryptoJS)})),Rr=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib.StreamCipher,r=t.algo,o=[],i=[],a=[],s=r.RabbitLegacy=n.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var o=0;o<4;o++)f.call(this);for(o=0;o<8;o++)r[o]^=n[o+4&7];if(t){var i=t.words,a=i[0],s=i[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=c>>>16|4294901760&l,u=l<<16|65535&c;for(r[0]^=c,r[1]^=d,r[2]^=l,r[3]^=u,r[4]^=c,r[5]^=d,r[6]^=l,r[7]^=u,o=0;o<4;o++)f.call(this)}},_doProcessBlock:function(e,t){var n=this._X;f.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)o[r]=16711935&(o[r]<<8|o[r]>>>24)|4278255360&(o[r]<<24|o[r]>>>8),e[t+r]^=o[r]},blockSize:4,ivSize:2});function f(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,s=r>>>16,f=((o*o>>>17)+o*s>>>15)+s*s,c=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=f^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.RabbitLegacy=n._createHelper(s)}(),e.RabbitLegacy},"object"==typeof e?t.exports=e=o(Vn(),Zn(),er(),lr(),dr()):"function"==typeof define&&n.amdO?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(r.CryptoJS)})),Nr=p(((e,t)=>{var r,o;r=e,o=function(e){return function(){var t=e,n=t.lib.BlockCipher,r=t.algo;let o=16,i=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],a=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var s={pbox:[],sbox:[]};function f(e,t){let n=t>>24&255,r=t>>16&255,o=t>>8&255,i=255&t,a=e.sbox[0][n]+e.sbox[1][r];return a^=e.sbox[2][o],a+=e.sbox[3][i],a}function c(e,t,n){let r,i=t,a=n;for(let s=0;s<o;++s)i^=e.pbox[s],a=f(e,i)^a,r=i,i=a,a=r;return r=i,i=a,a=r,a^=e.pbox[o],i^=e.pbox[17],{left:i,right:a}}var l=r.Blowfish=n.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4;!function(e,t,n){for(let i=0;i<4;i++){e.sbox[i]=[];for(let t=0;t<256;t++)e.sbox[i][t]=a[i][t]}let r=0;for(let a=0;a<18;a++)e.pbox[a]=i[a]^t[r],r++,r>=n&&(r=0);let o=0,s=0,f=0;for(let i=0;i<18;i+=2)f=c(e,o,s),o=f.left,s=f.right,e.pbox[i]=o,e.pbox[i+1]=s;for(let i=0;i<4;i++)for(let t=0;t<256;t+=2)f=c(e,o,s),o=f.left,s=f.right,e.sbox[i][t]=o,e.sbox[i][t+1]=s}(s,t,n)}},encryptBlock:function(e,t){var n=c(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},decryptBlock:function(e,t){var n=function(e,t,n){let r,o=t,i=n;for(let a=17;a>1;--a)o^=e.pbox[a],i=f(e,o)^i,r=o,o=i,i=r;return r=o,o=i,i=r,i^=e.pbox[1],o^=e.pbox[0],{left:o,right:i}}(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},blockSize:2,keySize:4,ivSize:2});t.Blowfish=n._createHelper(l)}(),e.Blowfish},"object"==typeof e?t.exports=e=o(Vn(),Zn(),er(),lr(),dr()):"function"==typeof define&&n.amdO?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(r.CryptoJS)})),Tr=p(((e,t)=>{var r,o;r=e,o=function(e){return e},"object"==typeof e?t.exports=e=o(Vn(),Gn(),zn(),Yn(),Zn(),Qn(),er(),tr(),nr(),rr(),or(),ir(),ar(),sr(),fr(),cr(),lr(),dr(),ur(),hr(),pr(),gr(),br(),yr(),vr(),mr(),Cr(),Or(),wr(),Er(),_r(),xr(),Sr(),Rr(),Nr()):"function"==typeof define&&n.amdO?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],o):r.CryptoJS=r.CryptoJS})),kr=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&t(r,e,o);return n(r,e),r},o=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=void 0;var i=k(),a=o(P()),s=Tn(),f=Jn(),c=r(Sn()),l=Jn(),d=Tr(),u=class e{constructor(t){let n=(0,s.resolveLocalStorage)();this.storeKey="",this.cipherIV="",this.subKey=t,c.logDebug("--------get current local storage --------"),c.logDebug(n);let r=n.getItem(e.cacheKey+t);if(typeof r>"u"||null===r)return c.logDebug("with no cache"),void(this.cache={});if(c.logDebug(r),r?.length>0){var o=(0,f.safeJsonParse)(r);this.cache=o}c.logDebug(`get cache obj: ${this.cache}`),(typeof this.cache>"u"||null==this.cache)&&(this.cache={})}saveContent(e,t){let n={id:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",timestamp:Date.now().toString(),content:e};this.saveItem(n,t)}saveItem(t,n){let r=e.cacheKey+this.subKey,o=(0,s.resolveLocalStorage)();c.logDebug(this.cache),c.logDebug(`get cache obj: ${this.cache}, ${n}, ${t}`),this.cache[n]=t;let i=(0,f.safeJsonStringify)(this.cache);c.logDebug(`STORAGE: ${n} @ ${this.cache}`),o.setItem(r,i)}getItem(e){return c.logDebug(`STORAGE >> getItem: ${e} @ ${this.cache}`),this.cache[e]}getCachedPBKDF2InfoKey(){var e,t,n,r;if(this.storeKey.length>0&&(null===(e=this.cipherIV)||void 0===e?void 0:e.length)>0)return{pw:this.storeKey,iv:this.cipherIV};let o=null===(t=this.getItem(i.OKXCONNECTOR_STORAGER_CRYPTO_SALT))||void 0===t?void 0:t.content;o||(o=(0,s.toHexString)(a.default.randomBytes(24)),this.saveContent(o,i.OKXCONNECTOR_STORAGER_CRYPTO_SALT));let f=null===(n=this.getItem(i.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD))||void 0===n?void 0:n.content;f||(f=(0,s.toHexString)(a.default.randomBytes(32)),this.saveContent(f,i.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD));let c=null===(r=this.getItem(i.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV))||void 0===r?void 0:r.content;if(!c){let e=a.default.randomBytes(16);c=(0,s.toHexString)(e),this.saveContent(c,i.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV)}return this.cipherIV=c,this.storeKey=(0,d.PBKDF2)(f,o,{iterations:10}).toString(),{pw:this.storeKey,iv:this.cipherIV}}encryptStoreMsg(e,t){(0,l.logDebug)(`encryptStoreMsg  encryptStoreMsg start ${Date.now()}`);let n=this.getCachedPBKDF2InfoKey();(0,l.logDebug)(`encryptStoreMsg  encryptStoreMsg mid ${Date.now()}`);var r=d.AES.encrypt(e,n.pw).toString();this.saveContent(r,t),(0,l.logDebug)(`encryptStoreMsg  encryptStoreMsg end ${Date.now()}`)}getAndDecrypt(e){(0,l.logDebug)(`encryptStoreMsg  getAndDecrypt start ${Date.now()}`);let t=this.getItem(e);if(t&&t.content){let e=this.getCachedPBKDF2InfoKey();(0,l.logDebug)(`encryptStoreMsg  getAndDecrypt mid ${Date.now()}`);let n=d.AES.decrypt(t.content,e.pw).toString(d.enc.Utf8);return(0,l.logDebug)(`encryptStoreMsg  getAndDecrypt end ${Date.now()}`),n}return null}clearCache(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===t){this.cache={};let t=e.cacheKey+this.subKey;localStorage.setItem(t,"")}else{let n=e.cacheKey+this.subKey,r=(0,s.resolveLocalStorage)();c.logDebug(this.cache),this.cache[t]=null;let o=(0,f.safeJsonStringify)(this.cache);c.logDebug(`STORAGE: clean key ${t} @ ${this.cache}`),r.setItem(n,o)}}};e.Storage=u,u.cacheKey="OKXStorageKey"})),Dr=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&t(r,e,o);return n(r,e),r},o=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXWalletConnector=void 0;var i=T(),a=k(),s=kr(),f=Jn(),c=Tn(),l=m(),d=r(Sn()),u=Xn(),h=(0,c.resolveWebSocketImplementation)();e.OKXWalletConnector=class{constructor(e){if(this.events=new l.EventEmitter,this.state=i.ConnectorState.InitState,this.selectedUrlIndex=0,this.retryCount=0,this.timeOutLimit=8e3,!(0,c.checkWSUrl)(e))throw new Error(`CONNECTOR: invalid url ${e}`);this.url=e,this.heartbeatTimer=null,this.connectionTimeoutTimer=null,this.connectURLStorage=new s.Storage(a.OKXCONNECTOR_CACHE_KEY+a.OKXCONNECTOR_CACHE_KEY)}get connecting(){return this.state==i.ConnectorState.Connecting}onPayload(e){if(!(typeof e.data>"u")){if(d.logDebug("get received data"),d.logDebug(e),"string"==typeof e.data&&"pong"===e.data)return void d.logDebug(`CONNECT: receive pong ${Date.now().toString()}`);this.events.emit("payload",e.data)}}onClose(e){var t;d.logDebug("socket get closed: ",null===(t=this.socket)||void 0===t?void 0:t.url,e.code),this.socket=void 0,this.events.emit("close",e)}onError(e,t){let n={id:e,msg:t.toString()};this.events.emit("payload",n)}onopen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.state=i.ConnectorState.Connected,this.events.emit("open")}emitError(e){this.events.emit("fail",e)}heartbeat(){return o(this,void 0,void 0,(function*(){if(this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.state==i.ConnectorState.Connected||this.state==i.ConnectorState.OnError){if(this.socket){if(this.socket.readyState===WebSocket.OPEN)d.logDebug(`send ping heart beat: ${Date.now().toString()}, ${this.socket}`),this.socket.send("ping"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3);else if(d.logDebug("socket not ready"),this.state==i.ConnectorState.Connected||this.state==i.ConnectorState.OnError){d.logDebug("socket reconnect by heartbeat with state",this.state,this.socket.readyState);try{yield this.tryRegistOpen()}catch{d.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}}else if(d.logDebug("socket not exist"),this.state==i.ConnectorState.Connected||this.state==i.ConnectorState.OnError){d.logDebug("socket reconnect by heartbeat");try{yield this.tryRegistOpen()}catch{d.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}}else d.logDebug("heart beat close")}))}registOpen(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(0,c.checkWSUrl)(e))throw new Error(`CONNECTOR: invalid url ${e}`);this.url=e,t||d.logDebug("Connection connect:",this.url,(new Date).toUTCString()),this.state=i.ConnectorState.Connecting;new URLSearchParams(e).get("origin");return new Promise(((t,n)=>{let r=new h(e,[]);d.logDebug("Connection connect Begin:",this.url,(new Date).toUTCString()),this.startTimeOutTimer(r),(0,c.hasBuiltInWebSocket)()?(d.logDebug("Add socket error handler"),r.onerror=()=>{n(new Error("socket error")),r.close()}):(d.logDebug("Add socket error handler"),r.on("error",(()=>{n(new Error("socket error")),r.close()}))),r.onopen=()=>{d.logDebug("socket opened"),this.resetTimeOutTimer(i.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.FINISHED),this.onopen(r),this.heartbeat(),t(r)}}))}checkMaxRetry(){return d.logDebug("current retry count:",this.retryCount,"of",i.OKXCONNECTOR_WS_URL_LIST.length),this.retryCount>i.OKXCONNECTOR_WS_URL_LIST.length}connectionTryNext(){return o(this,void 0,void 0,(function*(){if(!this.checkMaxRetry()){this.retryCount+=1;let e=this.getNextSelectUrl();return d.logDebug("Connection retry:",e,(new Date).toUTCString()),this.registOpen(e,!0)}d.logDebug("Max Connection retry ",this.retryCount,(new Date).toUTCString())}))}startTimeOutTimer(e){this.connectionTimeoutTimer&&this.resetTimeOutTimer(i.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.CANCELED),this.pendingSocket=e,this.connectionTimeoutTimer=setTimeout((()=>{this.pendingSocket&&this.resetTimeOutTimer(i.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.TIME_OUT)}),this.timeOutLimit)}resetTimeOutTimer(e){var t;e!=i.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.FINISHED&&(null===(t=this.pendingSocket)||void 0===t||t.close(e)),this.pendingSocket=void 0,clearTimeout(this.connectionTimeoutTimer)}cacheSuccessUrlSelect(){this.connectURLStorage.saveContent(this.selectedUrlIndex.toString(),a.OKXCONNECTOR_CACHE_KEY)}getSuccessUrlSelect(){var e;let t=null===(e=this.connectURLStorage.getItem(a.OKXCONNECTOR_CACHE_KEY))||void 0===e?void 0:e.content,n=0;return t&&(n=Number(t)),this.selectedUrlIndex=n,i.OKXCONNECTOR_WS_URL_LIST[n]}getNextSelectUrl(){return this.selectedUrlIndex+=1,this.selectedUrlIndex=this.selectedUrlIndex%i.OKXCONNECTOR_WS_URL_LIST.length,i.OKXCONNECTOR_WS_URL_LIST[this.selectedUrlIndex]}onVisibleChanged(){return o(this,void 0,void 0,(function*(){if("visible"===document.visibilityState&&(d.logDebug(`get changed ${this.state}, ${this.socket}`),this.state==i.ConnectorState.Connected&&typeof this.socket>"u")){d.logDebug("CONNECTION need reopen");try{yield this.tryRegistOpen()}catch{d.logError("regist open failed")}}else;}))}tryRegistOpen(){return o(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;return function*(){if(e.connecting)return d.logDebug("tryRegistOpen => connecting state"),new Promise(((t,n)=>{e.events.once("fail",(e=>(d.logDebug("tryRegistOpen => connecting fail listener",e),n(e)))),e.events.once("open",(()=>typeof e.socket>"u"?n(new Error("Connect lost")):t(e.socket)))}));d.logDebug("tryRegistOpen => try registOpen until retry limit is hit");let n=!1;for(;!e.checkMaxRetry()&&!e.socket;)try{d.logDebug("tryRegistOpen => call registOpen, try count:",e.retryCount,n),yield e.registOpen(t,n)}catch(r){d.logDebug("tryRegistOpen => registOpen failed",r),e.retryCount+=1,t=e.getNextSelectUrl(),n=!0}if(d.logDebug("tryRegistOpen => exit while loop",e.retryCount,e.socket),!e.socket&&e.checkMaxRetry())throw d.logDebug("tryRegistOpen => failed to open a socket",e.retryCount,e.socket),e.retryCount=0,e.state=i.ConnectorState.OnError,e.emitError(new Error("tryRegistOpen failed")),new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.CONNECTION_ERROR,"Failed to connect")}()}))}connect(){return o(this,void 0,void 0,(function*(){try{yield this.tryRegistOpen(),document.removeEventListener("visibilitychange",this.onVisibleChanged.bind(this)),document.addEventListener("visibilitychange",this.onVisibleChanged.bind(this))}catch(ji){throw d.logDebug("connect => failed to connect",ji),ji}}))}disconnect(){return o(this,void 0,void 0,(function*(){return this.state=i.ConnectorState.Disconnected,new Promise(((e,t)=>{typeof this.socket>"u"?e():(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close(),this.heartbeatTimer&&clearTimeout(this.heartbeatTimer))}))}))}currentStatus(){return{state:this.state,url:this.url}}addListener(e,t,n,r){this.listenPayloadHandler&&this.events.removeListener("payload",this.listenPayloadHandler),this.listenPayloadHandler=o=>{var i;d.logDebug(`<<< get payload ${o}`);let a=(0,f.safeJsonParse)(o);if(a.params&&a.params.data){let o=null===(i=a.params.data)||void 0===i?void 0:i.message;if(o)try{let i=t(o);void 0===i?(d.logDebug("CONNECT: decrypt undefined"),r(e,"Decrypt undefined")):n(e,i)}catch(s){d.logDebug(`CONNECT: decrypt failed: ${s}`),r(e,s.message)}}},this.events.on("payload",this.listenPayloadHandler),this.failHandler&&this.events.removeListener("fail",this.failHandler),this.failHandler=t=>{t?(d.logDebug(`CONNECT failed: ${t}`),r(e,t.message)):r(e,"Unkonow error")},this.events.on("fail",this.failHandler)}addPackageParse(e){this.payloadHandler&&this.events.removeListener("payload",this.payloadHandler),this.payloadHandler=t=>o(this,void 0,void 0,(function*(){d.logDebug(`CONNECTION @[${(new Date).toUTCString()}] <<<< received e:${t}`);let n=(0,f.safeJsonParse)(t);yield e(n)})),this.events.on("payload",this.payloadHandler)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}send(e,t){return o(this,void 0,void 0,(function*(){try{typeof this.socket>"u"&&(d.logDebug(`>>> send payload undefined ${t}`),yield e()),d.logDebug(`CONNECTION @[${(new Date).toUTCString()}]>>> send payload ${(0,f.safeJsonStringify)(t)}`),this.socket&&this.socket.send((0,f.safeJsonStringify)(t))}catch(n){this.onError(t.id,n)}}))}getMsgPayloadFromHistory(e){return o(this,void 0,void 0,(function*(){if(typeof e>"u")return;let t={params:{data:e}},n=(0,f.safeJsonStringify)(e);d.logDebug("get received data from history"),d.logDebug(n),n=(0,f.safeJsonStringify)(t),this.events.emit("payload",n)}))}onOpen(e){this.openHandler&&this.events.removeListener("open",this.openHandler),this.openHandler=()=>o(this,void 0,void 0,(function*(){d.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> ws opened: `),yield e()})),this.events.on("open",this.openHandler),this.cacheSuccessUrlSelect()}}})),Pr=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CONNECT_METHOD_BATCH_FETCHMSG=e.CONNECT_METHOD_FETCHMSG=e.CONNECT_METHOD_RECEIVE=e.CONNECT_METHOD_UNSUB=e.CONNECT_METHOD_SUB=e.CONNECT_METHOD_PUBLISH=e.CONNECT_METHOD_LOGIN=e.CONNECT_METHOD_PUSH=void 0,e.CONNECT_METHOD_PUSH="push",e.CONNECT_METHOD_LOGIN="login",e.CONNECT_METHOD_PUBLISH="publish",e.CONNECT_METHOD_SUB="subscribe",e.CONNECT_METHOD_UNSUB="unsubscribe",e.CONNECT_METHOD_RECEIVE="receive",e.CONNECT_METHOD_FETCHMSG="fetchMessages",e.CONNECT_METHOD_BATCH_FETCHMSG="batchFetchMessages"})),Ar=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OKXCONNECTOR_JWT_TTL=e.OKXCONNECTOR_JWT_WALLET_SIDE=e.OKXCONNECTOR_JWT_SIDE=void 0,e.OKXCONNECTOR_JWT_SIDE="wallet",e.OKXCONNECTOR_JWT_WALLET_SIDE="dapp",e.OKXCONNECTOR_JWT_TTL=864e5})),Ir=p((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.SessionCrypto=void 0;var n=t(P()),r=Tn();e.SessionCrypto=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.nonceLength=24,this.sessionKeyPair=e?this.createKeypairFromString(e):this.createKeypair()}createKeypair(){return n.default.box.keyPair()}createKeypairFromString(e){return{publicKey:(0,r.hexToByteArray)(e.publicKey),secretKey:(0,r.hexToByteArray)(e.secretKey)}}createNonce(){return n.default.randomBytes(this.nonceLength)}get keyPair(){return this.sessionKeyPair}encrypt(e,t){let o=(new TextEncoder).encode(e),i=this.createNonce(),a=n.default.box(o,i,(0,r.hexToByteArray)(t),this.keyPair.secretKey),s=(0,r.concatUint8Arrays)(i,a);var f=(0,r.toHexString)(s),c=(new TextEncoder).encode(f);return(0,r.base64encode)(c,!1)}encryptWallet(e,t){let o=(new TextEncoder).encode(e),i=this.createNonce(),a=n.default.box(o,i,(0,r.hexToByteArray)(t),this.keyPair.secretKey),s=(0,r.concatUint8Arrays)(i,a);return(0,r.base64encode)(s,!1)}decrypt(e,t){let o=(0,r.base64decode)(e,!0).toUint8Array(),[i,a]=(0,r.splitToUint8Arrays)(o,this.nonceLength),s=n.default.box.open(a,i,(0,r.hexToByteArray)(t),this.keyPair.secretKey);if(!s)throw new Error(`Decryption error: \n message: ${e.toString()} \n sender pubkey: ${t.toString()} \n keypair pubkey: ${(0,r.toHexString)(this.keyPair.publicKey)} \n keypair secretkey: ${(0,r.toHexString)(this.keyPair.secretKey)}`);return(new TextDecoder).decode(s)}decryptWallet(e,t){let o=(0,r.base64decode)(e,!0),i=(0,r.hexToByteArray)(o.toString()),[a,s]=(0,r.splitToUint8Arrays)(i,this.nonceLength),f=n.default.box.open(s,a,(0,r.hexToByteArray)(t),this.keyPair.secretKey);if(!f)throw new Error(`Decryption error: \n message: ${e.toString()} \n sender pubkey: ${t.toString()} \n keypair pubkey: ${(0,r.toHexString)(this.keyPair.publicKey)} \n keypair secretkey: ${(0,r.toHexString)(this.keyPair.secretKey)}`);return(new TextDecoder).decode(f)}stringifyKeypair(){return{publicKey:(0,r.toHexString)(this.keyPair.publicKey),secretKey:(0,r.toHexString)(this.keyPair.secretKey)}}}})),Kr=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserRandomSource=void 0;e.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let t=new Uint8Array(e);for(let n=0;n<t.length;n+=65536)this._crypto.getRandomValues(t.subarray(n,n+Math.min(t.length-n,65536)));return t}}})),Mr=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeRandomSource=void 0;var t=_n();e.NodeRandomSource=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof u<"u"){let e=D();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let n=this._crypto.randomBytes(e);if(n.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");let r=new Uint8Array(e);for(let t=0;t<r.length;t++)r[t]=n[t];return(0,t.wipe)(n),r}}})),jr=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SystemRandomSource=void 0;var t=Kr(),n=Mr();e.SystemRandomSource=class{constructor(){return this.isAvailable=!1,this.name="",this._source=new t.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new n.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}})),Ur=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;var t=jr(),n=En(),r=_n();function o(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultRandomSource).randomBytes(t)}e.defaultRandomSource=new t.SystemRandomSource,e.randomBytes=o,e.randomUint32=function(){let t=o(4,arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.defaultRandomSource),i=(0,n.readUint32LE)(t);return(0,r.wipe)(t),i};var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultRandomSource;if(n.length<2)throw new Error("randomString charset is too short");if(n.length>256)throw new Error("randomString charset is too long");let s="",f=n.length,c=256-256%f;for(;t>0;){let e=o(Math.ceil(256*t/c),a);for(let r=0;r<e.length&&t>0;r++){let o=e[r];o<c&&(s+=n.charAt(o%f),t--)}(0,r.wipe)(e)}return s}e.randomString=a,e.randomStringForEntropy=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultRandomSource;return a(Math.ceil(t/(Math.log(n.length)/Math.LN2)),n,r)}})),Lr=p((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=En(),n=_n();e.DIGEST_LENGTH=64,e.BLOCK_SIZE=128;var r=function(){function r(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return r.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},r.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},r.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._tempHi),n.wipe(this._tempLo),this.reset()},r.prototype.update=function(t,n){if(void 0===n&&(n=t.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var r=0;if(this._bytesHashed+=n,this._bufferLength>0){for(;this._bufferLength<e.BLOCK_SIZE&&n>0;)this._buffer[this._bufferLength++]=t[r++],n--;this._bufferLength===this.blockSize&&(i(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(n>=this.blockSize&&(r=i(this._tempHi,this._tempLo,this._stateHi,this._stateLo,t,r,n),n%=this.blockSize);n>0;)this._buffer[this._bufferLength++]=t[r++],n--;return this},r.prototype.finish=function(e){if(!this._finished){var n=this._bytesHashed,r=this._bufferLength,o=n/536870912|0,a=n<<3,s=n%128<112?128:256;this._buffer[r]=128;for(var f=r+1;f<s-8;f++)this._buffer[f]=0;t.writeUint32BE(o,this._buffer,s-8),t.writeUint32BE(a,this._buffer,s-4),i(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,s),this._finished=!0}for(f=0;f<this.digestLength/8;f++)t.writeUint32BE(this._stateHi[f],e,8*f),t.writeUint32BE(this._stateLo[f],e,8*f+4);return this},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},r.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},r.prototype.cleanSavedState=function(e){n.wipe(e.stateHi),n.wipe(e.stateLo),e.buffer&&n.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},r}();e.SHA512=r;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function i(e,n,r,i,a,s,f){for(var c,l,d,u,h,p,g,b,y=r[0],v=r[1],m=r[2],C=r[3],O=r[4],w=r[5],E=r[6],_=r[7],x=i[0],S=i[1],R=i[2],N=i[3],T=i[4],k=i[5],D=i[6],P=i[7];f>=128;){for(var A=0;A<16;A++){var I=8*A+s;e[A]=t.readUint32BE(a,I),n[A]=t.readUint32BE(a,I+4)}for(A=0;A<80;A++){var K,M,j=y,U=v,L=m,W=C,B=O,X=w,$=E,H=x,q=S,F=R,J=N,V=T,G=k,z=D;if(h=65535&(l=P),p=l>>>16,g=65535&(c=_),b=c>>>16,h+=65535&(l=(T>>>14|O<<18)^(T>>>18|O<<14)^(O>>>9|T<<23)),p+=l>>>16,g+=65535&(c=(O>>>14|T<<18)^(O>>>18|T<<14)^(T>>>9|O<<23)),b+=c>>>16,h+=65535&(l=T&k^~T&D),p+=l>>>16,g+=65535&(c=O&w^~O&E),b+=c>>>16,c=o[2*A],h+=65535&(l=o[2*A+1]),p+=l>>>16,g+=65535&c,b+=c>>>16,c=e[A%16],p+=(l=n[A%16])>>>16,g+=65535&c,b+=c>>>16,g+=(p+=(h+=65535&l)>>>16)>>>16,h=65535&(l=u=65535&h|p<<16),p=l>>>16,g=65535&(c=d=65535&g|(b+=g>>>16)<<16),b=c>>>16,h+=65535&(l=(x>>>28|y<<4)^(y>>>2|x<<30)^(y>>>7|x<<25)),p+=l>>>16,g+=65535&(c=(y>>>28|x<<4)^(x>>>2|y<<30)^(x>>>7|y<<25)),b+=c>>>16,p+=(l=x&S^x&R^S&R)>>>16,g+=65535&(c=y&v^y&m^v&m),b+=c>>>16,K=65535&(g+=(p+=(h+=65535&l)>>>16)>>>16)|(b+=g>>>16)<<16,M=65535&h|p<<16,h=65535&(l=J),p=l>>>16,g=65535&(c=W),b=c>>>16,p+=(l=u)>>>16,g+=65535&(c=d),b+=c>>>16,v=j,m=U,C=L,O=W=65535&(g+=(p+=(h+=65535&l)>>>16)>>>16)|(b+=g>>>16)<<16,w=B,E=X,_=$,y=K,S=H,R=q,N=F,T=J=65535&h|p<<16,k=V,D=G,P=z,x=M,A%16===15)for(I=0;I<16;I++)c=e[I],h=65535&(l=n[I]),p=l>>>16,g=65535&c,b=c>>>16,c=e[(I+9)%16],h+=65535&(l=n[(I+9)%16]),p+=l>>>16,g+=65535&c,b+=c>>>16,d=e[(I+1)%16],h+=65535&(l=((u=n[(I+1)%16])>>>1|d<<31)^(u>>>8|d<<24)^(u>>>7|d<<25)),p+=l>>>16,g+=65535&(c=(d>>>1|u<<31)^(d>>>8|u<<24)^d>>>7),b+=c>>>16,d=e[(I+14)%16],p+=(l=((u=n[(I+14)%16])>>>19|d<<13)^(d>>>29|u<<3)^(u>>>6|d<<26))>>>16,g+=65535&(c=(d>>>19|u<<13)^(u>>>29|d<<3)^d>>>6),b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,e[I]=65535&g|b<<16,n[I]=65535&h|p<<16}h=65535&(l=x),p=l>>>16,g=65535&(c=y),b=c>>>16,c=r[0],p+=(l=i[0])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[0]=y=65535&g|b<<16,i[0]=x=65535&h|p<<16,h=65535&(l=S),p=l>>>16,g=65535&(c=v),b=c>>>16,c=r[1],p+=(l=i[1])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[1]=v=65535&g|b<<16,i[1]=S=65535&h|p<<16,h=65535&(l=R),p=l>>>16,g=65535&(c=m),b=c>>>16,c=r[2],p+=(l=i[2])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[2]=m=65535&g|b<<16,i[2]=R=65535&h|p<<16,h=65535&(l=N),p=l>>>16,g=65535&(c=C),b=c>>>16,c=r[3],p+=(l=i[3])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[3]=C=65535&g|b<<16,i[3]=N=65535&h|p<<16,h=65535&(l=T),p=l>>>16,g=65535&(c=O),b=c>>>16,c=r[4],p+=(l=i[4])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[4]=O=65535&g|b<<16,i[4]=T=65535&h|p<<16,h=65535&(l=k),p=l>>>16,g=65535&(c=w),b=c>>>16,c=r[5],p+=(l=i[5])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[5]=w=65535&g|b<<16,i[5]=k=65535&h|p<<16,h=65535&(l=D),p=l>>>16,g=65535&(c=E),b=c>>>16,c=r[6],p+=(l=i[6])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[6]=E=65535&g|b<<16,i[6]=D=65535&h|p<<16,h=65535&(l=P),p=l>>>16,g=65535&(c=_),b=c>>>16,c=r[7],p+=(l=i[7])>>>16,g+=65535&c,b+=c>>>16,b+=(g+=(p+=(h+=65535&l)>>>16)>>>16)>>>16,r[7]=_=65535&g|b<<16,i[7]=P=65535&h|p<<16,s+=128,f-=128}return s}e.hash=function(e){var t=new r;t.update(e);var n=t.digest();return t.clean(),n}})),Wr=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertSecretKeyToX25519=e.convertPublicKeyToX25519=e.verify=e.sign=e.extractPublicKeyFromSecretKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.SEED_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=e.SIGNATURE_LENGTH=void 0;var t=Ur(),n=Lr(),r=_n();function o(e){let t=new Float64Array(16);if(e)for(let n=0;n<e.length;n++)t[n]=e[n];return t}e.SIGNATURE_LENGTH=64,e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=64,e.SEED_LENGTH=32,new Uint8Array(32)[0]=9;var i=o(),a=o([1]),s=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),f=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),c=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),d=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function u(e,t){for(let n=0;n<16;n++)e[n]=0|t[n]}function h(e){let t=1;for(let n=0;n<16;n++){let r=e[n]+t+65535;t=Math.floor(r/65536),e[n]=r-65536*t}e[0]+=t-1+37*(t-1)}function p(e,t,n){let r=~(n-1);for(let o=0;o<16;o++){let n=r&(e[o]^t[o]);e[o]^=n,t[o]^=n}}function g(e,t){let n=o(),r=o();for(let o=0;o<16;o++)r[o]=t[o];h(r),h(r),h(r);for(let o=0;o<2;o++){n[0]=r[0]-65517;for(let t=1;t<15;t++)n[t]=r[t]-65535-(n[t-1]>>16&1),n[t-1]&=65535;n[15]=r[15]-32767-(n[14]>>16&1);let e=n[15]>>16&1;n[14]&=65535,p(r,n,1-e)}for(let o=0;o<16;o++)e[2*o]=255&r[o],e[2*o+1]=r[o]>>8}function b(e,t){let n=0;for(let r=0;r<32;r++)n|=e[r]^t[r];return(1&n-1>>>8)-1}function y(e,t){let n=new Uint8Array(32),r=new Uint8Array(32);return g(n,e),g(r,t),b(n,r)}function v(e){let t=new Uint8Array(32);return g(t,e),1&t[0]}function m(e,t,n){for(let r=0;r<16;r++)e[r]=t[r]+n[r]}function C(e,t,n){for(let r=0;r<16;r++)e[r]=t[r]-n[r]}function O(e,t,n){let r,o,i=0,a=0,s=0,f=0,c=0,l=0,d=0,u=0,h=0,p=0,g=0,b=0,y=0,v=0,m=0,C=0,O=0,w=0,E=0,_=0,x=0,S=0,R=0,N=0,T=0,k=0,D=0,P=0,A=0,I=0,K=0,M=n[0],j=n[1],U=n[2],L=n[3],W=n[4],B=n[5],X=n[6],$=n[7],H=n[8],q=n[9],F=n[10],J=n[11],V=n[12],G=n[13],z=n[14],Y=n[15];r=t[0],i+=r*M,a+=r*j,s+=r*U,f+=r*L,c+=r*W,l+=r*B,d+=r*X,u+=r*$,h+=r*H,p+=r*q,g+=r*F,b+=r*J,y+=r*V,v+=r*G,m+=r*z,C+=r*Y,r=t[1],a+=r*M,s+=r*j,f+=r*U,c+=r*L,l+=r*W,d+=r*B,u+=r*X,h+=r*$,p+=r*H,g+=r*q,b+=r*F,y+=r*J,v+=r*V,m+=r*G,C+=r*z,O+=r*Y,r=t[2],s+=r*M,f+=r*j,c+=r*U,l+=r*L,d+=r*W,u+=r*B,h+=r*X,p+=r*$,g+=r*H,b+=r*q,y+=r*F,v+=r*J,m+=r*V,C+=r*G,O+=r*z,w+=r*Y,r=t[3],f+=r*M,c+=r*j,l+=r*U,d+=r*L,u+=r*W,h+=r*B,p+=r*X,g+=r*$,b+=r*H,y+=r*q,v+=r*F,m+=r*J,C+=r*V,O+=r*G,w+=r*z,E+=r*Y,r=t[4],c+=r*M,l+=r*j,d+=r*U,u+=r*L,h+=r*W,p+=r*B,g+=r*X,b+=r*$,y+=r*H,v+=r*q,m+=r*F,C+=r*J,O+=r*V,w+=r*G,E+=r*z,_+=r*Y,r=t[5],l+=r*M,d+=r*j,u+=r*U,h+=r*L,p+=r*W,g+=r*B,b+=r*X,y+=r*$,v+=r*H,m+=r*q,C+=r*F,O+=r*J,w+=r*V,E+=r*G,_+=r*z,x+=r*Y,r=t[6],d+=r*M,u+=r*j,h+=r*U,p+=r*L,g+=r*W,b+=r*B,y+=r*X,v+=r*$,m+=r*H,C+=r*q,O+=r*F,w+=r*J,E+=r*V,_+=r*G,x+=r*z,S+=r*Y,r=t[7],u+=r*M,h+=r*j,p+=r*U,g+=r*L,b+=r*W,y+=r*B,v+=r*X,m+=r*$,C+=r*H,O+=r*q,w+=r*F,E+=r*J,_+=r*V,x+=r*G,S+=r*z,R+=r*Y,r=t[8],h+=r*M,p+=r*j,g+=r*U,b+=r*L,y+=r*W,v+=r*B,m+=r*X,C+=r*$,O+=r*H,w+=r*q,E+=r*F,_+=r*J,x+=r*V,S+=r*G,R+=r*z,N+=r*Y,r=t[9],p+=r*M,g+=r*j,b+=r*U,y+=r*L,v+=r*W,m+=r*B,C+=r*X,O+=r*$,w+=r*H,E+=r*q,_+=r*F,x+=r*J,S+=r*V,R+=r*G,N+=r*z,T+=r*Y,r=t[10],g+=r*M,b+=r*j,y+=r*U,v+=r*L,m+=r*W,C+=r*B,O+=r*X,w+=r*$,E+=r*H,_+=r*q,x+=r*F,S+=r*J,R+=r*V,N+=r*G,T+=r*z,k+=r*Y,r=t[11],b+=r*M,y+=r*j,v+=r*U,m+=r*L,C+=r*W,O+=r*B,w+=r*X,E+=r*$,_+=r*H,x+=r*q,S+=r*F,R+=r*J,N+=r*V,T+=r*G,k+=r*z,D+=r*Y,r=t[12],y+=r*M,v+=r*j,m+=r*U,C+=r*L,O+=r*W,w+=r*B,E+=r*X,_+=r*$,x+=r*H,S+=r*q,R+=r*F,N+=r*J,T+=r*V,k+=r*G,D+=r*z,P+=r*Y,r=t[13],v+=r*M,m+=r*j,C+=r*U,O+=r*L,w+=r*W,E+=r*B,_+=r*X,x+=r*$,S+=r*H,R+=r*q,N+=r*F,T+=r*J,k+=r*V,D+=r*G,P+=r*z,A+=r*Y,r=t[14],m+=r*M,C+=r*j,O+=r*U,w+=r*L,E+=r*W,_+=r*B,x+=r*X,S+=r*$,R+=r*H,N+=r*q,T+=r*F,k+=r*J,D+=r*V,P+=r*G,A+=r*z,I+=r*Y,r=t[15],C+=r*M,O+=r*j,w+=r*U,E+=r*L,_+=r*W,x+=r*B,S+=r*X,R+=r*$,N+=r*H,T+=r*q,k+=r*F,D+=r*J,P+=r*V,A+=r*G,I+=r*z,K+=r*Y,i+=38*O,a+=38*w,s+=38*E,f+=38*_,c+=38*x,l+=38*S,d+=38*R,u+=38*N,h+=38*T,p+=38*k,g+=38*D,b+=38*P,y+=38*A,v+=38*I,m+=38*K,o=1,r=i+o+65535,o=Math.floor(r/65536),i=r-65536*o,r=a+o+65535,o=Math.floor(r/65536),a=r-65536*o,r=s+o+65535,o=Math.floor(r/65536),s=r-65536*o,r=f+o+65535,o=Math.floor(r/65536),f=r-65536*o,r=c+o+65535,o=Math.floor(r/65536),c=r-65536*o,r=l+o+65535,o=Math.floor(r/65536),l=r-65536*o,r=d+o+65535,o=Math.floor(r/65536),d=r-65536*o,r=u+o+65535,o=Math.floor(r/65536),u=r-65536*o,r=h+o+65535,o=Math.floor(r/65536),h=r-65536*o,r=p+o+65535,o=Math.floor(r/65536),p=r-65536*o,r=g+o+65535,o=Math.floor(r/65536),g=r-65536*o,r=b+o+65535,o=Math.floor(r/65536),b=r-65536*o,r=y+o+65535,o=Math.floor(r/65536),y=r-65536*o,r=v+o+65535,o=Math.floor(r/65536),v=r-65536*o,r=m+o+65535,o=Math.floor(r/65536),m=r-65536*o,r=C+o+65535,o=Math.floor(r/65536),C=r-65536*o,i+=o-1+37*(o-1),o=1,r=i+o+65535,o=Math.floor(r/65536),i=r-65536*o,r=a+o+65535,o=Math.floor(r/65536),a=r-65536*o,r=s+o+65535,o=Math.floor(r/65536),s=r-65536*o,r=f+o+65535,o=Math.floor(r/65536),f=r-65536*o,r=c+o+65535,o=Math.floor(r/65536),c=r-65536*o,r=l+o+65535,o=Math.floor(r/65536),l=r-65536*o,r=d+o+65535,o=Math.floor(r/65536),d=r-65536*o,r=u+o+65535,o=Math.floor(r/65536),u=r-65536*o,r=h+o+65535,o=Math.floor(r/65536),h=r-65536*o,r=p+o+65535,o=Math.floor(r/65536),p=r-65536*o,r=g+o+65535,o=Math.floor(r/65536),g=r-65536*o,r=b+o+65535,o=Math.floor(r/65536),b=r-65536*o,r=y+o+65535,o=Math.floor(r/65536),y=r-65536*o,r=v+o+65535,o=Math.floor(r/65536),v=r-65536*o,r=m+o+65535,o=Math.floor(r/65536),m=r-65536*o,r=C+o+65535,o=Math.floor(r/65536),C=r-65536*o,i+=o-1+37*(o-1),e[0]=i,e[1]=a,e[2]=s,e[3]=f,e[4]=c,e[5]=l,e[6]=d,e[7]=u,e[8]=h,e[9]=p,e[10]=g,e[11]=b,e[12]=y,e[13]=v,e[14]=m,e[15]=C}function w(e,t){O(e,t,t)}function E(e,t){let n,r=o();for(n=0;n<16;n++)r[n]=t[n];for(n=253;n>=0;n--)w(r,r),2!==n&&4!==n&&O(r,r,t);for(n=0;n<16;n++)e[n]=r[n]}function _(e,t){let n=o(),r=o(),i=o(),a=o(),s=o(),c=o(),l=o(),d=o(),u=o();C(n,e[1],e[0]),C(u,t[1],t[0]),O(n,n,u),m(r,e[0],e[1]),m(u,t[0],t[1]),O(r,r,u),O(i,e[3],t[3]),O(i,i,f),O(a,e[2],t[2]),m(a,a,a),C(s,r,n),C(c,a,i),m(l,a,i),m(d,r,n),O(e[0],s,c),O(e[1],d,l),O(e[2],l,c),O(e[3],s,d)}function x(e,t,n){for(let r=0;r<4;r++)p(e[r],t[r],n)}function S(e,t){let n=o(),r=o(),i=o();E(i,t[2]),O(n,t[0],i),O(r,t[1],i),g(e,r),e[31]^=v(n)<<7}function R(e,t,n){u(e[0],i),u(e[1],a),u(e[2],a),u(e[3],i);for(let r=255;r>=0;--r){let o=n[r/8|0]>>(7&r)&1;x(e,t,o),_(t,e),_(e,e),x(e,t,o)}}function N(e,t){let n=[o(),o(),o(),o()];u(n[0],c),u(n[1],l),u(n[2],a),O(n[3],c,l),R(e,n,t)}function T(t){if(t.length!==e.SEED_LENGTH)throw new Error(`ed25519: seed must be ${e.SEED_LENGTH} bytes`);let r=(0,n.hash)(t);r[0]&=248,r[31]&=127,r[31]|=64;let i=new Uint8Array(32),a=[o(),o(),o(),o()];N(a,r),S(i,a);let s=new Uint8Array(64);return s.set(t),s.set(i,32),{publicKey:i,secretKey:s}}e.generateKeyPairFromSeed=T,e.generateKeyPair=function(e){let n=(0,t.randomBytes)(32,e),o=T(n);return(0,r.wipe)(n),o},e.extractPublicKeyFromSecretKey=function(t){if(t.length!==e.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${e.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(t.subarray(32))};var k=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function D(e,t){let n,r,o,i;for(r=63;r>=32;--r){for(n=0,o=r-32,i=r-12;o<i;++o)t[o]+=n-16*t[r]*k[o-(r-32)],n=Math.floor((t[o]+128)/256),t[o]-=256*n;t[o]+=n,t[r]=0}for(n=0,o=0;o<32;o++)t[o]+=n-(t[31]>>4)*k[o],n=t[o]>>8,t[o]&=255;for(o=0;o<32;o++)t[o]-=n*k[o];for(r=0;r<32;r++)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function P(e){let t=new Float64Array(64);for(let n=0;n<64;n++)t[n]=e[n];for(let n=0;n<64;n++)e[n]=0;D(e,t)}function A(e,t){let n=o(),r=o(),f=o(),c=o(),l=o(),h=o(),p=o();return u(e[2],a),function(e,t){for(let n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}(e[1],t),w(f,e[1]),O(c,f,s),C(f,f,e[2]),m(c,e[2],c),w(l,c),w(h,l),O(p,h,l),O(n,p,f),O(n,n,c),function(e,t){let n,r=o();for(n=0;n<16;n++)r[n]=t[n];for(n=250;n>=0;n--)w(r,r),1!==n&&O(r,r,t);for(n=0;n<16;n++)e[n]=r[n]}(n,n),O(n,n,f),O(n,n,c),O(n,n,c),O(e[0],n,c),w(r,e[0]),O(r,r,c),y(r,f)&&O(e[0],e[0],d),w(r,e[0]),O(r,r,c),y(r,f)?-1:(v(e[0])===t[31]>>7&&C(e[0],i,e[0]),O(e[3],e[0],e[1]),0)}e.sign=function(e,t){let r=new Float64Array(64),i=[o(),o(),o(),o()],a=(0,n.hash)(e.subarray(0,32));a[0]&=248,a[31]&=127,a[31]|=64;let s=new Uint8Array(64);s.set(a.subarray(32),32);let f=new n.SHA512;f.update(s.subarray(32)),f.update(t);let c=f.digest();f.clean(),P(c),N(i,c),S(s,i),f.reset(),f.update(s.subarray(0,32)),f.update(e.subarray(32)),f.update(t);let l=f.digest();P(l);for(let n=0;n<32;n++)r[n]=c[n];for(let n=0;n<32;n++)for(let e=0;e<32;e++)r[n+e]+=l[n]*a[e];return D(s.subarray(32),r),s},e.verify=function(t,r,i){let a=new Uint8Array(32),s=[o(),o(),o(),o()],f=[o(),o(),o(),o()];if(i.length!==e.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${e.SIGNATURE_LENGTH} bytes`);if(A(f,t))return!1;let c=new n.SHA512;c.update(i.subarray(0,32)),c.update(t),c.update(r);let l=c.digest();return P(l),R(s,f,l),N(f,i.subarray(32)),_(s,f),S(a,s),!b(i,a)},e.convertPublicKeyToX25519=function(e){let t=[o(),o(),o(),o()];if(A(t,e))throw new Error("Ed25519: invalid public key");let n=o(),r=o(),i=t[1];m(n,a,i),C(r,a,i),E(r,r),O(n,n,r);let s=new Uint8Array(32);return g(s,n),s},e.convertSecretKeyToX25519=function(e){let t=(0,n.hash)(e.subarray(0,32));t[0]&=248,t[31]&=127,t[31]|=64;let o=new Uint8Array(t.subarray(0,32));return(0,r.wipe)(t),o}})),Br=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&t(r,e,o);return n(r,e),r},o=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},i=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.MULTICODEC_ED25519_LENGTH=e.MULTICODEC_ED25519_HEADER=e.MULTICODEC_ED25519_BASE=e.MULTICODEC_ED25519_ENCODING=e.DID_METHOD=e.DID_PREFIX=e.DID_DELIMITER=e.KEY_PAIR_SEED_LENGTH=e.DATA_ENCODING=e.JSON_ENCODING=e.JWT_ENCODING=e.JWT_DELIMITER=e.JWT_IRIDIUM_TYP=e.JWT_IRIDIUM_ALG=e.JWTHeaderType=void 0,e.generateKeyPair=function(){return c.default.sign.keyPair()},e.decodeJSON=u,e.encodeJSON=h,e.encodeIss=p,e.decodeIss=g,e.encodeSig=b,e.decodeSig=y,e.encodeData=v,e.decodeData=function(t){var n,r;let o=(0,d.okxtoString)(t,e.DATA_ENCODING).split(e.JWT_DELIMITER),i=u(null!==(n=o[0])&&void 0!==n?n:"{}"),a=u(null!==(r=o[1])&&void 0!==r?r:"{}");return{header:i,payload:a}},e.encodeJWT=m,e.decodeJWT=C,e.signJWT=function(t,n,r,i){return o(this,arguments,void 0,(function(t,n,r,o){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Math.floor(Date.now());return function*(){let a={alg:e.JWT_IRIDIUM_ALG,typ:e.JWT_IRIDIUM_TYP},s={iss:p(o.publicKey),sub:t,aud:n,act:"authenticate user",iat:i,exp:i+r},f=v({header:a,payload:s});return l.logDebug(`get sec kp: ${o.secretKey} {${o.secretKey.length}}`),m({header:a,payload:s,signature:c.default.sign.detached(f,o.secretKey)})}()}))},e.verifyJWT=function(t){return o(this,void 0,void 0,(function*(){let{header:n,payload:r,data:o,signature:i}=C(t);if(n.alg!==e.JWT_IRIDIUM_ALG||n.typ!==e.JWT_IRIDIUM_TYP)throw new Error("JWT must use EdDSA algorithm");let s=g(r.iss);return a.verify(s,o,i)}))};var a=r(Wr()),s=Rn(),f=Tn(),c=i(P()),l=r(Sn()),d=Nn();function u(t){return(0,s.safeJsonParse)((0,d.okxtoString)((0,d.okxfromString)(t,e.JWT_ENCODING),e.JSON_ENCODING))}function h(t){return(0,d.okxtoString)((0,d.okxfromString)((0,s.safeJsonStringify)(t),e.JSON_ENCODING),e.JWT_ENCODING)}function p(t){l.logDebug(`publicKey: ${(0,f.toHexString)(t)}`);var n=(0,d.okxtoString)(t,e.MULTICODEC_ED25519_ENCODING);return[e.DID_PREFIX,e.DID_METHOD,n].join(e.DID_DELIMITER)}function g(t){let[n,r,o]=t.split(e.DID_DELIMITER);if(n!==e.DID_PREFIX||r!==e.DID_METHOD)throw new Error('Issuer must be a DID with method "key"');if(void 0===o)throw new Error("multicodec is undefined");let i=(0,d.okxfromString)(o,e.MULTICODEC_ED25519_ENCODING);if(void 0===i||i.length!==e.MULTICODEC_ED25519_LENGTH)throw new Error("Issuer must be a public key with length 32 bytes");return i}function b(t){return(0,d.okxtoString)(t,e.JWT_ENCODING)}function y(t){return(0,d.okxfromString)(t,e.JWT_ENCODING)}function v(t){return(0,d.okxfromString)([h(t.header),h(t.payload)].join(e.JWT_DELIMITER),e.DATA_ENCODING)}function m(t){return[h(t.header),h(t.payload),b(t.signature)].join(e.JWT_DELIMITER)}function C(t){var n,r,o;let i=t.split(e.JWT_DELIMITER);return{header:u(null!==(n=i[0])&&void 0!==n?n:"{}"),payload:u(null!==(r=i[1])&&void 0!==r?r:"{}"),signature:y(null!==(o=i[2])&&void 0!==o?o:"{}"),data:(0,d.okxfromString)(i.slice(0,2).join(e.JWT_DELIMITER),e.DATA_ENCODING)}}e.JWTHeaderType="dapp",e.JWT_IRIDIUM_ALG="EdDSA",e.JWT_IRIDIUM_TYP="JWT",e.JWT_DELIMITER=".",e.JWT_ENCODING="base64url",e.JSON_ENCODING="utf8",e.DATA_ENCODING="utf8",e.KEY_PAIR_SEED_LENGTH=32,e.DID_DELIMITER=":",e.DID_PREFIX="did",e.DID_METHOD="key",e.MULTICODEC_ED25519_ENCODING="base58btc",e.MULTICODEC_ED25519_BASE="z",e.MULTICODEC_ED25519_HEADER="K36",e.MULTICODEC_ED25519_LENGTH=32})),Xr=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&t(r,e,o);return n(r,e),r},o=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionManager=void 0;var i=Dr(),a=Pr(),s=k(),f=Ar(),c=T(),l=m(),d=kr(),u=Tn(),h=Ir(),p=Br(),g=Rn(),b=r(Sn()),y=Sn(),v=Fn();e.ConnectionManager=class{constructor(){this.events=new l.EventEmitter,this.connectStorage=new d.Storage(s.OKXCONNECTOR_CACHE_KEY_DAPP),this.crypto=new h.SessionCrypto;let e=(0,v.isInTMA)();if((0,y.logDebug)("do init:",e),e){let e=this.getCachedCryptoKeyPair();(0,y.logDebug)("use same pk:",e),this.crypto=new h.SessionCrypto(e)}this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new i.OKXWalletConnector(c.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.connectedWalletPK="",this.currentTopic="",b.logDebug(`this.connectedWalletPK  constructor   ${this.connectedWalletPK}`)}refreshPackageId(){this.packageId=Date.now()}saveCryptoKeyPair(e){let t=(0,g.safeJsonStringify)(e);this.connectStorage.encryptStoreMsg(t,s.OKXCONNECTOR_CRYPTO_KEY)}getCachedCryptoKeyPair(){let e=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_CRYPTO_KEY);return"string"==typeof e?(b.logDebug("get cached crypto key:"),b.logDebug(e),(0,g.safeJsonParse)(e)):(this.connectStorage.clearCache(),null)}saveJWTKeyPair(e){var t={publicKey:(0,u.toHexString)(e.publicKey),secretKey:(0,u.toHexString)(e.secretKey)};b.logDebug("save jwt kp");let n=(0,g.safeJsonStringify)(t);b.logDebug(n),this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_JWT_KEY)}getCachedJWTKeyPair(){let e=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_JWT_KEY);if("string"==typeof e){b.logDebug("get cached jwt kp:"),b.logDebug(e);let t=(0,g.safeJsonParse)(e);return b.logDebug("save jwt kp"),b.logDebug(t),{publicKey:(0,u.hexToByteArray)(t.publicKey),secretKey:(0,u.hexToByteArray)(t.secretKey)}}return(0,p.generateKeyPair)()}isWalletPKReady(){return b.logDebug(`isWalletPKReady  ===> ${this.connectedWalletPK}`),this.connectedWalletPK.length>0}makeJWT(e){return o(this,void 0,void 0,(function*(){return yield(0,p.signJWT)(e,f.OKXCONNECTOR_JWT_SIDE,f.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)}))}parsePackage(e){return o(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){var r,o,i,a,f;if(t.events.emit(e.id,e),!n){yield t.sendACK(e.id,!0);let n=null===(r=t.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE))||void 0===r?void 0:r.content;if(n){let r=e;null!==(i=null===(o=r.params)||void 0===o?void 0:o.data)&&void 0!==i&&i.messageId&&(t.refreshPackageId(),yield t.sendReceive(t.packageId.toString(),null===(f=null===(a=r.params)||void 0===a?void 0:a.data)||void 0===f?void 0:f.messageId,n))}}}()}))}restoreConnect(e){return o(this,void 0,void 0,(function*(){if(b.logDebug(`connectionManager  restoreConenct   ${e}`),"string"!=typeof e||0===e.length)throw new Error("CONNECTION: invalid topic");b.logDebug("connectionManager  restoreConenct   disconnect"),yield this.disconnect(!0),this.connectStorage.saveContent(e,s.OKXCONNECTOR_TOKEN_CACHE),b.logDebug("connectionManager  restoreConenct   conect"),yield this.connect(!0)}))}getConnectInfo(){var e=(0,u.generateTopic)();return b.logDebug(`generate topic token: ${e}`),this.currentTopic=e,{channelId:e,clientId:this.crypto.stringifyKeypair().publicKey}}connect(){return o(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){e.timeLog=(new Date).getTime(),(0,y.logDebug)("ConnectTime---enter->",e.timeLog);let n=e.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE);var r=e.currentTopic;if(b.logDebug(`generate topic token: ${r}`),t){typeof n<"u"&&null!==n&&(b.logDebug(`read last connect id: ${n}`),r=n.content);var i=e.connectStorage.getItem(s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE);i&&(e.connectedWalletPK=i.content,(0,y.logDebug)(`connectionManager connect() this.connectedWalletPK : ${e.connectedWalletPK}`))}if(t){let t=e.getCachedCryptoKeyPair();t&&(e.crypto=new h.SessionCrypto(t))}b.logDebug(`use crypto client id: ${e.crypto.stringifyKeypair().publicKey}`),e.connectStorage.saveContent(r,s.OKXCONNECTOR_TOKEN_CACHE);var f=yield e.makeJWT(r);return b.logDebug(`generate jwt token: ${f}`),e.connectStorage.saveContent(f,"jwt"),new Promise(((t,n)=>{e.connector.onOpen((()=>o(e,void 0,void 0,(function*(){b.logDebug("1. connector on open");let e=(new Date).getTime();(0,y.logDebug)("ConnectTime---open->",e-this.timeLog),this.events.once(this.packageId.toString(),(e=>o(this,void 0,void 0,(function*(){if(e&&e.error){b.logError("failed when login"),yield this.connector.disconnect();var i=new Error;i.message=e.error.message,i.name=e.error.code.toString(),n(i)}this.refreshPackageId(),this.events.once(this.packageId.toString(),(e=>o(this,void 0,void 0,(function*(){if(e&&e.error){b.logError("failed when subscribe"),yield this.connector.disconnect();var o=new Error;o.message=e.error.message,o.name=e.error.code.toString(),n(o)}this.refreshPackageId(),b.logDebug(`4. subscribe callback then send fetch: ${this.packageId}`);let i=(new Date).getTime();(0,y.logDebug)("ConnectTime--subscribe callback->",i-this.timeLog),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),r),t()})))),b.logDebug(`3. login callback then send subscribe: ${this.packageId}`);let s=(new Date).getTime();(0,y.logDebug)("ConnectTime---login callback->",s-this.timeLog),yield this.connector.send((()=>o(this,void 0,void 0,(function*(){b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e),n(e)}))}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_SUB,params:{topic:r}})})))),b.logDebug("2. login called"),yield this.connector.send((()=>o(this,void 0,void 0,(function*(){b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e),n(e)}))}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_LOGIN,params:{token:f}}),this.connector.addPackageParse((e=>{var t;if(b.logDebug("connect: parse package"),b.logDebug(e),!("params"in e)||!("data"in e.params))return void this.parsePackage(e,!0);let n=null===(t=e.params.data)||void 0===t?void 0:t.message;if(typeof n<"u"){n=n.replace(/'/g,'"');let e=(0,g.safeJsonParse)(n);"string"!=typeof e&&"clientId"in e&&e.clientId&&e.clientId.length>0&&(this.connectedWalletPK=e.clientId,b.logDebug(`this.connectedWalletPK  addPackageParse   ${this.connectedWalletPK}`),this.connectStorage.saveContent(this.connectedWalletPK,s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),this.saveCryptoKeyPair(this.crypto.stringifyKeypair()))}this.parsePackage(e,e.method===a.CONNECT_METHOD_RECEIVE)}))})))),e.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e),n(e)}))}))}()}))}disconnect(){return o(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){yield e.connector.disconnect(),e.connectStorage.clearCache(s.OKXCONNECTOR_TOKEN_CACHE),t||(e.connectStorage.clearCache(s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),e.connectedWalletPK="",(0,y.logDebug)(`connectionManager disconnect() this.connectedWalletPK : ${e.connectedWalletPK}`))}()}))}addListener(e,t,n){this.connector.addListener((0,g.safeJsonStringify)(e),(e=>{if(e=e.replace(/'/g,'"'),b.logDebug(`addListener ===> ${e}`),typeof e<"u"){var t=(0,g.safeJsonParse)(e),n=t.message;t.clientId&&t.clientId.length>0&&(this.connectedWalletPK=t.clientId,this.connectStorage.saveContent(this.connectedWalletPK,s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),b.logDebug(`this.connectedWalletPK  addListener   ${this.connectedWalletPK}`),b.logDebug(`this.cryptoKey  addListener   ${(0,u.toHexString)(this.crypto.keyPair.publicKey)}`),this.saveCryptoKeyPair(this.crypto.stringifyKeypair()));var r=this.crypto.decrypt(n,this.connectedWalletPK);return b.logDebug(`addListener ===> ${r}`),r}}),t,n)}sendRaw(e){return o(this,void 0,void 0,(function*(){b.logDebug(`message send =====> ${e}`);let t=e;b.logDebug(`message send =====encrypt message.length>>>> ${t.length}`);let n=this.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE);b.logDebug(`message send =====topic>>>> ${n?.content}`),this.refreshPackageId();let r={id:this.packageId.toString(),method:a.CONNECT_METHOD_PUBLISH,jsonrpc:c.CONNECT_JSONRPC_VER,params:{message:{topic:n?.content,message:t,ttl:c.OKXCONNECTOR_MESSAGE_TTL}}};return this.events.once(this.packageId.toString(),(e=>o(this,void 0,void 0,(function*(){e&&e.error?b.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&b.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>o(this,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r),this.packageId}))}send(e){return o(this,void 0,void 0,(function*(){if(b.logDebug(`message send =====> ${e}`),!this.isWalletPKReady())throw new Error("connection not finish");let t=this.crypto.encrypt(e,this.connectedWalletPK);b.logDebug(`message send =====encrypt message.length>>>> ${t.length}`);let n=this.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE);b.logDebug(`message send =====topic>>>> ${n?.content}`),this.refreshPackageId();let r={id:this.packageId.toString(),method:a.CONNECT_METHOD_PUBLISH,jsonrpc:c.CONNECT_JSONRPC_VER,params:{message:{topic:n?.content,message:t,ttl:c.OKXCONNECTOR_MESSAGE_TTL}}};return this.events.once(this.packageId.toString(),(e=>o(this,void 0,void 0,(function*(){e&&e.error?b.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&b.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>o(this,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r),this.packageId}))}sendACK(e,t){return o(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function*(){if(!0===t){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,result:!0};yield n.connector.send((()=>o(n,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}else if(r){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,error:{code:r.code,message:r.message}};yield n.connector.send((()=>o(n,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}}()}))}sendReceive(e,t,n){return o(this,void 0,void 0,(function*(){let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send((()=>o(this,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}sendConnectSessionInfo(e,t,n,r){return o(this,void 0,void 0,(function*(){}))}sendFetchAndConsumeMessages(e,t){return o(this,void 0,void 0,(function*(){this.events.once(e,(e=>o(this,void 0,void 0,(function*(){var n,r;if(e.result){var o=e.result.hasMore,i=e.result.data;if(i)for(let e=0;e<i.length;e++){let n=i[e];if(n&&n.topic==t){let e=n.messageId;yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}o&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else b.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})))),b.logDebug("5. send fetch more");let n=(new Date).getTime();(0,y.logDebug)("ConnectTime---5->",n-this.timeLog);let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send((()=>o(this,void 0,void 0,(function*(){return b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}cleanCache(){return o(this,void 0,void 0,(function*(){this.connectStorage.clearCache()}))}saveSessionContent(e,t){t||this.connectStorage.clearCache(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,g.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t)return(0,g.safeJsonParse)(t)}getCurrentConnectionReady(){return this.isWalletPKReady()}}})),$r=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnectionManagerEvent=e.WalletConnectionManagerTopicInfoCacheKey=void 0,e.WalletConnectionManagerTopicInfoCacheKey="wcmtic",e.WalletConnectionManagerEvent={RECEIVE_REQUEST:"payload"}})),Hr=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&t(r,e,o);return n(r,e),r},o=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnectionManager=void 0;var i=Dr(),a=Pr(),s=k(),f=Ar(),c=T(),l=$r(),d=m(),u=kr(),h=Tn(),p=Ir(),g=Br(),b=Rn(),y=r(Sn()),v=Sn(),C=Jn();e.WalletConnectionManager=class{constructor(){this.events=new d.EventEmitter,this.communicateEvents=new d.EventEmitter,y.logDebug("connect manager construct"),this.connectStorage=new u.Storage(s.OKXCONNECTOR_CACHE_KEY),this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new i.OKXWalletConnector(c.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.sessionCryptoInfoMap=new Map,this.inLogin=!1,this.isLogined=!1}refreshPackageId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.packageId=Date.now()+e}saveCryptoKeyPair(e,t){let n=(0,b.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_CRYPTO_KEY+e)}getCachedCryptoKeyPair(e){let t=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_CRYPTO_KEY+e);return"string"==typeof t?(y.logDebug("get cached crypto key:"),y.logDebug(t),(0,b.safeJsonParse)(t)):(this.connectStorage.clearCache(),null)}saveJWTKeyPair(e){var t={publicKey:(0,h.toHexString)(e.publicKey),secretKey:(0,h.toHexString)(e.secretKey)};y.logDebug("save jwt kp");let n=(0,b.safeJsonStringify)(t);y.logDebug(n),this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_JWT_KEY),y.logDebug("after save jwt kp")}getCachedJWTKeyPair(){let e=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_JWT_KEY);if("string"==typeof e){y.logDebug("get cached jwt kp:"),y.logDebug(e);let t=(0,b.safeJsonParse)(e);return y.logDebug("save jwt kp"),y.logDebug(t),{publicKey:(0,h.hexToByteArray)(t.publicKey),secretKey:(0,h.hexToByteArray)(t.secretKey)}}return(0,g.generateKeyPair)()}isTopicPublicKeyExist(e){return y.logDebug(`isTopicPublicKeyExist  ===> ${e}`),this.sessionCryptoInfoMap.get(e)}makeJWT(e){return o(this,void 0,void 0,(function*(){return yield(0,g.signJWT)(e,f.OKXCONNECTOR_JWT_WALLET_SIDE,f.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)}))}parseInternalMsg(e){try{let t=(0,b.safeJsonParse)(e)["ivur-igbfft-ptjip"];if(t&&t.length>0)return(0,C.base64decode)(t,!0).toString()}catch(Ui){y.logError("parse internal msg",Ui)}}parsePackage(e,t){return o(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function*(){var o,i,a,s,f,c,l,d,u,h,p;n.events.emit(t.id,t);let g=n.sessionCryptoInfoMap.get(e);if(y.logDebug("get sessionInfo for decrypt topic:",e),y.logDebug("get sessionInfo for decrypt:",t.id,e,g,n.sessionCryptoInfoMap),g&&t.params.data&&null!==(o=t.params.data)&&void 0!==o&&o.message)if(null!==(i=t.params.data)&&void 0!==i&&i.isInternalData){let e=null===(a=t.params.data)||void 0===a?void 0:a.message,r=null===(s=t.params.data)||void 0===s?void 0:s.topic,o=n.parseInternalMsg(e);(0,v.logDebug)("parse internal origin: ",o),o&&o.length>0&&n.communicateEvents.emit("origin",o,r)}else try{let r=null===(f=t.params.data)||void 0===f?void 0:f.message;if(r.trimStart().startsWith("{")){let t=(0,b.safeJsonParse)(r);t.method&&((0,v.logDebug)("<<< parse raw msg:",e,t),n.communicateEvents.emit(e,r))}else{let r=g.crypto.decryptWallet(null===(c=t.params.data)||void 0===c?void 0:c.message,g.dappPublicKey);(0,v.logDebug)("<<< receive msg:",e,r),n.communicateEvents.emit(e,r)}}catch{let r=g.crypto.decryptWallet(null===(l=t.params.data)||void 0===l?void 0:l.message,g.dappPublicKey);(0,v.logDebug)("<<< receive msg:",e,r),n.communicateEvents.emit(e,r)}if(!r&&(yield n.sendACK(t.id,!0),e)){let r=t;null!==(u=null===(d=r.params)||void 0===d?void 0:d.data)&&void 0!==u&&u.messageId&&(n.refreshPackageId(),yield n.sendReceive(n.packageId.toString(),null===(p=null===(h=r.params)||void 0===h?void 0:h.data)||void 0===p?void 0:p.messageId,e))}}()}))}recovrySessionInfoFromCache(){let e=this.connectStorage.getAndDecrypt(l.WalletConnectionManagerTopicInfoCacheKey);if(y.logDebug("get cached sessionInfos:",e),e){let t=(0,b.safeJsonParse)(e);for(let e in t){let n=t[e];y.logDebug("make topicItem:",n);let r={topic:e,crypto:new p.SessionCrypto({publicKey:n.cryptoKeyPair.publicKey,secretKey:n.cryptoKeyPair.secretKey}),dappPublicKey:n.dappPublicKey};this.sessionCryptoInfoMap.set(e,r)}}y.logDebug("get cached sessionInfos map:",this.sessionCryptoInfoMap)}syncCacheSessionInfo(){let e={};for(let[n,r]of this.sessionCryptoInfoMap)y.logDebug("for each Keys",n),r&&(e[n]={cryptoKeyPair:r.crypto.stringifyKeypair(),dappPublicKey:r.dappPublicKey});let t=(0,b.safeJsonStringify)(e);y.logDebug("sync cache sessionInfos:",t),this.connectStorage.encryptStoreMsg(t,l.WalletConnectionManagerTopicInfoCacheKey)}cacheSessionInfo(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.dappPublicKey,o=[];for(let[i,a]of this.sessionCryptoInfoMap)y.logDebug("for each Keys",i),a.dappPublicKey==r&&(y.logDebug("duplicated dapp public key:",i,r),o.push(i));for(let[i,a]of this.sessionCryptoInfoMap)o.includes(i)&&this.sessionCryptoInfoMap.delete(i);return y.logDebug("cleaned connect session cache:",this.sessionCryptoInfoMap),this.sessionCryptoInfoMap.set(e,t),y.logDebug("cache sessionInfo:",e,t,this.sessionCryptoInfoMap),n&&this.syncCacheSessionInfo(),o}appendTopic(e,t){return o(this,void 0,void 0,(function*(){return(0,v.logDebug)("4.1. get append Topic:",e),new Promise(((n,r)=>o(this,void 0,void 0,(function*(){if(!this.isLogined){var o=new Error;return o.message="connection is not logined",o.name="append error",void r(o)}let i={topic:e,crypto:new p.SessionCrypto,dappPublicKey:t},a=this.cacheSessionInfo(e,i,!1);yield this.subscribeTopics(Array.from([e])),this.refreshPackageId(),y.logDebug(`5. subscribe callback then fetch append message: ${this.packageId}, ${e}`);let s=(new Date).getTime();(0,v.logDebug)("Append --subscribe callback->",s-this.timeLog),n(a)}))))}))}confirmAppendingTopics(){this.syncCacheSessionInfo()}connect(){return o(this,void 0,void 0,(function*(){this.timeLog=(new Date).getTime(),(0,v.logDebug)("[Wallet] ConnectTime---enter->",this.timeLog);let e=Date.now().toString();var t=yield this.makeJWT(e);return y.logDebug(`generate jwt token: ${t}`),this.connectStorage.saveContent(t,"jwt"),this.recovrySessionInfoFromCache(),new Promise(((e,n)=>{this.inLogin=!0,this.connector.onOpen((()=>o(this,void 0,void 0,(function*(){y.logDebug("1. connector on open");let r=(new Date).getTime();(0,v.logDebug)("ConnectTime---open->",r-this.timeLog),this.events.once(this.packageId.toString(),(t=>o(this,void 0,void 0,(function*(){if(t&&t.error){y.logError("failed when login"),yield this.connector.disconnect();var r=new Error;r.message=t.error.message,r.name=t.error.code.toString(),n(r)}else this.isLogined=!0,e(),y.logDebug("3. subscribe cached topics",this.sessionCryptoInfoMap),this.sessionCryptoInfoMap.size>0&&(yield this.subscribeTopics(Array.from(this.sessionCryptoInfoMap.keys())))})))),y.logDebug("2. login called"),yield this.connector.send((()=>o(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_LOGIN,params:{token:t}})})))),this.connector.connect().catch((e=>{(0,v.logDebug)("WalletConnectionManager connect error",e),n(e)})),this.connector.addPackageParse((e=>{var t,n;y.logDebug("connect: parse package"),y.logDebug(e),"params"in e&&"data"in e.params?null!==(t=e.params.data)&&void 0!==t&&t.topic&&this.parsePackage(null===(n=e.params.data)||void 0===n?void 0:n.topic,e,e.method===a.CONNECT_METHOD_RECEIVE):this.parsePackage("",e,!0)}))}))}))}getSessionPublicKey(e){if(this.isTopicPublicKeyExist(e)){let t=this.sessionCryptoInfoMap.get(e);if(t)return(0,h.toHexString)(t.crypto.keyPair.publicKey)}}getCurrentCachedTopicIdList(){return Array.from(this.sessionCryptoInfoMap.keys())}disconnect(){return o(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){yield e.connector.disconnect(),e.connectStorage.clearCache(s.OKXCONNECTOR_TOKEN_CACHE),t||e.connectStorage.clearCache(s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE)}()}))}send(e,t){return o(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function*(){var i,s;if(y.logDebug(`message send =====> ${t}`),!n.isTopicPublicKeyExist(e))throw new Error("connection not finish");let f=null===(i=n.sessionCryptoInfoMap.get(e))||void 0===i?void 0:i.dappPublicKey,l=null===(s=n.sessionCryptoInfoMap.get(e))||void 0===s?void 0:s.crypto;if(l&&f){let i={message:l.encryptWallet(t,f)};r&&(i.clientId=(0,h.toHexString)(l.keyPair.publicKey)),n.refreshPackageId();let s={id:n.packageId.toString(),method:a.CONNECT_METHOD_PUBLISH,jsonrpc:c.CONNECT_JSONRPC_VER,params:{message:{topic:e,message:(0,b.safeJsonStringify)(i),ttl:c.OKXCONNECTOR_MESSAGE_TTL}}};return n.events.once(n.packageId.toString(),(e=>o(n,void 0,void 0,(function*(){e&&e.error?y.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&y.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield n.connector.send((()=>o(n,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),s),n.packageId}}()}))}sendACK(e,t){return o(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function*(){if(!0===t){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,result:!0};yield n.connector.send((()=>o(n,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}else if(r){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,error:{code:r.code,message:r.message}};yield n.connector.send((()=>o(n,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}}()}))}sendReceive(e,t,n){return o(this,void 0,void 0,(function*(){let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send((()=>o(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}sendUnsubscribe(e){return o(this,void 0,void 0,(function*(){yield this.connector.send((()=>o(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_UNSUB,params:{topic:e}}),this.sessionCryptoInfoMap.delete(e),this.syncCacheSessionInfo()}))}sendFetchAndConsumeMessages(e,t){return o(this,void 0,void 0,(function*(){this.events.once(e,(e=>o(this,void 0,void 0,(function*(){var n,r;if(e.result){var o=e.result.hasMore,i=e.result.data;if(i)for(let e=0;e<i.length;e++){let n=i[e];if(n&&n.topic==t){let e=n.messageId;yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}o&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else y.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})))),y.logDebug("5. send fetch more");let n=(new Date).getTime();(0,v.logDebug)("ConnectTime---5->",n-this.timeLog);let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send((()=>o(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}sendBatchFetchAndConsumeMessages(e,t){return o(this,void 0,void 0,(function*(){this.events.once(e,(e=>o(this,void 0,void 0,(function*(){var n,r;if(e.result){var o=e.result.hasMore,i=e.result.data;if(i)for(let e=0;e<i.length;e++){let t=i[e];if(t&&t.topic){let n=t.messageId;yield this.connector.getMsgPayloadFromHistory(t),this.refreshPackageId(e),yield this.sendReceive(this.packageId.toString(),n,t.topic)}}o&&(this.refreshPackageId(),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),t))}else y.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})))),y.logDebug("5. send fetch more");let n=(new Date).getTime();(0,v.logDebug)("ConnectTime---5->",n-this.timeLog);let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_BATCH_FETCHMSG,params:{topics:t,withInternalData:!0}};yield this.connector.send((()=>o(this,void 0,void 0,(function*(){y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}cleanCache(){return o(this,void 0,void 0,(function*(){this.connectStorage.clearCache()}))}saveSessionContent(e,t){t||this.connectStorage.clearCache(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,b.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t)return(0,b.safeJsonParse)(t)}subscribeTopics(e){return o(this,void 0,void 0,(function*(){(0,v.logDebug)("4. topicid list",e),this.refreshPackageId();let t=(new Date).getTime();return(0,v.logDebug)("ConnectTime--subscribe callback->",t-this.timeLog),new Promise(((t,n)=>o(this,void 0,void 0,(function*(){let n=0;for(let r=0;r<e.length;++r){let i=e[r];this.refreshPackageId(r),this.events.once(this.packageId.toString(),(a=>o(this,void 0,void 0,(function*(){if(a&&a.error){y.logError("failed when subscribe"),yield this.connector.disconnect();var o=new Error;o.message=a.error.message,o.name=a.error.code.toString(),n+=1,n==e.length&&t()}this.refreshPackageId(r);let s=(new Date).getTime();(0,v.logDebug)("ConnectTime--subscribe callback->",s-this.timeLog),n+=1,n==e.length&&(y.logDebug(`5. send fetch msg: ${this.packageId}, ${i}`),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),e),t())})))),y.logDebug(`3. login callback then send subscribe: ${this.packageId}, ${i}`);let s=(new Date).getTime();(0,v.logDebug)("ConnectTime---login callback->",s-this.timeLog),yield this.connector.send((()=>o(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_SUB,params:{topic:i}})}}))))}))}}})),qr=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.buildNameSpacesByConnectResponse=function(e){return n(e)},e.buildRequestAccountNameSpacesByConnectResponse=n;var t=Sn();function n(e){let n={};(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse start connectResponse>>",JSON.stringify(e));let r=e.payload.responses.find((e=>"requestAccounts"===e.name)),o=e.payload.responses.find((e=>"ton_addr"===e.name)),i=e.payload.responses.find((e=>"ton_proof"===e.name));if(o&&!r){(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse adapt ton data >>");let e=o.address;e="ton:"+o.network+":"+e;let n={ton_addr:o};i&&(n.ton_proof=i),r={name:"requestAccounts",accounts:[{namespace:"ton",addresses:[e],methods:["ton_sendTransaction"],extra:{},data:n}]}}return(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse end universalResponse>>>",JSON.stringify(r)),r.accounts.forEach((e=>{var r=[],o=[];e.addresses.forEach((e=>{var n=e.split(":");if((0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse addressArr>>",n.length),n.length>=3){let i=n.slice(0,2).join(":");r.push(i),o.push(e),(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse chain:>>",i,"addressItem:",e)}})),e.data&&e.data.ton_addr&&(e.data.ton_addr.name="ton_addr"),e.data&&e.data.ton_proof&&(e.data.ton_proof.name="ton_proof"),n[e.namespace]={chains:r,accounts:o,methods:e.methods,extra:e.extra,payload:e.data},(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse result>>",JSON.stringify(n))})),n}})),Fr=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Engine=void 0;var n=Rn(),r=Sn(),o=Xn(),i=Jn(),a=Jn(),s=qr(),f=Fn();e.Engine=class{constructor(e){this.pendingRequests=new Map,this.disconnectListener=[],this.connectionManager=e,this.connectionManager.addListener("sdk_response",((e,t)=>{var o=(0,n.safeJsonParse)(t);(0,r.logDebug)(`Engine ==>> addListener ==> success ==> ${o}`),this.handleResponse(e,o)}),(function(){}))}addDisconnectListener(e){this.disconnectListener.push(e)}disconnect(){(0,r.logDebug)("Engine ==>> disconnect"),this.pendingRequests.clear()}getRequestId(){let e=Date.now().toString();return(0,r.logDebug)("Engine ==>> getRequestId ==>",e),e}bindRequestForPromise(e,t){this.pendingRequests.set(e,t)}send(e,o,i){return t(this,void 0,void 0,(function*(){(0,r.logDebug)("Engine ==>> send  request==>",JSON.stringify(e));let t=this.getRequestId();try{let i=yield this.connectionManager.send(JSON.stringify(Object.assign(Object.assign({},e),{requestId:t})));this.connectionManager.events.once(i.toString(),(e=>{var t;(0,r.logDebug)(`Engine ==> send => onAck => ${(0,n.safeJsonStringify)(e)}`),e&&e.result&&(null===(t=o.onAck)||void 0===t||t.call(o))})),o.resolve&&this.bindRequestForPromise(t,o.resolve)}catch(i){return Promise.reject(i)}}))}sendSession(e){return t(this,void 0,void 0,(function*(){(0,r.logDebug)("[Connect] sendSession called:",e);let t=this.getRequestId(),n={method:"session_info",params:{sessionInfo:e}};yield this.connectionManager.sendRaw(JSON.stringify(Object.assign(Object.assign({},n),{requestId:t})))}))}handleResponse(e,t){if((0,r.logDebug)(`Engine ==>> handleResponse_1  ======>response: ${(0,n.safeJsonStringify)(t)}`,e),"requestId"in t){(0,r.logDebug)("Engine ==>> handleResponse_2  ===> in response");let e=t.requestId,n=this.pendingRequests.get(e);n?((0,r.logDebug)("Engine ==>> handleResponse_3  ===> find resolve:",n),n(t),this.pendingRequests.delete(e)):((0,r.logDebug)("Engine ==>> handleResponse_3  ===> not find resolve:"),"disconnect"===t.method&&(this.disconnectListener.forEach((e=>e())),this.disconnectListener=[],this.disconnect()))}}restoreconnect(e,n){return t(this,void 0,void 0,(function*(){var t;yield null===(t=this.connectionManager)||void 0===t?void 0:t.restoreConnect(e.topic),n(e)}))}conect(e,n,s){return t(this,void 0,void 0,(function*(){var t,f;let c=this.connectionManager.getConnectInfo(),l=this.getRequestId(),d=null!==(t=n.openUniversalUrl)&&void 0!==t&&t,u={protocolVer:Number(o.tonConnectSdkVersion),topic:c.channelId,clientId:c.clientId,requestId:l,dAppInfo:n.dappInfo,requests:e},h=JSON.stringify(u),p=(new TextEncoder).encode(h),g=btoa(String.fromCharCode(...p)),b=`${o.standardDeeplink}?param=${g}`;(0,r.logDebug)("engine ==>> connect ==>>deeplinkUrl:",b);let y=(0,a.isIos)();(0,r.logDebug)(`engine ==>> connect ==>>isIOS: ${y}   openUniversalLink: ${d}`),y&&d&&((0,r.logDebug)("bridge-provider ==>> connect_3"),(0,i.openOKXDeeplinkWithFallback)(b)),yield null===(f=this.connectionManager)||void 0===f?void 0:f.disconnect(!1),this.bindRequestForPromise(l,(e=>{let t=this.onConnect(e,n,c.channelId);s(t,e)}));try{yield this.connectionManager.connect()}catch(v){throw(0,r.logDebug)("Engine conect error",v),v}return!y&&d&&((0,r.logDebug)("bridge-provider ==>> connect_4"),(0,i.openOKXDeeplinkWithFallback)(b)),{connectInfo:c,deeplinkUrl:(0,i.getUniversalLink)(b)}}))}onConnect(e,t,n){if("connect"==e.method){let r=(0,s.buildNameSpacesByConnectResponse)(e);if(r)return{topic:n,sessionConfig:t,namespaces:r}}return null}universalConnect(e,n,c){return t(this,void 0,void 0,(function*(){return new Promise(((l,d)=>t(this,void 0,void 0,(function*(){var t,u,h,p;try{(0,r.logDebug)("engine universalConnect request :",JSON.stringify(e)),(0,r.logDebug)("engine universalConnect sessionConfig :",JSON.stringify(n));let y=[],v=[];e.forEach((e=>{let t=e.name;t.startsWith("requestAccounts")?v.push(e):t.startsWith("ton")&&y.push(e)})),(0,r.logDebug)("engine universalConnect tonRequest :",JSON.stringify(y)),(0,r.logDebug)("engine universalConnect universalRequest :",JSON.stringify(v));let m=this.connectionManager.getConnectInfo(),C=this.getRequestId(),O=null!==(t=n.openUniversalUrl)&&void 0!==t&&t,w={protocolVer:Number(o.tonConnectSdkVersion),topic:m.channelId,clientId:m.clientId,requestId:C,dAppInfo:n.dappInfo,requests:v},E=(0,f.encodeConnectParams)(w);w.redirect=null!==(u=n?.redirect)&&void 0!==u?u:"none";let _={protocolVer:Number(o.tonConnectSdkVersion),topic:m.channelId,clientId:m.clientId,requestId:C,dAppInfo:n.dappInfo,requests:y,redirect:null!==(h=n?.redirect)&&void 0!==h?h:"none"},x=!1;y.length>0&&(x=!0);let S=x?_:w;(0,r.logDebug)("engine universalConnect ==>>defaultConnectRequest:",x,JSON.stringify(S));var g="";if(O){let e=(0,f.encodeConnectParams)(S);g=`${o.standardDeeplink}?param=${e}`}(0,r.logDebug)("engine universalConnect ==>>deeplinkUrl:",g);let R=(0,a.isIos)();R&&O&&((0,r.logDebug)(`engine universalConnect ==>>isIOS: ${R}   openUniversalLink: ${O}`),(0,i.openOKXDeeplinkWithFallback)(g)),yield null===(p=this.connectionManager)||void 0===p?void 0:p.disconnect(!1),this.bindRequestForPromise(C,(e=>{var t,i;try{let a=e;if("connect"==a.method){(0,r.logDebug)("engin  universalConnect success connectResponse:>>>",JSON.stringify(a));let e=(0,s.buildNameSpacesByConnectResponse)(a);if(!e)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR);{let o={topic:m.channelId,sessionConfig:n,namespaces:e,wallet:Object.assign({},null===(t=a.payload)||void 0===t?void 0:t.wallet)};(0,r.logDebug)("engin  universalConnect success session:>>>",JSON.stringify(o)),l(o)}}else if("connect_error"==a.method&&null!==(i=a.payload)&&void 0!==i&&i.code)throw new o.OKXConnectError(a.payload.code)}catch(a){d(a)}}));try{yield this.connectionManager.connect()}catch(b){throw(0,r.logDebug)("Engine universalConnect error",b),b}if(!R&&O&&(0,i.openOKXDeeplinkWithFallback)(g),(0,r.logDebug)("engin  universalConnect ==>> connectInfoAndUrl:",c),this.sendSession(E),c){let e={connectRequest:w,redirect:n.redirect,tmaReturnUrl:n.tmaReturnUrl};x&&(e.tonConnectRequest=_),(0,r.logDebug)("universalConnect connectInfoAndUrl info :",JSON.stringify(e)),c(e)}}catch(y){(0,r.logDebug)("Engine universalConnect catch error",y),d(y)}}))))}))}}})),Jr=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=e.Engine=e.WalletConnectionManager=e.ConnectionManager=e.OKXWalletConnector=void 0;var t=Dr();Object.defineProperty(e,"OKXWalletConnector",{enumerable:!0,get:function(){return t.OKXWalletConnector}});var n=Xr();Object.defineProperty(e,"ConnectionManager",{enumerable:!0,get:function(){return n.ConnectionManager}});var r=Hr();Object.defineProperty(e,"WalletConnectionManager",{enumerable:!0,get:function(){return r.WalletConnectionManager}});var o=Fr();Object.defineProperty(e,"Engine",{enumerable:!0,get:function(){return o.Engine}});var i=kr();Object.defineProperty(e,"Storage",{enumerable:!0,get:function(){return i.Storage}})})),Vr=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Jr(),e),n(Xn(),e),n(Jn(),e)})),Gr=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.JsonRpcProvider=void 0;var n=m(),r=w(),o=Vr(),i=Vr(),a=class extends r.IJSONRpcProvider{constructor(e){super(e),this.events=new n.EventEmitter,this.connected=!1,this.connecting=!1,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}connect(){return t(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.connection;return function*(){yield e.open(t)}()}))}disconnect(){return t(this,void 0,void 0,(function*(){yield this.close()}))}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}request(e,n){return t(this,void 0,void 0,(function*(){return this.requestStrict((0,o.formatJsonRpcRequest)(e.method,e.params||[],(0,o.getBigIntRpcId)().toString()),n)}))}requestStrict(e,n){return t(this,void 0,void 0,(function*(){return new Promise(((r,a)=>t(this,void 0,void 0,(function*(){if(!this.connection.connected)try{yield this.open()}catch(t){a(t)}this.events.on(`${e.id}`,(e=>{(0,o.isJsonRpcError)(e)?a(e.error):r(e.result)}));try{(0,i.logDebug)("[RPC] >>> send request",e,n),yield this.connection.send(e,n)}catch(t){a(t)}}))))}))}setConnection(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.connection}onPayload(e){this.events.emit("payload",e),(0,o.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}open(){return t(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.connection;return function*(){e.connection===t&&e.connection.connected||(e.connection.connected&&e.close(),"string"==typeof t&&(yield e.connection.open(t),t=e.connection),e.connection=e.setConnection(t),yield e.connection.open(),e.registerEventListeners(),e.events.emit("connect"))}()}))}close(){return t(this,void 0,void 0,(function*(){yield this.connection.close()}))}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(e=>this.onPayload(e))),this.connection.on("close",(e=>this.onClose(e))),this.connection.on("error",(e=>this.events.emit("error",e))),this.connection.on("register_error",(e=>this.onClose())),this.hasRegisteredEventListeners=!0)}};e.JsonRpcProvider=a})),zr=p(((e,t)=>{var n,r=typeof self<"u"?self:e,o=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();n=o,function(e){var t="URLSearchParams"in n,r="Symbol"in n&&"iterator"in Symbol,o="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch{return!1}}(),i="FormData"in n,a="ArrayBuffer"in n;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=p(t);return t.readAsArrayBuffer(e),n}function b(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&o&&function(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=b(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||f(e))?this._bodyArrayBuffer=b(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=p(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(C)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=c(e),t=l(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},u.prototype.delete=function(e){delete this.map[c(e)]},u.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},u.prototype.set=function(e,t){this.map[c(e)]=l(t)},u.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},u.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),d(e)},u.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},u.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),d(e)},r&&(u.prototype[Symbol.iterator]=u.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(e,t){var n=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,!n&&null!=e._bodyInit&&(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new u(t.headers)),this.method=function(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function C(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function O(e){var t=new u;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t}function w(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},y.call(m.prototype),y.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];w.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},e.DOMException=n.DOMException;try{new e.DOMException}catch{e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function _(t,n){return new Promise((function(r,i){var a=new m(t,n);if(a.signal&&a.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function f(){s.abort()}s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:O(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;r(new w(t,e))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&o&&(s.responseType="blob"),a.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),a.signal&&(a.signal.addEventListener("abort",f),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",f)}),s.send(typeof a._bodyInit>"u"?null:a._bodyInit)}))}_.polyfill=!0,n.fetch||(n.fetch=_,n.Headers=u,n.Request=m,n.Response=w),e.Headers=u,e.Request=m,e.Response=w,e.fetch=_,Object.defineProperty(e,"__esModule",{value:!0})}({}),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var i=o;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})),Yr=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},n=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.JsonRpcConnection=void 0;var r=m(),o=n(zr()),i=Vr(),a=Vr(),s={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};e.JsonRpcConnection=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.url=e,this.disableProviderPing=t,this.events=new r.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,a.isHttpUrl)(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(){return t(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;return function*(){yield e.register(t)}()}))}close(){return t(this,void 0,void 0,(function*(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}))}send(e){return t(this,void 0,void 0,(function*(){this.isAvailable||(yield this.register());try{let t=(0,i.safeJsonStringify)(e),n=yield(yield(0,o.default)(this.url,Object.assign(Object.assign({},s),{body:t}))).json();this.onPayload({data:n})}catch(Ui){this.onError(e.id,Ui)}}))}register(){return t(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;return function*(){if(!(0,a.isHttpUrl)(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(e.registering)return new Promise(((t,n)=>{e.events.once("register_error",(e=>{n(e)})),e.events.once("open",(()=>{if(typeof e.isAvailable>"u")return n(new Error("HTTP connection is missing or invalid"));t()}))}));e.url=t,e.registering=!0;try{if(!e.disableProviderPing){let e=(0,i.safeJsonStringify)({id:1,jsonrpc:"2.0",method:"test",params:[]});yield(0,o.default)(t,Object.assign(Object.assign({},s),{body:e}))}e.onOpen()}catch(Ui){let n=e.parseError(Ui);throw e.events.emit("register_error",n),e.onClose(),n}}()}))}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?(0,i.safeJsonParse)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let n=this.parseError(t),r=n.message||n.toString(),o=(0,a.formatJsonRpcError)(e,r);this.events.emit("payload",o)}parseError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.url;return(0,a.parseConnectionError)(e,t,"HTTP")}}})),Zr=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Eip155Provider=void 0;var n=x(),r=N(),o=Vr(),i=Gr(),a=Yr(),s=class{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=(0,n.getGlobal)("events"),this.client=(0,n.getGlobal)("client"),this.chainId=parseInt(this.getDefaultChain()),this.httpProviders=this.createHttpProviders(),(0,o.logDebug)("eip155 constructor --opts.namespace--\x3e",e.namespace)}isRecord(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}isArray(e){return"object"==typeof e&&null!==e&&Array.isArray(e)}updateRequestParams(e){let t=e.params&&"object"==typeof e.params&&!Array.isArray(e.params);if("wallet_switchEthereumChain"===e.method){let n=e.chainId.split(":")[1],r=parseInt(n,10);if(isNaN(r))throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid decimal number,  chainId: '${n}' `);if(e.params){if(!t)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params error ,  method: '${e.method}' `);{let t=e.params;"chainId"in t||(t.chainId="0x"+r.toString(16),e.params=t)}}else e.params={chainId:"0x"+r.toString(16)}}else if("personal_sign"===e.method||"eth_signTypedData_v4"===e.method||"eth_sendTransaction"===e.method||"wallet_watchAsset"===e.method){if(!e.params)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params is nil, method: '${e.method}'`);if(!this.isRecord(e.params))throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid request params type, method: '${e.method}'`);{let t=e.params;if((0,o.logDebug)("eip155 updateRequestParams params>",JSON.stringify(t)),"chainId"in t){let n,r=e.chainId.split(":")[1],i=parseInt(r,10),a=String(t.chainId);if(a.startsWith(this.name)&&e.chainId===a)n=i;else if(a.startsWith("0x"))n=parseInt(a,16);else{if(isNaN(Number(a)))throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid params.chainId format, method: '${e.method}'`);n=parseInt(a,10)}if(i!==n)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params.chainId not equal chain,  method: '${e.method}' `)}}}}adaptArray(e){if("wallet_switchEthereumChain"===e.method||"wallet_addEthereumChain"===e.method||"wallet_watchAsset"===e.method||"eth_sendTransaction"===e.method){if(this.isArray(e.params)){let t=e.params;if(t){if(1!==t.length)throw t.length>1?new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params only Support one data,  method: '${e.method}' `):new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);{let t=e.params[0];this.isRecord(t)&&(e.params=t)}}}}else if("eth_signTypedData_v4"===e.method){if(this.isArray(e.params)){let t=e.params;if(t&&t.length>2)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params only Support one data,  method: '${e.method}' `);if(t&&0===t.length)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);let n={};if(t&&2===t.length){let t=e.params[0];if(!t||"string"!=typeof t)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error , not string,  method: '${e.method}' `);{let r=!1;if(this.namespace.accounts.forEach((e=>{e.split(":")[2]===t&&(r=!0)})),(0,o.logDebug)("eip155 adaptArray eth_signTypedData_v4 >>>isEqual: ",r),!r)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error, not equal,  method: '${e.method}' `);if(!this.isRecord(e.params[1]))throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params message data error,  method: '${e.method}' `);n=e.params[1]}}else if(t&&1===t.length){if(!this.isRecord(e.params[0]))throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params message data error,  method: '${e.method}' `);n=e.params[0]}try{let t=JSON.stringify(n);e.params={typedDataJson:t}}catch{throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params call JSON.stringify() failed,  method: '${e.method}' `)}}}else if("personal_sign"===e.method&&this.isArray(e.params)){if(e.params&&e.params.length>2)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params error,  method: '${e.method}' `);if(e.params&&0===e.params.length)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);let t=e.params[0],n=e.params[1];if(n&&"string"==typeof n){let t=!1;if(this.namespace.accounts.forEach((e=>{e.split(":")[2]===n&&(t=!0)})),(0,o.logDebug)("eip155 adaptArray personal_sign >>>isEqual: ",t),!t)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error,  method: '${e.method}' `)}if(!t||"string"!=typeof t)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is error,  method: '${e.method}' `);e.params={message:t}}}showRequestModal(e){switch(e.method){case"eth_requestAccounts":case"eth_accounts":case"eth_chainId":default:return!1;case"eth_sendTransaction":case"eth_signTransaction":case"eth_sign":case"personal_sign":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"eth_signTypedData_v4":return!0;case"wallet_switchEthereumChain":{this.adaptArray(e),this.updateRequestParams(e);let{parsedChainId:t,hexChainId:n}=this.getHexChainIdFromRequest(e);return!this.isChainApproved(t)}}return!1}request(e){return t(this,void 0,void 0,(function*(){switch(this.adaptArray(e),(0,o.logDebug)("eip155 request --args--string>",JSON.stringify(e)),this.updateRequestParams(e),(0,o.logDebug)("eip155 request --params--string>",JSON.stringify(e)),e.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_switchEthereumChain":return yield this.handleSwitchChain(e);case"wallet_addEthereumChain":return this.addEthereumChain(e)}if(!this.namespace.methods.includes(e.method))return(0,o.logDebug)("[RPC] request begin"),yield this.getHttpProvider().request(e);try{let t=yield this.client.request(e);if((0,o.logDebug)("eip155 request --response----string>",JSON.stringify(t)),this.isRecord(t)&&"result"in t){let e=t.result;return!e||"string"!=typeof e||"true"!==e&&"false"!==e?t.result:((0,o.logDebug)("eip155 request --wallet_watchAsset>>>>","true"===e),"true"===e)}return t}catch(Ui){throw(0,o.logDebug)(`eip155 request --response --error--string> e instanceof OKXConnectError ${Ui instanceof o.OKXConnectError}`,JSON.stringify(Ui)),Ui}}))}addEthereumChain(e){return t(this,void 0,void 0,(function*(){let t=yield this.client.request(e);try{if("result"in t){let n=t.result;if(n){let t=n.split(":")[0],o=n.split(":")[1],i=t+":"+o;this.namespace;if(this.namespace.accounts.push(n),this.namespace.chains.push(i),this.isRecord(e.params)&&"rpcUrls"in e.params){let t=e.params.rpcUrls,n=t?t[0]:void 0;n&&(this.namespace.rpcMap?this.namespace.rpcMap[o]=n:this.namespace.rpcMap={[o]:n},this.setHttpProvider(o,n))}this.events.emit(r.PROVIDER_EVENTS.UPDATE_NAMESPACES,{eip155:this.namespace})}}else new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request error`)}catch{throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request  error`)}return null}))}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){if(this.chainId=parseInt(e),!this.httpProviders[e]){let r=t||(0,n.getRpcUrl)(`${this.name}:${e}`,this.namespace);r?this.setHttpProvider(e,r):(0,o.logError)(`No RPC url provided for chainId: ${e}`)}this.events.emit(r.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return(0,o.logDebug)("eip155 getAccounts ",e,this.chainId),e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}getHexChainIdFromRequest(e){let t=e.params,n="0x0";t&&"chainId"in t&&(n=t.chainId),n=n.startsWith("0x")?n:`0x${n}`,(0,o.logDebug)("handleSwitchChain --\x3eargs ",e),(0,o.logDebug)("handleSwitchChain --\x3ehexChainId ",n);let r=parseInt(n,16);return(0,o.logDebug)("handleSwitchChain --\x3eparsedChainId ",r),{parsedChainId:r,hexChainId:n}}handleSwitchChain(e){return t(this,void 0,void 0,(function*(){let{parsedChainId:t,hexChainId:n}=this.getHexChainIdFromRequest(e);if(this.isChainApproved(t))this.setDefaultChain(`${t}`);else{let i=yield this.client.request({method:"wallet_switchEthereumChain",chainId:e.chainId,params:{chainId:n}});try{if("result"in i){let e=i.result;if(e){let n=e.split(":")[0]+":"+e.split(":")[1];this.namespace;this.namespace.accounts.push(e),this.namespace.chains.push(n),(0,o.logDebug)("handleSwitchChain --\x3ewallet_switchEthereumChain ",i),this.setDefaultChain(`${t}`),this.events.emit(r.PROVIDER_EVENTS.UPDATE_NAMESPACES,{eip155:this.namespace})}}else new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request error`)}catch{throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request  error`)}}return null}))}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}createHttpProvider(e,t){let r=t;if(r)return new i.JsonRpcProvider(new a.JsonRpcConnection(r,(0,n.getGlobal)("disableProviderPing")));(0,o.logError)(`No RPC url provided for chainId: ${e}`)}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let r=(0,n.getChainId)(t),i=(0,n.getRpcUrl)(t,this.namespace);(0,o.logDebug)("get parsed chain and rpc:",r,i);let a=this.createHttpProvider(r,i);a&&(e[r]=a)})),(0,o.logDebug)("get http providermap:",e),e}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if((0,o.logDebug)("[RPC] get http provider:",e,t),typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}};e.Eip155Provider=s,e.default=s})),Qr=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SuiProvider=void 0;var n=N(),r=Vr(),o=x(),i=Yr(),a=Gr(),s=class{constructor(e){this.name=r.NameSpaceKeySui,this.namespace=e.namespace,this.events=(0,o.getGlobal)("events"),this.client=(0,o.getGlobal)("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}request(e){return t(this,void 0,void 0,(function*(){return(0,r.logDebug)("sui request --args--string>",JSON.stringify(e)),(0,r.logDebug)("sui provider namespace: ",this.namespace),this.namespace.methods.includes(e.method)?this.client.request(e):this.getHttpProvider().request(e)}))}requestAccounts(){return this.getAccounts()}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,o.getChainId)(t),r=(0,o.getRpcUrl)(t,this.namespace),i=this.createHttpProvider(n,r);i&&(e[n]=i)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if((0,r.logDebug)("[RPC] get http provider:",e,t),typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&((0,r.logDebug)("setHttpProvider",e,t),this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new a.JsonRpcProvider(new i.JsonRpcConnection(n,(0,o.getGlobal)("disableProviderPing")));(0,r.logError)(`No RPC url provided for chainId: ${e}`)}getPubkey(e){return this.getWalletAddress(e)}getWalletAddress(e){return e||(e=this.namespace.defaultChain,e?.startsWith("sui")||(e=`sui:${e}`)),this.namespace.accounts.filter((function(t){return t.split(":").length>2&&t.startsWith(e)})).map((function(e){return e.split(":")[2]}))[0]}showRequestModal(e){switch(e.method){case"sui_signMessage":case"sui_signPersonalMessage":case"sui_signTransactionBlock":case"sui_signAndExecuteTransactionBlock":return!0;default:return!1}return!1}};e.SuiProvider=s,e.default=s})),eo=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getAccountsChains=function(e){let t=[];return e.forEach((e=>{let[n,r]=e.split(":");t.push(`${n}:${r}`)})),t},e.nameSpaceToConnectWalletNameSpace=function(e){var n=[];return e&&Object.keys(e).forEach((r=>{(r===t.NameSpaceKeyEip155||r===t.NameSpaceKeySOL||r===t.NameSpaceKeySui||r===t.NameSpaceKeyAptos||r==t.NameSpaceKeyBtc||r===t.NameSpaceKeyTON)&&e[r].chains&&n.push({namespace:r,chains:e[r].chains,params:e[r].params})})),n},e.fillParamsToSession=function(e,t,n,r){let o=(e,t)=>{Object.assign(e,t)},i=(e,t)=>{for(let n in t)t.hasOwnProperty(n)&&t[n].rpcMap&&(t[n].rpcMap&&(e[n].rpcMap||(e[n].rpcMap={}),o(e[n].rpcMap,t[n].rpcMap)),t[n].defaultChain&&void 0===e[n].defaultChain&&e[n].chains.some((e=>e.split(":")[1]===t[n].defaultChain))&&(e[n].defaultChain=t[n].defaultChain))};t&&i(e.namespaces,t),n&&i(e.namespaces,n),e.sessionConfig=r},e.isCaipNamespace=n,e.parseNamespaceKey=function(e){return n(e)?e.split(":")[0]:e};var t=Vr();function n(e){return e.includes(":")}})),to=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SignClient=void 0;var n=Vr(),r=eo(),i=x(),a=class extends n.ISignClient{constructor(e){super(e),this.engine=new n.Engine(new n.ConnectionManager),this.connect=e=>t(this,void 0,void 0,(function*(){return new Promise(((t,o)=>{var i=[];(0,n.logDebug)("client connect params >>>",JSON.stringify(e));var a={name:"requestAccounts",requiredNamespaces:(0,r.nameSpaceToConnectWalletNameSpace)(e.namespaces),optionalNamespaces:(0,r.nameSpaceToConnectWalletNameSpace)(e.optionalNamespaces)};(0,n.logDebug)("client connect connectRequest >>>",JSON.stringify(i)),i.push(a),this.engine.universalConnect(i,Object.assign({dappInfo:this.metadata},e.sessionConfig),(e=>{if(e&&e.connectRequest){var t=(0,n.encodeConnectParams)(e.connectRequest);this.events.emit("display_uri",(0,n.getUniversalLink)((0,n.getAppWalletDeepLink)(t))),(0,n.logDebug)(`universalConect EngineConnectInfo  ${JSON.stringify(e)}`),this.events.emit("okx_engine_connect_params",e)}})).then((o=>{(0,r.fillParamsToSession)(o,e.namespaces,e.optionalNamespaces,this.sessionConfig),(0,n.logDebug)(`signClient: connect: session ${JSON.stringify(o)}`),t(o)})).catch((e=>{(0,n.logDebug)(`signClient: connect: catch ${JSON.stringify(e)}`),this.events.emit("connect_error",e),o(e)}))}))})),this.restoreconnect=e=>t(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{this.engine.restoreconnect(e,(e=>{t(e)}))}))})),this.reject=e=>t(this,void 0,void 0,(function*(){})),this.request=e=>t(this,void 0,void 0,(function*(){return new Promise(((r,o)=>t(this,void 0,void 0,(function*(){var t,i;(0,n.logDebug)("clint request --params>>>> >",null===(t=this.sessionConfig)||void 0===t?void 0:t.openUniversalUrl,JSON.stringify(e));try{!(null===(i=this.sessionConfig)||void 0===i)&&i.openUniversalUrl&&(0,n.isIos)()&&this.openOKXWallet(),yield this.engine.send(e,{resolve:e=>{if(delete e.requestId,(0,n.logDebug)("clint request --response >",JSON.stringify(e)),"error"in e&&e.error){let t=e.error;o(new n.OKXConnectError(e.error.code,e.method+":"+t.message))}else r(e)},onAck:()=>{var e;!(0,n.isIos)()&&null!==(e=this.sessionConfig)&&void 0!==e&&e.openUniversalUrl&&this.openOKXWallet()}})}catch(a){o(a)}}))))})),this.disconnect=()=>t(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{this.engine.send({method:"disconnect"},{onAck:()=>{e()}}).catch((e=>{o.log(`disconnect : ${JSON.stringify(e)}`),t(e)}))}))})),this.events=(0,i.getGlobal)("events"),this.metadata=e}openOKXWallet(){(0,n.logDebug)("bridge-provider ==>> connect_5"),(0,n.openOKXDeeplinkWithFallback)(n.standardDeeplink)}};e.SignClient=a})),no=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SolanaProvider=void 0;var n=N(),r=Vr(),o=x(),i=Yr(),a=Gr(),s=class{constructor(e,t){this.name="solana",this.namespace=e.namespace,this.events=(0,o.getGlobal)("events"),this.client=(0,o.getGlobal)("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return t(this,void 0,void 0,(function*(){return(0,r.logDebug)("solana request --args--string>",JSON.stringify(e)),(0,r.logDebug)("solana provider namespace: ",this.namespace),this.namespace.methods.includes(e.method)?this.client.request(e):this.getHttpProvider().request(e)}))}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,o.getChainId)(t),r=(0,o.getRpcUrl)(t,this.namespace),i=this.createHttpProvider(n,r);i&&(e[n]=i)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new a.JsonRpcProvider(new i.JsonRpcConnection(n,(0,o.getGlobal)("disableProviderPing")));(0,r.logError)(`No RPC url provided for chainId: ${e}`)}getPubkey(e){return this.getWalletAddress(e)}getWalletAddress(e){return e||(e=this.namespace.defaultChain,e?.startsWith("solana")||(e=`solana:${e}`)),this.namespace.accounts.filter((function(t){return t.split(":").length>2&&t.startsWith(e)})).map((function(e){return e.split(":")[2]}))[0]}showRequestModal(e){return!0}};e.SolanaProvider=s,e.default=s})),ro=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});var n=N(),r=Vr(),o=x(),i=Yr(),a=Gr();e.default=class{constructor(e,t){this.name=r.NameSpaceKeyBtc,this.namespace=e.namespace,this.events=(0,o.getGlobal)("events"),this.client=(0,o.getGlobal)("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return t(this,void 0,void 0,(function*(){return(0,r.logDebug)("btc request --args--string>",JSON.stringify(e)),(0,r.logDebug)("btc provider namespace: ",JSON.stringify(this.namespace)),this.namespace.methods.includes(e.method)?this.client.request(e):this.getHttpProvider().request(e)}))}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,o.getChainId)(t),r=(0,o.getRpcUrl)(t,this.namespace),i=this.createHttpProvider(n,r);i&&(e[n]=i)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new a.JsonRpcProvider(new i.JsonRpcConnection(n,(0,o.getGlobal)("disableProviderPing")));(0,r.logError)(`No RPC url provided for chainId: ${e}`)}showRequestModal(e){return!0}}})),oo=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});var n=N(),r=Vr(),o=x(),i=Yr(),a=Gr();e.default=class{constructor(e,t){this.name="aptos",this.namespace=e.namespace,this.events=(0,o.getGlobal)("events"),this.client=(0,o.getGlobal)("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return t(this,void 0,void 0,(function*(){return(0,r.logDebug)("solana request --args--string>",JSON.stringify(e)),(0,r.logDebug)("solana provider namespace: ",this.namespace),this.namespace.methods.includes(e.method)?this.client.request(e):this.getHttpProvider().request(e)}))}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,o.getChainId)(t),r=(0,o.getRpcUrl)(t,this.namespace),i=this.createHttpProvider(n,r);i&&(e[n]=i)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new a.JsonRpcProvider(new i.JsonRpcConnection(n,(0,o.getGlobal)("disableProviderPing")));(0,r.logError)(`No RPC url provided for chainId: ${e}`)}showRequestModal(e){return!0}}})),io=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},n=e&&e.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(e,"__esModule",{value:!0});var r=N(),o=Vr(),i=x(),a=Yr(),s=Gr();e.default=class{constructor(e){this.name=o.NameSpaceKeyTON,this.namespace=e.namespace,this.events=(0,i.getGlobal)("events"),this.client=(0,i.getGlobal)("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}isRecord(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}request(e){return t(this,void 0,void 0,(function*(){var t,r,i,a;if((0,o.logDebug)("TONProvider request --args--string>",JSON.stringify(e)),(0,o.logDebug)("TONProvider request provider namespace: ",this.namespace),this.namespace.methods.includes(e.method)){if(!e.params)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton request params is nil");if(this.isRecord(e.params)){let s=e.params,{validUntil:f}=s,c=n(s,["validUntil"]),l=null===(r=null===(t=this.namespace.payload)||void 0===t?void 0:t.ton_addr)||void 0===r?void 0:r.address;"from"in c&&(l=c.from||(null===(a=null===(i=this.namespace.payload)||void 0===i?void 0:i.ton_addr)||void 0===a?void 0:a.address)),e.params.from=l,e.params.network=this.getDefaultChain(),e.params.valid_until=f;let d=yield this.client.request(e);if(this.isRecord(d)&&"result"in d){let e={boc:d.result.toString()};return(0,o.logDebug)("TONProvider request provider response: ",JSON.stringify(d)),(0,o.logDebug)("TONProvider request provider result: ",JSON.stringify(e)),e}throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton_send request response is nil")}throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton request params type add nil")}return this.getHttpProvider().request(e)}))}requestAccounts(){return this.getAccounts()}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(r.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){var e,t;let n=this.namespace.accounts;if((0,o.logDebug)("ton getAccounts accounts :",n),(0,o.logDebug)("ton getAccounts .namespace :",JSON.stringify(this.namespace)),!n)return[];let r=null===(t=null===(e=this.namespace.payload)||void 0===e?void 0:e.ton_addr)||void 0===t?void 0:t.address;return(0,o.logDebug)("ton getAccounts address :",r),r?[r]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,i.getChainId)(t),r=(0,i.getRpcUrl)(t,this.namespace),o=this.createHttpProvider(n,r);o&&(e[n]=o)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if((0,o.logDebug)("[RPC] get http provider:",e,t),typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&((0,o.logDebug)("setHttpProvider",e,t),this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new s.JsonRpcProvider(new a.JsonRpcConnection(n,(0,i.getGlobal)("disableProviderPing")));(0,o.logError)(`No RPC url provided for chainId: ${e}`)}showRequestModal(e){return"ton_sendTransaction"===e.method}}})),ao=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},n=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXUniversalProvider=void 0;var r=x(),o=Zr(),i=Qr(),a=N(),s=n(m()),f=to(),c=Vr(),l=eo(),d=n(no()),u=n(ro()),h=n(oo()),p=n(io()),g=class e{static init(n){return t(this,void 0,void 0,(function*(){let t=new e(n);return yield t.initialize(),t}))}getUniversalProvider(){return this}constructor(e){this.rpcProviders={},this.events=new s.default,this.providerOpts=e}request(e,n){return t(this,void 0,void 0,(function*(){if(!this.connected())throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR);let{namespace:t,requestParam:r}=this.buildRequestParamFromRequest(e,n);return yield this.getProvider(t).request(r)}))}buildRequestParamFromRequest(e,t){(0,c.logDebug)("UniversalProvider request args >>>: ",t,JSON.stringify(e));let[n,r]=this.validateChain(t);if(!this.session)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Please call connect() before request()");let o=Object.keys(this.session.namespaces);if(!t&&o&&o.length>1)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,"Multiple chains have been linked, the request method requires chain");return(0,c.logDebug)("UniversalProvider request >>args>>>: ",e),{namespace:n,requestParam:Object.assign(Object.assign({},e),{chainId:`${n}:${r}`})}}enable(){return t(this,void 0,void 0,(function*(){if(!this.client)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(!this.session){if(!this.connectOpts)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");yield this.connect(this.connectOpts)}return yield this.requestAccounts()}))}disconnect(){return t(this,void 0,void 0,(function*(){if(!this.session)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR);return new Promise((e=>t(this,void 0,void 0,(function*(){let n=!1,r=()=>t(this,void 0,void 0,(function*(){n||(n=!0,yield this.disconnectAndEmit(),yield this.cleanup(),e(),(0,c.logDebug)("UniversalProvider disconnect Disconnected"))}));try{yield this.client.disconnect(),yield r()}catch{yield r()}}))))}))}disconnectAndEmit(){var e,t;this.client.engine.connectionManager.disconnect(),this.events.emit("disconnect",{topic:null===(e=this.session)||void 0===e?void 0:e.topic}),this.events.emit("session_delete",{topic:null===(t=this.session)||void 0===t?void 0:t.topic})}aptosChainNameToGeneralId(e){return"aptos:mainnet"==e?"aptos:637":"movement:testnet"==e?"aptos:70000060":e}replaceAptos(e){var t,n;let r=null===(t=e.namespaces)||void 0===t?void 0:t.aptos;if(null!=r){let t=this.replaceAptosInner(r);null!=e.namespaces&&"aptos"in e.namespaces&&null!=t&&(e.namespaces.aptos=t)}let o=null===(n=e.optionalNamespaces)||void 0===n?void 0:n.aptos;if(null!=o){let t=this.replaceAptosInner(o);null!=e.optionalNamespaces&&"aptos"in e.optionalNamespaces&&null!=t&&(e.optionalNamespaces.aptos=t)}return e}replaceAptosInner(e){var t;return null!=e&&(e.chains=null===(t=e.chains)||void 0===t?void 0:t.map((e=>this.aptosChainNameToGeneralId(e))),null!=e.defaultChain&&(e.defaultChain=this.aptosChainNameToGeneralId(e.defaultChain))),e}connected(){let e=()=>{try{this.cleanup(),this.client.engine.connectionManager.disconnect()}catch(Ui){(0,c.logDebug)("Error during disconnect:",Ui)}};try{return!!this.session&&(!!this.client.engine.connectionManager.getCurrentConnectionReady()||(e(),!1))}catch{return e(),!1}}connect(e){return t(this,void 0,void 0,(function*(){if(!this.client)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(e=this.replaceAptos(e),this.connected())throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.ALREADY_CONNECTED_ERROR);(0,c.logDebug)("OKXUniversalProvider connect >>>>",JSON.stringify(e)),void 0===e.sessionConfig&&(e.sessionConfig={}),void 0===e.sessionConfig.openUniversalUrl&&(e.sessionConfig.openUniversalUrl=(0,c.isMobileUserAgent)()),this.setNamespaces(e);try{(0,c.logDebug)(`UniversalProvider connect opts.stringify ====> ${JSON.stringify(e)}`);let t=yield this.client.connect(e);return(0,c.logDebug)(`UniversalProvider connect success ====> ${JSON.stringify(t)}`),t?(this.session=t,this.onConnect(),t):void 0}catch(Ui){throw(0,c.logDebug)("UniversalProvider connect error ====> ",JSON.stringify(Ui)),Ui}}))}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}setDefaultChain(e,t){e=this.aptosChainNameToGeneralId(e);try{if(!this.connected())return;let[n,r]=this.validateChain(e);this.getProvider(n).setDefaultChain(r,t)}catch(n){if(!/Please call connect/.test(n.message))throw n}}checkStorage(){return t(this,void 0,void 0,(function*(){let e=yield this.getFromStore("connectSession");if((0,c.logDebug)(e),e){let t=e;this.session=t,this.client.session=this.session,this.sessionConfig=t.sessionConfig,this.client.sessionConfig=this.sessionConfig,(0,c.logDebug)("[evm u-provider] do reconnection",this.session),yield this.client.restoreconnect(t),this.createProviders(),setTimeout((()=>{this.events.emit("reconnect",{session:this.session})}),100)}}))}initialize(){return t(this,void 0,void 0,(function*(){let e=Object.assign({url:window.location.hostname,origin:window.location.origin},this.providerOpts.dappMetaData);(0,r.setGlobal)("events",this.events),this.client=new f.SignClient(e),(0,r.setGlobal)("client",this.client),yield this.checkStorage()}))}createProviders(){if(!this.client)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(!this.connected())throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Session not initialized. Please call connect() before enable()");[...new Set(Object.keys(this.session.namespaces).map((e=>(0,l.parseNamespaceKey)(e))))].forEach((e=>{if(!this.session)return;let t=this.session.namespaces[e];switch((0,c.logDebug)("init eip155 >> ",t),e){case"eip155":let n={namespace:t};this.rpcProviders[e]=new o.Eip155Provider(n);break;case"solana":let r={namespace:t},a=new d.default(r,"solana");this.rpcProviders[e]=a;let s=new d.default(r,"sonic");this.rpcProviders.sonic=s;let f=new d.default(r,"svm");this.rpcProviders.svm=f;break;case"ton":let c={namespace:t},l=new p.default(c);this.rpcProviders[e]=l;break;case"sui":let g={namespace:t},b=new i.SuiProvider(g);b.name="sui",this.rpcProviders[e]=b;break;case"btc":let y={namespace:t},v=new u.default(y,"btc");this.rpcProviders.btc=v;let m=new u.default(y,"fractal");this.rpcProviders.fractal=m;break;case"aptos":let C=new h.default({namespace:t},"aptos");this.rpcProviders[e]=C}}))}registerEventListeners(){if(typeof this.client>"u")throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client is not initialized");this.client.engine.addDisconnectListener((()=>{this.disconnectAndEmit(),this.cleanup()})),this.on(a.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,(e=>{this.onChainChanged(e)})),this.on(a.PROVIDER_EVENTS.UPDATE_NAMESPACES,(e=>{if(e){let t=Object.keys(e)[0];this.session&&(this.session.namespaces[t]=e[t],this.session&&(this.persist("connectSession",this.session),this.events.emit("session_update",this.session)),(0,c.logDebug)("PROVIDER_EVENTS.UPDATE_NAMESPACES this.session... ->>>",JSON.stringify(this.session)))}}))}getProvider(e){return(0,c.logDebug)("current get providers",this.rpcProviders),(0,c.logDebug)("query namespace: ",e),this.rpcProviders[e]}setNamespaces(e){this.connectOpts=e;let{namespaces:t,sessionConfig:n}=e,r={origin:window.location.origin,url:window.location.hostname,name:this.providerOpts.dappMetaData.name,icon:this.providerOpts.dappMetaData.icon};this.sessionConfig={dappInfo:r,openUniversalUrl:n?.openUniversalUrl,redirect:n?.redirect},(0,c.logDebug)("setNamespaces sessionConfig>>>",this.sessionConfig),this.client.sessionConfig=this.sessionConfig,this.persist("sessionConfig",n)}validateChain(e){var t;let[n,r]=e?.split(":")||["",""];if(!this.session||!this.session.namespaces||!Object.keys(this.session.namespaces).length)return(0,c.logDebug)("get name & chain",n,r),[n,r];if(n){if(!this.isChainNamespaceInSession(n))throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(r&&e){(0,c.logDebug)("this.session.namespaces --\x3e> ",n,JSON.stringify(this.session.namespaces));let r=null===(t=this.session.namespaces[n])||void 0===t?void 0:t.chains;if((0,c.logDebug)("get chainsArr & chain",JSON.stringify(r),e),r&&!r.includes(e))throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Namespace not include the chain '${e}'`)}}if(n&&r)return(0,c.logDebug)("get name & chain",n,r),[n,r];let o=(0,l.parseNamespaceKey)(Object.keys(this.session.namespaces)[0]),i=this.rpcProviders[o].getDefaultChain();return(0,c.logDebug)("get default chain:",i),[o,i]}isChainNamespaceInSession(e){var t,n;if(Object.keys((null===(t=this.session)||void 0===t?void 0:t.namespaces)||{}).map((e=>(0,l.parseNamespaceKey)(e))).includes(e))return!0;let r=!1;return Object.values((null===(n=this.session)||void 0===n?void 0:n.namespaces)||{}).forEach((t=>{t.chains.forEach((t=>{t.split(":")[0]==e&&(r=!0)}))})),r}requestAccountsWithNamespace(e){return this.getProvider(e).requestAccounts()}requestDefaultChainWithNamespace(e){return this.getProvider(e).getDefaultChain()}requestAccounts(){return t(this,void 0,void 0,(function*(){let[e]=this.validateChain();return yield this.getProvider(e).requestAccounts()}))}onChainChanged(e){var t;if(null===(t=this.session)||void 0===t||!t.namespaces)return;let[n,r]=this.validateChain(e);r&&(this.session.namespaces[n]&&(this.session.namespaces[n].defaultChain=r,this.persist("connectSession",this.session)),this.events.emit("chainChanged",r))}onConnect(){this.createProviders(),this.session&&this.persist("connectSession",this.session),this.events.emit("connect",{session:this.session}),this.registerEventListeners()}cleanup(){return t(this,void 0,void 0,(function*(){this.session=void 0,this.sessionProperties=void 0,this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),this.persist("connectSession",void 0)}))}persist(e,t){return(0,c.logDebug)("[evm u-provider] persisit data",e,t),this.client.engine.connectionManager.saveSessionContent(e,t)}getFromStore(e){return t(this,void 0,void 0,(function*(){return this.client.engine.connectionManager.getSessionContent(e)}))}showRequestModal(e,t){try{let{namespace:n,requestParam:r}=this.buildRequestParamFromRequest(e,t);return this.getProvider(n).showRequestModal(r)}catch{return!1}}};e.OKXUniversalProvider=g,e.default=g})),so=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXBtcProvider=void 0;var n=fo(),r=class{constructor(e){this.caip=["btc:mainnet","fractal:mainnet"],this.provider=e.getUniversalProvider()}getAddressForChainId(e){var t,r;if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let o=null===(r=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces.btc)||void 0===r?void 0:r.accounts.filter((function(t){return t.startsWith(e)}));if(null==o||o.length<0)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"no connected account");return o[0].split(":")[2]}getAccount(e){var t,r,o;let i=this.checkChainId(e);if(null==i)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let a=null===(o=null===(r=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces[i])||void 0===r?void 0:r.extra)||void 0===o?void 0:o[e],s="";return null!=a&&(s=a.publicKey),{address:this.getAddressForChainId(e),publicKey:s}}signMessage(e,r,o){return t(this,void 0,void 0,(function*(){if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if("undefined"===r)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signMessage parmas error");let t={signStr:r,from:this.getAddressForChainId(e)};o&&(t.type=o);try{let n=yield this.provider.request({method:"btc_signMessage",params:t},e);return"result"in n?n.result:n.error}catch{throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signTransaction request error")}}))}sendBitcoin(e,r,o,i){return t(this,void 0,void 0,(function*(){if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let t={from:this.getAddressForChainId(e),to:r,value:(o/1e8).toString()};i?.feeRate&&(t.satBytes=i.feeRate.toString());let a=yield this.send(e,t);return void 0!==a&&"txhash"in a?a.txhash:a}))}send(e,r){return t(this,void 0,void 0,(function*(){if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(!this.checkParameters(r,"to","value"))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method send parmas  error");r.from=this.getAddressForChainId(e);try{let t=yield this.provider.request({method:"btc_send",params:r},e);return"result"in t?{txhash:t.result}:t.error}catch(t){throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${t}`)}}))}signPsbt(e,n,r){return t(this,void 0,void 0,(function*(){return new Promise(((t,o)=>{this.signPsbts(e,[n],[r]).then((e=>{let n=JSON.parse(e);t(n[0])})).catch((e=>{o(e)}))}))}))}signPsbts(e,r,o){return t(this,void 0,void 0,(function*(){if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(void 0===r)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signPsbts params error");let t={psbtHexs:r,options:o};t.from=this.getAddressForChainId(e);try{let n=yield this.provider.request({method:"btc_signPsbts",params:t},e);return"result"in n?n.result:n.error}catch(i){throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${i}`)}}))}signAndPushPsbt(e,r,o){return t(this,void 0,void 0,(function*(){if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(void 0===r)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signPsbts params error");let t={psbtHex:r,options:o};t.from=this.getAddressForChainId(e);try{let n=yield this.provider.request({method:"btc_signAndPushPsbt",params:t},e);return"result"in n?JSON.parse(n.result):n.error}catch(i){throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${i}`)}}))}sendInscription(e,r,o,i){return t(this,void 0,void 0,(function*(){let t={address:r,inscriptionId:o,options:i};if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if("undefined"===r)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method sendInscription params error");var a=0;i&&"feeRate"in i&&(a=i.feeRate);let s=this.getAddressForChainId(e);var f=7;if("undefined"!==o){let e="-Atomicals",t="-Ordinals";o?.toLowerCase().endsWith(e.toLowerCase())?(f=8,o=this.removeSuffix(o,e)):o?.toLowerCase().endsWith(t.toLowerCase())&&(o=this.removeSuffix(o,t))}let c={scenario:5,feeRate:a,txType:"20",to:r,batchBean:[{coinAmount:"1",nftId:o,protocolId:f,coinId:"",inscriptionId:"",from:s}],extension:t};try{let t=yield this.provider.request({method:"btc_sendInscription",params:c},e);return"result"in t?t.result:t.error}catch{throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signTransaction request error")}}))}removeSuffix(e,t){return e.endsWith(t)?e.slice(0,e.length-t.length):e}checkParameters(e){for(var t=[],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((n=>{`${n}`in e||t.push(n)})),!(t.length>0)||(o.log("not find key: ",t.join(",")),!1)}checkChainId(e){if(this.caip.includes(e)){let[t,n]=e.split(":");return t}}};e.OKXBtcProvider=r,e.default=r})),fo=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXConnectError=e.OKX_CONNECT_ERROR_CODES=e.NameSpaceKeyBtc=e.NameSpaceKeySui=e.OKXBtcProvider=e.OKXUniversalProvider=void 0,n(w(),e);var r=ao();Object.defineProperty(e,"OKXUniversalProvider",{enumerable:!0,get:function(){return r.OKXUniversalProvider}});var o=so();Object.defineProperty(e,"OKXBtcProvider",{enumerable:!0,get:function(){return o.OKXBtcProvider}});var i=Vr();Object.defineProperty(e,"NameSpaceKeySui",{enumerable:!0,get:function(){return i.NameSpaceKeySui}}),Object.defineProperty(e,"NameSpaceKeyBtc",{enumerable:!0,get:function(){return i.NameSpaceKeyBtc}}),Object.defineProperty(e,"OKX_CONNECT_ERROR_CODES",{enumerable:!0,get:function(){return i.OKX_CONNECT_ERROR_CODES}}),Object.defineProperty(e,"OKXConnectError",{enumerable:!0,get:function(){return i.OKXConnectError}})})),co=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectorState=e.CONNECT_JSONRPC_VER=e.OKXCONNECTOR_MESSAGE_TTL=e.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE=e.OKXCONNECTOR_WS_URL_LIST=e.OKXCONNECTOR_WS_URL_IDX_KEY=e.OKXCONNECTOR_WS_URL_2=e.OKXCONNECTOR_WS_URL_1=e.EVENT_EMITTER_MAX_LISTENERS=void 0,e.EVENT_EMITTER_MAX_LISTENERS=10,e.OKXCONNECTOR_WS_URL_1="wss://wsdexpri.okx.com/ws/v1/wallet-connect-relay",e.OKXCONNECTOR_WS_URL_2="wss://wsdexpri.coinall.ltd/ws/v1/wallet-connect-relay",e.OKXCONNECTOR_WS_URL_IDX_KEY="wuik",e.OKXCONNECTOR_WS_URL_LIST=[e.OKXCONNECTOR_WS_URL_1,e.OKXCONNECTOR_WS_URL_2],e.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE={TIME_OUT:3990,CANCELED:3991,FINISHED:3992},e.OKXCONNECTOR_MESSAGE_TTL=3e5,e.CONNECT_JSONRPC_VER="2.0",e.ConnectorState={InitState:0,Connecting:1,Connected:2,Disconnected:3,OnError:4}})),lo=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OKXCONNECTOR_STORAGE_CIPHER_METHOD=e.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV=e.OKXCONNECTOR_STORAGER_CRYPTO_SALT=e.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD=e.OKXCONNECTOR_TON_KEY=e.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE=e.OKXCONNECTOR_TOKEN_CACHE=e.OKXCONNECTOR_JWT_KEY=e.OKXCONNECTOR_SESSION_PREFIX_KEY=e.OKXCONNECTOR_CRYPTO_KEY=e.OKXCONNECTOR_CACHE_KEY_DAPP=e.OKXCONNECTOR_CACHE_KEY=void 0,e.OKXCONNECTOR_CACHE_KEY="ck",e.OKXCONNECTOR_CACHE_KEY_DAPP="ck_dapp",e.OKXCONNECTOR_CRYPTO_KEY="cck_k",e.OKXCONNECTOR_SESSION_PREFIX_KEY="cspk_",e.OKXCONNECTOR_JWT_KEY="cjk_k",e.OKXCONNECTOR_TOKEN_CACHE="ct",e.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE="csp",e.OKXCONNECTOR_TON_KEY="OKXStorage_ctc",e.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD="scp",e.OKXCONNECTOR_STORAGER_CRYPTO_SALT="scs",e.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV="scpc",e.OKXCONNECTOR_STORAGE_CIPHER_METHOD="aes-256-cbc"})),uo=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.logDebug=function(){if(typeof o<"u")try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t||window?.okxLogDebug)&&o.log("[OKX_CONNECT_SDK]",...n)}catch{}},e.logError=function(){if(typeof o<"u")try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t||window?.okxLogDebug)&&o.error("[OKX_CONNECT_SDK]",...n)}catch{}},e.logWarning=function(){if(typeof o<"u")try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t||window?.okxLogDebug)&&o.warn("[OKX_CONNECT_SDK]",...n)}catch{}};var t=!1})),ho=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.safeJsonParse=function(e){if("string"!=typeof e)throw(0,t.logDebug)(e),new Error("Cannot safe json parse value of type "+typeof e);try{return r(e)}catch(ji){return o.error("safeJsonParse error:",ji),e}},e.safeJsonStringify=function(e){return"string"==typeof e?e:n(e)||""};var t=uo(),n=e=>JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString()+"n":t)),r=e=>{let t=e.replace(/:(\b\d{17,}|\b(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))(?=[,\}\]]|$)/g,(e=>`"${e}n"`));return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))}})),po=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.okxfromString=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=s[t];if((0,n.logDebug)("okxfromstring ====> "),!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)},e.okxtoString=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=s[t];if((0,n.logDebug)("okxtoString ====> "),!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)},e.alloc=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Uint8Array(e)},e.allocUnsafe=r;var t=(dn(),v(sn)),n=uo();function r(){return new Uint8Array(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}function o(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}var i=o("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),a=o("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{let t=r((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),s=Object.assign({utf8:i,"utf-8":i,hex:t.bases.base16,latin1:a,ascii:a,binary:a},t.bases)})),go=p((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.isValidObject=e.RANDOM_LENGTH=e.isBrowser=e.resolveLocalStorage=e.hasLocalStorage=e.hasBuiltInWebSocket=e.resolveWebSocketImplementation=void 0,e.hexToByteArray=function(e){if(e.length%2!==0)throw new Error(`Cannot convert ${e} to bytesArray`);let t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n/2]=parseInt(e.slice(n,n+2),16);return t},e.toHexString=function(e){let t="";return e.forEach((e=>{t+=("0"+(255&e).toString(16)).slice(-2)})),t},e.concatUint8Arrays=function(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n},e.splitToUint8Arrays=function(e,t){if(t>=e.length)throw new Error("Index is out of buffer");let n=e.slice(0,t),r=e.slice(t);return[n,r]},e.base64encode=function(e,t){let n;return e instanceof Uint8Array?n=e:("string"!=typeof e&&(e=(0,s.safeJsonStringify)(e)),n=o.default.decodeUTF8(e)),function(e,t){let n=o.default.encodeBase64(e);return t?encodeURIComponent(n):n}(n,t)},e.base64decode=function(e,t){let n=function(e,t){return t&&(e=decodeURIComponent(e)),o.default.decodeBase64(e)}(e,t);return{toString:()=>o.default.encodeUTF8(n),toObject(){try{return(0,s.safeJsonParse)(o.default.encodeUTF8(n))}catch{return null}},toUint8Array:()=>n}},e.checkWSUrl=function(e){let t=e.match(new RegExp(/^\w+:/,"gi"));if(!t||!t.length)return!1;let n=t[0];return void 0!==n&&new RegExp("^wss?:").test(n)},e.hashKey=d,e.generateRandomBytes32=u,e.generateTopic=function(){let e=u();return(0,f.logDebug)(`generate topic called ${e}`),d((0,i.toString)(e,l))},e.isIos=function(){let e=navigator.userAgent,t=navigator.maxTouchPoints||0,n=/iPad|iPhone|iPod/.test(e)&&!window.MSStream,r=e.includes("Mac")&&t>1;return(0,f.logDebug)(`utils isIos >>>isIOSDevice: ${n}    >> isIPadOS: ${r}`),n||r};var r=t(P()),o=t(A()),i=(On(),v(mn)),a=xn(),s=ho(),f=uo(),c=po(),l="base16";e.resolveWebSocketImplementation=()=>typeof WebSocket<"u"?WebSocket:typeof n.g<"u"&&typeof n.g.WebSocket<"u"?n.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:WebSocket;e.hasBuiltInWebSocket=()=>typeof WebSocket<"u"||typeof n.g<"u"&&typeof n.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u";e.hasLocalStorage=()=>typeof n.g<"u"&&typeof n.g.localStorage<"u"||typeof window<"u"&&typeof window.localStorage<"u";e.resolveLocalStorage=()=>typeof n.g<"u"&&typeof n.g.localStorage<"u"?n.g.localStorage:typeof window<"u"&&typeof window.localStorage<"u"?window.localStorage:localStorage;function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;(0,f.logDebug)(`hash key called ${e}`);let n=(0,a.hash)((0,c.okxfromString)(e,t));return(0,i.toString)(n,t)}function u(){return r.default.randomBytes(e.RANDOM_LENGTH)}e.isBrowser=()=>typeof window<"u",e.RANDOM_LENGTH=32;e.isValidObject=e=>Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length})),bo=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};function n(e,n){return t(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{var o,i;if(null!==(o=n?.signal)&&void 0!==o&&o.aborted)return void r(new Error("Delay aborted"));let a=setTimeout((()=>t()),e);null===(i=n?.signal)||void 0===i||i.addEventListener("abort",(()=>{clearTimeout(a),r(new Error("Delay aborted"))}))}))}))}Object.defineProperty(e,"__esModule",{value:!0}),e.callForSuccess=function(e,r){return t(this,void 0,void 0,(function*(){var t,o;let i=null!==(t=r?.attempts)&&void 0!==t?t:3,a=null!==(o=r?.delayMs)&&void 0!==o?o:800;if("function"!=typeof e)throw new Error("Expected a function, got "+typeof e);let s,f=0;for(;f<i;)try{return yield e()}catch(c){s=c,f++,f<i&&(yield n(a))}throw s}))},e.delay=n})),yo=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ERROR=e.STANDARD_ERROR_MAP=e.SERVER_ERROR_CODE_RANGE=e.RESERVED_ERROR_CODES=e.SERVER_ERROR=e.INTERNAL_ERROR=e.INVALID_PARAMS=e.METHOD_NOT_FOUND=e.INVALID_REQUEST=e.PARSE_ERROR=e.OKX_CONNECT_ERROR_CODES=e.OKXConnectError=void 0;var t,n,r=class e extends Error{constructor(n,r){null==r&&(r=function(e){return e==t.UNKNOWN_ERROR?"unknown error":e==t.BAD_REQUEST_ERROR?"bad request error":e==t.ALREADY_CONNECTED_ERROR?"already connected error":e==t.NOT_CONNECTED_ERROR?"not connected error":e==t.UNKNOWN_APP_ERROR?"unknown app error":e==t.USER_REJECTS_ERROR?"user rejects error":e==t.METHOD_NOT_SUPPORTED?"method not supported":e==t.CONNECTION_ERROR?"connect error":"unknown error"}(n)),super(r),this.code=n,this.message=`${e.prefix} ${r?"\n"+r:""}`,Object.setPrototypeOf(this,e.prototype)}toJSON(){return{message:this.message,code:this.code}}};e.OKXConnectError=r,r.prefix="[OKX_CONNECT_SDK_ERROR]",(n=t||(e.OKX_CONNECT_ERROR_CODES=t={}))[n.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",n[n.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",n[n.ALREADY_CONNECTED_ERROR=11]="ALREADY_CONNECTED_ERROR",n[n.NOT_CONNECTED_ERROR=12]="NOT_CONNECTED_ERROR",n[n.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",n[n.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",n[n.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",n[n.CHAIN_NOT_SUPPORTED=500]="CHAIN_NOT_SUPPORTED",n[n.WALLET_NOT_SUPPORTED=600]="WALLET_NOT_SUPPORTED",n[n.CONNECTION_ERROR=700]="CONNECTION_ERROR",e.PARSE_ERROR="PARSE_ERROR",e.INVALID_REQUEST="INVALID_REQUEST",e.METHOD_NOT_FOUND="METHOD_NOT_FOUND",e.INVALID_PARAMS="INVALID_PARAMS",e.INTERNAL_ERROR="INTERNAL_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.RESERVED_ERROR_CODES=[-32700,-32600,-32601,-32602,-32603],e.SERVER_ERROR_CODE_RANGE=[-32e3,-32099],e.STANDARD_ERROR_MAP={[e.PARSE_ERROR]:{code:-32700,message:"Parse error"},[e.INVALID_REQUEST]:{code:-32600,message:"Invalid Request"},[e.METHOD_NOT_FOUND]:{code:-32601,message:"Method not found"},[e.INVALID_PARAMS]:{code:-32602,message:"Invalid params"},[e.INTERNAL_ERROR]:{code:-32603,message:"Internal error"},[e.SERVER_ERROR]:{code:-32e3,message:"Server error"}},e.DEFAULT_ERROR=e.SERVER_ERROR})),vo=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OKX_CONNECT_ERROR_CODES=e.OKXConnectError=void 0;var t=yo();Object.defineProperty(e,"OKXConnectError",{enumerable:!0,get:function(){return t.OKXConnectError}}),Object.defineProperty(e,"OKX_CONNECT_ERROR_CODES",{enumerable:!0,get:function(){return t.OKX_CONNECT_ERROR_CODES}})})),mo=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NameSpaceKeyAptos=e.NameSpaceKeyBtc=e.NameSpaceKeySui=e.NameSpaceKeyTON=e.NameSpaceKeySOL=e.NameSpaceKeyEip155=void 0,e.NameSpaceKeyEip155="eip155",e.NameSpaceKeySOL="solana",e.NameSpaceKeyTON="ton",e.NameSpaceKeySui="sui",e.NameSpaceKeyBtc="btc",e.NameSpaceKeyAptos="aptos"})),Co=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tgwalletName=e.tonConnectSdkVersion=e.standardDeeplink=e.standardUniversalLink=e.okxDeeplink=void 0,e.okxDeeplink="okx://web3",e.standardUniversalLink="https://www.okx.com/download",e.standardDeeplink=`${e.okxDeeplink}/wallet/connect`,e.tonConnectSdkVersion="1",e.tgwalletName="OKX_WALLET_BOT"})),Oo=p((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};function n(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function r(e){return"result"in e}function o(e){return"error"in e}Object.defineProperty(e,"__esModule",{value:!0}),e.isJsonRpcPayload=n,e.isJsonRpcRequest=function(e){return n(e)&&"method"in e},e.isJsonRpcResponse=function(e){return n(e)&&(r(e)||o(e))},e.isJsonRpcResult=r,e.isJsonRpcError=o,e.payloadId=l,e.getBigIntRpcId=function(){let e=BigInt(Date.now())*BigInt(1e6),t=BigInt(c.getNextValue());return e+t},e.formatJsonRpcRequest=function(e,t,n){return{id:n||l(),jsonrpc:"2.0",method:e,params:t}},e.formatJsonRpcResult=function(e,t){return{id:e,jsonrpc:"2.0",result:t}},e.formatJsonRpcError=function(e,t,n){return{id:e,jsonrpc:"2.0",error:p(t,n)}},e.isReservedErrorCode=d,e.getError=u,e.getErrorByCode=h,e.formatErrorMessage=p,e.isHttpUrl=function(e){return g(e,"^https?:")},e.isWsUrl=function(e){return g(e,"^wss?:")},e.parseConnectionError=function(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${t}`):e};var i=yo(),a=t(P()),s=class{constructor(e){this.i=1;8===e?new Uint8Array(1):16===e?new Uint16Array(1):new Uint32Array(1);this.initialValue=a.default.randomBytes(e/8)[0]}getNextValue(){return this.initialValue+this.i++}},f=new s(8),c=new s(16);function l(){return 1e3*Date.now()+f.getNextValue()}function d(e){return i.RESERVED_ERROR_CODES.includes(e)}function u(e){return Object.keys(i.STANDARD_ERROR_MAP).includes(e)?i.STANDARD_ERROR_MAP[e]:i.STANDARD_ERROR_MAP[i.DEFAULT_ERROR]}function h(e){return Object.values(i.STANDARD_ERROR_MAP).find((t=>t.code===e))||i.STANDARD_ERROR_MAP[i.DEFAULT_ERROR]}function p(e,t){return typeof e>"u"?u(i.INTERNAL_ERROR):("string"==typeof e&&(e=Object.assign(Object.assign({},u(i.SERVER_ERROR)),{message:e})),typeof t<"u"&&(e.data=t),d(e.code)&&(e=h(e.code)),e)}function g(e,t){let n=function(e){let t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return!(typeof n>"u")&&new RegExp(t).test(n)}})),wo=p((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.IEngine=e.ISignClient=e.ISignClientEvents=e.IEngineEvents=void 0;var n=t(m()),r=class extends n.default{constructor(){super()}};e.IEngineEvents=r;var o=class extends n.default{constructor(){super()}};e.ISignClientEvents=o;e.ISignClient=class{constructor(e){this.data=e}};e.IEngine=class{constructor(e){this.client=e}}})),Eo=p((e=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TONCHAIN=void 0,(t||(e.TONCHAIN=t={})).MAINNET="-239"})),_o=p((e=>{var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.CONNECT_ITEM_ERROR_CODES=void 0,(n=t||(e.CONNECT_ITEM_ERROR_CODES=t={}))[n.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",n[n.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})),xo=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CONNECT_ITEM_ERROR_CODES=e.TONCHAIN=void 0;var t=Eo();Object.defineProperty(e,"TONCHAIN",{enumerable:!0,get:function(){return t.TONCHAIN}});var n=_o();Object.defineProperty(e,"CONNECT_ITEM_ERROR_CODES",{enumerable:!0,get:function(){return n.CONNECT_ITEM_ERROR_CODES}})})),So=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.creatOKXWalletInfo=function(){return{appName:"okxAppWallet",name:"OKX Wallet",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",aboutUrl:"https://www.okx.com/web3",universalLink:t.standardUniversalLink,deepLink:t.standardDeeplink,platforms:["ios","android"]}},e.creatOKXMiniAppWalletInfo=function(){return{appName:"okxMiniApp",name:"OKX Mini Wallet",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",aboutUrl:"https://www.okx.com/web3",universalLink:`https://t.me/${t.tgwalletName}/start`,deepLink:"",platforms:["ios","android","macos","windows"]}};var t=Co()})),Ro=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.creatOKXMiniAppWalletInfo=e.creatOKXWalletInfo=e.ISignClientEvents=e.IEngine=e.IEngineEvents=e.ISignClient=e.getBigIntRpcId=e.formatJsonRpcRequest=e.isJsonRpcError=e.isJsonRpcResponse=e.parseConnectionError=e.isHttpUrl=e.formatJsonRpcError=void 0;var r=Oo();Object.defineProperty(e,"formatJsonRpcError",{enumerable:!0,get:function(){return r.formatJsonRpcError}}),Object.defineProperty(e,"isHttpUrl",{enumerable:!0,get:function(){return r.isHttpUrl}}),Object.defineProperty(e,"parseConnectionError",{enumerable:!0,get:function(){return r.parseConnectionError}}),Object.defineProperty(e,"isJsonRpcResponse",{enumerable:!0,get:function(){return r.isJsonRpcResponse}}),Object.defineProperty(e,"isJsonRpcError",{enumerable:!0,get:function(){return r.isJsonRpcError}}),Object.defineProperty(e,"formatJsonRpcRequest",{enumerable:!0,get:function(){return r.formatJsonRpcRequest}}),Object.defineProperty(e,"getBigIntRpcId",{enumerable:!0,get:function(){return r.getBigIntRpcId}});var o=wo();Object.defineProperty(e,"ISignClient",{enumerable:!0,get:function(){return o.ISignClient}}),Object.defineProperty(e,"IEngineEvents",{enumerable:!0,get:function(){return o.IEngineEvents}}),Object.defineProperty(e,"IEngine",{enumerable:!0,get:function(){return o.IEngine}}),Object.defineProperty(e,"ISignClientEvents",{enumerable:!0,get:function(){return o.ISignClientEvents}}),n(xo(),e);var i=So();Object.defineProperty(e,"creatOKXWalletInfo",{enumerable:!0,get:function(){return i.creatOKXWalletInfo}}),Object.defineProperty(e,"creatOKXMiniAppWalletInfo",{enumerable:!0,get:function(){return i.creatOKXMiniAppWalletInfo}})})),No=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.okxDeeplink=e.tonConnectSdkVersion=e.standardDeeplink=e.standardUniversalLink=e.NameSpaceKeyAptos=e.NameSpaceKeyBtc=e.NameSpaceKeySui=e.NameSpaceKeyTON=e.NameSpaceKeySOL=e.NameSpaceKeyEip155=void 0,n(vo(),e);var r=mo();Object.defineProperty(e,"NameSpaceKeyEip155",{enumerable:!0,get:function(){return r.NameSpaceKeyEip155}}),Object.defineProperty(e,"NameSpaceKeySOL",{enumerable:!0,get:function(){return r.NameSpaceKeySOL}}),Object.defineProperty(e,"NameSpaceKeyTON",{enumerable:!0,get:function(){return r.NameSpaceKeyTON}}),Object.defineProperty(e,"NameSpaceKeySui",{enumerable:!0,get:function(){return r.NameSpaceKeySui}}),Object.defineProperty(e,"NameSpaceKeyBtc",{enumerable:!0,get:function(){return r.NameSpaceKeyBtc}}),Object.defineProperty(e,"NameSpaceKeyAptos",{enumerable:!0,get:function(){return r.NameSpaceKeyAptos}});var o=Co();Object.defineProperty(e,"standardUniversalLink",{enumerable:!0,get:function(){return o.standardUniversalLink}}),Object.defineProperty(e,"standardDeeplink",{enumerable:!0,get:function(){return o.standardDeeplink}}),Object.defineProperty(e,"tonConnectSdkVersion",{enumerable:!0,get:function(){return o.tonConnectSdkVersion}}),Object.defineProperty(e,"okxDeeplink",{enumerable:!0,get:function(){return o.okxDeeplink}}),n(Ro(),e)})),To=p((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.openLink=o,e.openLinkBlank=function(e){o(e,"_blank")},e.openDeeplinkWithFallback=function(e,t){let n=setTimeout((()=>{s("safari")||a("android")&&s("firefox")||t()}),500);window.addEventListener("blur",(()=>clearTimeout(n)),{once:!0}),o(e,"_self")},e.isMobileUserAgent=function(){let e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.slice(0,4)))&&(e=!0),e;var t},e.getUserAgent=i,e.isOS=a,e.isBrowser=s;var n=t($n()),r=uo();function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_self";(0,r.logDebug)("openLink",e,t),window.open(e,t,"noopener noreferrer")}function i(){var e,t,r;let o,i=(new n.default).getResult(),a=null===(e=i.os.name)||void 0===e?void 0:e.toLowerCase();switch(!0){case"ipad"===(null===(t=i.device.model)||void 0===t?void 0:t.toLowerCase()):o="ipad";break;case"ios"===a:o="ios";break;case"android"===a:o="android";break;case"mac os"===a:o="macos";break;case"linux"===a:o="linux";break;case a?.includes("windows"):o="windows"}let s,f=null===(r=i.browser.name)||void 0===r?void 0:r.toLowerCase();switch(!0){case"chrome"===f:s="chrome";break;case"firefox"===f:s="firefox";break;case f?.includes("safari"):s="safari";break;case f?.includes("opera"):s="opera"}return{os:o,browser:s}}function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(i().os)}function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(i().browser)}})),ko=p((e=>{var t,n,r,o,i,a,s;Object.defineProperty(e,"__esModule",{value:!0}),e.isTmaPlatform=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(h)},e.isInTMA=g,e.isInTelegramBrowser=function(){var e;let t=!(null===(e=(0,f.getWindow)())||void 0===e||!e.TelegramWebview);return(g()||t)&&"unknown"===h},e.sendExpand=function(){y("web_app_expand",{})},e.sendOpenTelegramLink=function(e,t){let n=new URL(e);if("http:"!==n.protocol&&"https:"!==n.protocol){if(t)return t();throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url protocol is not supported: ${n}`)}if("t.me"!==n.hostname){if(t)return t();throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url host is not supported: ${n}`)}let r=n.pathname+n.search;b()||function(e){return m(p,e)>=0}("6.1")?y("web_app_open_tg_link",{path_full:r}):(0,d.openLinkBlank)("https://t.me"+r)},e.versionCompare=m;var f=Do(),c=uo(),l=No(),d=To(),u={};try{u=function(e){e=e.replace(/^#/,"");let t={};if(!e.length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=v(e),t;let n=e.indexOf("?");if(n>=0){let r=e.substr(0,n);t._path=v(r),e=e.substr(n+1)}let r=function(e){let t={};if(!e.length)return t;let n,r,o,i,a=e.split("&");for(n=0;n<a.length;n++)r=a[n].split("="),o=v(r[0]),i=null==r[1]?null:v(r[1]),t[o]=i;return t}(e);for(let o in r)t[o]=r[o];return t}(location.hash.toString())}catch{}var h="unknown";if(u?.tgWebAppPlatform&&(h=null!==(t=u.tgWebAppPlatform)&&void 0!==t?t:"unknown"),"unknown"===h){let e=(0,f.getWindow)();h=null!==(o=null===(r=null===(n=e?.Telegram)||void 0===n?void 0:n.WebApp)||void 0===r?void 0:r.platform)&&void 0!==o?o:"unknown"}var p="6.0";if(u?.tgWebAppVersion&&(p=u.tgWebAppVersion),!p){let e=(0,f.getWindow)();p=null!==(s=null===(a=null===(i=e?.Telegram)||void 0===i?void 0:i.WebApp)||void 0===a?void 0:a.version)&&void 0!==s?s:"6.0"}function g(){var e;return"unknown"!==h||!(null===(e=(0,f.getWindow)())||void 0===e||!e.TelegramWebviewProxy)}function b(){try{let e=(0,f.getWindow)();return!!e&&(null!=e.parent&&e!==e.parent)}catch{return!1}}function y(e,t){try{let n=(0,f.getWindow)();if(!n)throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to parent window: window is not defined");if(void 0!==n.TelegramWebviewProxy)(0,c.logDebug)("postEvent",e,t),n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));else if(n.external&&"notify"in n.external)(0,c.logDebug)("postEvent",e,t),n.external.notify(JSON.stringify({eventType:e,eventData:t}));else{if(!b())throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to TMA");{let r="*",o=JSON.stringify({eventType:e,eventData:t});(0,c.logDebug)("postEvent",e,t),n.parent.postMessage(o,r)}}}catch(Ui){(0,c.logError)(`Can't post event to parent window: ${Ui}`)}}function v(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch{return e}}function m(e,t){"string"!=typeof e&&(e=""),"string"!=typeof t&&(t="");let n,r,o,i,a=e.replace(/^\s+|\s+$/g,"").split("."),s=t.replace(/^\s+|\s+$/g,"").split(".");for(n=Math.max(a.length,s.length),r=0;r<n;r++)if(o=parseInt(a[r])||0,i=parseInt(s[r])||0,o!==i)return o>i?1:-1;return 0}})),Do=p((e=>{var t,n,r,i;Object.defineProperty(e,"__esModule",{value:!0}),e.removeUrlLastSlash=d,e.addPathToUrl=function(e,t){return d(e)+"/"+t},e.getUniversalLink=u,e.openOKXDeeplink=function(e){var t;let n=u(e),r=!(null===(t=h())||void 0===t||!t.TelegramWebviewProxy);if(o.log("openOKXDeeplink fullUrl:",n),(0,c.isIos)())r?window.open(n,"_blank"):(o.log("windowOpen[before]: ",Date.now()),window?.okxLogDebug?window.open(n,"_blank"):window.open(n,"_self"),o.log("windowOpen[after]: ",Date.now()));else{let t=null;r?t=window.open(e,"_blank"):window.location.href=e}},e.openOKXDeeplinkWithFallback=function(e){var t;let n=u(e),r=!(null===(t=h())||void 0===t||!t.TelegramWebviewProxy);o.log("openOKXDeeplinkWithFallback fullUrl:",n);let i=!1,s=a.standardUniversalLink;if((0,c.isIos)())r?window.open(n,"_blank"):(o.log("windowOpen[before]: ",Date.now()),window?.okxLogDebug?window.open(n,"_blank"):window.open(n,"_self"),o.log("windowOpen[after]: ",Date.now()));else{let t=null;r?t=window.open(e,"_blank"):window.location.href=e,setTimeout((()=>{i||(t?t.open(s,"_self"):window.open(s,"_blank"))}),1500),window.addEventListener("blur",(()=>{i=!0}),{once:!0}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(i=!0)}))}},e.getWindow=h,e.isTelegramUrl=function(e){if(!e)return!1;let t=new URL(e);return"tg:"===t.protocol||"t.me"===t.hostname},e.encodeTelegramUrlParameters=function(e){let t=e;return t=t.replace(/\./g,"%2E"),t=t.replace(/-/g,"%2D"),t=t.replace(/_/g,"%5F"),t=t.replace(/&/g,"-"),t=t.replace(/=/g,"__"),t=t.replace(/%/g,"--"),t},e.encodeConnectParams=function(e){let t=JSON.stringify(e);(0,s.logDebug)("url encodeConnectParams connectRequestStr ",t);let n=(new TextEncoder).encode(t);return btoa(String.fromCharCode(...n))},e.encodeTWAConnectURLParams=function(e){let t=JSON.stringify({topic:e.topic,clientId:e.clientId});(0,s.logDebug)("url encodeConnectParams connectRequestStr",t);let n=(new TextEncoder).encode(t);return btoa(String.fromCharCode(...n))},e.getAppWalletDeepLink=function(e){return`${a.standardDeeplink}?param=${e}`},e.getTelegramWalletTWAUrl=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={okxconnect:"",redirect:"",extraparams:""};e&&(r.okxconnect=e),t&&(r.redirect=t);let o=JSON.stringify(r),i=(new TextEncoder).encode(o),a=btoa(String.fromCharCode(...i));return(0,s.logDebug)("[TWA] open link:",r,a),e||t?n?`http://localhost:5173?tgWebAppStartParam=${a}`:`https://t.me/${f.tgwalletName}/start?startapp=${a}`:n?"http://localhost:5173":`https://t.me/${f.tgwalletName}/start`},e.openOKXTMAWalletlinkWithFallback=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r,o,i,a;(0,s.logDebug)("[TWA] open link:",e,"browserDebug ==> ",t),t?window.open(e,"_blank"):null!==(r=null===(n=h())||void 0===n?void 0:n.Telegram)&&void 0!==r&&r.WebApp?null===(a=null===(i=null===(o=h())||void 0===o?void 0:o.Telegram)||void 0===i?void 0:i.WebApp)||void 0===a||a.openTelegramLink(e):(0,l.sendOpenTelegramLink)(e)},e.isInTMA=y,e.isInTelegramBrowser=function(){var e;let t=!(null===(e=h())||void 0===e||!e.TelegramWebview);return(y()||t)&&"unknown"===b};var a=No(),s=uo(),f=Co(),c=go(),l=ko();function d(e){return"/"===e.slice(-1)?e.slice(0,-1):e}function u(e){let t=encodeURIComponent(e);return`${a.standardUniversalLink}?deeplink=${t}`}function h(){if(typeof window<"u")return window}function p(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch{return e}}var g={};try{g=function(e){let t={};if(!(e=e.replace(/^#/,"")).length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=p(e),t;let n=e.indexOf("?");if(n>=0){let r=e.substr(0,n);t._path=p(r),e=e.substr(n+1)}let r=function(e){let t={};if(!e.length)return t;let n,r,o,i,a=e.split("&");for(n=0;n<a.length;n++)r=a[n].split("="),o=p(r[0]),i=null==r[1]?null:p(r[1]),t[o]=i;return t}(e);for(let o in r)t[o]=r[o];return t}(location.hash.toString())}catch{}var b="unknown";if(g?.tgWebAppPlatform&&(b=null!==(t=g.tgWebAppPlatform)&&void 0!==t?t:"unknown"),"unknown"===b){let e=h();b=null!==(i=null===(r=null===(n=e?.Telegram)||void 0===n?void 0:n.WebApp)||void 0===r?void 0:r.platform)&&void 0!==i?i:"unknown"}function y(){var e;return"unknown"!==b||!(null===(e=h())||void 0===e||!e.TelegramWebviewProxy)}})),Po=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isBrowser=e.isOS=e.isMobileUserAgent=e.openDeeplinkWithFallback=e.openLinkBlank=e.openLink=e.isValidObject=e.isIos=e.base64decode=e.base64encode=e.splitToUint8Arrays=e.concatUint8Arrays=e.toHexString=e.hexToByteArray=e.encodeTWAConnectURLParams=e.encodeConnectParams=e.openOKXTMAWalletlinkWithFallback=e.getTelegramWalletTWAUrl=e.getAppWalletDeepLink=e.encodeTelegramUrlParameters=e.isTelegramUrl=e.openOKXDeeplinkWithFallback=e.openOKXDeeplink=e.getUniversalLink=e.safeJsonStringify=e.safeJsonParse=e.logWarning=e.logError=e.logDebug=e.callForSuccess=void 0;var t=bo();Object.defineProperty(e,"callForSuccess",{enumerable:!0,get:function(){return t.callForSuccess}});var n=uo();Object.defineProperty(e,"logDebug",{enumerable:!0,get:function(){return n.logDebug}}),Object.defineProperty(e,"logError",{enumerable:!0,get:function(){return n.logError}}),Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return n.logWarning}});var r=ho();Object.defineProperty(e,"safeJsonParse",{enumerable:!0,get:function(){return r.safeJsonParse}}),Object.defineProperty(e,"safeJsonStringify",{enumerable:!0,get:function(){return r.safeJsonStringify}});var o=Do();Object.defineProperty(e,"getUniversalLink",{enumerable:!0,get:function(){return o.getUniversalLink}}),Object.defineProperty(e,"openOKXDeeplink",{enumerable:!0,get:function(){return o.openOKXDeeplink}}),Object.defineProperty(e,"openOKXDeeplinkWithFallback",{enumerable:!0,get:function(){return o.openOKXDeeplinkWithFallback}}),Object.defineProperty(e,"isTelegramUrl",{enumerable:!0,get:function(){return o.isTelegramUrl}}),Object.defineProperty(e,"encodeTelegramUrlParameters",{enumerable:!0,get:function(){return o.encodeTelegramUrlParameters}}),Object.defineProperty(e,"getAppWalletDeepLink",{enumerable:!0,get:function(){return o.getAppWalletDeepLink}}),Object.defineProperty(e,"getTelegramWalletTWAUrl",{enumerable:!0,get:function(){return o.getTelegramWalletTWAUrl}}),Object.defineProperty(e,"openOKXTMAWalletlinkWithFallback",{enumerable:!0,get:function(){return o.openOKXTMAWalletlinkWithFallback}}),Object.defineProperty(e,"encodeConnectParams",{enumerable:!0,get:function(){return o.encodeConnectParams}}),Object.defineProperty(e,"encodeTWAConnectURLParams",{enumerable:!0,get:function(){return o.encodeTWAConnectURLParams}});var i=go();Object.defineProperty(e,"hexToByteArray",{enumerable:!0,get:function(){return i.hexToByteArray}}),Object.defineProperty(e,"toHexString",{enumerable:!0,get:function(){return i.toHexString}}),Object.defineProperty(e,"concatUint8Arrays",{enumerable:!0,get:function(){return i.concatUint8Arrays}}),Object.defineProperty(e,"splitToUint8Arrays",{enumerable:!0,get:function(){return i.splitToUint8Arrays}}),Object.defineProperty(e,"base64encode",{enumerable:!0,get:function(){return i.base64encode}}),Object.defineProperty(e,"base64decode",{enumerable:!0,get:function(){return i.base64decode}}),Object.defineProperty(e,"isIos",{enumerable:!0,get:function(){return i.isIos}}),Object.defineProperty(e,"isValidObject",{enumerable:!0,get:function(){return i.isValidObject}});var a=To();Object.defineProperty(e,"openLink",{enumerable:!0,get:function(){return a.openLink}}),Object.defineProperty(e,"openLinkBlank",{enumerable:!0,get:function(){return a.openLinkBlank}}),Object.defineProperty(e,"openDeeplinkWithFallback",{enumerable:!0,get:function(){return a.openDeeplinkWithFallback}}),Object.defineProperty(e,"isMobileUserAgent",{enumerable:!0,get:function(){return a.isMobileUserAgent}}),Object.defineProperty(e,"isOS",{enumerable:!0,get:function(){return a.isOS}}),Object.defineProperty(e,"isBrowser",{enumerable:!0,get:function(){return a.isBrowser}})})),Ao=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&t(r,e,o);return n(r,e),r},o=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=void 0;var i=lo(),a=o(P()),s=go(),f=Po(),c=r(uo()),l=Po(),d=Tr(),u=class e{constructor(t){let n=(0,s.resolveLocalStorage)();this.storeKey="",this.cipherIV="",this.subKey=t,c.logDebug("--------get current local storage --------"),c.logDebug(n);let r=n.getItem(e.cacheKey+t);if(typeof r>"u"||null===r)return c.logDebug("with no cache"),void(this.cache={});if(c.logDebug(r),r?.length>0){var o=(0,f.safeJsonParse)(r);this.cache=o}c.logDebug(`get cache obj: ${this.cache}`),(typeof this.cache>"u"||null==this.cache)&&(this.cache={})}saveContent(e,t){let n={id:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",timestamp:Date.now().toString(),content:e};this.saveItem(n,t)}saveItem(t,n){let r=e.cacheKey+this.subKey,o=(0,s.resolveLocalStorage)();c.logDebug(this.cache),c.logDebug(`get cache obj: ${this.cache}, ${n}, ${t}`),this.cache[n]=t;let i=(0,f.safeJsonStringify)(this.cache);c.logDebug(`STORAGE: ${n} @ ${this.cache}`),o.setItem(r,i)}getItem(e){return c.logDebug(`STORAGE >> getItem: ${e} @ ${this.cache}`),this.cache[e]}getCachedPBKDF2InfoKey(){var e,t,n,r;if(this.storeKey.length>0&&(null===(e=this.cipherIV)||void 0===e?void 0:e.length)>0)return{pw:this.storeKey,iv:this.cipherIV};let o=null===(t=this.getItem(i.OKXCONNECTOR_STORAGER_CRYPTO_SALT))||void 0===t?void 0:t.content;o||(o=(0,s.toHexString)(a.default.randomBytes(24)),this.saveContent(o,i.OKXCONNECTOR_STORAGER_CRYPTO_SALT));let f=null===(n=this.getItem(i.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD))||void 0===n?void 0:n.content;f||(f=(0,s.toHexString)(a.default.randomBytes(32)),this.saveContent(f,i.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD));let c=null===(r=this.getItem(i.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV))||void 0===r?void 0:r.content;if(!c){let e=a.default.randomBytes(16);c=(0,s.toHexString)(e),this.saveContent(c,i.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV)}return this.cipherIV=c,this.storeKey=(0,d.PBKDF2)(f,o,{iterations:10}).toString(),{pw:this.storeKey,iv:this.cipherIV}}encryptStoreMsg(e,t){(0,l.logDebug)(`encryptStoreMsg  encryptStoreMsg start ${Date.now()}`);let n=this.getCachedPBKDF2InfoKey();(0,l.logDebug)(`encryptStoreMsg  encryptStoreMsg mid ${Date.now()}`);var r=d.AES.encrypt(e,n.pw).toString();this.saveContent(r,t),(0,l.logDebug)(`encryptStoreMsg  encryptStoreMsg end ${Date.now()}`)}getAndDecrypt(e){(0,l.logDebug)(`encryptStoreMsg  getAndDecrypt start ${Date.now()}`);let t=this.getItem(e);if(t&&t.content){let e=this.getCachedPBKDF2InfoKey();(0,l.logDebug)(`encryptStoreMsg  getAndDecrypt mid ${Date.now()}`);let n=d.AES.decrypt(t.content,e.pw).toString(d.enc.Utf8);return(0,l.logDebug)(`encryptStoreMsg  getAndDecrypt end ${Date.now()}`),n}return null}clearCache(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===t){this.cache={};let t=e.cacheKey+this.subKey;localStorage.setItem(t,"")}else{let n=e.cacheKey+this.subKey,r=(0,s.resolveLocalStorage)();c.logDebug(this.cache),this.cache[t]=null;let o=(0,f.safeJsonStringify)(this.cache);c.logDebug(`STORAGE: clean key ${t} @ ${this.cache}`),r.setItem(n,o)}}};e.Storage=u,u.cacheKey="OKXStorageKey"})),Io=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&t(r,e,o);return n(r,e),r},o=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXWalletConnector=void 0;var i=co(),a=lo(),s=Ao(),f=Po(),c=go(),l=m(),d=r(uo()),u=No(),h=(0,c.resolveWebSocketImplementation)();e.OKXWalletConnector=class{constructor(e){if(this.events=new l.EventEmitter,this.state=i.ConnectorState.InitState,this.selectedUrlIndex=0,this.retryCount=0,this.timeOutLimit=8e3,!(0,c.checkWSUrl)(e))throw new Error(`CONNECTOR: invalid url ${e}`);this.url=e,this.heartbeatTimer=null,this.connectionTimeoutTimer=null,this.connectURLStorage=new s.Storage(a.OKXCONNECTOR_CACHE_KEY+a.OKXCONNECTOR_CACHE_KEY)}get connecting(){return this.state==i.ConnectorState.Connecting}onPayload(e){if(!(typeof e.data>"u")){if(d.logDebug("get received data"),d.logDebug(e),"string"==typeof e.data&&"pong"===e.data)return void d.logDebug(`CONNECT: receive pong ${Date.now().toString()}`);this.events.emit("payload",e.data)}}onClose(e){var t;d.logDebug("socket get closed: ",null===(t=this.socket)||void 0===t?void 0:t.url,e.code),this.socket=void 0,this.events.emit("close",e)}onError(e,t){let n={id:e,msg:t.toString()};this.events.emit("payload",n)}onopen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.state=i.ConnectorState.Connected,this.events.emit("open")}emitError(e){this.events.emit("fail",e)}heartbeat(){return o(this,void 0,void 0,(function*(){if(this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.state==i.ConnectorState.Connected||this.state==i.ConnectorState.OnError){if(this.socket){if(this.socket.readyState===WebSocket.OPEN)d.logDebug(`send ping heart beat: ${Date.now().toString()}, ${this.socket}`),this.socket.send("ping"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3);else if(d.logDebug("socket not ready"),this.state==i.ConnectorState.Connected||this.state==i.ConnectorState.OnError){d.logDebug("socket reconnect by heartbeat with state",this.state,this.socket.readyState);try{yield this.tryRegistOpen()}catch{d.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}}else if(d.logDebug("socket not exist"),this.state==i.ConnectorState.Connected||this.state==i.ConnectorState.OnError){d.logDebug("socket reconnect by heartbeat");try{yield this.tryRegistOpen()}catch{d.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}}else d.logDebug("heart beat close")}))}registOpen(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(0,c.checkWSUrl)(e))throw new Error(`CONNECTOR: invalid url ${e}`);this.url=e,t||d.logDebug("Connection connect:",this.url,(new Date).toUTCString()),this.state=i.ConnectorState.Connecting;new URLSearchParams(e).get("origin");return new Promise(((t,n)=>{let r=new h(e,[]);d.logDebug("Connection connect Begin:",this.url,(new Date).toUTCString()),this.startTimeOutTimer(r),(0,c.hasBuiltInWebSocket)()?(d.logDebug("Add socket error handler"),r.onerror=()=>{n(new Error("socket error")),r.close()}):(d.logDebug("Add socket error handler"),r.on("error",(()=>{n(new Error("socket error")),r.close()}))),r.onopen=()=>{d.logDebug("socket opened"),this.resetTimeOutTimer(i.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.FINISHED),this.onopen(r),this.heartbeat(),t(r)}}))}checkMaxRetry(){return d.logDebug("current retry count:",this.retryCount,"of",i.OKXCONNECTOR_WS_URL_LIST.length),this.retryCount>i.OKXCONNECTOR_WS_URL_LIST.length}connectionTryNext(){return o(this,void 0,void 0,(function*(){if(!this.checkMaxRetry()){this.retryCount+=1;let e=this.getNextSelectUrl();return d.logDebug("Connection retry:",e,(new Date).toUTCString()),this.registOpen(e,!0)}d.logDebug("Max Connection retry ",this.retryCount,(new Date).toUTCString())}))}startTimeOutTimer(e){this.connectionTimeoutTimer&&this.resetTimeOutTimer(i.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.CANCELED),this.pendingSocket=e,this.connectionTimeoutTimer=setTimeout((()=>{this.pendingSocket&&this.resetTimeOutTimer(i.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.TIME_OUT)}),this.timeOutLimit)}resetTimeOutTimer(e){var t;e!=i.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.FINISHED&&(null===(t=this.pendingSocket)||void 0===t||t.close(e)),this.pendingSocket=void 0,clearTimeout(this.connectionTimeoutTimer)}cacheSuccessUrlSelect(){this.connectURLStorage.saveContent(this.selectedUrlIndex.toString(),a.OKXCONNECTOR_CACHE_KEY)}getSuccessUrlSelect(){var e;let t=null===(e=this.connectURLStorage.getItem(a.OKXCONNECTOR_CACHE_KEY))||void 0===e?void 0:e.content,n=0;return t&&(n=Number(t)),this.selectedUrlIndex=n,i.OKXCONNECTOR_WS_URL_LIST[n]}getNextSelectUrl(){return this.selectedUrlIndex+=1,this.selectedUrlIndex=this.selectedUrlIndex%i.OKXCONNECTOR_WS_URL_LIST.length,i.OKXCONNECTOR_WS_URL_LIST[this.selectedUrlIndex]}onVisibleChanged(){return o(this,void 0,void 0,(function*(){if("visible"===document.visibilityState&&(d.logDebug(`get changed ${this.state}, ${this.socket}`),this.state==i.ConnectorState.Connected&&typeof this.socket>"u")){d.logDebug("CONNECTION need reopen");try{yield this.tryRegistOpen()}catch{d.logError("regist open failed")}}else;}))}tryRegistOpen(){return o(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;return function*(){if(e.connecting)return d.logDebug("tryRegistOpen => connecting state"),new Promise(((t,n)=>{e.events.once("fail",(e=>(d.logDebug("tryRegistOpen => connecting fail listener",e),n(e)))),e.events.once("open",(()=>typeof e.socket>"u"?n(new Error("Connect lost")):t(e.socket)))}));d.logDebug("tryRegistOpen => try registOpen until retry limit is hit");let n=!1;for(;!e.checkMaxRetry()&&!e.socket;)try{d.logDebug("tryRegistOpen => call registOpen, try count:",e.retryCount,n),yield e.registOpen(t,n)}catch(r){d.logDebug("tryRegistOpen => registOpen failed",r),e.retryCount+=1,t=e.getNextSelectUrl(),n=!0}if(d.logDebug("tryRegistOpen => exit while loop",e.retryCount,e.socket),!e.socket&&e.checkMaxRetry())throw d.logDebug("tryRegistOpen => failed to open a socket",e.retryCount,e.socket),e.retryCount=0,e.state=i.ConnectorState.OnError,e.emitError(new Error("tryRegistOpen failed")),new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.CONNECTION_ERROR,"Failed to connect")}()}))}connect(){return o(this,void 0,void 0,(function*(){try{yield this.tryRegistOpen(),document.removeEventListener("visibilitychange",this.onVisibleChanged.bind(this)),document.addEventListener("visibilitychange",this.onVisibleChanged.bind(this))}catch(ji){throw d.logDebug("connect => failed to connect",ji),ji}}))}disconnect(){return o(this,void 0,void 0,(function*(){return this.state=i.ConnectorState.Disconnected,new Promise(((e,t)=>{typeof this.socket>"u"?e():(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close(),this.heartbeatTimer&&clearTimeout(this.heartbeatTimer))}))}))}currentStatus(){return{state:this.state,url:this.url}}addListener(e,t,n,r){this.listenPayloadHandler&&this.events.removeListener("payload",this.listenPayloadHandler),this.listenPayloadHandler=o=>{var i;d.logDebug(`<<< get payload ${o}`);let a=(0,f.safeJsonParse)(o);if(a.params&&a.params.data){let o=null===(i=a.params.data)||void 0===i?void 0:i.message;if(o)try{let i=t(o);void 0===i?(d.logDebug("CONNECT: decrypt undefined"),r(e,"Decrypt undefined")):n(e,i)}catch(s){d.logDebug(`CONNECT: decrypt failed: ${s}`),r(e,s.message)}}},this.events.on("payload",this.listenPayloadHandler),this.failHandler&&this.events.removeListener("fail",this.failHandler),this.failHandler=t=>{t?(d.logDebug(`CONNECT failed: ${t}`),r(e,t.message)):r(e,"Unkonow error")},this.events.on("fail",this.failHandler)}addPackageParse(e){this.payloadHandler&&this.events.removeListener("payload",this.payloadHandler),this.payloadHandler=t=>o(this,void 0,void 0,(function*(){d.logDebug(`CONNECTION @[${(new Date).toUTCString()}] <<<< received e:${t}`);let n=(0,f.safeJsonParse)(t);yield e(n)})),this.events.on("payload",this.payloadHandler)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}send(e,t){return o(this,void 0,void 0,(function*(){typeof this.socket>"u"&&(d.logDebug(`>>> send payload undefined ${t}`),yield e());try{d.logDebug(`CONNECTION @[${(new Date).toUTCString()}]>>> send payload ${(0,f.safeJsonStringify)(t)}`),this.socket&&this.socket.send((0,f.safeJsonStringify)(t))}catch(n){this.onError(t.id,n)}}))}getMsgPayloadFromHistory(e){return o(this,void 0,void 0,(function*(){if(typeof e>"u")return;let t={params:{data:e}},n=(0,f.safeJsonStringify)(e);d.logDebug("get received data from history"),d.logDebug(n),n=(0,f.safeJsonStringify)(t),this.events.emit("payload",n)}))}onOpen(e){this.openHandler&&this.events.removeListener("open",this.openHandler),this.openHandler=()=>o(this,void 0,void 0,(function*(){d.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> ws opened: `),yield e()})),this.events.on("open",this.openHandler),this.cacheSuccessUrlSelect()}}})),Ko=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CONNECT_METHOD_BATCH_FETCHMSG=e.CONNECT_METHOD_FETCHMSG=e.CONNECT_METHOD_RECEIVE=e.CONNECT_METHOD_UNSUB=e.CONNECT_METHOD_SUB=e.CONNECT_METHOD_PUBLISH=e.CONNECT_METHOD_LOGIN=e.CONNECT_METHOD_PUSH=void 0,e.CONNECT_METHOD_PUSH="push",e.CONNECT_METHOD_LOGIN="login",e.CONNECT_METHOD_PUBLISH="publish",e.CONNECT_METHOD_SUB="subscribe",e.CONNECT_METHOD_UNSUB="unsubscribe",e.CONNECT_METHOD_RECEIVE="receive",e.CONNECT_METHOD_FETCHMSG="fetchMessages",e.CONNECT_METHOD_BATCH_FETCHMSG="batchFetchMessages"})),Mo=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OKXCONNECTOR_JWT_TTL=e.OKXCONNECTOR_JWT_WALLET_SIDE=e.OKXCONNECTOR_JWT_SIDE=void 0,e.OKXCONNECTOR_JWT_SIDE="wallet",e.OKXCONNECTOR_JWT_WALLET_SIDE="dapp",e.OKXCONNECTOR_JWT_TTL=864e5})),jo=p((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.SessionCrypto=void 0;var n=t(P()),r=go();e.SessionCrypto=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.nonceLength=24,this.sessionKeyPair=e?this.createKeypairFromString(e):this.createKeypair()}createKeypair(){return n.default.box.keyPair()}createKeypairFromString(e){return{publicKey:(0,r.hexToByteArray)(e.publicKey),secretKey:(0,r.hexToByteArray)(e.secretKey)}}createNonce(){return n.default.randomBytes(this.nonceLength)}get keyPair(){return this.sessionKeyPair}encrypt(e,t){let o=(new TextEncoder).encode(e),i=this.createNonce(),a=n.default.box(o,i,(0,r.hexToByteArray)(t),this.keyPair.secretKey),s=(0,r.concatUint8Arrays)(i,a);var f=(0,r.toHexString)(s),c=(new TextEncoder).encode(f);return(0,r.base64encode)(c,!1)}encryptWallet(e,t){let o=(new TextEncoder).encode(e),i=this.createNonce(),a=n.default.box(o,i,(0,r.hexToByteArray)(t),this.keyPair.secretKey),s=(0,r.concatUint8Arrays)(i,a);return(0,r.base64encode)(s,!1)}decrypt(e,t){let o=(0,r.base64decode)(e,!0).toUint8Array(),[i,a]=(0,r.splitToUint8Arrays)(o,this.nonceLength),s=n.default.box.open(a,i,(0,r.hexToByteArray)(t),this.keyPair.secretKey);if(!s)throw new Error(`Decryption error: \n message: ${e.toString()} \n sender pubkey: ${t.toString()} \n keypair pubkey: ${(0,r.toHexString)(this.keyPair.publicKey)} \n keypair secretkey: ${(0,r.toHexString)(this.keyPair.secretKey)}`);return(new TextDecoder).decode(s)}decryptWallet(e,t){let o=(0,r.base64decode)(e,!0),i=(0,r.hexToByteArray)(o.toString()),[a,s]=(0,r.splitToUint8Arrays)(i,this.nonceLength),f=n.default.box.open(s,a,(0,r.hexToByteArray)(t),this.keyPair.secretKey);if(!f)throw new Error(`Decryption error: \n message: ${e.toString()} \n sender pubkey: ${t.toString()} \n keypair pubkey: ${(0,r.toHexString)(this.keyPair.publicKey)} \n keypair secretkey: ${(0,r.toHexString)(this.keyPair.secretKey)}`);return(new TextDecoder).decode(f)}stringifyKeypair(){return{publicKey:(0,r.toHexString)(this.keyPair.publicKey),secretKey:(0,r.toHexString)(this.keyPair.secretKey)}}}})),Uo=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&t(r,e,o);return n(r,e),r},o=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},i=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.MULTICODEC_ED25519_LENGTH=e.MULTICODEC_ED25519_HEADER=e.MULTICODEC_ED25519_BASE=e.MULTICODEC_ED25519_ENCODING=e.DID_METHOD=e.DID_PREFIX=e.DID_DELIMITER=e.KEY_PAIR_SEED_LENGTH=e.DATA_ENCODING=e.JSON_ENCODING=e.JWT_ENCODING=e.JWT_DELIMITER=e.JWT_IRIDIUM_TYP=e.JWT_IRIDIUM_ALG=e.JWTHeaderType=void 0,e.generateKeyPair=function(){return c.default.sign.keyPair()},e.decodeJSON=u,e.encodeJSON=h,e.encodeIss=p,e.decodeIss=g,e.encodeSig=b,e.decodeSig=y,e.encodeData=v,e.decodeData=function(t){var n,r;let o=(0,d.okxtoString)(t,e.DATA_ENCODING).split(e.JWT_DELIMITER),i=u(null!==(n=o[0])&&void 0!==n?n:"{}"),a=u(null!==(r=o[1])&&void 0!==r?r:"{}");return{header:i,payload:a}},e.encodeJWT=m,e.decodeJWT=C,e.signJWT=function(t,n,r,i){return o(this,arguments,void 0,(function(t,n,r,o){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Math.floor(Date.now());return function*(){let a={alg:e.JWT_IRIDIUM_ALG,typ:e.JWT_IRIDIUM_TYP},s={iss:p(o.publicKey),sub:t,aud:n,act:"authenticate user",iat:i,exp:i+r},f=v({header:a,payload:s});return l.logDebug(`get sec kp: ${o.secretKey} {${o.secretKey.length}}`),m({header:a,payload:s,signature:c.default.sign.detached(f,o.secretKey)})}()}))},e.verifyJWT=function(t){return o(this,void 0,void 0,(function*(){let{header:n,payload:r,data:o,signature:i}=C(t);if(n.alg!==e.JWT_IRIDIUM_ALG||n.typ!==e.JWT_IRIDIUM_TYP)throw new Error("JWT must use EdDSA algorithm");let s=g(r.iss);return a.verify(s,o,i)}))};var a=r(Wr()),s=ho(),f=go(),c=i(P()),l=r(uo()),d=po();function u(t){return(0,s.safeJsonParse)((0,d.okxtoString)((0,d.okxfromString)(t,e.JWT_ENCODING),e.JSON_ENCODING))}function h(t){return(0,d.okxtoString)((0,d.okxfromString)((0,s.safeJsonStringify)(t),e.JSON_ENCODING),e.JWT_ENCODING)}function p(t){l.logDebug(`publicKey: ${(0,f.toHexString)(t)}`);var n=(0,d.okxtoString)(t,e.MULTICODEC_ED25519_ENCODING);return[e.DID_PREFIX,e.DID_METHOD,n].join(e.DID_DELIMITER)}function g(t){let[n,r,o]=t.split(e.DID_DELIMITER);if(n!==e.DID_PREFIX||r!==e.DID_METHOD)throw new Error('Issuer must be a DID with method "key"');if(void 0===o)throw new Error("multicodec is undefined");let i=(0,d.okxfromString)(o,e.MULTICODEC_ED25519_ENCODING);if(void 0===i||i.length!==e.MULTICODEC_ED25519_LENGTH)throw new Error("Issuer must be a public key with length 32 bytes");return i}function b(t){return(0,d.okxtoString)(t,e.JWT_ENCODING)}function y(t){return(0,d.okxfromString)(t,e.JWT_ENCODING)}function v(t){return(0,d.okxfromString)([h(t.header),h(t.payload)].join(e.JWT_DELIMITER),e.DATA_ENCODING)}function m(t){return[h(t.header),h(t.payload),b(t.signature)].join(e.JWT_DELIMITER)}function C(t){var n,r,o;let i=t.split(e.JWT_DELIMITER);return{header:u(null!==(n=i[0])&&void 0!==n?n:"{}"),payload:u(null!==(r=i[1])&&void 0!==r?r:"{}"),signature:y(null!==(o=i[2])&&void 0!==o?o:"{}"),data:(0,d.okxfromString)(i.slice(0,2).join(e.JWT_DELIMITER),e.DATA_ENCODING)}}e.JWTHeaderType="dapp",e.JWT_IRIDIUM_ALG="EdDSA",e.JWT_IRIDIUM_TYP="JWT",e.JWT_DELIMITER=".",e.JWT_ENCODING="base64url",e.JSON_ENCODING="utf8",e.DATA_ENCODING="utf8",e.KEY_PAIR_SEED_LENGTH=32,e.DID_DELIMITER=":",e.DID_PREFIX="did",e.DID_METHOD="key",e.MULTICODEC_ED25519_ENCODING="base58btc",e.MULTICODEC_ED25519_BASE="z",e.MULTICODEC_ED25519_HEADER="K36",e.MULTICODEC_ED25519_LENGTH=32})),Lo=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&t(r,e,o);return n(r,e),r},o=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionManager=void 0;var i=Io(),a=Ko(),s=lo(),f=Mo(),c=co(),l=m(),d=Ao(),u=go(),h=jo(),p=Uo(),g=ho(),b=r(uo()),y=uo(),v=Do();e.ConnectionManager=class{constructor(){this.events=new l.EventEmitter,this.connectStorage=new d.Storage(s.OKXCONNECTOR_CACHE_KEY_DAPP),this.crypto=new h.SessionCrypto;let e=(0,v.isInTMA)();if((0,y.logDebug)("do init:",e),e){let e=this.getCachedCryptoKeyPair();(0,y.logDebug)("use same pk:",e),this.crypto=new h.SessionCrypto(e)}this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new i.OKXWalletConnector(c.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.connectedWalletPK="",this.currentTopic="",b.logDebug(`this.connectedWalletPK  constructor   ${this.connectedWalletPK}`)}refreshPackageId(){this.packageId=Date.now()}saveCryptoKeyPair(e){let t=(0,g.safeJsonStringify)(e);this.connectStorage.encryptStoreMsg(t,s.OKXCONNECTOR_CRYPTO_KEY)}getCachedCryptoKeyPair(){let e=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_CRYPTO_KEY);return"string"==typeof e?(b.logDebug("get cached crypto key:"),b.logDebug(e),(0,g.safeJsonParse)(e)):(this.connectStorage.clearCache(),null)}saveJWTKeyPair(e){var t={publicKey:(0,u.toHexString)(e.publicKey),secretKey:(0,u.toHexString)(e.secretKey)};b.logDebug("save jwt kp");let n=(0,g.safeJsonStringify)(t);b.logDebug(n),this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_JWT_KEY)}getCachedJWTKeyPair(){let e=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_JWT_KEY);if("string"==typeof e){b.logDebug("get cached jwt kp:"),b.logDebug(e);let t=(0,g.safeJsonParse)(e);return b.logDebug("save jwt kp"),b.logDebug(t),{publicKey:(0,u.hexToByteArray)(t.publicKey),secretKey:(0,u.hexToByteArray)(t.secretKey)}}return(0,p.generateKeyPair)()}isWalletPKReady(){return b.logDebug(`isWalletPKReady  ===> ${this.connectedWalletPK}`),this.connectedWalletPK.length>0}makeJWT(e){return o(this,void 0,void 0,(function*(){return yield(0,p.signJWT)(e,f.OKXCONNECTOR_JWT_SIDE,f.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)}))}parsePackage(e){return o(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){var r,o,i,a,f;if(t.events.emit(e.id,e),!n){yield t.sendACK(e.id,!0);let n=null===(r=t.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE))||void 0===r?void 0:r.content;if(n){let r=e;null!==(i=null===(o=r.params)||void 0===o?void 0:o.data)&&void 0!==i&&i.messageId&&(t.refreshPackageId(),yield t.sendReceive(t.packageId.toString(),null===(f=null===(a=r.params)||void 0===a?void 0:a.data)||void 0===f?void 0:f.messageId,n))}}}()}))}restoreConnect(e){return o(this,void 0,void 0,(function*(){if(b.logDebug(`connectionManager  restoreConenct   ${e}`),"string"!=typeof e||0===e.length)throw new Error("CONNECTION: invalid topic");b.logDebug("connectionManager  restoreConenct   disconnect"),yield this.disconnect(!0),this.connectStorage.saveContent(e,s.OKXCONNECTOR_TOKEN_CACHE),b.logDebug("connectionManager  restoreConenct   conect"),yield this.connect(!0)}))}getConnectInfo(){var e=(0,u.generateTopic)();return b.logDebug(`generate topic token: ${e}`),this.currentTopic=e,{channelId:e,clientId:this.crypto.stringifyKeypair().publicKey}}connect(){return o(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){e.timeLog=(new Date).getTime(),(0,y.logDebug)("ConnectTime---enter->",e.timeLog);let n=e.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE);var r=e.currentTopic;if(b.logDebug(`generate topic token: ${r}`),t){typeof n<"u"&&null!==n&&(b.logDebug(`read last connect id: ${n}`),r=n.content);var i=e.connectStorage.getItem(s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE);i&&(e.connectedWalletPK=i.content,(0,y.logDebug)(`connectionManager connect() this.connectedWalletPK : ${e.connectedWalletPK}`))}if(t){let t=e.getCachedCryptoKeyPair();t&&(e.crypto=new h.SessionCrypto(t))}b.logDebug(`use crypto client id: ${e.crypto.stringifyKeypair().publicKey}`),e.connectStorage.saveContent(r,s.OKXCONNECTOR_TOKEN_CACHE);var f=yield e.makeJWT(r);return b.logDebug(`generate jwt token: ${f}`),e.connectStorage.saveContent(f,"jwt"),new Promise(((t,n)=>{e.connector.onOpen((()=>o(e,void 0,void 0,(function*(){b.logDebug("1. connector on open");let e=(new Date).getTime();(0,y.logDebug)("ConnectTime---open->",e-this.timeLog),this.events.once(this.packageId.toString(),(e=>o(this,void 0,void 0,(function*(){if(e&&e.error){b.logError("failed when login"),yield this.connector.disconnect();var i=new Error;i.message=e.error.message,i.name=e.error.code.toString(),n(i)}this.refreshPackageId(),this.events.once(this.packageId.toString(),(e=>o(this,void 0,void 0,(function*(){if(e&&e.error){b.logError("failed when subscribe"),yield this.connector.disconnect();var o=new Error;o.message=e.error.message,o.name=e.error.code.toString(),n(o)}this.refreshPackageId(),b.logDebug(`4. subscribe callback then send fetch: ${this.packageId}`);let i=(new Date).getTime();(0,y.logDebug)("ConnectTime--subscribe callback->",i-this.timeLog),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),r),t()})))),b.logDebug(`3. login callback then send subscribe: ${this.packageId}`);let s=(new Date).getTime();(0,y.logDebug)("ConnectTime---login callback->",s-this.timeLog),yield this.connector.send((()=>o(this,void 0,void 0,(function*(){b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e),n(e)}))}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_SUB,params:{topic:r}})})))),b.logDebug("2. login called"),yield this.connector.send((()=>o(this,void 0,void 0,(function*(){b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e),n(e)}))}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_LOGIN,params:{token:f}}),this.connector.addPackageParse((e=>{var t;if(b.logDebug("connect: parse package"),b.logDebug(e),!("params"in e)||!("data"in e.params))return void this.parsePackage(e,!0);let n=null===(t=e.params.data)||void 0===t?void 0:t.message;if(typeof n<"u"){n=n.replace(/'/g,'"');let e=(0,g.safeJsonParse)(n);"string"!=typeof e&&"clientId"in e&&e.clientId&&e.clientId.length>0&&(this.connectedWalletPK=e.clientId,b.logDebug(`this.connectedWalletPK  addPackageParse   ${this.connectedWalletPK}`),this.connectStorage.saveContent(this.connectedWalletPK,s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),this.saveCryptoKeyPair(this.crypto.stringifyKeypair()))}this.parsePackage(e,e.method===a.CONNECT_METHOD_RECEIVE)}))})))),e.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e),n(e)}))}))}()}))}disconnect(){return o(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){yield e.connector.disconnect(),e.connectStorage.clearCache(s.OKXCONNECTOR_TOKEN_CACHE),t||(e.connectStorage.clearCache(s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),e.connectedWalletPK="",(0,y.logDebug)(`connectionManager disconnect() this.connectedWalletPK : ${e.connectedWalletPK}`))}()}))}addListener(e,t,n){this.connector.addListener((0,g.safeJsonStringify)(e),(e=>{if(e=e.replace(/'/g,'"'),b.logDebug(`addListener ===> ${e}`),typeof e<"u"){var t=(0,g.safeJsonParse)(e),n=t.message;t.clientId&&t.clientId.length>0&&(this.connectedWalletPK=t.clientId,this.connectStorage.saveContent(this.connectedWalletPK,s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),b.logDebug(`this.connectedWalletPK  addListener   ${this.connectedWalletPK}`),b.logDebug(`this.cryptoKey  addListener   ${(0,u.toHexString)(this.crypto.keyPair.publicKey)}`),this.saveCryptoKeyPair(this.crypto.stringifyKeypair()));var r=this.crypto.decrypt(n,this.connectedWalletPK);return b.logDebug(`addListener ===> ${r}`),r}}),t,n)}sendRaw(e){return o(this,void 0,void 0,(function*(){b.logDebug(`message send =====> ${e}`);let t=e;b.logDebug(`message send =====encrypt message.length>>>> ${t.length}`);let n=this.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE);b.logDebug(`message send =====topic>>>> ${n?.content}`),this.refreshPackageId();let r={id:this.packageId.toString(),method:a.CONNECT_METHOD_PUBLISH,jsonrpc:c.CONNECT_JSONRPC_VER,params:{message:{topic:n?.content,message:t,ttl:c.OKXCONNECTOR_MESSAGE_TTL}}};return this.events.once(this.packageId.toString(),(e=>o(this,void 0,void 0,(function*(){e&&e.error?b.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&b.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>o(this,void 0,void 0,(function*(){b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e)}))}))),r),this.packageId}))}send(e){return o(this,void 0,void 0,(function*(){if(b.logDebug(`message send =====> ${e}`),!this.isWalletPKReady())throw new Error("connection not finish");let t=this.crypto.encrypt(e,this.connectedWalletPK);b.logDebug(`message send =====encrypt message.length>>>> ${t.length}`);let n=this.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE);b.logDebug(`message send =====topic>>>> ${n?.content}`),this.refreshPackageId();let r={id:this.packageId.toString(),method:a.CONNECT_METHOD_PUBLISH,jsonrpc:c.CONNECT_JSONRPC_VER,params:{message:{topic:n?.content,message:t,ttl:c.OKXCONNECTOR_MESSAGE_TTL}}};return this.events.once(this.packageId.toString(),(e=>o(this,void 0,void 0,(function*(){e&&e.error?b.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&b.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>o(this,void 0,void 0,(function*(){b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e)}))}))),r),this.packageId}))}sendACK(e,t){return o(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function*(){if(!0===t){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,result:!0};yield n.connector.send((()=>o(n,void 0,void 0,(function*(){b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e)}))}))),t)}else if(r){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,error:{code:r.code,message:r.message}};yield n.connector.send((()=>o(n,void 0,void 0,(function*(){b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e)}))}))),t)}}()}))}sendReceive(e,t,n){return o(this,void 0,void 0,(function*(){let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send((()=>o(this,void 0,void 0,(function*(){b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e)}))}))),r)}))}sendConnectSessionInfo(e,t,n,r){return o(this,void 0,void 0,(function*(){}))}sendFetchAndConsumeMessages(e,t){return o(this,void 0,void 0,(function*(){this.events.once(e,(e=>o(this,void 0,void 0,(function*(){var n,r;if(e.result){var o=e.result.hasMore,i=e.result.data;if(i)for(let e=0;e<i.length;e++){let n=i[e];if(n&&n.topic==t){let e=n.messageId;yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}o&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else b.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})))),b.logDebug("5. send fetch more");let n=(new Date).getTime();(0,y.logDebug)("ConnectTime---5->",n-this.timeLog);let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send((()=>o(this,void 0,void 0,(function*(){b.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e)}))}))),r)}))}cleanCache(){return o(this,void 0,void 0,(function*(){this.connectStorage.clearCache()}))}saveSessionContent(e,t){t||this.connectStorage.clearCache(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,g.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t)return(0,g.safeJsonParse)(t)}getCurrentConnectionReady(){return this.isWalletPKReady()}}})),Wo=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnectionManagerEvent=e.WalletConnectionManagerTopicInfoCacheKey=void 0,e.WalletConnectionManagerTopicInfoCacheKey="wcmtic",e.WalletConnectionManagerEvent={RECEIVE_REQUEST:"payload"}})),Bo=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&t(r,e,o);return n(r,e),r},o=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnectionManager=void 0;var i=Io(),a=Ko(),s=lo(),f=Mo(),c=co(),l=Wo(),d=m(),u=Ao(),h=go(),p=jo(),g=Uo(),b=ho(),y=r(uo()),v=uo(),C=Po();e.WalletConnectionManager=class{constructor(){this.events=new d.EventEmitter,this.communicateEvents=new d.EventEmitter,y.logDebug("connect manager construct"),this.connectStorage=new u.Storage(s.OKXCONNECTOR_CACHE_KEY),this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new i.OKXWalletConnector(c.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.sessionCryptoInfoMap=new Map,this.inLogin=!1,this.isLogined=!1}refreshPackageId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.packageId=Date.now()+e}saveCryptoKeyPair(e,t){let n=(0,b.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_CRYPTO_KEY+e)}getCachedCryptoKeyPair(e){let t=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_CRYPTO_KEY+e);return"string"==typeof t?(y.logDebug("get cached crypto key:"),y.logDebug(t),(0,b.safeJsonParse)(t)):(this.connectStorage.clearCache(),null)}saveJWTKeyPair(e){var t={publicKey:(0,h.toHexString)(e.publicKey),secretKey:(0,h.toHexString)(e.secretKey)};y.logDebug("save jwt kp");let n=(0,b.safeJsonStringify)(t);y.logDebug(n),this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_JWT_KEY),y.logDebug("after save jwt kp")}getCachedJWTKeyPair(){let e=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_JWT_KEY);if("string"==typeof e){y.logDebug("get cached jwt kp:"),y.logDebug(e);let t=(0,b.safeJsonParse)(e);return y.logDebug("save jwt kp"),y.logDebug(t),{publicKey:(0,h.hexToByteArray)(t.publicKey),secretKey:(0,h.hexToByteArray)(t.secretKey)}}return(0,g.generateKeyPair)()}isTopicPublicKeyExist(e){return y.logDebug(`isTopicPublicKeyExist  ===> ${e}`),this.sessionCryptoInfoMap.get(e)}makeJWT(e){return o(this,void 0,void 0,(function*(){return yield(0,g.signJWT)(e,f.OKXCONNECTOR_JWT_WALLET_SIDE,f.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)}))}parseInternalMsg(e){try{let t=(0,b.safeJsonParse)(e)["ivur-igbfft-ptjip"];if(t&&t.length>0)return(0,C.base64decode)(t,!0).toString()}catch(Ui){y.logError("parse internal msg",Ui)}}parsePackage(e,t){return o(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function*(){var o,i,a,s,f,c,l,d,u,h,p;n.events.emit(t.id,t);let g=n.sessionCryptoInfoMap.get(e);if(y.logDebug("get sessionInfo for decrypt topic:",e),y.logDebug("get sessionInfo for decrypt:",t.id,e,g,n.sessionCryptoInfoMap),g&&t.params.data&&null!==(o=t.params.data)&&void 0!==o&&o.message)if(null!==(i=t.params.data)&&void 0!==i&&i.isInternalData){let e=null===(a=t.params.data)||void 0===a?void 0:a.message,r=null===(s=t.params.data)||void 0===s?void 0:s.topic,o=n.parseInternalMsg(e);(0,v.logDebug)("parse internal origin: ",o),o&&o.length>0&&n.communicateEvents.emit("origin",o,r)}else try{let r=null===(f=t.params.data)||void 0===f?void 0:f.message;if(r.trimStart().startsWith("{")){let t=(0,b.safeJsonParse)(r);t.method&&((0,v.logDebug)("<<< parse raw msg:",e,t),n.communicateEvents.emit(e,r))}else{let r=g.crypto.decryptWallet(null===(c=t.params.data)||void 0===c?void 0:c.message,g.dappPublicKey);(0,v.logDebug)("<<< receive msg:",e,r),n.communicateEvents.emit(e,r)}}catch{let r=g.crypto.decryptWallet(null===(l=t.params.data)||void 0===l?void 0:l.message,g.dappPublicKey);(0,v.logDebug)("<<< receive msg:",e,r),n.communicateEvents.emit(e,r)}if(!r&&(yield n.sendACK(t.id,!0),e)){let r=t;null!==(u=null===(d=r.params)||void 0===d?void 0:d.data)&&void 0!==u&&u.messageId&&(n.refreshPackageId(),yield n.sendReceive(n.packageId.toString(),null===(p=null===(h=r.params)||void 0===h?void 0:h.data)||void 0===p?void 0:p.messageId,e))}}()}))}recovrySessionInfoFromCache(){let e=this.connectStorage.getAndDecrypt(l.WalletConnectionManagerTopicInfoCacheKey);if(y.logDebug("get cached sessionInfos:",e),e){let t=(0,b.safeJsonParse)(e);for(let e in t){let n=t[e];y.logDebug("make topicItem:",n);let r={topic:e,crypto:new p.SessionCrypto({publicKey:n.cryptoKeyPair.publicKey,secretKey:n.cryptoKeyPair.secretKey}),dappPublicKey:n.dappPublicKey};this.sessionCryptoInfoMap.set(e,r)}}y.logDebug("get cached sessionInfos map:",this.sessionCryptoInfoMap)}syncCacheSessionInfo(){let e={};for(let[n,r]of this.sessionCryptoInfoMap)y.logDebug("for each Keys",n),r&&(e[n]={cryptoKeyPair:r.crypto.stringifyKeypair(),dappPublicKey:r.dappPublicKey});let t=(0,b.safeJsonStringify)(e);y.logDebug("sync cache sessionInfos:",t),this.connectStorage.encryptStoreMsg(t,l.WalletConnectionManagerTopicInfoCacheKey)}cacheSessionInfo(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.dappPublicKey,o=[];for(let[i,a]of this.sessionCryptoInfoMap)y.logDebug("for each Keys",i),a.dappPublicKey==r&&(y.logDebug("duplicated dapp public key:",i,r),o.push(i));for(let[i,a]of this.sessionCryptoInfoMap)o.includes(i)&&this.sessionCryptoInfoMap.delete(i);return y.logDebug("cleaned connect session cache:",this.sessionCryptoInfoMap),this.sessionCryptoInfoMap.set(e,t),y.logDebug("cache sessionInfo:",e,t,this.sessionCryptoInfoMap),n&&this.syncCacheSessionInfo(),o}appendTopic(e,t){return o(this,void 0,void 0,(function*(){return(0,v.logDebug)("4.1. get append Topic:",e),new Promise(((n,r)=>o(this,void 0,void 0,(function*(){if(!this.isLogined){var o=new Error;return o.message="connection is not logined",o.name="append error",void r(o)}let i={topic:e,crypto:new p.SessionCrypto,dappPublicKey:t},a=this.cacheSessionInfo(e,i,!1);yield this.subscribeTopics(Array.from([e])),this.refreshPackageId(),y.logDebug(`5. subscribe callback then fetch append message: ${this.packageId}, ${e}`);let s=(new Date).getTime();(0,v.logDebug)("Append --subscribe callback->",s-this.timeLog),n(a)}))))}))}confirmAppendingTopics(){this.syncCacheSessionInfo()}connect(){return o(this,void 0,void 0,(function*(){this.timeLog=(new Date).getTime(),(0,v.logDebug)("[Wallet] ConnectTime---enter->",this.timeLog);let e=Date.now().toString();var t=yield this.makeJWT(e);return y.logDebug(`generate jwt token: ${t}`),this.connectStorage.saveContent(t,"jwt"),this.recovrySessionInfoFromCache(),new Promise(((e,n)=>{this.inLogin=!0,this.connector.onOpen((()=>o(this,void 0,void 0,(function*(){y.logDebug("1. connector on open");let r=(new Date).getTime();(0,v.logDebug)("ConnectTime---open->",r-this.timeLog),this.events.once(this.packageId.toString(),(t=>o(this,void 0,void 0,(function*(){if(t&&t.error){y.logError("failed when login"),yield this.connector.disconnect();var r=new Error;r.message=t.error.message,r.name=t.error.code.toString(),n(r)}else this.isLogined=!0,e(),y.logDebug("3. subscribe cached topics",this.sessionCryptoInfoMap),this.sessionCryptoInfoMap.size>0&&(yield this.subscribeTopics(Array.from(this.sessionCryptoInfoMap.keys())))})))),y.logDebug("2. login called"),yield this.connector.send((()=>o(this,void 0,void 0,(function*(){y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,v.logDebug)("WalletConnectionManager connect error",e)}))}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_LOGIN,params:{token:t}})})))),this.connector.connect().catch((e=>{(0,v.logDebug)("WalletConnectionManager connect error",e),n(e)})),this.connector.addPackageParse((e=>{var t,n;y.logDebug("connect: parse package"),y.logDebug(e),"params"in e&&"data"in e.params?null!==(t=e.params.data)&&void 0!==t&&t.topic&&this.parsePackage(null===(n=e.params.data)||void 0===n?void 0:n.topic,e,e.method===a.CONNECT_METHOD_RECEIVE):this.parsePackage("",e,!0)}))}))}))}getSessionPublicKey(e){if(this.isTopicPublicKeyExist(e)){let t=this.sessionCryptoInfoMap.get(e);if(t)return(0,h.toHexString)(t.crypto.keyPair.publicKey)}}getCurrentCachedTopicIdList(){return Array.from(this.sessionCryptoInfoMap.keys())}disconnect(){return o(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){yield e.connector.disconnect(),e.connectStorage.clearCache(s.OKXCONNECTOR_TOKEN_CACHE),t||e.connectStorage.clearCache(s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE)}()}))}send(e,t){return o(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function*(){var i,s;if(y.logDebug(`message send =====> ${t}`),!n.isTopicPublicKeyExist(e))throw new Error("connection not finish");let f=null===(i=n.sessionCryptoInfoMap.get(e))||void 0===i?void 0:i.dappPublicKey,l=null===(s=n.sessionCryptoInfoMap.get(e))||void 0===s?void 0:s.crypto;if(l&&f){let i={message:l.encryptWallet(t,f)};r&&(i.clientId=(0,h.toHexString)(l.keyPair.publicKey)),n.refreshPackageId();let s={id:n.packageId.toString(),method:a.CONNECT_METHOD_PUBLISH,jsonrpc:c.CONNECT_JSONRPC_VER,params:{message:{topic:e,message:(0,b.safeJsonStringify)(i),ttl:c.OKXCONNECTOR_MESSAGE_TTL}}};return n.events.once(n.packageId.toString(),(e=>o(n,void 0,void 0,(function*(){e&&e.error?y.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&y.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield n.connector.send((()=>o(n,void 0,void 0,(function*(){y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,v.logDebug)("WalletConnectionManager connect error",e)}))}))),s),n.packageId}}()}))}sendACK(e,t){return o(this,arguments,void 0,(function(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function*(){if(!0===t){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,result:!0};yield n.connector.send((()=>o(n,void 0,void 0,(function*(){y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,v.logDebug)("WalletConnectionManager connect error",e)}))}))),t)}else if(r){let t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,error:{code:r.code,message:r.message}};yield n.connector.send((()=>o(n,void 0,void 0,(function*(){y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,v.logDebug)("WalletConnectionManager connect error",e)}))}))),t)}}()}))}sendReceive(e,t,n){return o(this,void 0,void 0,(function*(){let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send((()=>o(this,void 0,void 0,(function*(){y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,v.logDebug)("WalletConnectionManager connect error",e)}))}))),r)}))}sendUnsubscribe(e){return o(this,void 0,void 0,(function*(){yield this.connector.send((()=>o(this,void 0,void 0,(function*(){y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,v.logDebug)("WalletConnectionManager connect error",e)}))}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_UNSUB,params:{topic:e}}),this.sessionCryptoInfoMap.delete(e),this.syncCacheSessionInfo()}))}sendFetchAndConsumeMessages(e,t){return o(this,void 0,void 0,(function*(){this.events.once(e,(e=>o(this,void 0,void 0,(function*(){var n,r;if(e.result){var o=e.result.hasMore,i=e.result.data;if(i)for(let e=0;e<i.length;e++){let n=i[e];if(n&&n.topic==t){let e=n.messageId;yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}o&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else y.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})))),y.logDebug("5. send fetch more");let n=(new Date).getTime();(0,v.logDebug)("ConnectTime---5->",n-this.timeLog);let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send((()=>o(this,void 0,void 0,(function*(){y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,v.logDebug)("WalletConnectionManager connect error",e)}))}))),r)}))}sendBatchFetchAndConsumeMessages(e,t){return o(this,void 0,void 0,(function*(){this.events.once(e,(e=>o(this,void 0,void 0,(function*(){var n,r;if(e.result){var o=e.result.hasMore,i=e.result.data;if(i)for(let e=0;e<i.length;e++){let t=i[e];if(t&&t.topic){let n=t.messageId;yield this.connector.getMsgPayloadFromHistory(t),this.refreshPackageId(e),yield this.sendReceive(this.packageId.toString(),n,t.topic)}}o&&(this.refreshPackageId(),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),t))}else y.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})))),y.logDebug("5. send fetch more");let n=(new Date).getTime();(0,v.logDebug)("ConnectTime---5->",n-this.timeLog);let r={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_BATCH_FETCHMSG,params:{topics:t,withInternalData:!0}};yield this.connector.send((()=>o(this,void 0,void 0,(function*(){y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),r)}))}cleanCache(){return o(this,void 0,void 0,(function*(){this.connectStorage.clearCache()}))}saveSessionContent(e,t){t||this.connectStorage.clearCache(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,b.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t)return(0,b.safeJsonParse)(t)}subscribeTopics(e){return o(this,void 0,void 0,(function*(){(0,v.logDebug)("4. topicid list",e),this.refreshPackageId();let t=(new Date).getTime();return(0,v.logDebug)("ConnectTime--subscribe callback->",t-this.timeLog),new Promise(((t,n)=>o(this,void 0,void 0,(function*(){let n=0;for(let r=0;r<e.length;++r){let i=e[r];this.refreshPackageId(r),this.events.once(this.packageId.toString(),(a=>o(this,void 0,void 0,(function*(){if(a&&a.error){y.logError("failed when subscribe"),yield this.connector.disconnect();var o=new Error;o.message=a.error.message,o.name=a.error.code.toString(),n+=1,n==e.length&&t()}this.refreshPackageId(r);let s=(new Date).getTime();(0,v.logDebug)("ConnectTime--subscribe callback->",s-this.timeLog),n+=1,n==e.length&&(y.logDebug(`5. send fetch msg: ${this.packageId}, ${i}`),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),e),t())})))),y.logDebug(`3. login callback then send subscribe: ${this.packageId}, ${i}`);let s=(new Date).getTime();(0,v.logDebug)("ConnectTime---login callback->",s-this.timeLog),yield this.connector.send((()=>o(this,void 0,void 0,(function*(){y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,v.logDebug)("WalletConnectionManager connect error",e)}))}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:a.CONNECT_METHOD_SUB,params:{topic:i}})}}))))}))}}})),Xo=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.buildNameSpacesByConnectResponse=function(e){return n(e)},e.buildRequestAccountNameSpacesByConnectResponse=n;var t=uo();function n(e){let n={};(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse start connectResponse>>",JSON.stringify(e));let r=e.payload.responses.find((e=>"requestAccounts"===e.name)),o=e.payload.responses.find((e=>"ton_addr"===e.name)),i=e.payload.responses.find((e=>"ton_proof"===e.name));if(o&&!r){(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse adapt ton data >>");let e=o.address;e="ton:"+o.network+":"+e;let n={ton_addr:o};i&&(n.ton_proof=i),r={name:"requestAccounts",accounts:[{namespace:"ton",addresses:[e],methods:["ton_sendTransaction"],extra:{},data:n}]}}return(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse end universalResponse>>>",JSON.stringify(r)),r.accounts.forEach((e=>{var r=[],o=[];e.addresses.forEach((e=>{var n=e.split(":");if((0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse addressArr>>",n.length),n.length>=3){let i=n.slice(0,2).join(":");r.push(i),o.push(e),(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse chain:>>",i,"addressItem:",e)}})),e.data&&e.data.ton_addr&&(e.data.ton_addr.name="ton_addr"),e.data&&e.data.ton_proof&&(e.data.ton_proof.name="ton_proof"),n[e.namespace]={chains:r,accounts:o,methods:e.methods,extra:e.extra,payload:e.data},(0,t.logDebug)("buildRequestAccountNameSpacesByConnectResponse result>>",JSON.stringify(n))})),n}})),$o=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Engine=void 0;var n=ho(),r=uo(),o=No(),i=Po(),a=Po(),s=Xo(),f=Do();e.Engine=class{constructor(e){this.pendingRequests=new Map,this.disconnectListener=[],this.connectionManager=e,this.connectionManager.addListener("sdk_response",((e,t)=>{var o=(0,n.safeJsonParse)(t);(0,r.logDebug)(`Engine ==>> addListener ==> success ==> ${o}`),this.handleResponse(e,o)}),(function(){}))}addDisconnectListener(e){this.disconnectListener.push(e)}disconnect(){(0,r.logDebug)("Engine ==>> disconnect"),this.pendingRequests.clear()}getRequestId(){let e=Date.now().toString();return(0,r.logDebug)("Engine ==>> getRequestId ==>",e),e}bindRequestForPromise(e,t){this.pendingRequests.set(e,t)}send(e,o,i){return t(this,void 0,void 0,(function*(){(0,r.logDebug)("Engine ==>> send  request==>",JSON.stringify(e));let t=this.getRequestId();try{let i=yield this.connectionManager.send(JSON.stringify(Object.assign(Object.assign({},e),{requestId:t})));this.connectionManager.events.once(i.toString(),(e=>{var t;(0,r.logDebug)(`Engine ==> send => onAck => ${(0,n.safeJsonStringify)(e)}`),e&&e.result&&(null===(t=o.onAck)||void 0===t||t.call(o))})),o.resolve&&this.bindRequestForPromise(t,o.resolve)}catch(i){return Promise.reject(i)}}))}sendSession(e){return t(this,void 0,void 0,(function*(){(0,r.logDebug)("[Connect] sendSession called:",e);let t=this.getRequestId(),n={method:"session_info",params:{sessionInfo:e}};yield this.connectionManager.sendRaw(JSON.stringify(Object.assign(Object.assign({},n),{requestId:t})))}))}handleResponse(e,t){if((0,r.logDebug)(`Engine ==>> handleResponse_1  ======>response: ${(0,n.safeJsonStringify)(t)}`,e),"requestId"in t){(0,r.logDebug)("Engine ==>> handleResponse_2  ===> in response");let e=t.requestId,n=this.pendingRequests.get(e);n?((0,r.logDebug)("Engine ==>> handleResponse_3  ===> find resolve:",n),n(t),this.pendingRequests.delete(e)):((0,r.logDebug)("Engine ==>> handleResponse_3  ===> not find resolve:"),"disconnect"===t.method&&(this.disconnectListener.forEach((e=>e())),this.disconnectListener=[],this.disconnect()))}}restoreconnect(e,n){return t(this,void 0,void 0,(function*(){var t;yield null===(t=this.connectionManager)||void 0===t?void 0:t.restoreConnect(e.topic),n(e)}))}conect(e,n,s){return t(this,void 0,void 0,(function*(){var t,f;let c=this.connectionManager.getConnectInfo(),l=this.getRequestId(),d=null!==(t=n.openUniversalUrl)&&void 0!==t&&t,u={protocolVer:Number(o.tonConnectSdkVersion),topic:c.channelId,clientId:c.clientId,requestId:l,dAppInfo:n.dappInfo,requests:e},h=JSON.stringify(u),p=(new TextEncoder).encode(h),g=btoa(String.fromCharCode(...p)),b=`${o.standardDeeplink}?param=${g}`;(0,r.logDebug)("engine ==>> connect ==>>deeplinkUrl:",b);let y=(0,a.isIos)();(0,r.logDebug)(`engine ==>> connect ==>>isIOS: ${y}   openUniversalLink: ${d}`),y&&d&&((0,r.logDebug)("bridge-provider ==>> connect_3"),(0,i.openOKXDeeplinkWithFallback)(b)),yield null===(f=this.connectionManager)||void 0===f?void 0:f.disconnect(!1),this.bindRequestForPromise(l,(e=>{let t=this.onConnect(e,n,c.channelId);s(t,e)}));try{yield this.connectionManager.connect()}catch(v){throw(0,r.logDebug)("Engine conect error",v),v}return!y&&d&&((0,r.logDebug)("bridge-provider ==>> connect_4"),(0,i.openOKXDeeplinkWithFallback)(b)),{connectInfo:c,deeplinkUrl:(0,i.getUniversalLink)(b)}}))}onConnect(e,t,n){if("connect"==e.method){let r=(0,s.buildNameSpacesByConnectResponse)(e);if(r)return{topic:n,sessionConfig:t,namespaces:r}}return null}universalConnect(e,n,c){return t(this,void 0,void 0,(function*(){return new Promise(((l,d)=>t(this,void 0,void 0,(function*(){var t,u,h,p;try{(0,r.logDebug)("engine universalConnect request :",JSON.stringify(e)),(0,r.logDebug)("engine universalConnect sessionConfig :",JSON.stringify(n));let y=[],v=[];e.forEach((e=>{let t=e.name;t.startsWith("requestAccounts")?v.push(e):t.startsWith("ton")&&y.push(e)})),(0,r.logDebug)("engine universalConnect tonRequest :",JSON.stringify(y)),(0,r.logDebug)("engine universalConnect universalRequest :",JSON.stringify(v));let m=this.connectionManager.getConnectInfo(),C=this.getRequestId(),O=null!==(t=n.openUniversalUrl)&&void 0!==t&&t,w={protocolVer:Number(o.tonConnectSdkVersion),topic:m.channelId,clientId:m.clientId,requestId:C,dAppInfo:n.dappInfo,requests:v},E=(0,f.encodeConnectParams)(w);w.redirect=null!==(u=n?.redirect)&&void 0!==u?u:"none";let _={protocolVer:Number(o.tonConnectSdkVersion),topic:m.channelId,clientId:m.clientId,requestId:C,dAppInfo:n.dappInfo,requests:y,redirect:null!==(h=n?.redirect)&&void 0!==h?h:"none"},x=!1;y.length>0&&(x=!0);let S=x?_:w;(0,r.logDebug)("engine universalConnect ==>>defaultConnectRequest:",x,JSON.stringify(S));var g="";if(O){let e=(0,f.encodeConnectParams)(S);g=`${o.standardDeeplink}?param=${e}`}(0,r.logDebug)("engine universalConnect ==>>deeplinkUrl:",g);let R=(0,a.isIos)();R&&O&&((0,r.logDebug)(`engine universalConnect ==>>isIOS: ${R}   openUniversalLink: ${O}`),(0,i.openOKXDeeplinkWithFallback)(g)),yield null===(p=this.connectionManager)||void 0===p?void 0:p.disconnect(!1),this.bindRequestForPromise(C,(e=>{var t,i;try{let a=e;if("connect"==a.method){(0,r.logDebug)("engin  universalConnect success connectResponse:>>>",JSON.stringify(a));let e=(0,s.buildNameSpacesByConnectResponse)(a);if(!e)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR);{let o={topic:m.channelId,sessionConfig:n,namespaces:e,wallet:Object.assign({},null===(t=a.payload)||void 0===t?void 0:t.wallet)};(0,r.logDebug)("engin  universalConnect success session:>>>",JSON.stringify(o)),l(o)}}else if("connect_error"==a.method&&null!==(i=a.payload)&&void 0!==i&&i.code)throw new o.OKXConnectError(a.payload.code)}catch(a){d(a)}}));try{yield this.connectionManager.connect()}catch(b){throw(0,r.logDebug)("Engine universalConnect error",b),b}if(!R&&O&&(0,i.openOKXDeeplinkWithFallback)(g),(0,r.logDebug)("engin  universalConnect ==>> connectInfoAndUrl:",c),this.sendSession(E),c){let e={connectRequest:w,redirect:n.redirect,tmaReturnUrl:n.tmaReturnUrl};x&&(e.tonConnectRequest=_),(0,r.logDebug)("universalConnect connectInfoAndUrl info :",JSON.stringify(e)),c(e)}}catch(y){(0,r.logDebug)("Engine universalConnect catch error",y),d(y)}}))))}))}}})),Ho=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=e.Engine=e.WalletConnectionManager=e.ConnectionManager=e.OKXWalletConnector=void 0;var t=Io();Object.defineProperty(e,"OKXWalletConnector",{enumerable:!0,get:function(){return t.OKXWalletConnector}});var n=Lo();Object.defineProperty(e,"ConnectionManager",{enumerable:!0,get:function(){return n.ConnectionManager}});var r=Bo();Object.defineProperty(e,"WalletConnectionManager",{enumerable:!0,get:function(){return r.WalletConnectionManager}});var o=$o();Object.defineProperty(e,"Engine",{enumerable:!0,get:function(){return o.Engine}});var i=Ao();Object.defineProperty(e,"Storage",{enumerable:!0,get:function(){return i.Storage}})})),qo=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ho(),e),n(No(),e),n(Po(),e)})),Fo=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPendingConnectionHttp=function(e){return!("connectEvent"in e)}})),Jo=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.BridgeConnectionStorage=void 0;var n=qo();e.BridgeConnectionStorage=class{constructor(e){this.storage=e,this.storeKey="ton_connect_info_adapter_universal"}storeConnection(e){return t(this,void 0,void 0,(function*(){return(0,n.logDebug)("BridgeConnectionStorage ==>> storeConnection ==>> connection:",e),this.storage.saveContent(JSON.stringify(e),this.storeKey)}))}removeConnection(){return t(this,void 0,void 0,(function*(){return(0,n.logDebug)("BridgeConnectionStorage ==>> removeConnection"),this.storage.clearCache(this.storeKey)}))}getConnection(){return t(this,void 0,void 0,(function*(){let e=this.storage.getItem(this.storeKey);if((0,n.logDebug)("BridgeConnectionStorage ==>> getConnection ==>>this.storage: ",this.storage),!e||!e?.content)return null;try{let t=e?.content;if(t){let e;return e=JSON.parse(t),(0,n.logDebug)("BridgeConnectionStorage ==>> getConnection ==>>connection: ",e),e}return null}catch{return null}}))}getHttpConnection(){return t(this,void 0,void 0,(function*(){let e=yield this.getConnection();if(!e)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Trying to read HTTP connection source while nothing is stored");return e}))}storeLastWalletEventId(e){return t(this,void 0,void 0,(function*(){let t=yield this.getConnection();if(t&&"connectEvent"in t)return t.lastWalletEventId=e,this.storeConnection(t)}))}getLastWalletEventId(){return t(this,void 0,void 0,(function*(){let e=yield this.getConnection();if(e&&"lastWalletEventId"in e)return e.lastWalletEventId}))}}})),Vo=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OKXCONNECTOR_TON_KEY=e.OKXtonConnectSdkVersion=void 0,e.OKXtonConnectSdkVersion="1",e.OKXCONNECTOR_TON_KEY="OKXStorage_ctc"})),Go=p((e=>{function t(e){return{okx_ton_connect_sdk_lib:e.okx_ton_connect_sdk_lib,okx_connect_ui_lib:e.okx_connect_ui_lib}}function n(e,n){var r,o,i,a,s,f,c,l;let d=(null===(r=n?.connectItems)||void 0===r?void 0:r.tonProof)&&"proof"in n.connectItems.tonProof?"ton_proof":"ton_addr";return{wallet_address:null!==(i=null===(o=n?.account)||void 0===o?void 0:o.address)&&void 0!==i?i:null,wallet_type:null!==(a=n?.device.appName)&&void 0!==a?a:null,wallet_version:null!==(s=n?.device.appVersion)&&void 0!==s?s:null,auth_type:d,custom_data:Object.assign({chain_id:null!==(c=null===(f=n?.account)||void 0===f?void 0:f.chain)&&void 0!==c?c:null,provider:null!==(l=n?.provider)&&void 0!==l?l:null},t(e))}}function r(e,t){var n,r,o,i;return{valid_until:null!==(n=String(t.validUntil))&&void 0!==n?n:null,from:null!==(i=null!==(r=t.from)&&void 0!==r?r:null===(o=e?.account)||void 0===o?void 0:o.address)&&void 0!==i?i:null,messages:t.messages.map((e=>{var t,n;return{address:null!==(t=e.address)&&void 0!==t?t:null,amount:null!==(n=e.amount)&&void 0!==n?n:null}}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.createRequestVersionEvent=function(){return{type:"request-version"}},e.createResponseVersionEvent=function(e){return{type:"response-version",version:e}},e.createVersionInfo=t,e.createConnectionStartedEvent=function(e){return{type:"connection-started",custom_data:t(e)}},e.createConnectionDeepLinkEvent=function(e){return{type:"connection-get-deeplink",deeplinkUrl:e}},e.createConnectionInfoBeforeJumpEvent=function(e){return{type:"connection-info-before-jump",connectInfo:e}},e.createConnectionCompletedEvent=function(e,t){return Object.assign({type:"connection-completed",is_success:!0},n(e,t))},e.createConnectionErrorEvent=function(e,n,r){return{type:"connection-error",is_success:!1,error_message:n,error_code:r??null,custom_data:t(e)}},e.createConnectionRestoringStartedEvent=function(e){return{type:"connection-restoring-started",custom_data:t(e)}},e.createConnectionRestoringCompletedEvent=function(e,t){return Object.assign({type:"connection-restoring-completed",is_success:!0},n(e,t))},e.createConnectionRestoringErrorEvent=function(e,n){return{type:"connection-restoring-error",is_success:!1,error_message:n,custom_data:t(e)}},e.createTransactionSentForSignatureEvent=function(e,t,o){return Object.assign(Object.assign({type:"transaction-sent-for-signature"},n(e,t)),r(t,o))},e.createTransactionSignedEvent=function(e,t,o,i){return Object.assign(Object.assign({type:"transaction-signed",is_success:!0,signed_transaction:i.boc},n(e,t)),r(t,o))},e.createTransactionSigningFailedEvent=function(e,t,o,i,a){return Object.assign(Object.assign({type:"transaction-signing-failed",is_success:!1,error_message:i,error_code:a??null},n(e,t)),r(t,o))},e.createDisconnectionEvent=function(e,t,r){return Object.assign({type:"disconnection",scope:r},n(e,t))}})),zo=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserEventDispatcher=void 0;e.BrowserEventDispatcher=class{constructor(){this.window=window}dispatchEvent(e,n){return t(this,void 0,void 0,(function*(){var t;let r=new CustomEvent(e,{detail:n});null===(t=this.window)||void 0===t||t.dispatchEvent(r)}))}addEventListener(e,n,r){return t(this,void 0,void 0,(function*(){var t;return null===(t=this.window)||void 0===t||t.addEventListener(e,n,r),()=>{var t;return null===(t=this.window)||void 0===t?void 0:t.removeEventListener(e,n)}}))}}})),Yo=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.TonConnectTracker=void 0;var n=Go(),r=zo();e.TonConnectTracker=class{get version(){return(0,n.createVersionInfo)({okx_ton_connect_sdk_lib:this.OKXtonConnectSdkVersion,okx_connect_ui_lib:this.OKXConnectUiVersion})}constructor(e){this.eventPrefix="okx-ton-connect-",this.OKXConnectUiVersion=null,this.eventDispatcher=new r.BrowserEventDispatcher,this.OKXtonConnectSdkVersion=e.OKXtonConnectSdkVersion,this.init().catch()}init(){return t(this,void 0,void 0,(function*(){try{yield this.setRequestVersionHandler(),this.OKXConnectUiVersion=yield this.requestTonConnectUiVersion()}catch{}}))}setRequestVersionHandler(){return t(this,void 0,void 0,(function*(){yield this.eventDispatcher.addEventListener("okx-ton-connect-request-version",(()=>t(this,void 0,void 0,(function*(){yield this.eventDispatcher.dispatchEvent("okx-ton-connect-response-version",(0,n.createResponseVersionEvent)(this.OKXtonConnectSdkVersion))}))))}))}requestTonConnectUiVersion(){return t(this,void 0,void 0,(function*(){return new Promise(((e,r)=>t(this,void 0,void 0,(function*(){try{yield this.eventDispatcher.addEventListener("okx-connect-ui-response-version",(t=>{e(t.detail.version)}),{once:!0}),yield this.eventDispatcher.dispatchEvent("okx-connect-ui-request-version",(0,n.createRequestVersionEvent)())}catch(t){r(t)}}))))}))}dispatchUserActionEvent(e){try{this.eventDispatcher.dispatchEvent(`${this.eventPrefix}${e.type}`,e).catch()}catch{}}trackConnectionStarted(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let o=(0,n.createConnectionStartedEvent)(this.version,...t);this.dispatchUserActionEvent(o)}catch{}}trackConnectionDeepLink(){try{let e=(0,n.createConnectionDeepLinkEvent)(...arguments);this.dispatchUserActionEvent(e)}catch{}}trackConnectionCompleted(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let o=(0,n.createConnectionCompletedEvent)(this.version,...t);this.dispatchUserActionEvent(o)}catch{}}trackConnectionInfoBeforeJump(e){try{let t=(0,n.createConnectionInfoBeforeJumpEvent)(e);this.dispatchUserActionEvent(t)}catch{}}trackConnectionError(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let o=(0,n.createConnectionErrorEvent)(this.version,...t);this.dispatchUserActionEvent(o)}catch{}}trackConnectionRestoringStarted(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let o=(0,n.createConnectionRestoringStartedEvent)(this.version,...t);this.dispatchUserActionEvent(o)}catch{}}trackConnectionRestoringCompleted(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let o=(0,n.createConnectionRestoringCompletedEvent)(this.version,...t);this.dispatchUserActionEvent(o)}catch{}}trackConnectionRestoringError(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let o=(0,n.createConnectionRestoringErrorEvent)(this.version,...t);this.dispatchUserActionEvent(o)}catch{}}trackDisconnection(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let o=(0,n.createDisconnectionEvent)(this.version,...t);this.dispatchUserActionEvent(o)}catch{}}trackTransactionSentForSignature(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let o=(0,n.createTransactionSentForSignatureEvent)(this.version,...t);this.dispatchUserActionEvent(o)}catch{}}trackTransactionSigned(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let o=(0,n.createTransactionSignedEvent)(this.version,...t);this.dispatchUserActionEvent(o)}catch{}}trackTransactionSigningFailed(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let o=(0,n.createTransactionSigningFailedEvent)(this.version,...t);this.dispatchUserActionEvent(o)}catch{}}}})),Zo=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.BridgeProvider=void 0;var n=Fo(),r=qo(),i=Jo(),a=Vo(),s=Yo();e.BridgeProvider=class e{constructor(e){this.storage=e,this.type="http",this.listeners=[],this.connectManager=new r.ConnectionManager,this.walletConnectionSource={universalLink:r.standardUniversalLink},this.engine=new r.Engine(this.connectManager),this.openUniversalLink=!1,this.connectionStorage=new i.BridgeConnectionStorage(e),this.tracker=new s.TonConnectTracker({OKXtonConnectSdkVersion:a.OKXtonConnectSdkVersion})}static fromStorage(o){return t(this,void 0,void 0,(function*(){(0,r.logDebug)("bridge-provider ==>> fromStorage ==>>storage:",o);let t=yield new i.BridgeConnectionStorage(o).getHttpConnection();if((0,n.isPendingConnectionHttp)(t))return null;let a=new e(o);return a.openUniversalLink=t.openUniversalLink,a}))}connect(e,n,i,a){return t(this,void 0,void 0,(function*(){return(0,r.logDebug)("bridge-provider ==>> connect_1 ==>>message:",e),(0,r.logDebug)("bridge-provider ==>> connect_1 ==>>redirect:",n),(0,r.logDebug)("bridge-provider ==>> connect_1 ==>>openUniversalLink:",i),(0,r.logDebug)("bridge-provider ==>> connect_1 ==>>tmaReturnUrl:",a),new Promise(((t,s)=>{try{this.openUniversalLink=i,void 0===this.openUniversalLink&&(this.openUniversalLink=(0,r.isMobileUserAgent)());let o={name:"requestAccounts",requiredNamespaces:[{namespace:"ton",chains:["ton:-239"],params:e.params}]},f=[];e.params.ton_addr&&f.push(e.params.ton_addr),e.params.ton_proof&&f.push(e.params.ton_proof),f.push(o);let c={dappInfo:e.dappInfo,openUniversalUrl:this.openUniversalLink,redirect:n,tmaReturnUrl:a};this.engine.universalConnect(f,c,(e=>{(0,r.logDebug)(`bridge-provider: connect: info>>>> ${JSON.stringify(e)}`);try{if(!e.tonConnectRequest)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"universalConnect connectInfoAndUrl info.tonConnectRequest is nil");let n=(0,r.encodeConnectParams)(e.tonConnectRequest),o=(0,r.getAppWalletDeepLink)(n),i=(0,r.getUniversalLink)(o);this.tracker.trackConnectionInfoBeforeJump(e),t(i)}catch(n){s(n)}})).then((e=>{(0,r.logDebug)(`bridge-provider: connect: success>>>> ${JSON.stringify(e)}`),this.connectSuccessHandle(e)})).catch((e=>{(0,r.logDebug)(`bridge-provider: connect: catch>>>> ${JSON.stringify(e)}`);let t={event:"connect_error",requestId:Number(Date.now()),payload:{code:e.code,message:e.message}};(0,r.logDebug)("bridge-provider ==>> connectListener_4 ==>>connect_error:",t),this.listeners.forEach((e=>e(t)))}))}catch(f){o.error("bridge-provider connect try catch error:>>>",JSON.stringify(f)),s(f)}}))}))}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter((t=>t!==e))}disconnectListener(){return t(this,void 0,void 0,(function*(){(0,r.logDebug)("bridge-provider ==>> disconnectListener");let e={event:"disconnect",requestId:1,payload:{}};this.listeners.forEach((t=>t(e))),yield this.closeConnection()}))}connectSuccessHandle(e){return t(this,void 0,void 0,(function*(){var t;try{let n=null===(t=e.namespaces)||void 0===t?void 0:t.ton,o=n.payload,i=e.wallet;if(!n||!o||!i||!o.ton_addr)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR);o.ton_addr;let a=e.sessionConfig,s=[];o.ton_addr&&s.push(o.ton_addr),o.ton_proof&&s.push(o.ton_proof);let f={platform:i.platform,appName:i.appName,appVersion:i.appVersion,maxProtocolVersion:i.maxProtocolVersion,features:["ton_sendTransaction"]},c={type:"http",lastWalletEventId:Number(Date.now()),connectEvent:{event:"connect",payload:{items:s,device:f}},connectionSource:this.walletConnectionSource,channelId:e.topic,openUniversalLink:a?.openUniversalUrl};(0,r.logDebug)("bridge-provider ==>> connectSuccessHandle_2 ==>>storeConnection:",c),yield this.connectionStorage.storeConnection(c);let l={event:"connect",requestId:c.lastWalletEventId,payload:c.connectEvent.payload};(0,r.logDebug)("bridge-provider ==>> connectSuccessHandle_3 ==>>listeners.forEach:",l),this.listeners.forEach((e=>e(l)))}catch(n){(0,r.logDebug)("bridge-provider ==>> connectSuccessHandle_4 ==>>error:",n);let e={event:"connect_error",requestId:Number(Date.now()),payload:{code:r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,message:"Connect success  connectSuccessHandle response error"}};(0,r.logDebug)("bridge-provider ==>> connectSuccessHandle_4 ==>>connect_error:",e),this.listeners.forEach((t=>t(e)))}}))}closeConnection(){return t(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){var o,i;(0,r.logDebug)("bridge-provider ==>> closeConnection ==>>fromRestore:",t," needOpenUrl:",n),e.listeners=[],n||(yield null===(o=e.connectManager)||void 0===o?void 0:o.disconnect(t)),t||(null===(i=e.engine)||void 0===i||i.disconnect(),yield e.connectionStorage.removeConnection())}()}))}restoreConnection(){return t(this,void 0,void 0,(function*(){var e;(0,r.logDebug)("bridge-provider ==>> restoreConnection_1");let t=yield this.connectionStorage.getHttpConnection();if(t&&!(0,n.isPendingConnectionHttp)(t))if((0,r.logDebug)("bridge-provider ==>> restoreConnection_2 ==>>storedConnection.channelId:",t.channelId),t.channelId)try{let n={event:"connect",requestId:0,payload:t.connectEvent.payload};this.listeners.forEach((e=>e(n)));let o=t.channelId;(0,r.logDebug)("bridge-provider ==>> restoreConnection_3 ==>>this.connectManager.restoreConnect:",o),null===(e=this.engine)||void 0===e||e.addDisconnectListener(this.disconnectListener.bind(this)),yield this.connectManager.restoreConnect(o)}catch{(0,r.logDebug)("bridge-provider ==>> restoreConnection_4 ==>>closeConnection_1"),yield this.closeConnection()}else(0,r.logDebug)("bridge-provider ==>> restoreConnection_4 ==>>closeConnection_2"),yield this.closeConnection()}))}openOKXWallet(){(0,r.logDebug)("bridge-provider ==>> openOKXWallet",this.openUniversalLink),this.openUniversalLink&&(0,r.openOKXDeeplink)(r.standardDeeplink)}disconnect(){return t(this,void 0,void 0,(function*(){return(0,r.logDebug)("bridge-provider ==>> disconnect_1"),new Promise((e=>t(this,void 0,void 0,(function*(){let t=!1,n=()=>{t||(t=!0,this.closeConnection().then(e))};try{yield this.sendRequest({method:"disconnect"},{onRequestSent:n,attempts:1})}catch{t||this.closeConnection().then(e)}finally{n()}}))))}))}sendRequest(e,n){return(0,r.logDebug)("bridge-provider ==>> sendRequest"),new Promise(((r,o)=>t(this,void 0,void 0,(function*(){var t;try{yield null===(t=this.engine)||void 0===t?void 0:t.send(e,{resolve:function(e){r(e)},onAck:function(){var e;null===(e=n?.onRequestSent)||void 0===e||e.call(n)}},{attempts:n?.attempts})}catch(i){o(i)}}))))}}})),Qo=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.checkSendTransactionSupport=function(e,n){if(!e.includes("ton_sendTransaction"))throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Wallet doesn't support SendTransaction feature.");if(4<n.requiredMessagesNumber)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,`Wallet is not able to handle such SendTransaction request. Max support messages number is 4, but ${n.requiredMessagesNumber} is required.`)};var t=qo()})),ei=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RpcParser=void 0;e.RpcParser=class{isError(e){return"error"in e}}})),ti=p((e=>{var t=e&&e.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(e,"__esModule",{value:!0}),e.sendTransactionParser=void 0;var n=ei(),r=class extends n.RpcParser{convertToRpcRequest(e){let{redirect:n}=e;return{method:"ton_sendTransaction",redirect:n,params:t(e,["redirect"])}}convertFromRpcResponse(e){return{boc:e.result.toString()}}};e.sendTransactionParser=new r})),ni=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},n=e&&e.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXTonConnect=void 0;var r=Zo(),o=qo(),i=Qo(),a=Yo(),s=ti(),f=Jo(),c=Vo(),l=class{constructor(e){if(this._wallet=null,this.provider=null,this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.storage=new o.Storage(c.OKXCONNECTOR_TON_KEY),this.openUniversalLink=!!this.provider&&this.provider.openUniversalLink,!e.metaData)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"dapp metaData can not be null");this.dappSettings={metaData:Object.assign(Object.assign({},e.metaData),{url:window.location.hostname,origin:window.location.origin})},this.tracker=new a.TonConnectTracker({OKXtonConnectSdkVersion:c.OKXtonConnectSdkVersion}),this.bridgeConnectionStorage=new f.BridgeConnectionStorage(this.storage)}get connected(){return null!==this._wallet}get account(){var e;return(null===(e=this._wallet)||void 0===e?void 0:e.account)||null}get wallet(){return this._wallet}set wallet(e){this._wallet=e,this.statusChangeSubscriptions.forEach((e=>e(this._wallet)))}connect(e){return t(this,void 0,void 0,(function*(){var t;return(0,o.logDebug)("ton-Connect ==>> connect_1 >> request:",e),this.connected&&(0,o.logError)("It's already connected to OKX Wallet, please call disconnect() first"),yield null===(t=this.provider)||void 0===t?void 0:t.closeConnection(!1,!0),this.provider||(this.provider=new r.BridgeProvider(this.storage)),this.provider.listen(this.walletEventsListener.bind(this)),this.tracker.trackConnectionStarted(),yield this.provider.connect(this.createConnectRequest(e),e?.redirect,e?.openUniversalLink,e?.tmaReturnUrl)}))}walletEventsListener(e){switch((0,o.logDebug)("ton-Connect ==>> walletEventsListener_1 >> e:",e),e.event){case"connect":this.onWalletConnected(e.payload);break;case"connect_error":this.onWalletConnectError(e.payload);break;case"disconnect":this.onWalletDisconnected("wallet")}}onWalletConnected(e){(0,o.logDebug)("ton-Connect ==>> onWalletConnected_1 >> connectEvent:",e);let t=e.items.find((e=>"ton_addr"===e.name)),n=e.items.find((e=>"ton_proof"===e.name));if(!t)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton_addr connection item was not found");let r={device:e.device,provider:this.provider.type,account:{address:t.address,chain:t.network,walletStateInit:t.walletStateInit,publicKey:t.publicKey}};n&&(r.connectItems={tonProof:n}),this.wallet=r,(0,o.logDebug)("ton-Connect ==>> onWalletConnected_2 >> wallet:",r),this.tracker.trackConnectionCompleted(r)}onWalletConnectError(e){var t;(0,o.logDebug)("ton-Connect ==>> onWalletConnectError_1 >> connectEventError:",e);let n=new o.OKXConnectError(e.code,e.message);(0,o.logDebug)("ton-Connect ==>> onWalletConnectError_1 >> error:",n),this.statusChangeErrorSubscriptions.forEach((e=>e(n))),this.tracker.trackConnectionError(null!==(t=e.message)&&void 0!==t?t:"",e.code)}onWalletDisconnected(e){this.tracker.trackDisconnection(this.wallet,e),this.wallet=null}disconnect(){return t(this,void 0,void 0,(function*(){var e;if((0,o.logDebug)("ton-Connect ==>> disconnect_1"),!this.connected)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,"wallet is not connected");(0,o.logDebug)("ton-Connect ==>> disconnect_222"),this.onWalletDisconnected("dapp"),yield null===(e=this.provider)||void 0===e?void 0:e.disconnect()}))}onStatusChange(e,t){return this.statusChangeSubscriptions.push(e),t&&this.statusChangeErrorSubscriptions.push(t),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter((t=>t!==e)),t&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter((e=>e!==t)))}}restoreConnection(){return t(this,void 0,void 0,(function*(){var e;(0,o.logDebug)("ton-Connect ==>> restoreConnection_1"),this.tracker.trackConnectionRestoringStarted();let t=null;try{t=yield r.BridgeProvider.fromStorage(this.storage)}catch{return this.tracker.trackConnectionRestoringError("Provider is not restored"),yield this.bridgeConnectionStorage.removeConnection(),t?.closeConnection(),void(t=null)}if(!t)return(0,o.logError)("Provider is not restored"),void this.tracker.trackConnectionRestoringError("Provider is not restored");(0,o.logDebug)("ton-Connect ==>> restoreConnection_2 ==>> Provider is restored "),null===(e=this.provider)||void 0===e||e.closeConnection(!0,!1),this.provider=t,t.listen(this.walletEventsListener.bind(this)),yield this.provider.restoreConnection(),this.connected?this.tracker.trackConnectionRestoringCompleted(this.wallet):this.tracker.trackConnectionRestoringError("Connection restoring failed")}))}sendTransaction(e,r){return t(this,void 0,void 0,(function*(){var t;(0,o.logDebug)("ton-Connect ==>> sendTransaction_1",e),this.checkConnection(),(0,i.checkSendTransactionSupport)(this.wallet.device.features,{requiredMessagesNumber:e.messages.length}),this.tracker.trackTransactionSentForSignature(this.wallet,e),(0,o.logDebug)("ton-Connect ==>> sendTransaction_2 ==>> check params");let{validUntil:a}=e,f=n(e,["validUntil"]),c=e.from||this.account.address,l=this.account.chain;(0,o.logDebug)("ton-Connect ==>> sendTransaction_2 ==>> await sendRequest",l),(0,o.isIos)()&&!r?.doNotOpenWallet&&(null===(t=this.provider)||void 0===t||t.openOKXWallet());let d=yield this.provider.sendRequest(s.sendTransactionParser.convertToRpcRequest(Object.assign(Object.assign({},f),{valid_until:a,from:c,network:l})),{onRequestSent:()=>{var e,t;!(0,o.isIos)()&&!r?.doNotOpenWallet&&(null===(e=this.provider)||void 0===e||e.openOKXWallet()),null===(t=r?.onRequestSent)||void 0===t||t.call(r)}});if((0,o.logDebug)("ton-Connect ==>> sendTransaction_3 ==>>sendRequest response:",d),s.sendTransactionParser.isError(d))throw this.tracker.trackTransactionSigningFailed(this.wallet,e,d.error.message,d.error.code),new o.OKXConnectError(d.error.code,d.error.message);let u=s.sendTransactionParser.convertFromRpcResponse(d);return this.tracker.trackTransactionSigned(this.wallet,e,u),u}))}checkConnection(){if((0,o.logDebug)("ton-Connect ==>> checkConnection"),!this.connected)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,"Wallet not connected")}createConnectRequest(e){(0,o.logDebug)("ton-Connect ==>> createConnectRequest");let t={ton_addr:{name:"ton_addr"}};return e?.tonProof&&(t.ton_proof={name:"ton_proof",payload:e.tonProof}),{dappInfo:this.dappSettings.metaData,params:t}}static getWallets(){return this.walletsList}};e.OKXTonConnect=l,l.walletsList=[(0,o.creatOKXWalletInfo)()]})),ri=p((e=>{var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT=void 0,(n=t||(e.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT=t={})).OKX_TON_CONNECTION_STARTED="okx-ton-connect-connection-started",n.OKX_TON_CONNECTION_COMPLETED="okx-ton-connect-connection-completed",n.OKX_TON_CONNECTION_ERROR="okx-ton-connect-connection-error",n.OKX_TON_CONNECTION_RESTORING_STARTED="okx-ton-connect-connection-restoring-started",n.OKX_TON_CONNECTION_RESTORING_COMPLETED="okx-ton-connect-connection-restoring-completed",n.OKX_TON_CONNECTION_RESTORING_ERROR="okx-ton-connect-connection-restoring-error",n.OKX_TON_DISCONNECTION="okx-ton-connect-disconnection",n.OKX_TON_TRANSACTION_SENT_FOR_SIGNATURE="okx-ton-connect-transaction-sent-for-signature",n.OKX_TON_TRANSACTION_SIGNED="okx-ton-connect-transaction-signed",n.OKX_TON_TRANSACTION_SIGNING_FAILED="okx-ton-connect-transaction-signing-failed"})),oi=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserEventDispatcher=e.createVersionInfo=e.createTransactionSigningFailedEvent=e.createTransactionSignedEvent=e.createTransactionSentForSignatureEvent=e.createDisconnectionEvent=e.createConnectionStartedEvent=e.createConnectionRestoringStartedEvent=e.createConnectionRestoringErrorEvent=e.createConnectionRestoringCompletedEvent=e.createConnectionErrorEvent=e.createConnectionCompletedEvent=e.createResponseVersionEvent=e.createRequestVersionEvent=e.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT=void 0;var t=ri();Object.defineProperty(e,"OKX_TON_CONNECTION_AND_TRANSACTION_EVENT",{enumerable:!0,get:function(){return t.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT}});var n=Go();Object.defineProperty(e,"createRequestVersionEvent",{enumerable:!0,get:function(){return n.createRequestVersionEvent}}),Object.defineProperty(e,"createResponseVersionEvent",{enumerable:!0,get:function(){return n.createResponseVersionEvent}}),Object.defineProperty(e,"createConnectionCompletedEvent",{enumerable:!0,get:function(){return n.createConnectionCompletedEvent}}),Object.defineProperty(e,"createConnectionErrorEvent",{enumerable:!0,get:function(){return n.createConnectionErrorEvent}}),Object.defineProperty(e,"createConnectionRestoringCompletedEvent",{enumerable:!0,get:function(){return n.createConnectionRestoringCompletedEvent}}),Object.defineProperty(e,"createConnectionRestoringErrorEvent",{enumerable:!0,get:function(){return n.createConnectionRestoringErrorEvent}}),Object.defineProperty(e,"createConnectionRestoringStartedEvent",{enumerable:!0,get:function(){return n.createConnectionRestoringStartedEvent}}),Object.defineProperty(e,"createConnectionStartedEvent",{enumerable:!0,get:function(){return n.createConnectionStartedEvent}}),Object.defineProperty(e,"createDisconnectionEvent",{enumerable:!0,get:function(){return n.createDisconnectionEvent}}),Object.defineProperty(e,"createTransactionSentForSignatureEvent",{enumerable:!0,get:function(){return n.createTransactionSentForSignatureEvent}}),Object.defineProperty(e,"createTransactionSignedEvent",{enumerable:!0,get:function(){return n.createTransactionSignedEvent}}),Object.defineProperty(e,"createTransactionSigningFailedEvent",{enumerable:!0,get:function(){return n.createTransactionSigningFailedEvent}}),Object.defineProperty(e,"createVersionInfo",{enumerable:!0,get:function(){return n.createVersionInfo}});var r=zo();Object.defineProperty(e,"BrowserEventDispatcher",{enumerable:!0,get:function(){return r.BrowserEventDispatcher}})})),ii=p((e=>{function t(e){return"/"===e.slice(-1)?e.slice(0,-1):e}Object.defineProperty(e,"__esModule",{value:!0}),e.removeUrlLastSlash=t,e.addPathToUrl=function(e,n){return t(e)+"/"+n}})),ai=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toUserFriendlyAddress=function(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{wc:a,hex:s}=function(e){if(!e.includes(":"))throw new Error(`Wrong address ${e}. Address must include ":".`);let t=e.split(":");if(2!==t.length)throw new Error(`Wrong address ${e}. Address must include ":" only once.`);let n=parseInt(t[0]);if(0!==n&&-1!==n)throw new Error(`Wrong address ${e}. WC must be eq 0 or -1, but ${n} received.`);let r=t[1];if(64!==r?.length)throw new Error(`Wrong address ${e}. Hex part must be 64bytes length, but ${r?.length} received.`);return{wc:n,hex:i(r)}}(e),f=n;o&&(f|=r);let c=new Int8Array(34);c[0]=f,c[1]=a,c.set(s,2);let l=new Uint8Array(36);return l.set(c),l.set(function(e){let t=0,n=new Uint8Array(e.length+2);n.set(e);for(let r of n){let e=128;for(;e>0;)t<<=1,r&e&&(t+=1),e>>=1,t>65535&&(t&=65535,t^=4129)}return new Uint8Array([Math.floor(t/256),t%256])}(c),34),(0,t.base64encode)(l,!1).replace(/\+/g,"-").replace(/\//g,"_")};var t=qo(),n=81,r=128;var o={};for(let a=0;a<=255;a++){let e=a.toString(16);e.length<2&&(e="0"+e),o[e]=a}function i(e){let t=(e=e.toLowerCase()).length;if(t%2!==0)throw new Error("Hex string must have length a multiple of 2: "+e);let n=t/2,r=new Uint8Array(n);for(let i=0;i<n;i++){let t=2*i,n=e.substring(t,t+2);if(!o.hasOwnProperty(n))throw new Error("Invalid hex character: "+n);r[i]=o[n]}return r}})),si=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toUserFriendlyAddress=e.removeUrlLastSlash=e.addPathToUrl=void 0;var t=ii();Object.defineProperty(e,"addPathToUrl",{enumerable:!0,get:function(){return t.addPathToUrl}}),Object.defineProperty(e,"removeUrlLastSlash",{enumerable:!0,get:function(){return t.removeUrlLastSlash}});var n=ai();Object.defineProperty(e,"toUserFriendlyAddress",{enumerable:!0,get:function(){return n.toUserFriendlyAddress}})})),fi=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.toUserFriendlyAddress=e.removeUrlLastSlash=e.addPathToUrl=e.createVersionInfo=e.BrowserEventDispatcher=e.createTransactionSigningFailedEvent=e.createTransactionSignedEvent=e.createTransactionSentForSignatureEvent=e.createDisconnectionEvent=e.createConnectionStartedEvent=e.createConnectionRestoringStartedEvent=e.createConnectionRestoringErrorEvent=e.createConnectionRestoringCompletedEvent=e.createConnectionErrorEvent=e.createConnectionCompletedEvent=e.createResponseVersionEvent=e.createRequestVersionEvent=e.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT=e.OKXTonConnect=void 0;var r=ni();Object.defineProperty(e,"OKXTonConnect",{enumerable:!0,get:function(){return r.OKXTonConnect}}),n(qo(),e);var o=oi();Object.defineProperty(e,"OKX_TON_CONNECTION_AND_TRANSACTION_EVENT",{enumerable:!0,get:function(){return o.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT}}),Object.defineProperty(e,"createRequestVersionEvent",{enumerable:!0,get:function(){return o.createRequestVersionEvent}}),Object.defineProperty(e,"createResponseVersionEvent",{enumerable:!0,get:function(){return o.createResponseVersionEvent}}),Object.defineProperty(e,"createConnectionCompletedEvent",{enumerable:!0,get:function(){return o.createConnectionCompletedEvent}}),Object.defineProperty(e,"createConnectionErrorEvent",{enumerable:!0,get:function(){return o.createConnectionErrorEvent}}),Object.defineProperty(e,"createConnectionRestoringCompletedEvent",{enumerable:!0,get:function(){return o.createConnectionRestoringCompletedEvent}}),Object.defineProperty(e,"createConnectionRestoringErrorEvent",{enumerable:!0,get:function(){return o.createConnectionRestoringErrorEvent}}),Object.defineProperty(e,"createConnectionRestoringStartedEvent",{enumerable:!0,get:function(){return o.createConnectionRestoringStartedEvent}}),Object.defineProperty(e,"createConnectionStartedEvent",{enumerable:!0,get:function(){return o.createConnectionStartedEvent}}),Object.defineProperty(e,"createDisconnectionEvent",{enumerable:!0,get:function(){return o.createDisconnectionEvent}}),Object.defineProperty(e,"createTransactionSentForSignatureEvent",{enumerable:!0,get:function(){return o.createTransactionSentForSignatureEvent}}),Object.defineProperty(e,"createTransactionSignedEvent",{enumerable:!0,get:function(){return o.createTransactionSignedEvent}}),Object.defineProperty(e,"createTransactionSigningFailedEvent",{enumerable:!0,get:function(){return o.createTransactionSigningFailedEvent}}),Object.defineProperty(e,"BrowserEventDispatcher",{enumerable:!0,get:function(){return o.BrowserEventDispatcher}}),Object.defineProperty(e,"createVersionInfo",{enumerable:!0,get:function(){return o.createVersionInfo}});var i=si();Object.defineProperty(e,"addPathToUrl",{enumerable:!0,get:function(){return i.addPathToUrl}}),Object.defineProperty(e,"removeUrlLastSlash",{enumerable:!0,get:function(){return i.removeUrlLastSlash}}),Object.defineProperty(e,"toUserFriendlyAddress",{enumerable:!0,get:function(){return i.toUserFriendlyAddress}})})),ci=p(((e,t)=>{!function(){var e={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,o(n)))}return e}function o(t){if("string"==typeof t||"number"==typeof t)return t;if("object"!=typeof t)return"";if(Array.isArray(t))return r.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var n="";for(var o in t)e.call(t,o)&&t[o]&&(n=i(n,o));return n}function i(e,t){return t?e?e+" "+t:e+t:e}typeof t<"u"&&t.exports?(r.default=r,t.exports=r):"function"==typeof define&&n.amdO?define("classnames",[],(function(){return r})):window.classNames=r}()})),li=p(((e,t)=>{var n=function(e){return!!(t=e)&&"object"==typeof t&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===r}(e)}(e);var t};var r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(e,t){return!1!==t.clone&&t.isMergeableObject(e)?c(function(e){return Array.isArray(e)?[]:{}}(e),e,t):e}function i(e,t,n){return e.concat(t).map((function(e){return o(e,n)}))}function a(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function s(e,t){try{return t in e}catch{return!1}}function f(e,t,n){var r={};return n.isMergeableObject(e)&&a(e).forEach((function(t){r[t]=o(e[t],n)})),a(t).forEach((function(i){(function(e,t){return s(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(s(e,i)&&n.isMergeableObject(t[i])?r[i]=function(e,t){if(!t.customMerge)return c;var n=t.customMerge(e);return"function"==typeof n?n:c}(i,n)(e[i],t[i],n):r[i]=o(t[i],n))})),r}function c(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||i,r.isMergeableObject=r.isMergeableObject||n,r.cloneUnlessOtherwiseSpecified=o;var a=Array.isArray(t);return a===Array.isArray(e)?a?r.arrayMerge(e,t,r):f(e,t,r):o(t,r)}c.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return c(e,n,t)}),{})};var l=c;t.exports=l})),di=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IJSONRpcProvider=e.IJSONRpcConnection=void 0;e.IJSONRpcConnection=class{};e.IJSONRpcProvider=class{constructor(e){}}})),ui=p((e=>{Object.defineProperty(e,"__esModule",{value:!0})})),hi=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(di(),e),n(ui(),e)})),pi=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRpcUrl=function(e,t,r){var o;let i=n(e);return(null===(o=t.rpcMap)||void 0===o?void 0:o[i.reference])||""},e.getChainId=function(e){return e.includes(":")?e.split(":")[1]:e},e.convertChainIdToNumber=function(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))},e.parseChainId=n,e.mergeArrays=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[...new Set([...e,...t])]};var t=":";function n(e){let[n,r]=e.split(t);return{namespace:n,reference:r}}})),gi=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setGlobal=e.getGlobal=void 0;var t={};e.getGlobal=e=>t[e];e.setGlobal=(e,n)=>{t[e]=n}})),bi=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(pi(),e),n(gi(),e)})),yi=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GENERIC_SUBPROVIDER_NAME=e.RPC_URL=e.STORAGE=e.CONTEXT=e.WC_VERSION=e.PROTOCOL=e.RELAY_URL=e.LOGGER=void 0,e.LOGGER="error",e.RELAY_URL="wss://relay.walletconnect.com",e.PROTOCOL="wc",e.WC_VERSION=2,e.CONTEXT="universal_provider",e.STORAGE=`${e.PROTOCOL}@${e.WC_VERSION}:${e.CONTEXT}:`,e.RPC_URL="https://rpc.walletconnect.com/v1/",e.GENERIC_SUBPROVIDER_NAME="generic"})),vi=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PROVIDER_EVENTS=void 0,e.PROVIDER_EVENTS={DEFAULT_CHAIN_CHANGED:"default_chain_changed",UPDATE_NAMESPACES:"update_name_spaces"}})),mi=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(yi(),e),n(vi(),e)})),Ci=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.JsonRpcProvider=void 0;var n=m(),r=hi(),o=qo(),i=qo(),a=class extends r.IJSONRpcProvider{constructor(e){super(e),this.events=new n.EventEmitter,this.connected=!1,this.connecting=!1,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}connect(){return t(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.connection;return function*(){yield e.open(t)}()}))}disconnect(){return t(this,void 0,void 0,(function*(){yield this.close()}))}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}request(e,n){return t(this,void 0,void 0,(function*(){return this.requestStrict((0,o.formatJsonRpcRequest)(e.method,e.params||[],(0,o.getBigIntRpcId)().toString()),n)}))}requestStrict(e,n){return t(this,void 0,void 0,(function*(){return new Promise(((r,a)=>t(this,void 0,void 0,(function*(){if(!this.connection.connected)try{yield this.open()}catch(t){a(t)}this.events.on(`${e.id}`,(e=>{(0,o.isJsonRpcError)(e)?a(e.error):r(e.result)}));try{(0,i.logDebug)("[RPC] >>> send request",e,n),yield this.connection.send(e,n)}catch(t){a(t)}}))))}))}setConnection(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.connection}onPayload(e){this.events.emit("payload",e),(0,o.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}open(){return t(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.connection;return function*(){e.connection===t&&e.connection.connected||(e.connection.connected&&e.close(),"string"==typeof t&&(yield e.connection.open(t),t=e.connection),e.connection=e.setConnection(t),yield e.connection.open(),e.registerEventListeners(),e.events.emit("connect"))}()}))}close(){return t(this,void 0,void 0,(function*(){yield this.connection.close()}))}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(e=>this.onPayload(e))),this.connection.on("close",(e=>this.onClose(e))),this.connection.on("error",(e=>this.events.emit("error",e))),this.connection.on("register_error",(e=>this.onClose())),this.hasRegisteredEventListeners=!0)}};e.JsonRpcProvider=a})),Oi=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},n=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.JsonRpcConnection=void 0;var r=m(),o=n(zr()),i=qo(),a=qo(),s={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};e.JsonRpcConnection=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.url=e,this.disableProviderPing=t,this.events=new r.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,a.isHttpUrl)(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(){return t(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;return function*(){yield e.register(t)}()}))}close(){return t(this,void 0,void 0,(function*(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}))}send(e){return t(this,void 0,void 0,(function*(){this.isAvailable||(yield this.register());try{let t=(0,i.safeJsonStringify)(e),n=yield(yield(0,o.default)(this.url,Object.assign(Object.assign({},s),{body:t}))).json();this.onPayload({data:n})}catch(Ui){this.onError(e.id,Ui)}}))}register(){return t(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;return function*(){if(!(0,a.isHttpUrl)(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(e.registering)return new Promise(((t,n)=>{e.events.once("register_error",(e=>{n(e)})),e.events.once("open",(()=>{if(typeof e.isAvailable>"u")return n(new Error("HTTP connection is missing or invalid"));t()}))}));e.url=t,e.registering=!0;try{if(!e.disableProviderPing){let e=(0,i.safeJsonStringify)({id:1,jsonrpc:"2.0",method:"test",params:[]});yield(0,o.default)(t,Object.assign(Object.assign({},s),{body:e}))}e.onOpen()}catch(Ui){let n=e.parseError(Ui);throw e.events.emit("register_error",n),e.onClose(),n}}()}))}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?(0,i.safeJsonParse)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let n=this.parseError(t),r=n.message||n.toString(),o=(0,a.formatJsonRpcError)(e,r);this.events.emit("payload",o)}parseError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.url;return(0,a.parseConnectionError)(e,t,"HTTP")}}})),wi=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Eip155Provider=void 0;var n=bi(),r=mi(),o=qo(),i=Ci(),a=Oi(),s=class{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=(0,n.getGlobal)("events"),this.client=(0,n.getGlobal)("client"),this.chainId=parseInt(this.getDefaultChain()),this.httpProviders=this.createHttpProviders(),(0,o.logDebug)("eip155 constructor --opts.namespace--\x3e",e.namespace)}isRecord(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}isArray(e){return"object"==typeof e&&null!==e&&Array.isArray(e)}updateRequestParams(e){let t=e.params&&"object"==typeof e.params&&!Array.isArray(e.params);if("wallet_switchEthereumChain"===e.method){let n=e.chainId.split(":")[1],r=parseInt(n,10);if(isNaN(r))throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid decimal number,  chainId: '${n}' `);if(e.params){if(!t)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params error ,  method: '${e.method}' `);{let t=e.params;"chainId"in t||(t.chainId="0x"+r.toString(16),e.params=t)}}else e.params={chainId:"0x"+r.toString(16)}}else if("personal_sign"===e.method||"eth_signTypedData_v4"===e.method||"eth_sendTransaction"===e.method||"wallet_watchAsset"===e.method){if(!e.params)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params is nil, method: '${e.method}'`);if(!this.isRecord(e.params))throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid request params type, method: '${e.method}'`);{let t=e.params;if((0,o.logDebug)("eip155 updateRequestParams params>",JSON.stringify(t)),"chainId"in t){let n,r=e.chainId.split(":")[1],i=parseInt(r,10),a=String(t.chainId);if(a.startsWith(this.name)&&e.chainId===a)n=i;else if(a.startsWith("0x"))n=parseInt(a,16);else{if(isNaN(Number(a)))throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid params.chainId format, method: '${e.method}'`);n=parseInt(a,10)}if(i!==n)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params.chainId not equal chain,  method: '${e.method}' `)}}}}adaptArray(e){if("wallet_switchEthereumChain"===e.method||"wallet_addEthereumChain"===e.method||"wallet_watchAsset"===e.method||"eth_sendTransaction"===e.method){if(this.isArray(e.params)){let t=e.params;if(t){if(1!==t.length)throw t.length>1?new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params only Support one data,  method: '${e.method}' `):new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);{let t=e.params[0];this.isRecord(t)&&(e.params=t)}}}}else if("eth_signTypedData_v4"===e.method){if(this.isArray(e.params)){let t=e.params;if(t&&t.length>2)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params only Support one data,  method: '${e.method}' `);if(t&&0===t.length)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);let n={};if(t&&2===t.length){let t=e.params[0];if(!t||"string"!=typeof t)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error , not string,  method: '${e.method}' `);{let r=!1;if(this.namespace.accounts.forEach((e=>{e.split(":")[2]===t&&(r=!0)})),(0,o.logDebug)("eip155 adaptArray eth_signTypedData_v4 >>>isEqual: ",r),!r)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error, not equal,  method: '${e.method}' `);if(!this.isRecord(e.params[1]))throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params message data error,  method: '${e.method}' `);n=e.params[1]}}else if(t&&1===t.length){if(!this.isRecord(e.params[0]))throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params message data error,  method: '${e.method}' `);n=e.params[0]}try{let t=JSON.stringify(n);e.params={typedDataJson:t}}catch{throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params call JSON.stringify() failed,  method: '${e.method}' `)}}}else if("personal_sign"===e.method&&this.isArray(e.params)){if(e.params&&e.params.length>2)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params error,  method: '${e.method}' `);if(e.params&&0===e.params.length)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);let t=e.params[0],n=e.params[1];if(n&&"string"==typeof n){let t=!1;if(this.namespace.accounts.forEach((e=>{e.split(":")[2]===n&&(t=!0)})),(0,o.logDebug)("eip155 adaptArray personal_sign >>>isEqual: ",t),!t)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error,  method: '${e.method}' `)}if(!t||"string"!=typeof t)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is error,  method: '${e.method}' `);e.params={message:t}}}showRequestModal(e){switch(e.method){case"eth_requestAccounts":case"eth_accounts":case"eth_chainId":default:return!1;case"eth_sendTransaction":case"eth_signTransaction":case"eth_sign":case"personal_sign":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"eth_signTypedData_v4":return!0;case"wallet_switchEthereumChain":{this.adaptArray(e),this.updateRequestParams(e);let{parsedChainId:t,hexChainId:n}=this.getHexChainIdFromRequest(e);return!this.isChainApproved(t)}}return!1}request(e){return t(this,void 0,void 0,(function*(){switch(this.adaptArray(e),(0,o.logDebug)("eip155 request --args--string>",JSON.stringify(e)),this.updateRequestParams(e),(0,o.logDebug)("eip155 request --params--string>",JSON.stringify(e)),e.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_switchEthereumChain":return yield this.handleSwitchChain(e);case"wallet_addEthereumChain":return this.addEthereumChain(e)}if(!this.namespace.methods.includes(e.method))return(0,o.logDebug)("[RPC] request begin"),yield this.getHttpProvider().request(e);try{let t=yield this.client.request(e);if((0,o.logDebug)("eip155 request --response----string>",JSON.stringify(t)),this.isRecord(t)&&"result"in t){let e=t.result;return!e||"string"!=typeof e||"true"!==e&&"false"!==e?t.result:((0,o.logDebug)("eip155 request --wallet_watchAsset>>>>","true"===e),"true"===e)}return t}catch(Ui){throw(0,o.logDebug)(`eip155 request --response --error--string> e instanceof OKXConnectError ${Ui instanceof o.OKXConnectError}`,JSON.stringify(Ui)),Ui}}))}addEthereumChain(e){return t(this,void 0,void 0,(function*(){let t=yield this.client.request(e);try{if("result"in t){let n=t.result;if(n){let t=n.split(":")[0],o=n.split(":")[1],i=t+":"+o;this.namespace;if(this.namespace.accounts.push(n),this.namespace.chains.push(i),this.isRecord(e.params)&&"rpcUrls"in e.params){let t=e.params.rpcUrls,n=t?t[0]:void 0;n&&(this.namespace.rpcMap?this.namespace.rpcMap[o]=n:this.namespace.rpcMap={[o]:n},this.setHttpProvider(o,n))}this.events.emit(r.PROVIDER_EVENTS.UPDATE_NAMESPACES,{eip155:this.namespace})}}else new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request error`)}catch{throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request  error`)}return null}))}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){if(this.chainId=parseInt(e),!this.httpProviders[e]){let r=t||(0,n.getRpcUrl)(`${this.name}:${e}`,this.namespace);r?this.setHttpProvider(e,r):(0,o.logError)(`No RPC url provided for chainId: ${e}`)}this.events.emit(r.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return(0,o.logDebug)("eip155 getAccounts ",e,this.chainId),e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}getHexChainIdFromRequest(e){let t=e.params,n="0x0";t&&"chainId"in t&&(n=t.chainId),n=n.startsWith("0x")?n:`0x${n}`,(0,o.logDebug)("handleSwitchChain --\x3eargs ",e),(0,o.logDebug)("handleSwitchChain --\x3ehexChainId ",n);let r=parseInt(n,16);return(0,o.logDebug)("handleSwitchChain --\x3eparsedChainId ",r),{parsedChainId:r,hexChainId:n}}handleSwitchChain(e){return t(this,void 0,void 0,(function*(){let{parsedChainId:t,hexChainId:n}=this.getHexChainIdFromRequest(e);if(this.isChainApproved(t))this.setDefaultChain(`${t}`);else{let i=yield this.client.request({method:"wallet_switchEthereumChain",chainId:e.chainId,params:{chainId:n}});try{if("result"in i){let e=i.result;if(e){let n=e.split(":")[0]+":"+e.split(":")[1];this.namespace;this.namespace.accounts.push(e),this.namespace.chains.push(n),(0,o.logDebug)("handleSwitchChain --\x3ewallet_switchEthereumChain ",i),this.setDefaultChain(`${t}`),this.events.emit(r.PROVIDER_EVENTS.UPDATE_NAMESPACES,{eip155:this.namespace})}}else new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request error`)}catch{throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request  error`)}}return null}))}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}createHttpProvider(e,t){let r=t;if(r)return new i.JsonRpcProvider(new a.JsonRpcConnection(r,(0,n.getGlobal)("disableProviderPing")));(0,o.logError)(`No RPC url provided for chainId: ${e}`)}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let r=(0,n.getChainId)(t),i=(0,n.getRpcUrl)(t,this.namespace);(0,o.logDebug)("get parsed chain and rpc:",r,i);let a=this.createHttpProvider(r,i);a&&(e[r]=a)})),(0,o.logDebug)("get http providermap:",e),e}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if((0,o.logDebug)("[RPC] get http provider:",e,t),typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}};e.Eip155Provider=s,e.default=s})),Ei=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SuiProvider=void 0;var n=mi(),r=qo(),o=bi(),i=Oi(),a=Ci(),s=class{constructor(e){this.name=r.NameSpaceKeySui,this.namespace=e.namespace,this.events=(0,o.getGlobal)("events"),this.client=(0,o.getGlobal)("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}request(e){return t(this,void 0,void 0,(function*(){return(0,r.logDebug)("sui request --args--string>",JSON.stringify(e)),(0,r.logDebug)("sui provider namespace: ",this.namespace),this.namespace.methods.includes(e.method)?this.client.request(e):this.getHttpProvider().request(e)}))}requestAccounts(){return this.getAccounts()}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,o.getChainId)(t),r=(0,o.getRpcUrl)(t,this.namespace),i=this.createHttpProvider(n,r);i&&(e[n]=i)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if((0,r.logDebug)("[RPC] get http provider:",e,t),typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&((0,r.logDebug)("setHttpProvider",e,t),this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new a.JsonRpcProvider(new i.JsonRpcConnection(n,(0,o.getGlobal)("disableProviderPing")));(0,r.logError)(`No RPC url provided for chainId: ${e}`)}getPubkey(e){return this.getWalletAddress(e)}getWalletAddress(e){return e||(e=this.namespace.defaultChain,e?.startsWith("sui")||(e=`sui:${e}`)),this.namespace.accounts.filter((function(t){return t.split(":").length>2&&t.startsWith(e)})).map((function(e){return e.split(":")[2]}))[0]}showRequestModal(e){switch(e.method){case"sui_signMessage":case"sui_signPersonalMessage":case"sui_signTransactionBlock":case"sui_signAndExecuteTransactionBlock":return!0;default:return!1}return!1}};e.SuiProvider=s,e.default=s})),_i=p((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getAccountsChains=function(e){let t=[];return e.forEach((e=>{let[n,r]=e.split(":");t.push(`${n}:${r}`)})),t},e.nameSpaceToConnectWalletNameSpace=function(e){var n=[];return e&&Object.keys(e).forEach((r=>{(r===t.NameSpaceKeyEip155||r===t.NameSpaceKeySOL||r===t.NameSpaceKeySui||r===t.NameSpaceKeyAptos||r==t.NameSpaceKeyBtc||r===t.NameSpaceKeyTON)&&e[r].chains&&n.push({namespace:r,chains:e[r].chains,params:e[r].params})})),n},e.fillParamsToSession=function(e,t,n,r){let o=(e,t)=>{Object.assign(e,t)},i=(e,t)=>{for(let n in t)t.hasOwnProperty(n)&&t[n].rpcMap&&(t[n].rpcMap&&(e[n].rpcMap||(e[n].rpcMap={}),o(e[n].rpcMap,t[n].rpcMap)),t[n].defaultChain&&void 0===e[n].defaultChain&&e[n].chains.some((e=>e.split(":")[1]===t[n].defaultChain))&&(e[n].defaultChain=t[n].defaultChain))};t&&i(e.namespaces,t),n&&i(e.namespaces,n),e.sessionConfig=r},e.isCaipNamespace=n,e.parseNamespaceKey=function(e){return n(e)?e.split(":")[0]:e};var t=qo();function n(e){return e.includes(":")}})),xi=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SignClient=void 0;var n=qo(),r=_i(),i=bi(),a=class extends n.ISignClient{constructor(e){super(e),this.engine=new n.Engine(new n.ConnectionManager),this.connect=e=>t(this,void 0,void 0,(function*(){return new Promise(((t,o)=>{var i=[];(0,n.logDebug)("client connect params >>>",JSON.stringify(e));var a={name:"requestAccounts",requiredNamespaces:(0,r.nameSpaceToConnectWalletNameSpace)(e.namespaces),optionalNamespaces:(0,r.nameSpaceToConnectWalletNameSpace)(e.optionalNamespaces)};(0,n.logDebug)("client connect connectRequest >>>",JSON.stringify(i)),i.push(a),this.engine.universalConnect(i,Object.assign({dappInfo:this.metadata},e.sessionConfig),(e=>{if(e&&e.connectRequest){var t=(0,n.encodeConnectParams)(e.connectRequest);this.events.emit("display_uri",(0,n.getUniversalLink)((0,n.getAppWalletDeepLink)(t))),(0,n.logDebug)(`universalConect EngineConnectInfo  ${JSON.stringify(e)}`),this.events.emit("okx_engine_connect_params",e)}})).then((o=>{(0,r.fillParamsToSession)(o,e.namespaces,e.optionalNamespaces,this.sessionConfig),(0,n.logDebug)(`signClient: connect: session ${JSON.stringify(o)}`),t(o)})).catch((e=>{(0,n.logDebug)(`signClient: connect: catch ${JSON.stringify(e)}`),this.events.emit("connect_error",e),o(e)}))}))})),this.restoreconnect=e=>t(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{this.engine.restoreconnect(e,(e=>{t(e)}))}))})),this.reject=e=>t(this,void 0,void 0,(function*(){})),this.request=e=>t(this,void 0,void 0,(function*(){return new Promise(((r,o)=>t(this,void 0,void 0,(function*(){var t,i;(0,n.logDebug)("clint request --params>>>> >",this.engine.connectionManager.getCurrentConnectionReady(),null===(t=this.sessionConfig)||void 0===t?void 0:t.openUniversalUrl,JSON.stringify(e));try{!(null===(i=this.sessionConfig)||void 0===i)&&i.openUniversalUrl&&(0,n.isIos)()&&this.openOKXWallet(),yield this.engine.send(e,{resolve:e=>{if(delete e.requestId,(0,n.logDebug)("clint request --response >",JSON.stringify(e)),"error"in e&&e.error){let t=e.error;o(new n.OKXConnectError(e.error.code,e.method+":"+t.message))}else r(e)},onAck:()=>{var e;!(0,n.isIos)()&&null!==(e=this.sessionConfig)&&void 0!==e&&e.openUniversalUrl&&this.openOKXWallet()}})}catch(a){o(a)}}))))})),this.disconnect=()=>t(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{this.engine.send({method:"disconnect"},{onAck:()=>{e()}}).catch((e=>{o.log(`disconnect : ${JSON.stringify(e)}`),t(e)}))}))})),this.events=(0,i.getGlobal)("events"),this.metadata=e}openOKXWallet(){(0,n.logDebug)("bridge-provider ==>> connect_5"),(0,n.openOKXDeeplink)(n.standardDeeplink)}};e.SignClient=a})),Si=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SolanaProvider=void 0;var n=mi(),r=qo(),o=bi(),i=Oi(),a=Ci(),s=class{constructor(e,t){this.name="solana",this.namespace=e.namespace,this.events=(0,o.getGlobal)("events"),this.client=(0,o.getGlobal)("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return t(this,void 0,void 0,(function*(){return(0,r.logDebug)("solana request --args--string>",JSON.stringify(e)),(0,r.logDebug)("solana provider namespace: ",this.namespace),this.namespace.methods.includes(e.method)?this.client.request(e):this.getHttpProvider().request(e)}))}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,o.getChainId)(t),r=(0,o.getRpcUrl)(t,this.namespace),i=this.createHttpProvider(n,r);i&&(e[n]=i)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new a.JsonRpcProvider(new i.JsonRpcConnection(n,(0,o.getGlobal)("disableProviderPing")));(0,r.logError)(`No RPC url provided for chainId: ${e}`)}getPubkey(e){return this.getWalletAddress(e)}getWalletAddress(e){return e||(e=this.namespace.defaultChain,e?.startsWith("solana")||(e=`solana:${e}`)),this.namespace.accounts.filter((function(t){return t.split(":").length>2&&t.startsWith(e)})).map((function(e){return e.split(":")[2]}))[0]}showRequestModal(e){return!0}};e.SolanaProvider=s,e.default=s})),Ri=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});var n=mi(),r=qo(),o=bi(),i=Oi(),a=Ci();e.default=class{constructor(e,t){this.name=r.NameSpaceKeyBtc,this.namespace=e.namespace,this.events=(0,o.getGlobal)("events"),this.client=(0,o.getGlobal)("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return t(this,void 0,void 0,(function*(){return(0,r.logDebug)("btc request --args--string>",JSON.stringify(e)),(0,r.logDebug)("btc provider namespace: ",JSON.stringify(this.namespace)),this.namespace.methods.includes(e.method)?this.client.request(e):this.getHttpProvider().request(e)}))}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,o.getChainId)(t),r=(0,o.getRpcUrl)(t,this.namespace),i=this.createHttpProvider(n,r);i&&(e[n]=i)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new a.JsonRpcProvider(new i.JsonRpcConnection(n,(0,o.getGlobal)("disableProviderPing")));(0,r.logError)(`No RPC url provided for chainId: ${e}`)}showRequestModal(e){return!0}}})),Ni=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});var n=mi(),r=qo(),o=bi(),i=Oi(),a=Ci();e.default=class{constructor(e,t){this.name="aptos",this.namespace=e.namespace,this.events=(0,o.getGlobal)("events"),this.client=(0,o.getGlobal)("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return t(this,void 0,void 0,(function*(){return(0,r.logDebug)("solana request --args--string>",JSON.stringify(e)),(0,r.logDebug)("solana provider namespace: ",this.namespace),this.namespace.methods.includes(e.method)?this.client.request(e):this.getHttpProvider().request(e)}))}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,o.getChainId)(t),r=(0,o.getRpcUrl)(t,this.namespace),i=this.createHttpProvider(n,r);i&&(e[n]=i)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new a.JsonRpcProvider(new i.JsonRpcConnection(n,(0,o.getGlobal)("disableProviderPing")));(0,r.logError)(`No RPC url provided for chainId: ${e}`)}showRequestModal(e){return!0}}})),Ti=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},n=e&&e.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(e,"__esModule",{value:!0});var r=mi(),o=qo(),i=bi(),a=Oi(),s=Ci();e.default=class{constructor(e){this.name=o.NameSpaceKeyTON,this.namespace=e.namespace,this.events=(0,i.getGlobal)("events"),this.client=(0,i.getGlobal)("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}isRecord(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}request(e){return t(this,void 0,void 0,(function*(){var t,r,i,a;if((0,o.logDebug)("TONProvider request --args--string>",JSON.stringify(e)),(0,o.logDebug)("TONProvider request provider namespace: ",this.namespace),this.namespace.methods.includes(e.method)){if(!e.params)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton request params is nil");if(this.isRecord(e.params)){let s=e.params,{validUntil:f}=s,c=n(s,["validUntil"]),l=null===(r=null===(t=this.namespace.payload)||void 0===t?void 0:t.ton_addr)||void 0===r?void 0:r.address;"from"in c&&(l=c.from||(null===(a=null===(i=this.namespace.payload)||void 0===i?void 0:i.ton_addr)||void 0===a?void 0:a.address)),e.params.from=l,e.params.network=this.getDefaultChain(),e.params.valid_until=f;let d=yield this.client.request(e);if(this.isRecord(d)&&"result"in d){let e={boc:d.result.toString()};return(0,o.logDebug)("TONProvider request provider response: ",JSON.stringify(d)),(0,o.logDebug)("TONProvider request provider result: ",JSON.stringify(e)),e}throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton_send request response is nil")}throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton request params type add nil")}return this.getHttpProvider().request(e)}))}requestAccounts(){return this.getAccounts()}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(r.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){var e,t;let n=this.namespace.accounts;if((0,o.logDebug)("ton getAccounts accounts :",n),(0,o.logDebug)("ton getAccounts .namespace :",JSON.stringify(this.namespace)),!n)return[];let r=null===(t=null===(e=this.namespace.payload)||void 0===e?void 0:e.ton_addr)||void 0===t?void 0:t.address;return(0,o.logDebug)("ton getAccounts address :",r),r?[r]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach((t=>{let n=(0,i.getChainId)(t),r=(0,i.getRpcUrl)(t,this.namespace),o=this.createHttpProvider(n,r);o&&(e[n]=o)})),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if((0,o.logDebug)("[RPC] get http provider:",e,t),typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&((0,o.logDebug)("setHttpProvider",e,t),this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t;if(n)return new s.JsonRpcProvider(new a.JsonRpcConnection(n,(0,i.getGlobal)("disableProviderPing")));(0,o.logError)(`No RPC url provided for chainId: ${e}`)}showRequestModal(e){return"ton_sendTransaction"===e.method}}})),ki=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))},n=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXUniversalProvider=void 0;var r=bi(),o=wi(),i=Ei(),a=mi(),s=n(m()),f=xi(),c=qo(),l=_i(),d=n(Si()),u=n(Ri()),h=n(Ni()),p=n(Ti()),g=class e{static init(n){return t(this,void 0,void 0,(function*(){let t=new e(n);return yield t.initialize(),t}))}getUniversalProvider(){return this}constructor(e){this.rpcProviders={},this.events=new s.default,this.providerOpts=e}request(e,n){return t(this,void 0,void 0,(function*(){if(!this.connected())throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR);let{namespace:t,requestParam:r}=this.buildRequestParamFromRequest(e,n);return yield this.getProvider(t).request(r)}))}buildRequestParamFromRequest(e,t){(0,c.logDebug)("UniversalProvider request args >>>: ",t,JSON.stringify(e));let[n,r]=this.validateChain(t);if(!this.session)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Please call connect() before request()");let o=Object.keys(this.session.namespaces);if(!t&&o&&o.length>1)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,"Multiple chains have been linked, the request method requires chain");return(0,c.logDebug)("UniversalProvider request >>args>>>: ",e),{namespace:n,requestParam:Object.assign(Object.assign({},e),{chainId:`${n}:${r}`})}}enable(){return t(this,void 0,void 0,(function*(){if(!this.client)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(!this.session){if(!this.connectOpts)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");yield this.connect(this.connectOpts)}return yield this.requestAccounts()}))}disconnect(){return t(this,void 0,void 0,(function*(){if(!this.session)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR);return new Promise((e=>t(this,void 0,void 0,(function*(){let n=!1,r=()=>t(this,void 0,void 0,(function*(){n||(n=!0,yield this.disconnectAndEmit(),yield this.cleanup(),e(),(0,c.logDebug)("UniversalProvider disconnect Disconnected"))}));try{yield this.client.disconnect(),yield r()}catch{yield r()}}))))}))}disconnectAndEmit(){var e,t;this.client.engine.connectionManager.disconnect(),this.events.emit("disconnect",{topic:null===(e=this.session)||void 0===e?void 0:e.topic}),this.events.emit("session_delete",{topic:null===(t=this.session)||void 0===t?void 0:t.topic})}aptosChainNameToGeneralId(e){return"aptos:mainnet"==e?"aptos:637":"movement:testnet"==e?"aptos:70000060":e}replaceAptos(e){var t,n;let r=null===(t=e.namespaces)||void 0===t?void 0:t.aptos;if(null!=r){let t=this.replaceAptosInner(r);null!=e.namespaces&&"aptos"in e.namespaces&&null!=t&&(e.namespaces.aptos=t)}let o=null===(n=e.optionalNamespaces)||void 0===n?void 0:n.aptos;if(null!=o){let t=this.replaceAptosInner(o);null!=e.optionalNamespaces&&"aptos"in e.optionalNamespaces&&null!=t&&(e.optionalNamespaces.aptos=t)}return e}replaceAptosInner(e){var t;return null!=e&&(e.chains=null===(t=e.chains)||void 0===t?void 0:t.map((e=>this.aptosChainNameToGeneralId(e))),null!=e.defaultChain&&(e.defaultChain=this.aptosChainNameToGeneralId(e.defaultChain))),e}connected(){let e=()=>{try{this.cleanup(),this.client.engine.connectionManager.disconnect()}catch(Ui){(0,c.logDebug)("Error during disconnect:",Ui)}};try{return!!this.session&&(!!this.client.engine.connectionManager.getCurrentConnectionReady()||(e(),!1))}catch{return e(),!1}}connect(e){return t(this,void 0,void 0,(function*(){if(!this.client)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(e=this.replaceAptos(e),this.connected())return this.session;(0,c.logDebug)("OKXUniversalProvider connect >>>>",JSON.stringify(e)),void 0===e.sessionConfig&&(e.sessionConfig={}),void 0===e.sessionConfig.openUniversalUrl&&(e.sessionConfig.openUniversalUrl=(0,c.isMobileUserAgent)()),this.setNamespaces(e);try{(0,c.logDebug)(`UniversalProvider connect opts.stringify ====> ${JSON.stringify(e)}`);let t=yield this.client.connect(e);return(0,c.logDebug)(`UniversalProvider connect success ====> ${JSON.stringify(t)}`),t?(this.session=t,this.onConnect(),t):void 0}catch(Ui){throw(0,c.logDebug)("UniversalProvider connect error ====> ",JSON.stringify(Ui)),Ui}}))}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}setDefaultChain(e,t){e=this.aptosChainNameToGeneralId(e);try{if(!this.connected())return;let[n,r]=this.validateChain(e);this.getProvider(n).setDefaultChain(r,t)}catch(n){if(!/Please call connect/.test(n.message))throw n}}checkStorage(){return t(this,void 0,void 0,(function*(){let e=yield this.getFromStore("connectSession");if((0,c.logDebug)(e),e){let t=e;this.session=t,this.client.session=this.session,this.sessionConfig=t.sessionConfig,this.client.sessionConfig=this.sessionConfig,(0,c.logDebug)("[evm u-provider] do reconnection",this.session),yield this.client.restoreconnect(t),this.createProviders(),this.registerEventListeners(),setTimeout((()=>{this.events.emit("reconnect",{session:this.session})}),100)}}))}initialize(){return t(this,void 0,void 0,(function*(){let e=Object.assign({url:window.location.hostname,origin:window.location.origin},this.providerOpts.dappMetaData);(0,r.setGlobal)("events",this.events),this.client=new f.SignClient(e),(0,r.setGlobal)("client",this.client),yield this.checkStorage()}))}createProviders(){if(!this.client)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(!this.connected())throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Session not initialized. Please call connect() before enable()");[...new Set(Object.keys(this.session.namespaces).map((e=>(0,l.parseNamespaceKey)(e))))].forEach((e=>{if(!this.session)return;let t=this.session.namespaces[e];switch((0,c.logDebug)("init eip155 >> ",t),e){case"eip155":let n={namespace:t};this.rpcProviders[e]=new o.Eip155Provider(n);break;case"solana":let r={namespace:t},a=new d.default(r,"solana");this.rpcProviders[e]=a;let s=new d.default(r,"sonic");this.rpcProviders.sonic=s;let f=new d.default(r,"svm");this.rpcProviders.svm=f;break;case"ton":let c={namespace:t},l=new p.default(c);this.rpcProviders[e]=l;break;case"sui":let g={namespace:t},b=new i.SuiProvider(g);b.name="sui",this.rpcProviders[e]=b;break;case"btc":let y={namespace:t},v=new u.default(y,"btc");this.rpcProviders.btc=v;let m=new u.default(y,"fractal");this.rpcProviders.fractal=m;break;case"aptos":let C=new h.default({namespace:t},"aptos");this.rpcProviders[e]=C}}))}registerEventListeners(){if(typeof this.client>"u")throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client is not initialized");this.client.engine.addDisconnectListener((()=>{this.disconnectAndEmit(),this.cleanup()})),this.on(a.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,(e=>{this.onChainChanged(e)})),this.on(a.PROVIDER_EVENTS.UPDATE_NAMESPACES,(e=>{if(e){let t=Object.keys(e)[0];this.session&&(this.session.namespaces[t]=e[t],this.session&&(this.persist("connectSession",this.session),this.events.emit("session_update",this.session)),(0,c.logDebug)("PROVIDER_EVENTS.UPDATE_NAMESPACES this.session... ->>>",JSON.stringify(this.session)))}}))}getProvider(e){return(0,c.logDebug)("current get providers",this.rpcProviders),(0,c.logDebug)("query namespace: ",e),this.rpcProviders[e]}setNamespaces(e){this.connectOpts=e;let{namespaces:t,sessionConfig:n}=e,r={origin:window.location.origin,url:window.location.hostname,name:this.providerOpts.dappMetaData.name,icon:this.providerOpts.dappMetaData.icon};this.sessionConfig={dappInfo:r,openUniversalUrl:n?.openUniversalUrl,redirect:n?.redirect},(0,c.logDebug)("setNamespaces sessionConfig>>>",this.sessionConfig),this.client.sessionConfig=this.sessionConfig,this.persist("sessionConfig",n)}validateChain(e){var t;let[n,r]=e?.split(":")||["",""];if(!this.session||!this.session.namespaces||!Object.keys(this.session.namespaces).length)return(0,c.logDebug)("get name & chain",n,r),[n,r];if(n){if(!this.isChainNamespaceInSession(n))throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(r&&e){(0,c.logDebug)("this.session.namespaces --\x3e> ",n,JSON.stringify(this.session.namespaces));let r=null===(t=this.session.namespaces[n])||void 0===t?void 0:t.chains;if((0,c.logDebug)("get chainsArr & chain",JSON.stringify(r),e),r&&!r.includes(e))throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Namespace not include the chain '${e}'`)}}if(n&&r)return(0,c.logDebug)("get name & chain",n,r),[n,r];let o=(0,l.parseNamespaceKey)(Object.keys(this.session.namespaces)[0]),i=this.rpcProviders[o].getDefaultChain();return(0,c.logDebug)("get default chain:",i),[o,i]}isChainNamespaceInSession(e){var t,n;if(Object.keys((null===(t=this.session)||void 0===t?void 0:t.namespaces)||{}).map((e=>(0,l.parseNamespaceKey)(e))).includes(e))return!0;let r=!1;return Object.values((null===(n=this.session)||void 0===n?void 0:n.namespaces)||{}).forEach((t=>{t.chains.forEach((t=>{t.split(":")[0]==e&&(r=!0)}))})),r}requestAccountsWithNamespace(e){return this.getProvider(e).requestAccounts()}requestDefaultChainWithNamespace(e){return this.getProvider(e).getDefaultChain()}requestAccounts(){return t(this,void 0,void 0,(function*(){let[e]=this.validateChain();return yield this.getProvider(e).requestAccounts()}))}onChainChanged(e){var t;if(null===(t=this.session)||void 0===t||!t.namespaces)return;let[n,r]=this.validateChain(e);r&&(this.session.namespaces[n]&&(this.session.namespaces[n].defaultChain=r,this.persist("connectSession",this.session)),this.events.emit("chainChanged",r))}onConnect(){this.createProviders(),this.session&&this.persist("connectSession",this.session),this.events.emit("connect",{session:this.session}),this.registerEventListeners()}cleanup(){return t(this,void 0,void 0,(function*(){this.session=void 0,this.sessionProperties=void 0,this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),this.persist("connectSession",void 0)}))}persist(e,t){return(0,c.logDebug)("[evm u-provider] persisit data",e,t),this.client.engine.connectionManager.saveSessionContent(e,t)}getFromStore(e){return t(this,void 0,void 0,(function*(){return this.client.engine.connectionManager.getSessionContent(e)}))}showRequestModal(e,t){try{let{namespace:n,requestParam:r}=this.buildRequestParamFromRequest(e,t);return this.getProvider(n).showRequestModal(r)}catch{return!1}}};e.OKXUniversalProvider=g,e.default=g})),Di=p((e=>{var t=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{f(r.next(e))}catch(t){i(t)}}function s(e){try{f(r.throw(e))}catch(t){i(t)}}function f(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}f((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXBtcProvider=void 0;var n=Pi(),r=class{constructor(e){this.caip=["btc:mainnet","fractal:mainnet"],this.provider=e.getUniversalProvider()}getAddressForChainId(e){var t,r;if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let o=null===(r=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces.btc)||void 0===r?void 0:r.accounts.filter((function(t){return t.startsWith(e)}));if(null==o||o.length<0)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"no connected account");return o[0].split(":")[2]}getAccount(e){var t,r,o;let i=this.checkChainId(e);if(null==i)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let a=null===(o=null===(r=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces[i])||void 0===r?void 0:r.extra)||void 0===o?void 0:o[e],s="";return null!=a&&(s=a.publicKey),{address:this.getAddressForChainId(e),publicKey:s}}signMessage(e,r,o){return t(this,void 0,void 0,(function*(){if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if("undefined"===r)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signMessage parmas error");let t={signStr:r,from:this.getAddressForChainId(e)};o&&(t.type=o);try{let n=yield this.provider.request({method:"btc_signMessage",params:t},e);return"result"in n?n.result:n.error}catch{throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signTransaction request error")}}))}sendBitcoin(e,r,o,i){return t(this,void 0,void 0,(function*(){if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let t={from:this.getAddressForChainId(e),to:r,value:(o/1e8).toString()};i?.feeRate&&(t.satBytes=i.feeRate.toString());let a=yield this.send(e,t);return void 0!==a&&"txhash"in a?a.txhash:a}))}send(e,r){return t(this,void 0,void 0,(function*(){if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(!this.checkParameters(r,"to","value"))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method send parmas  error");r.from=this.getAddressForChainId(e);try{let t=yield this.provider.request({method:"btc_send",params:r},e);return"result"in t?{txhash:t.result}:t.error}catch(t){throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${t}`)}}))}signPsbt(e,n,r){return t(this,void 0,void 0,(function*(){return new Promise(((t,o)=>{this.signPsbts(e,[n],[r]).then((e=>{let n=JSON.parse(e);t(n[0])})).catch((e=>{o(e)}))}))}))}signPsbts(e,r,o){return t(this,void 0,void 0,(function*(){if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(void 0===r)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signPsbts params error");let t={psbtHexs:r,options:o};t.from=this.getAddressForChainId(e);try{let n=yield this.provider.request({method:"btc_signPsbts",params:t},e);return"result"in n?n.result:n.error}catch(i){throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${i}`)}}))}signAndPushPsbt(e,r,o){return t(this,void 0,void 0,(function*(){if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(void 0===r)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signPsbts params error");let t={psbtHex:r,options:o};t.from=this.getAddressForChainId(e);try{let n=yield this.provider.request({method:"btc_signAndPushPsbt",params:t},e);return"result"in n?JSON.parse(n.result):n.error}catch(i){throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${i}`)}}))}sendInscription(e,r,o,i){return t(this,void 0,void 0,(function*(){let t={address:r,inscriptionId:o,options:i};if(null==this.checkChainId(e))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if("undefined"===r)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method sendInscription params error");var a=0;i&&"feeRate"in i&&(a=i.feeRate);let s=this.getAddressForChainId(e);var f=7;if("undefined"!==o){let e="-Atomicals",t="-Ordinals";o?.toLowerCase().endsWith(e.toLowerCase())?(f=8,o=this.removeSuffix(o,e)):o?.toLowerCase().endsWith(t.toLowerCase())&&(o=this.removeSuffix(o,t))}let c={scenario:5,feeRate:a,txType:"20",to:r,batchBean:[{coinAmount:"1",nftId:o,protocolId:f,coinId:"",inscriptionId:"",from:s}],extension:t};try{let t=yield this.provider.request({method:"btc_sendInscription",params:c},e);return"result"in t?t.result:t.error}catch{throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signTransaction request error")}}))}removeSuffix(e,t){return e.endsWith(t)?e.slice(0,e.length-t.length):e}checkParameters(e){for(var t=[],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((n=>{`${n}`in e||t.push(n)})),!(t.length>0)||(o.log("not find key: ",t.join(",")),!1)}checkChainId(e){if(this.caip.includes(e)){let[t,n]=e.split(":");return t}}};e.OKXBtcProvider=r,e.default=r})),Pi=p((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXConnectError=e.OKX_CONNECT_ERROR_CODES=e.NameSpaceKeyBtc=e.NameSpaceKeySui=e.OKXBtcProvider=e.OKXUniversalProvider=void 0,n(hi(),e);var r=ki();Object.defineProperty(e,"OKXUniversalProvider",{enumerable:!0,get:function(){return r.OKXUniversalProvider}});var o=Di();Object.defineProperty(e,"OKXBtcProvider",{enumerable:!0,get:function(){return o.OKXBtcProvider}});var i=qo();Object.defineProperty(e,"NameSpaceKeySui",{enumerable:!0,get:function(){return i.NameSpaceKeySui}}),Object.defineProperty(e,"NameSpaceKeyBtc",{enumerable:!0,get:function(){return i.NameSpaceKeyBtc}}),Object.defineProperty(e,"OKX_CONNECT_ERROR_CODES",{enumerable:!0,get:function(){return i.OKX_CONNECT_ERROR_CODES}}),Object.defineProperty(e,"OKXConnectError",{enumerable:!0,get:function(){return i.OKXConnectError}})})),Ai=y(m(),1).default,Ii=y(fo()),Ki={};g(Ki,{OKXConnectUiError:()=>pa,OKXTonConnectUI:()=>kp,OKXUniversalConnectUI:()=>jp,OKX_UI_CONNECTION_AND_TRANSACTION_EVENT:()=>xp,THEME:()=>ha});var Mi,ji,Ui,Li=y(qo(),1),Wi=y(fi(),1);Mi=Ki,ji=y(fi(),1),b(Mi,ji,"default"),Ui&&b(Ui,ji,"default");var Bi,Xi,$i,Hi,qi,Fi,Ji,Vi,Gi=y($n(),1),zi=y(ci(),1),Yi=y(li(),1),Zi=y(Pi(),1),Qi=Object.defineProperty,ea=Object.defineProperties,ta=Object.getOwnPropertyDescriptors,na=Object.getOwnPropertySymbols,ra=Object.getPrototypeOf,oa=Object.prototype.hasOwnProperty,ia=Object.prototype.propertyIsEnumerable,aa=Reflect.get,sa=(e,t,n)=>t in e?Qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fa=(e,t)=>{for(var n in t||(t={}))oa.call(t,n)&&sa(e,n,t[n]);if(na)for(var n of na(t))ia.call(t,n)&&sa(e,n,t[n]);return e},ca=(e,t)=>ea(e,ta(t)),la=(e,t,n)=>(sa(e,"symbol"!=typeof t?t+"":t,n),n),da=(e,t,n)=>aa(ra(e),n,t),ua=(e,t,n)=>new Promise(((r,o)=>{var i=e=>{try{s(n.next(e))}catch(t){o(t)}},a=e=>{try{s(n.throw(e))}catch(t){o(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,a);s((n=n.apply(e,t)).next())})),ha=(e=>(e.DARK="DARK",e.LIGHT="LIGHT",e))(ha||{}),pa=class extends Li.OKXConnectError{constructor(e){super(1,e)}},ga={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return ba(this.context.count)},getNextContextId(){return ba(this.context.count++)}};function ba(e){let t=String(e),n=t.length-1;return ga.context.id+(n?String.fromCharCode(96+n):"")+t}var ya=Symbol("solid-proxy"),va="function"==typeof Proxy,ma=Symbol("solid-track"),Ca={equals:(e,t)=>e===t},Oa=Ya,wa=1,Ea=2,_a={owned:null,cleanups:null,context:null,owner:null},xa=null,Sa=null,Ra=null,Na=null,Ta=null,ka=0;function Da(e,t){let n=Ra,r=xa,o=0===e.length,i=void 0===t?r:t,a=o?_a:{owned:null,cleanups:null,context:i?i.context:null,owner:i},s=o?e:()=>e((()=>ja((()=>ts(a)))));xa=a,Ra=null;try{return za(s,!0)}finally{Ra=n,xa=r}}function Pa(e,t){let n={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},Ca,t):Ca).equals||void 0};return[qa.bind(n),e=>("function"==typeof e&&(e=e(n.value)),Fa(n,e))]}function Aa(e,t,n){Ja(Va(e,t,!1,wa))}function Ia(e,t,n){Oa=Za;let r=Va(e,t,!1,wa);(!n||!n.render)&&(r.user=!0),Ta?Ta.push(r):Ja(r)}function Ka(e,t,n){n=n?Object.assign({},Ca,n):Ca;let r=Va(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Ja(r),qa.bind(r)}function Ma(e){return za(e,!1)}function ja(e){if(null===Ra)return e();let t=Ra;Ra=null;try{return e()}finally{Ra=t}}function Ua(e){Ia((()=>ja(e)))}function La(e){return null===xa||(null===xa.cleanups?xa.cleanups=[e]:xa.cleanups.push(e)),e}function Wa(){return Ra}function Ba(){return xa}function Xa(e,t){let n=Symbol("context");return{id:n,Provider:os(n),defaultValue:e}}function $a(e){let t;return xa&&xa.context&&void 0!==(t=xa.context[e.id])?t:e.defaultValue}function Ha(e){let t=Ka(e),n=Ka((()=>rs(t())));return n.toArray=()=>{let e=n();return Array.isArray(e)?e:null!=e?[e]:[]},n}function qa(){if(this.sources&&this.state)if(this.state===wa)Ja(this);else{let e=Na;Na=null,za((()=>Qa(this)),!1),Na=e}if(Ra){let e=this.observers?this.observers.length:0;Ra.sources?(Ra.sources.push(this),Ra.sourceSlots.push(e)):(Ra.sources=[this],Ra.sourceSlots=[e]),this.observers?(this.observers.push(Ra),this.observerSlots.push(Ra.sources.length-1)):(this.observers=[Ra],this.observerSlots=[Ra.sources.length-1])}return this.value}function Fa(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&za((()=>{for(let t=0;t<e.observers.length;t+=1){let n=e.observers[t],r=Sa&&Sa.running;r&&Sa.disposed.has(n),(r?!n.tState:!n.state)&&(n.pure?Na.push(n):Ta.push(n),n.observers&&es(n)),r||(n.state=wa)}if(Na.length>1e6)throw Na=[],new Error}),!1)),t}function Ja(e){if(!e.fn)return;ts(e);let t=ka;!function(e,t,n){let r,o=xa,i=Ra;Ra=xa=e;try{r=e.fn(t)}catch(a){return e.pure&&(e.state=wa,e.owned&&e.owned.forEach(ts),e.owned=null),e.updatedAt=n+1,ns(a)}finally{Ra=i,xa=o}(!e.updatedAt||e.updatedAt<=n)&&(null!=e.updatedAt&&"observers"in e?Fa(e,r):e.value=r,e.updatedAt=n)}(e,e.value,t)}function Va(e,t,n){let r={fn:e,state:arguments.length>3&&void 0!==arguments[3]?arguments[3]:wa,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:xa,context:xa?xa.context:null,pure:n};return null===xa||xa!==_a&&(xa.owned?xa.owned.push(r):xa.owned=[r]),r}function Ga(e){if(0===e.state)return;if(e.state===Ea)return Qa(e);if(e.suspense&&ja(e.suspense.inFallback))return e.suspense.effects.push(e);let t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ka);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if((e=t[n]).state===wa)Ja(e);else if(e.state===Ea){let n=Na;Na=null,za((()=>Qa(e,t[0])),!1),Na=n}}function za(e,t){if(Na)return e();let n=!1;t||(Na=[]),Ta?n=!0:Ta=[],ka++;try{let t=e();return function(e){if(Na&&(Ya(Na),Na=null),e)return;let t=Ta;Ta=null,t.length&&za((()=>Oa(t)),!1)}(n),t}catch(r){n||(Ta=null),Na=null,ns(r)}}function Ya(e){for(let t=0;t<e.length;t++)Ga(e[t])}function Za(e){let t,n=0;for(t=0;t<e.length;t++){let r=e[t];r.user?e[n++]=r:Ga(r)}for(t=0;t<n;t++)Ga(e[t])}function Qa(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){let r=e.sources[n];if(r.sources){let e=r.state;e===wa?r!==t&&(!r.updatedAt||r.updatedAt<ka)&&Ga(r):e===Ea&&Qa(r,t)}}}function es(e){for(let t=0;t<e.observers.length;t+=1){let n=e.observers[t];n.state||(n.state=Ea,n.pure?Na.push(n):Ta.push(n),n.observers&&es(n))}}function ts(e){let t;if(e.sources)for(;e.sources.length;){let t=e.sources.pop(),n=e.sourceSlots.pop(),r=t.observers;if(r&&r.length){let e=r.pop(),o=t.observerSlots.pop();n<r.length&&(e.sourceSlots[o]=n,r[n]=e,t.observerSlots[n]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)ts(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)ts(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function ns(e){throw function(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}(e)}function rs(e){if("function"==typeof e&&!e.length)return rs(e());if(Array.isArray(e)){let t=[];for(let n=0;n<e.length;n++){let r=rs(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function os(e,t){return function(t){let n;return Aa((()=>n=ja((()=>(xa.context=ca(fa({},xa.context),{[e]:t.value}),Ha((()=>t.children)))))),void 0),n}}function is(e,t){return ja((()=>e(t||{})))}function as(){return!0}var ss={get:(e,t,n)=>t===ya?n:e.get(t),has:(e,t)=>t===ya||e.has(t),set:as,deleteProperty:as,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:as,deleteProperty:as}),ownKeys:e=>e.keys()};function fs(e){return(e="function"==typeof e?e():e)?e:{}}function cs(){for(let e=0,t=this.length;e<t;++e){let t=this[e]();if(void 0!==t)return t}}function ls(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=!1;for(let f=0;f<t.length;f++){let e=t[f];r=r||!!e&&ya in e,t[f]="function"==typeof e?(r=!0,Ka(e)):e}if(va&&r)return new Proxy({get(e){for(let n=t.length-1;n>=0;n--){let r=fs(t[n])[e];if(void 0!==r)return r}},has(e){for(let n=t.length-1;n>=0;n--)if(e in fs(t[n]))return!0;return!1},keys(){let e=[];for(let n=0;n<t.length;n++)e.push(...Object.keys(fs(t[n])));return[...new Set(e)]}},ss);let o={},i=Object.create(null);for(let f=t.length-1;f>=0;f--){let e=t[f];if(!e)continue;let n=Object.getOwnPropertyNames(e);for(let t=n.length-1;t>=0;t--){let r=n[t];if("__proto__"===r||"constructor"===r)continue;let a=Object.getOwnPropertyDescriptor(e,r);if(i[r]){let t=o[r];t&&(a.get?t.push(a.get.bind(e)):void 0!==a.value&&t.push((()=>a.value)))}else i[r]=a.get?{enumerable:!0,configurable:!0,get:cs.bind(o[r]=[a.get.bind(e)])}:void 0!==a.value?a:void 0}}let a={},s=Object.keys(i);for(let f=s.length-1;f>=0;f--){let e=s[f],t=i[e];t&&t.get?Object.defineProperty(a,e,t):a[e]=t?t.value:void 0}return a}function ds(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(va&&ya in e){let t=new Set(n.length>1?n.flat():n[0]),r=n.map((t=>new Proxy({get:n=>t.includes(n)?e[n]:void 0,has:n=>t.includes(n)&&n in e,keys:()=>t.filter((t=>t in e))},ss)));return r.push(new Proxy({get:n=>t.has(n)?void 0:e[n],has:n=>!t.has(n)&&n in e,keys:()=>Object.keys(e).filter((e=>!t.has(e)))},ss)),r}let o={},i=n.map((()=>({})));for(let a of Object.getOwnPropertyNames(e)){let t=Object.getOwnPropertyDescriptor(e,a),r=!t.get&&!t.set&&t.enumerable&&t.writable&&t.configurable,s=!1,f=0;for(let e of n)e.includes(a)&&(s=!0,r?i[f][a]=t.value:Object.defineProperty(i[f],a,t)),++f;s||(r?o[a]=t.value:Object.defineProperty(o,a,t))}return[...i,o]}var us=e=>`Stale read from <${e}>.`;function hs(e){let t=e.keyed,n=Ka((()=>e.when),void 0,{equals:(e,n)=>t?e===n:!e==!n});return Ka((()=>{let r=n();if(r){let o=e.children;return"function"==typeof o&&o.length>0?ja((()=>o(t?r:()=>{if(!ja(n))throw us("Show");return e.when}))):o}return e.fallback}),void 0,void 0)}function ps(e){let t=!1,n=Ha((()=>e.children)),r=Ka((()=>{let e=n();Array.isArray(e)||(e=[e]);for(let n=0;n<e.length;n++){let r=e[n].when;if(r)return t=!!e[n].keyed,[n,r,e[n]]}return[-1]}),void 0,{equals:(e,n)=>(t?e[1]===n[1]:!e[1]==!n[1])&&e[2]===n[2]});return Ka((()=>{let[n,o,i]=r();if(n<0)return e.fallback;let a=i.children;return"function"==typeof a&&a.length>0?ja((()=>a(t?o:()=>{if(ja(r)[0]!==n)throw us("Match");return i.when}))):a}),void 0,void 0)}function gs(e){return e}var bs=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline","allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"]),ys=new Set(["innerHTML","textContent","innerText","children"]),vs=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),ms=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});var Cs=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Os=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),ws={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};var Es="_$DX_DELEGATE";function _s(e,t,n){let r;return Da((o=>{r=o,t===document?e():ks(t,e(),t.firstChild?null:void 0,n)}),(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).owner),()=>{r(),t.textContent=""}}function xs(e,t,n){let r,o=()=>{let t=document.createElement("template");return t.innerHTML=e,n?t.content.firstChild.firstChild:t.content.firstChild},i=t?()=>ja((()=>document.importNode(r||(r=o()),!0))):()=>(r||(r=o())).cloneNode(!0);return i.cloneNode=i,i}function Ss(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function Rs(e,t){null==t?e.removeAttribute("class"):e.className=t}function Ns(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r={};return(arguments.length>3?arguments[3]:void 0)||Aa((()=>r.children=Is(e,t.children,r.children))),Aa((()=>"function"==typeof t.ref&&Ts(t.ref,e))),Aa((()=>function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];t||(t={});for(let a in o)if(!(a in t)){if("children"===a)continue;o[a]=Ps(e,a,null,o[a],n,i,t)}for(let a in t){if("children"===a){r||Is(e,t.children);continue}let s=t[a];o[a]=Ps(e,a,s,o[a],n,i,t)}}(e,t,n,!0,r,!0))),r}function Ts(e,t,n){return ja((()=>e(t,n)))}function ks(e,t,n,r){if(void 0!==n&&!r&&(r=[]),"function"!=typeof t)return Is(e,t,r,n);Aa((r=>Is(e,t(),r,n)),r)}function Ds(e,t,n){let r=t.trim().split(/\s+/);for(let o=0,i=r.length;o<i;o++)e.classList.toggle(r[o],n)}function Ps(e,t,n,r,o,i,a){let s,f,c,l,d;if("style"===t)return function(e,t,n){if(!t)return n?Ss(e,"style"):t;let r,o,i=e.style;if("string"==typeof t)return i.cssText=t;for(o in"string"==typeof n&&(i.cssText=n=void 0),n||(n={}),t||(t={}),n)null==t[o]&&i.removeProperty(o),delete n[o];for(o in t)r=t[o],r!==n[o]&&(i.setProperty(o,r),n[o]=r);return n}(e,n,r);if("classList"===t)return function(e,t){let n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.keys(t||{}),a=Object.keys(o);for(n=0,r=a.length;n<r;n++){let r=a[n];!r||"undefined"===r||t[r]||(Ds(e,r,!1),delete o[r])}for(n=0,r=i.length;n<r;n++){let r=i[n],a=!!t[r];!r||"undefined"===r||o[r]===a||!a||(Ds(e,r,!0),o[r]=a)}return o}(e,n,r);if(n===r)return r;if("ref"===t)i||n(e);else if("on:"===t.slice(0,3)){let o=t.slice(3);r&&e.removeEventListener(o,r,"function"!=typeof r&&r),n&&e.addEventListener(o,n,"function"!=typeof n&&n)}else if("oncapture:"===t.slice(0,10)){let o=t.slice(10);r&&e.removeEventListener(o,r,!0),n&&e.addEventListener(o,n,!0)}else if("on"===t.slice(0,2)){let o=t.slice(2).toLowerCase(),i=Cs.has(o);if(!i&&r){let t=Array.isArray(r)?r[0]:r;e.removeEventListener(o,t)}(i||n)&&(function(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){let r=n[0];e.addEventListener(t,n[0]=t=>r.call(e,n[1],t))}else e.addEventListener(t,n,"function"!=typeof n&&n)}(e,o,n,i),i&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.document,n=t[Es]||(t[Es]=new Set);for(let r=0,o=e.length;r<o;r++){let o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,As))}}([o]))}else if("attr:"===t.slice(0,5))Ss(e,t.slice(5),n);else if("bool:"===t.slice(0,5))!function(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}(e,t.slice(5),n);else if((d="prop:"===t.slice(0,5))||(c=ys.has(t))||!o&&((l=function(e,t){let n=ms[e];return"object"==typeof n?n[t]?n.$:void 0:n}(t,e.tagName))||(f=bs.has(t)))||(s=e.nodeName.includes("-")||"is"in a))d&&(t=t.slice(5),f=!0),"class"===t||"className"===t?Rs(e,n):!s||f||c?e[l||t]=n:e[function(e){return e.toLowerCase().replace(/-([a-z])/g,((e,t)=>t.toUpperCase()))}(t)]=n;else{let r=o&&t.indexOf(":")>-1&&ws[t.split(":")[0]];r?function(e,t,n,r){null==r?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}(e,r,t,n):Ss(e,vs[t]||t,n)}return n}function As(e){let t=e.target,n=`$$${e.type}`,r=e.target,o=e.currentTarget,i=t=>Object.defineProperty(e,"target",{configurable:!0,value:t}),a=()=>{let r=t[n];if(r&&!t.disabled){let o=t[`${n}Data`];if(void 0!==o?r.call(t,o,e):r.call(t,e),e.cancelBubble)return}return t.host&&"string"!=typeof t.host&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},s=()=>{for(;a()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>t||document}),e.composedPath){let n=e.composedPath();i(n[0]);for(let e=0;e<n.length-2&&(t=n[e],a());e++){if(t._$host){t=t._$host,s();break}if(t.parentNode===o)break}}else s();i(r)}function Is(e,t,n,r,o){for(;"function"==typeof n;)n=n();if(t===n)return n;let i=typeof t,a=void 0!==r;if(e=a&&n[0]&&n[0].parentNode||e,"string"===i||"number"===i){if("number"===i&&(t=t.toString())===n)return n;if(a){let o=n[0];o&&3===o.nodeType?o.data!==t&&(o.data=t):o=document.createTextNode(t),n=js(e,n,r,o)}else n=""!==n&&"string"==typeof n?e.firstChild.data=t:e.textContent=t}else if(null==t||"boolean"===i)n=js(e,n,r);else{if("function"===i)return Aa((()=>{let o=t();for(;"function"==typeof o;)o=o();n=Is(e,o,n,r)})),()=>n;if(Array.isArray(t)){let i=[],s=n&&Array.isArray(n);if(Ks(i,t,n,o))return Aa((()=>n=Is(e,i,n,r,!0))),()=>n;if(0===i.length){if(n=js(e,n,r),a)return n}else s?0===n.length?Ms(e,i,r):function(e,t,n){let r=n.length,o=t.length,i=r,a=0,s=0,f=t[o-1].nextSibling,c=null;for(;a<o||s<i;)if(t[a]!==n[s]){for(;t[o-1]===n[i-1];)o--,i--;if(o===a){let t=i<r?s?n[s-1].nextSibling:n[i-s]:f;for(;s<i;)e.insertBefore(n[s++],t)}else if(i===s)for(;a<o;)(!c||!c.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[i-1]&&n[s]===t[o-1]){let r=t[--o].nextSibling;e.insertBefore(n[s++],t[a++].nextSibling),e.insertBefore(n[--i],r),t[o]=n[i]}else{if(!c){c=new Map;let e=s;for(;e<i;)c.set(n[e],e++)}let r=c.get(t[a]);if(null!=r)if(s<r&&r<i){let f,l=a,d=1;for(;++l<o&&l<i&&null!=(f=c.get(t[l]))&&f===r+d;)d++;if(d>r-s){let o=t[a];for(;s<r;)e.insertBefore(n[s++],o)}else e.replaceChild(n[s++],t[a++])}else a++;else t[a++].remove()}}else a++,s++}(e,n,i):(n&&js(e),Ms(e,i));n=i}else if(t.nodeType){if(Array.isArray(n)){if(a)return n=js(e,n,r,t);js(e,n,null,t)}else null!=n&&""!==n&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);n=t}}return n}function Ks(e,t,n,r){let o=!1;for(let i=0,a=t.length;i<a;i++){let a,s=t[i],f=n&&n[e.length];if(null!=s&&!0!==s&&!1!==s)if("object"==(a=typeof s)&&s.nodeType)e.push(s);else if(Array.isArray(s))o=Ks(e,s,f)||o;else if("function"===a)if(r){for(;"function"==typeof s;)s=s();o=Ks(e,Array.isArray(s)?s:[s],Array.isArray(f)?f:[f])||o}else e.push(s),o=!0;else{let t=String(s);f&&3===f.nodeType&&f.data===t?e.push(f):e.push(document.createTextNode(t))}}return o}function Ms(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function js(e,t,n,r){if(void 0===n)return e.textContent="";let o=r||document.createTextNode("");if(t.length){let r=!1;for(let i=t.length-1;i>=0;i--){let a=t[i];if(o!==a){let t=a.parentNode===e;r||i?t&&a.remove():t?e.replaceChild(o,a):e.insertBefore(o,n)}else r=!0}}else e.insertBefore(o,n);return[o]}function Us(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}function Ls(e){let t,{useShadow:n}=e,r=document.createTextNode(""),o=Ba();return Ia((()=>{t||(t=function(e,t){let n=xa,r=Ra;xa=e,Ra=null;try{return za(t,!0)}catch(o){ns(o)}finally{xa=n,Ra=r}}(o,(()=>Ka((()=>e.children)))));let i=e.mount||document.body;if(i instanceof HTMLHeadElement){let[e,n]=Pa(!1),r=()=>n(!0);Da((n=>ks(i,(()=>e()?n():t()),null))),La(r)}else{let o=Us(e.isSVG?"g":"div",e.isSVG),a=n&&o.attachShadow?o.attachShadow({mode:"open"}):o;Object.defineProperty(o,"_$host",{get:()=>r.parentNode,configurable:!0}),ks(a,t),i.appendChild(o),e.ref&&e.ref(o),La((()=>i.removeChild(o)))}}),void 0,{render:!!!ga.context}),r}function Ws(e){let[t,n]=ds(e,["component"]),r=Ka((()=>t.component));return Ka((()=>{let e=r();switch(typeof e){case"function":return ja((()=>e(n)));case"string":let t=Os.has(e),r=Us(e,t);return Ns(r,n,t),r}}))}var Bs={data:""},Xs=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,$s=/\/\*[^]*?\*\/|  +/g,Hs=/\n+/g,qs=(e,t)=>{let n="",r="",o="";for(let i in e){let a=e[i];"@"==i[0]?"i"==i[1]?n=i+" "+a+";":r+="f"==i[1]?qs(a,i):i+"{"+qs(a,"k"==i[1]?"":t)+"}":"object"==typeof a?r+=qs(a,t?t.replace(/([^,])+/g,(e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):i):null!=a&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=qs.p?qs.p(i,a):i+":"+a+";")}return n+(t&&o?t+"{"+o+"}":o)+r},Fs={},Js=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+Js(e[n]);return t}return e};function Vs(e){let t=this||{},n=e.call?e(t.p):e;return((e,t,n,r,o)=>{let i=Js(e),a=Fs[i]||(Fs[i]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(i));if(!Fs[a]){let t=i!==e?e:(e=>{let t,n,r=[{}];for(;t=Xs.exec(e.replace($s,""));)t[4]?r.shift():t[3]?(n=t[3].replace(Hs," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(Hs," ").trim();return r[0]})(e);Fs[a]=qs(o?{["@keyframes "+a]:t}:t,n?"":"."+a)}let s=n&&Fs.g?Fs.g:null;return n&&(Fs.g=Fs[a]),f=Fs[a],c=t,l=r,(d=s)?c.data=c.data.replace(d,f):-1===c.data.indexOf(f)&&(c.data=l?f+c.data:c.data+f),a;var f,c,l,d})(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,r,o)=>{let i=t[o];if(i&&i.call){let e=i(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":qs(e,""):!1===e?"":e}return e+r+(i??"")}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,(e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Bs)(t.target),t.g,t.o,t.k)}Vs.bind({g:1});var Gs=Vs.bind({k:1}),zs=Xa();function Ys(e){return is(zs.Provider,{value:e.theme,get children(){return e.children}})}function Zs(){return $a(zs)}function Qs(e){let t=this||{};return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];let i=n=>{let o,i=ls(n,{theme:$a(zs)}),a=ls(i,{get class(){let e=i.class,n="class"in i&&/^go[0-9]+/.test(e);return[e,Vs.apply({target:t.target,o:n,p:i,g:t.g},r)].filter(Boolean).join(" ")}}),[s,f]=ds(a,["as","theme"]),c=f,l=s.as||e;return"function"==typeof l?o=l(c):1==t.g?(o=document.createElement(l),Ns(o,c)):o=Ws(ls({component:l},c)),o};return i.class=e=>ja((()=>Vs.apply({target:t.target,p:e,g:t.g},r))),i}}var ef=new Proxy(Qs,{get:(e,t)=>e(t)});function tf(){let e=Qs.call({g:1},"div").apply(null,arguments);return function(t){return e(t),null}}var nf="okxc-root",rf="okxc-disable-scroll",of="okxc-using-mouse",af=()=>(document.body.addEventListener("mousedown",(()=>document.body.classList.add(of))),document.body.addEventListener("keydown",(e=>{"Tab"===e.key&&document.body.classList.remove(of)})),is(tf`
    ${nf} * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        
        font-family: -apple-system, BlinkMacSystemFont, 'Roboto', 'Helvetica Neue', Arial, Tahoma, Verdana, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;        
        -webkit-tap-highlight-color: transparent;
    }
    
    ${nf} img {
      -webkit-user-select: none;
      -webkit-touch-callout: none;
    }   
 
    ${nf} *:focus {
        outline: #08f auto 2px;
    }
    
    ${nf} li {
        list-style: none;
    }
    
    ${nf} button {
        outline: none;
    }
    
    body.${rf} {
        position: fixed; 
        overflow-y: scroll;
        right: 0;
        left: 0;
    }
    
    body.${of} ${nf} *:focus {
        outline: none;
    }
`,{}));function sf(e,t){return"#"===e[0]&&(e=function(e){"#"===e[0]&&(e=e.slice(1));let t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t].join(",")}(e)),`rgba(${e}, ${t})`}function ff(e){return e.toString()+"px"}var cf=class{constructor(){la(this,"storage",{})}static getInstance(){return cf.instance||(cf.instance=new cf),cf.instance}get length(){return Object.keys(this.storage).length}clear(){this.storage={}}getItem(e){var t;return null!=(t=this.storage[e])?t:null}key(e){var t;let n=Object.keys(this.storage);return e<0||e>=n.length?null:null!=(t=n[e])?t:null}removeItem(e){delete this.storage[e]}setItem(e,t){this.storage[e]=t}},lf=cf;la(lf,"instance");function df(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window?.okxLogDebug&&o.debug("[OKX_TON_CONNECT_UI]",...t)}catch{}}var uf={};try{uf=function(e){e=e.replace(/^#/,"");let t={};if(!e.length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=mf(e),t;let n=e.indexOf("?");if(n>=0){let r=e.substr(0,n);t._path=mf(r),e=e.substr(n+1)}let r=function(e){let t={};if(!e.length)return t;let n,r,o,i,a=e.split("&");for(n=0;n<a.length;n++)r=a[n].split("="),o=mf(r[0]),i=null==r[1]?null:mf(r[1]),t[o]=i;return t}(e);for(let o in r)t[o]=r[o];return t}(location.hash.toString())}catch{}var hf="unknown";if(uf?.tgWebAppPlatform&&(hf=null!=(Bi=uf.tgWebAppPlatform)?Bi:"unknown"),"unknown"===hf){let e=Jf();hf=null!=(Hi=null==($i=null==(Xi=e?.Telegram)?void 0:Xi.WebApp)?void 0:$i.platform)?Hi:"unknown"}var pf="6.0";if(uf?.tgWebAppVersion&&(pf=uf.tgWebAppVersion),!pf){let e=Jf();pf=null!=(Ji=null==(Fi=null==(qi=e?.Telegram)?void 0:qi.WebApp)?void 0:Fi.version)?Ji:"6.0"}function gf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(hf)}function bf(){var e;return"unknown"!==hf||!(null==(e=Jf())||!e.TelegramWebviewProxy)}function yf(){var e;let t=!(null==(e=Jf())||!e.TelegramWebview);return(bf()||t)&&"unknown"===hf}function vf(){!function(e,t){try{let n=Jf();if(!n)throw new pa("Can't post event to parent window: window is not defined");if(void 0!==n.TelegramWebviewProxy)df("postEvent",e,t),n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));else if(n.external&&"notify"in n.external)df("postEvent",e,t),n.external.notify(JSON.stringify({eventType:e,eventData:t}));else{if(!function(){try{let e=Jf();return!!e&&(null!=e.parent&&e!==e.parent)}catch{return!1}}())throw new pa("Can't post event to TMA");{let r="*",o=JSON.stringify({eventType:e,eventData:t});df("postEvent",e,t),n.parent.postMessage(o,r)}}}catch(Ui){!function(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window?.okxLogDebug&&o.error("[OKX_TON_CONNECT_UI]",...t)}catch{}}(`Can't post event to parent window: ${Ui}`)}}("web_app_expand",{})}function mf(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch{return e}}var Cf=440,Of=1020;function wf(e){var t;let n=Jf();if(!n)return"desktop"===e;if(gf("weba"))return!0;let r=n.innerWidth;switch(e){case"desktop":return r>Of;case"tablet":return r>Cf;default:let e=r<=Cf||zf("ios","android","ipad");if(e){let n=!(null==(t=Jf())||!t.TelegramWebviewProxy),r=navigator.maxTouchPoints||0;n&&0===r&&(e=!1),(0,Li.logDebug)("isDevice mobile isTelegram and maxTouchPoints:",e,n,r)}return e}}function Ef(e){switch(e){case"mobile":return`@media (max-width: ${Cf}px)`;case"tablet":return`@media (max-width: ${Of}px) (min-width: ${Cf}px)`;default:return`@media (min-width: ${Of}px)`}}var _f="@media (hover: none)",xf="@media not all and (hover: none)",[Sf,Rf]=Pa(wf("mobile")),Nf=()=>Rf(wf("mobile"));function Tf(e,t){return!!t&&(e.name.toLowerCase()===t.toLowerCase()||e.appName.toLowerCase()===t.toLowerCase())}function kf(){return yf()||bf()}function Df(){return!!kf()}function Pf(e,t){return!!kf()}function Af(e){return!!e&&e.name===(0,Li.creatOKXWalletInfo)().name}function If(e,t,n){(0,Li.logDebug)("wallets openUniversalWallet"),kf()&&Kf(e,t)}function Kf(e,t){(0,Li.logDebug)("wallets openWallet"),e&&(Af(e)?((0,Li.logDebug)(`wallets openWallet openOKXDeeplinkWithFallback ${e.universalLink}`),(0,Li.openOKXDeeplink)(e.deepLink)):((0,Li.logDebug)(`wallets openWallet openOKXTMAWalletlinkWithFallback ${e.universalLink}`),(0,Li.openOKXTMAWalletlinkWithFallback)((0,Li.getTelegramWalletTWAUrl)(void 0,t,Mf()),Mf())))}function Mf(){return!(yf()||bf())}function jf(e,t){return!Af(e)||Sf()&&"qrcode"!==t}function Uf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_self";df("web-api  openLink",e,t),window.open(e,t,"noopener noreferrer")}function Lf(e){Uf(e,"_blank")}function Wf(e,t){df(`web-api openDeeplinkWithFallback ${e}`);let n=setTimeout((()=>{Yf("safari")||zf("android")&&Yf("firefox")||t()}),3e3);window.addEventListener("blur",(()=>clearTimeout(n)),{once:!0}),zf("android")&&kf()?Uf(e,"_blank"):Uf(e,"_self")}function Bf(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?ha.LIGHT:ha.DARK}function Xf(e){let t=t=>e(t.matches?ha.DARK:ha.LIGHT);return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t),()=>window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",t)}function $f(){document.body.hasAttribute("ontouchstart")||document.body.setAttribute("ontouchstart","")}function Hf(){document.body.getElementsByTagName(nf)||customElements.define(nf,class extends HTMLElement{})}function qf(e){return ua(this,null,(function*(){yield new Promise((e=>requestAnimationFrame(e))),e()}))}function Ff(e){"complete"!==document.readyState?window.addEventListener("load",(()=>qf((()=>Ff(e)))),{once:!0}):e.forEach((e=>{(new window.Image).src=e}))}function Jf(){if(typeof window<"u")return window}function Vf(){if(function(){try{return typeof localStorage<"u"}catch{return!1}}())return localStorage;if(typeof i<"u"&&null!=i.versions&&null!=i.versions.node)throw new pa("`localStorage` is unavailable, but it is required for TonConnect");return lf.getInstance()}function Gf(){var e,t,n;let r,o=(new Gi.default).getResult(),i=null==(e=o.os.name)?void 0:e.toLowerCase();switch(!0){case"ipad"===(null==(t=o.device.model)?void 0:t.toLowerCase()):r="ipad";break;case"ios"===i:r="ios";break;case"android"===i:r="android";break;case"mac os"===i:r="macos";break;case"linux"===i:r="linux";break;case i?.includes("windows"):r="windows"}let a,s=null==(n=o.browser.name)?void 0:n.toLowerCase();switch(!0){case"chrome"===s:a="chrome";break;case"firefox"===s:a="firefox";break;case s?.includes("safari"):a="safari";break;case s?.includes("opera"):a="opera"}return{os:r,browser:a}}function zf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(Gf().os)}function Yf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(Gf().browser)}function Zf(e,t){return t+new URL(e).search}Jf()&&(window.addEventListener("resize",(()=>Nf())),window.addEventListener("load",(()=>Nf()),{once:!0}));var Qf=class{constructor(e){la(this,"localStorage"),la(this,"storageKey","okx-wallet-connect-ui_wallet-info"),this.localStorage=Vf(),this.storageKey=e}setWalletInfo(e){this.localStorage.setItem(this.storageKey,JSON.stringify(e))}getWalletInfo(){let e=this.localStorage.getItem(this.storageKey);return e?JSON.parse(e):null}removeWalletInfo(){this.localStorage.removeItem(this.storageKey)}},ec=class{constructor(){la(this,"localStorage"),la(this,"storageKey","okx_wallet_connect_ui_last-selected-wallet-info"),this.localStorage=Vf()}setLastSelectedWalletInfo(e){this.localStorage.setItem(this.storageKey,JSON.stringify(e))}getLastSelectedWalletInfo(){let e=this.localStorage.getItem(this.storageKey);return e?JSON.parse(e):null}removeLastSelectedWalletInfo(){this.localStorage.removeItem(this.storageKey)}},[tc,nc]=Pa({status:"closed",closeReason:null});Ka((()=>"opened"===tc().status));var[rc,oc]=Pa({status:"closed",closeReason:null}),ic=Ka((()=>"opened"===rc().status)),ac=Ka((()=>{let e=rc();return"opened"===e.status?e.walletInfo:null})),sc=typeof window<"u"?new ec:void 0,[fc,cc]=Pa(sc?.getLastSelectedWalletInfo()||null),lc=e=>{sc||(sc=new ec),e?(df(`modals-state.ts: setLastSelectedWalletInfo ${JSON.stringify(e)}`),sc.setLastSelectedWalletInfo(e)):(df("modals-state.ts: setLastSelectedWalletInfo    removeLastSelectedWalletInfo"),sc.removeLastSelectedWalletInfo()),cc(e)},[dc,uc]=Pa(null),hc=ef.div`
    background-color: ${e=>e.theme.colors.background.secondary};
`,pc=e=>{let t,[n,r]=Pa(null);return Ia((()=>{let t=new window.Image;return t.src=e.src,t.alt=e.alt||"",t.setAttribute("draggable","false"),e.class&&t.classList.add(e.class),t.complete?r(t):(t.addEventListener("load",(()=>r(t))),()=>t.removeEventListener("load",(()=>r(t))))})),[is(hs,{get when(){return n()},get children(){return n()}}),is(hs,{get when(){return!n()},get children(){return is(hc,{get class(){return e.class},ref(e){"function"==typeof t?t(e):t=e}})}})]},gc={m:"100vh",s:"8px",none:"0"},bc={s:.02,m:.04},yc=ef.button`
    display: ${e=>e.leftIcon||e.rightIcon?"flex":"inline-block"};
    gap: ${e=>e.leftIcon||e.rightIcon?"6px":"unset"};
    align-items: ${e=>e.leftIcon||e.rightIcon?"center":"unset"};
    justify-content: ${e=>e.leftIcon||e.rightIcon?"space-between":"unset"};
    background-color: ${e=>"flat"===e.appearance?"transparent":"secondary"===e.appearance?e.theme.colors.background.tint:sf(e.theme.colors.accent,.12)};
    color: ${e=>"secondary"===e.appearance?e.theme.colors.text.primary:e.theme.colors.accent};

    padding: ${e=>"flat"===e.appearance?"0":"9px 16px"};
    padding-left: ${e=>e.leftIcon&&"flat"!==e.appearance?"12px":"16px"};
    padding-right: ${e=>e.rightIcon&&"flat"!==e.appearance?"12px":"16px"};
    border: none;
    border-radius: ${e=>gc[e.theme.borderRadius]};
    cursor: ${e=>e.disabled?"not-allowed":"pointer"};

    font-size: 14px;
    font-weight: 510;
    line-height: 18px;

    transition: transform 0.125s ease-in-out;

    ${xf} {
        &:hover {
            transform: ${e=>e.disabled?"unset":`scale(${1+bc[e.scale]})`};
        }
    }

    &:active {
        transform: ${e=>e.disabled?"unset":`scale(${1-bc[e.scale]})`};
    }

    ${_f} {
        &:active {
            transform: ${e=>e.disabled?"unset":`scale(${1-2*bc[e.scale]})`};
        }
    }
`;function vc(e){let t=ja((()=>Object.keys(e).filter((e=>e.startsWith("data-"))))),[n]=ds(e,t);return n}var mc=e=>{let t=vc(e);return is(yc,ls({get appearance(){return e.appearance||"primary"},get class(){return e.class},onClick:t=>{var n;return null==(n=e.onClick)?void 0:n.call(e,t)},onMouseEnter:t=>{var n;return null==(n=e.onMouseEnter)?void 0:n.call(e,t)},onMouseLeave:t=>{var n;return null==(n=e.onMouseLeave)?void 0:n.call(e,t)},ref(t){var n=e.ref;"function"==typeof n?n(t):e.ref=t},get disabled(){return e.disabled},get scale(){return e.scale||"m"},get leftIcon(){return!!e.leftIcon},get rightIcon(){return!!e.rightIcon},"data-tc-button":"true"},t,{get children(){return[Ka((()=>e.leftIcon)),Ka((()=>e.children)),Ka((()=>e.rightIcon))]}}))};function Cc(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}var Oc=e=>{let t,n=!0,[r,o]=Pa(),[i,a]=Pa(),s=Ha((()=>e.children)),{onBeforeEnter:f,onEnter:c,onAfterEnter:l,onBeforeExit:d,onExit:u,onAfterExit:h}=e,p=Ka((()=>{let t=e.name||"s";return{enterActiveClass:e.enterActiveClass||t+"-enter-active",enterClass:e.enterClass||t+"-enter",enterToClass:e.enterToClass||t+"-enter-to",exitActiveClass:e.exitActiveClass||t+"-exit-active",exitClass:e.exitClass||t+"-exit",exitToClass:e.exitToClass||t+"-exit-to"}}));function g(t,s){if(!n||e.appear){let n=function(f){t&&(!f||f.target===t)&&(t.removeEventListener("transitionend",n),t.removeEventListener("animationend",n),t.classList.remove(...u),t.classList.remove(...h),Ma((()=>{r()!==t&&o(t),i()===t&&a(void 0)})),l&&l(t),"inout"===e.mode&&b(t,s))},d=p().enterClass.split(" "),u=p().enterActiveClass.split(" "),h=p().enterToClass.split(" ");f&&f(t),t.classList.add(...d),t.classList.add(...u),Cc((()=>{t.classList.remove(...d),t.classList.add(...h),c&&c(t,(()=>n())),(!c||c.length<2)&&(t.addEventListener("transitionend",n),t.addEventListener("animationend",n))}))}s&&!e.mode?a(t):o(t)}function b(t,n){let i=p().exitClass.split(" "),a=p().exitActiveClass.split(" "),s=p().exitToClass.split(" ");if(!n.parentNode)return f();function f(i){(!i||i.target===n)&&(n.removeEventListener("transitionend",f),n.removeEventListener("animationend",f),n.classList.remove(...a),n.classList.remove(...s),r()===n&&o(void 0),h&&h(n),"outin"===e.mode&&g(t,n))}d&&d(n),n.classList.add(...i),n.classList.add(...a),Cc((()=>{n.classList.remove(...i),n.classList.add(...s)})),u&&u(n,(()=>f())),(!u||u.length<2)&&(n.addEventListener("transitionend",f),n.addEventListener("animationend",f))}return function(e,t){Ja(Va(e,t,!0,wa))}((r=>{for(t=s();"function"==typeof t;)t=t();return ja((()=>(t&&t!==r&&("outin"!==e.mode?g(t,r):n&&o(t)),r&&r!==t&&"inout"!==e.mode&&b(t,r),n=!1,t)))})),[r,i]};var wc="androidBackHandler",Ec={[wc]:!0},_c=xs('<svg><path fill-rule=evenodd clip-rule=evenodd d="M10.2122 14.3407C10.5384 14.0854 10.5959 13.614 10.3406 13.2878L6.20237 8.00003L10.3406 2.71227C10.5959 2.38607 10.5384 1.91469 10.2122 1.6594C9.88604 1.40412 9.41465 1.46161 9.15937 1.7878L4.65937 7.5378C4.44688 7.80932 4.44688 8.19074 4.65937 8.46226L9.15937 14.2123C9.41465 14.5385 9.88604 14.5959 10.2122 14.3407Z"></svg>',!1,!0),xc={left:0,top:90,right:180,bottom:270},Sc=e=>{let t=Zs();return is(ef("svg")`
        transform: rotate(${e=>xc[e.svgDirection]}deg);
        transition: transform 0.1s ease-in-out;
    `,{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",get svgDirection(){return e.direction||"left"},get children(){var n=_c();return Aa((()=>Ss(n,"fill",e.fill||t.colors.icon.secondary))),n}})},Rc=xs('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M18.5303 6.53033C18.8232 6.23744 18.8232 5.76256 18.5303 5.46967C18.2374 5.17678 17.7626 5.17678 17.4697 5.46967L12 10.9393L6.53033 5.46967C6.23744 5.17678 5.76256 5.17678 5.46967 5.46967C5.17678 5.76256 5.17678 6.23744 5.46967 6.53033L10.9393 12L5.46967 17.4697C5.17678 17.7626 5.17678 18.2374 5.46967 18.5303C5.76256 18.8232 6.23744 18.8232 6.53033 18.5303L12 13.0607L17.4697 18.5303C17.7626 18.8232 18.2374 18.8232 18.5303 18.5303C18.8232 18.2374 18.8232 17.7626 18.5303 17.4697L13.0607 12L18.5303 6.53033Z">'),Nc=e=>{let t=Zs();df(`CloseIcon  ${t}`);return(()=>{var n=Rc(),r=n.firstChild;return Aa((()=>Ss(r,"fill",e.fill||t.colors.icon.secondary))),n})()},Tc=xs('<svg width=24 height=24 viewBox="0 0 24 24"fill=none xmlns=http://www.w3.org/2000/svg><path fill-rule=evenodd clip-rule=evenodd d="M14.1839 17.7069C13.6405 18.6507 13.3688 19.1226 13.0591 19.348C12.4278 19.8074 11.5723 19.8074 10.941 19.348C10.6312 19.1226 10.3595 18.6507 9.81613 17.7069L5.52066 10.2464C4.76864 8.94024 4.39263 8.28717 4.33762 7.75894C4.2255 6.68236 4.81894 5.65591 5.80788 5.21589C6.29309 5 7.04667 5 8.55383 5H15.4462C16.9534 5 17.7069 5 18.1922 5.21589C19.1811 5.65591 19.7745 6.68236 19.6624 7.75894C19.6074 8.28717 19.2314 8.94024 18.4794 10.2464L14.1839 17.7069ZM11.1 16.3412L6.56139 8.48002C6.31995 8.06185 6.19924 7.85276 6.18146 7.68365C6.14523 7.33896 6.33507 7.01015 6.65169 6.86919C6.80703 6.80002 7.04847 6.80002 7.53133 6.80002H7.53134L11.1 6.80002V16.3412ZM12.9 16.3412L17.4387 8.48002C17.6801 8.06185 17.8008 7.85276 17.8186 7.68365C17.8548 7.33896 17.665 7.01015 17.3484 6.86919C17.193 6.80002 16.9516 6.80002 16.4687 6.80002L12.9 6.80002V16.3412Z">'),kc=e=>{let t=Zs();return(()=>{var n=Tc(),r=n.firstChild;return Aa((()=>Ss(r,"fill",e.fill||t.colors.icon.primary))),n})()},Dc=xs('<svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 16 16"fill=none><g clip-path=url(#clip0_3783_2045)><circle cx=8 cy=8.00098 r=8></circle><path d="M4.75 8.50098L7 10.751L11.75 6.00098"stroke-width=1.5 stroke-linecap=round stroke-linejoin=round></path></g><defs><clipPath id=clip0_3783_2045><rect width=16 height=16 fill=white transform="translate(0 0.000976562)">'),Pc=xs('<svg width=24 height=24 viewBox="0 0 24 24"fill=none xmlns=http://www.w3.org/2000/svg><circle cx=12 cy=12 r=11></circle><path d="M17.1364 9.6364C17.4879 9.28493 17.4879 8.71508 17.1364 8.36361C16.7849 8.01214 16.2151 8.01214 15.8636 8.36361L10 14.2272L8.1364 12.3636C7.78493 12.0121 7.21508 12.0121 6.86361 12.3636C6.51214 12.7151 6.51214 13.2849 6.86361 13.6364L9.36361 16.1364C9.71508 16.4879 10.2849 16.4879 10.6364 16.1364L17.1364 9.6364Z">'),Ac=xs('<svg width=72 height=72 viewBox="0 0 72 72"fill=none xmlns=http://www.w3.org/2000/svg><circle cx=36 cy=36 r=33></circle><path d="M50.9142 28.4142C51.6953 27.6332 51.6953 26.3668 50.9142 25.5858C50.1332 24.8047 48.8668 24.8047 48.0858 25.5858L30 43.6716L23.9142 37.5858C23.1332 36.8047 21.8668 36.8047 21.0858 37.5858C20.3047 38.3668 20.3047 39.6332 21.0858 40.4142L28.5858 47.9142C29.3668 48.6953 30.6332 48.6953 31.4142 47.9142L50.9142 28.4142Z">'),Ic=e=>{let t=Zs(),n=()=>e.size||"s",r=()=>e.fill||t.colors.icon.success;return Ka((()=>Ka((()=>"xs"===n()))()?(()=>{var n=Dc(),o=n.firstChild.firstChild,i=o.nextSibling;return Aa((a=>{var s=e.class,f=r(),c=t.colors.constant.white;return s!==a.e&&Ss(n,"class",a.e=s),f!==a.t&&Ss(o,"fill",a.t=f),c!==a.a&&Ss(i,"stroke",a.a=c),a}),{e:void 0,t:void 0,a:void 0}),n})():Ka((()=>"s"===n()))()?(()=>{var n=Pc(),o=n.firstChild,i=o.nextSibling;return Aa((a=>{var s=e.class,f=r(),c=t.colors.constant.white;return s!==a.e&&Ss(n,"class",a.e=s),f!==a.t&&Ss(o,"fill",a.t=f),c!==a.a&&Ss(i,"fill",a.a=c),a}),{e:void 0,t:void 0,a:void 0}),n})():(()=>{var n=Ac(),o=n.firstChild,i=o.nextSibling;return Aa((a=>{var s=e.class,f=r(),c=t.colors.constant.white;return s!==a.e&&Ss(n,"class",a.e=s),f!==a.t&&Ss(o,"fill",a.t=f),c!==a.a&&Ss(i,"fill",a.a=c),a}),{e:void 0,t:void 0,a:void 0}),n})()))},Kc=xs('<svg xmlns=http://www.w3.org/2000/svg width=103 height=102 viewBox="0 0 103 102"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M51.5 14.8747C31.5487 14.8747 15.375 31.0485 15.375 50.9997C15.375 70.951 31.5487 87.1247 51.5 87.1247C71.4513 87.1247 87.625 70.951 87.625 50.9997C87.625 31.0485 71.4513 14.8747 51.5 14.8747ZM9 50.9997C9 27.5276 28.0279 8.49974 51.5 8.49974C74.9721 8.49974 94 27.5276 94 50.9997C94 74.4718 74.9721 93.4997 51.5 93.4997C28.0279 93.4997 9 74.4718 9 50.9997ZM65.0234 37.4765C66.2682 38.7213 66.2682 40.7395 65.0234 41.9843L56.0078 50.9999L65.0234 60.0155C66.2682 61.2603 66.2682 63.2785 65.0234 64.5233C63.7786 65.7681 61.7604 65.7681 60.5156 64.5233L51.5 55.5077L42.4844 64.5233C41.2396 65.7681 39.2214 65.7681 37.9766 64.5233C36.7318 63.2785 36.7318 61.2603 37.9766 60.0155L46.9922 50.9999L37.9766 41.9843C36.7318 40.7395 36.7318 38.7213 37.9766 37.4765C39.2214 36.2317 41.2396 36.2317 42.4844 37.4765L51.5 46.4921L60.5156 37.4765C61.7604 36.2317 63.7787 36.2317 65.0234 37.4765Z"fill=#909090>'),Mc=xs('<svg xmlns=http://www.w3.org/2000/svg width=72 height=72 viewBox="0 0 103 102"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M51.5 14.8747C31.5487 14.8747 15.375 31.0485 15.375 50.9997C15.375 70.951 31.5487 87.1247 51.5 87.1247C71.4513 87.1247 87.625 70.951 87.625 50.9997C87.625 31.0485 71.4513 14.8747 51.5 14.8747ZM9 50.9997C9 27.5276 28.0279 8.49974 51.5 8.49974C74.9721 8.49974 94 27.5276 94 50.9997C94 74.4718 74.9721 93.4997 51.5 93.4997C28.0279 93.4997 9 74.4718 9 50.9997ZM65.0234 37.4765C66.2682 38.7213 66.2682 40.7395 65.0234 41.9843L56.0078 50.9999L65.0234 60.0155C66.2682 61.2603 66.2682 63.2785 65.0234 64.5233C63.7786 65.7681 61.7604 65.7681 60.5156 64.5233L51.5 55.5077L42.4844 64.5233C41.2396 65.7681 39.2214 65.7681 37.9766 64.5233C36.7318 63.2785 36.7318 61.2603 37.9766 60.0155L46.9922 50.9999L37.9766 41.9843C36.7318 40.7395 36.7318 38.7213 37.9766 37.4765C39.2214 36.2317 41.2396 36.2317 42.4844 37.4765L51.5 46.4921L60.5156 37.4765C61.7604 36.2317 63.7787 36.2317 65.0234 37.4765Z"fill=#909090>'),jc=xs('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 103 102"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M51.5 14.8747C31.5487 14.8747 15.375 31.0485 15.375 50.9997C15.375 70.951 31.5487 87.1247 51.5 87.1247C71.4513 87.1247 87.625 70.951 87.625 50.9997C87.625 31.0485 71.4513 14.8747 51.5 14.8747ZM9 50.9997C9 27.5276 28.0279 8.49974 51.5 8.49974C74.9721 8.49974 94 27.5276 94 50.9997C94 74.4718 74.9721 93.4997 51.5 93.4997C28.0279 93.4997 9 74.4718 9 50.9997ZM65.0234 37.4765C66.2682 38.7213 66.2682 40.7395 65.0234 41.9843L56.0078 50.9999L65.0234 60.0155C66.2682 61.2603 66.2682 63.2785 65.0234 64.5233C63.7786 65.7681 61.7604 65.7681 60.5156 64.5233L51.5 55.5077L42.4844 64.5233C41.2396 65.7681 39.2214 65.7681 37.9766 64.5233C36.7318 63.2785 36.7318 61.2603 37.9766 60.0155L46.9922 50.9999L37.9766 41.9843C36.7318 40.7395 36.7318 38.7213 37.9766 37.4765C39.2214 36.2317 41.2396 36.2317 42.4844 37.4765L51.5 46.4921L60.5156 37.4765C61.7604 36.2317 63.7787 36.2317 65.0234 37.4765Z"fill=#909090>'),Uc=e=>{Zs();let t=()=>e.size||"m";return Ka((()=>Ka((()=>"m"===t()))()?Kc():Ka((()=>"s"===t()))()?Mc():jc()))},Lc=xs('<svg width=24 height=24 viewBox="0 0 24 24"fill=none xmlns=http://www.w3.org/2000/svg><path d="M15.55 5.85123C18.9459 7.81184 20.1094 12.1541 18.1488 15.55C16.1882 18.9459 11.8459 20.1094 8.44998 18.1488C8.01952 17.9003 7.46909 18.0478 7.22056 18.4782C6.97203 18.9087 7.11952 19.4591 7.54998 19.7076C11.8068 22.1653 17.2499 20.7068 19.7076 16.45C22.1653 12.1932 20.7068 6.75005 16.45 4.29239C12.1932 1.83472 6.75003 3.29321 4.29236 7.55001C4.04383 7.98047 4.19132 8.53091 4.62178 8.77943C5.05224 9.02796 5.60268 8.88048 5.8512 8.45001C7.81181 5.05413 12.1541 3.89062 15.55 5.85123Z">'),Wc=xs('<svg xmlns=http://www.w3.org/2000/svg width=44 height=44 viewBox="0 0 44 44"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M22 2.99951C11.5066 2.99951 3 11.5061 3 21.9995C3 32.4929 11.5066 40.9995 22 40.9995C22.8284 40.9995 23.5 41.6711 23.5 42.4995C23.5 43.3279 22.8284 43.9995 22 43.9995C9.84974 43.9995 0 34.1498 0 21.9995C0 9.84925 9.84974 -0.000488281 22 -0.000488281C34.1503 -0.000488281 44 9.84925 44 21.9995C44 22.8279 43.3284 23.4995 42.5 23.4995C41.6716 23.4995 41 22.8279 41 21.9995C41 11.5061 32.4934 2.99951 22 2.99951Z">'),Bc=xs('<svg width=72 height=72 viewBox="0 0 72 72"fill=none xmlns=http://www.w3.org/2000/svg><path d="M24 56.7846C35.479 63.412 50.1572 59.479 56.7846 47.9999C63.412 36.5209 59.479 21.8427 48 15.2153C36.521 8.58791 21.8428 12.5209 15.2154 23.9999"stroke-width=4 stroke-linecap=round stroke-linejoin=round>'),Xc=e=>{let t=Zs(),n=()=>e.size||"xs",r=()=>e.fill||t.colors.icon.tertiary,o=Vs`
        animation: ${Gs`
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
    `} 1s linear infinite;
    `;return Ka((()=>Ka((()=>"xs"===n()))()?(()=>{var t=Lc(),n=t.firstChild;return Aa((i=>{var a=(0,zi.default)(o,e.class),s=r();return a!==i.e&&Ss(t,"class",i.e=a),s!==i.t&&Ss(n,"fill",i.t=s),i}),{e:void 0,t:void 0}),t})():Ka((()=>"s"===n()))()?(()=>{var t=Wc(),n=t.firstChild;return Aa((i=>{var a=(0,zi.default)(o,e.class),s=r();return a!==i.e&&Ss(t,"class",i.e=a),s!==i.t&&Ss(n,"fill",i.t=s),i}),{e:void 0,t:void 0}),t})():(()=>{var t=Bc(),n=t.firstChild;return Aa((i=>{var a=(0,zi.default)(o,e.class),s=r();return a!==i.e&&Ss(t,"class",i.e=a),s!==i.t&&Ss(n,"stroke",i.t=s),i}),{e:void 0,t:void 0}),t})()))},$c=xs('<svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 16 16"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M5.56608 4.42584C5.82527 3.32158 6.8176 2.5 8.00001 2.5C9.38072 2.5 10.5 3.61929 10.5 5C10.5 5.63026 10.3391 6.0386 10.1264 6.34455C9.90018 6.66993 9.58561 6.92478 9.18864 7.20877C9.12579 7.25372 9.05873 7.30025 8.9887 7.34883C8.27392 7.84472 7.25001 8.55507 7.25001 10V10.25C7.25001 10.6642 7.5858 11 8.00001 11C8.41422 11 8.75001 10.6642 8.75001 10.25V10C8.75001 9.36502 9.10777 9.1096 9.94554 8.51149L10.0614 8.42873C10.4769 8.13147 10.9748 7.75194 11.358 7.20076C11.7547 6.63015 12 5.91973 12 5C12 2.79086 10.2091 1 8.00001 1C6.10564 1 4.5205 2.31615 4.10577 4.08308C4.01112 4.48634 4.26129 4.88997 4.66454 4.98462C5.0678 5.07927 5.47143 4.8291 5.56608 4.42584ZM8.00001 15C8.60752 15 9.10001 14.5075 9.10001 13.9C9.10001 13.2925 8.60752 12.8 8.00001 12.8C7.39249 12.8 6.90001 13.2925 6.90001 13.9C6.90001 14.5075 7.39249 15 8.00001 15Z">'),Hc=e=>{let t=Zs();return(()=>{var n=$c(),r=n.firstChild;return Aa((()=>Ss(r,"fill",e.fill||t.colors.icon.secondary))),n})()},qc=xs('<svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 16 16"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M3.56176 1.87482C3.8379 1.87482 4.06176 2.09867 4.06176 2.37482V3.69674C5.09916 2.7469 6.48174 2.16666 7.99996 2.16666C11.2216 2.16666 13.8333 4.77834 13.8333 8C13.8333 11.2217 11.2216 13.8333 7.99996 13.8333C4.7783 13.8333 2.16663 11.2217 2.16663 8C2.16663 7.72385 2.39048 7.5 2.66663 7.5C2.94277 7.5 3.16663 7.72385 3.16663 8C3.16663 10.6694 5.33058 12.8333 7.99996 12.8333C10.6693 12.8333 12.8333 10.6694 12.8333 8C12.8333 5.33062 10.6693 3.16666 7.99996 3.16666C6.68645 3.16666 5.49513 3.69037 4.62354 4.54148H6.22843C6.50457 4.54148 6.72843 4.76534 6.72843 5.04148C6.72843 5.31763 6.50457 5.54148 6.22843 5.54148H3.56176C3.28562 5.54148 3.06176 5.31763 3.06176 5.04148V2.37482C3.06176 2.09867 3.28562 1.87482 3.56176 1.87482Z">'),Fc=e=>{let t=Zs();return(()=>{var e=qc(),n=e.firstChild;return Aa((()=>Ss(n,"fill",t.colors.text.primary))),e})()},Jc=xs('<svg xmlns=http://www.w3.org/2000/svg width=16 height=17 viewBox="0 0 16 17"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M1 4.12695C1 3.07754 1 2.55284 1.19202 2.14684C1.38986 1.72856 1.7266 1.39181 2.14489 1.19397C2.55088 1.00195 3.07559 1.00195 4.125 1.00195C5.17441 1.00195 5.69912 1.00195 6.10511 1.19397C6.5234 1.39181 6.86014 1.72856 7.05798 2.14684C7.25 2.55284 7.25 3.07754 7.25 4.12695C7.25 5.17636 7.25 5.70107 7.05798 6.10706C6.86014 6.52535 6.5234 6.8621 6.10511 7.05993C5.69912 7.25195 5.17441 7.25195 4.125 7.25195C3.07559 7.25195 2.55088 7.25195 2.14489 7.05993C1.7266 6.8621 1.38986 6.52535 1.19202 6.10706C1 5.70107 1 5.17636 1 4.12695ZM2.5 3.30195C2.5 3.02193 2.5 2.88191 2.5545 2.77496C2.60243 2.68088 2.67892 2.60439 2.773 2.55645C2.87996 2.50195 3.01997 2.50195 3.3 2.50195H4.95C5.23003 2.50195 5.37004 2.50195 5.477 2.55645C5.57108 2.60439 5.64757 2.68088 5.6955 2.77496C5.75 2.88191 5.75 3.02193 5.75 3.30195V4.95195C5.75 5.23198 5.75 5.37199 5.6955 5.47895C5.64757 5.57303 5.57108 5.64952 5.477 5.69746C5.37004 5.75195 5.23003 5.75195 4.95 5.75195H3.3C3.01997 5.75195 2.87996 5.75195 2.773 5.69746C2.67892 5.64952 2.60243 5.57303 2.5545 5.47895C2.5 5.37199 2.5 5.23198 2.5 4.95195V3.30195ZM1 11.877C1 10.8275 1 10.3028 1.19202 9.89684C1.38986 9.47856 1.7266 9.14181 2.14489 8.94397C2.55088 8.75195 3.07559 8.75195 4.125 8.75195C5.17441 8.75195 5.69912 8.75195 6.10511 8.94397C6.5234 9.14181 6.86014 9.47856 7.05798 9.89684C7.25 10.3028 7.25 10.8275 7.25 11.877C7.25 12.9264 7.25 13.4511 7.05798 13.8571C6.86014 14.2753 6.5234 14.6121 6.10511 14.8099C5.69912 15.002 5.17441 15.002 4.125 15.002C3.07559 15.002 2.55088 15.002 2.14489 14.8099C1.7266 14.6121 1.38986 14.2753 1.19202 13.8571C1 13.4511 1 12.9264 1 11.877ZM2.5 11.052C2.5 10.7719 2.5 10.6319 2.5545 10.525C2.60243 10.4309 2.67892 10.3544 2.773 10.3064C2.87996 10.252 3.01997 10.252 3.3 10.252H4.95C5.23003 10.252 5.37004 10.252 5.477 10.3064C5.57108 10.3544 5.64757 10.4309 5.6955 10.525C5.75 10.6319 5.75 10.7719 5.75 11.052V12.702C5.75 12.982 5.75 13.122 5.6955 13.2289C5.64757 13.323 5.57108 13.3995 5.477 13.4475C5.37004 13.502 5.23003 13.502 4.95 13.502H3.3C3.01997 13.502 2.87996 13.502 2.773 13.4475C2.67892 13.3995 2.60243 13.323 2.5545 13.2289C2.5 13.122 2.5 12.982 2.5 12.702V11.052ZM8.94202 2.14684C8.75 2.55284 8.75 3.07754 8.75 4.12695C8.75 5.17636 8.75 5.70107 8.94202 6.10706C9.13986 6.52535 9.4766 6.8621 9.89489 7.05993C10.3009 7.25195 10.8256 7.25195 11.875 7.25195C12.9244 7.25195 13.4491 7.25195 13.8551 7.05993C14.2734 6.8621 14.6101 6.52535 14.808 6.10706C15 5.70107 15 5.17636 15 4.12695C15 3.07754 15 2.55284 14.808 2.14684C14.6101 1.72856 14.2734 1.39181 13.8551 1.19397C13.4491 1.00195 12.9244 1.00195 11.875 1.00195C10.8256 1.00195 10.3009 1.00195 9.89489 1.19397C9.4766 1.39181 9.13986 1.72856 8.94202 2.14684ZM10.3045 2.77496C10.25 2.88191 10.25 3.02193 10.25 3.30195V4.95195C10.25 5.23198 10.25 5.37199 10.3045 5.47895C10.3524 5.57303 10.4289 5.64952 10.523 5.69746C10.63 5.75195 10.77 5.75195 11.05 5.75195H12.7C12.98 5.75195 13.12 5.75195 13.227 5.69746C13.3211 5.64952 13.3976 5.57303 13.4455 5.47895C13.5 5.37199 13.5 5.23198 13.5 4.95195V3.30195C13.5 3.02193 13.5 2.88191 13.4455 2.77496C13.3976 2.68088 13.3211 2.60439 13.227 2.55645C13.12 2.50195 12.98 2.50195 12.7 2.50195H11.05C10.77 2.50195 10.63 2.50195 10.523 2.55645C10.4289 2.60439 10.3524 2.68088 10.3045 2.77496ZM8.80727 9.13518C8.75 9.26242 8.75 9.4256 8.75 9.75195C8.75 10.0783 8.75 10.2415 8.80727 10.3687C8.87245 10.5136 8.9884 10.6295 9.13323 10.6947C9.26047 10.752 9.42365 10.752 9.75 10.752C10.0764 10.752 10.2395 10.752 10.3668 10.6947C10.5116 10.6295 10.6276 10.5136 10.6927 10.3687C10.75 10.2415 10.75 10.0783 10.75 9.75195C10.75 9.4256 10.75 9.26242 10.6927 9.13518C10.6276 8.99035 10.5116 8.8744 10.3668 8.80922C10.2395 8.75195 10.0764 8.75195 9.75 8.75195C9.42365 8.75195 9.26047 8.75195 9.13323 8.80922C8.9884 8.8744 8.87245 8.99035 8.80727 9.13518ZM10.87 11.8771C10.87 11.546 10.87 11.3805 10.9289 11.2517C10.9938 11.1098 11.1077 10.9959 11.2497 10.931C11.3784 10.8721 11.5439 10.8721 11.875 10.8721C12.2061 10.8721 12.3716 10.8721 12.5003 10.931C12.6423 10.9959 12.7562 11.1098 12.8211 11.2517C12.88 11.3805 12.88 11.546 12.88 11.8771C12.88 12.2081 12.88 12.3737 12.8211 12.5024C12.7562 12.6444 12.6423 12.7583 12.5003 12.8232C12.3716 12.8821 12.2061 12.8821 11.875 12.8821C11.5439 12.8821 11.3784 12.8821 11.2497 12.8232C11.1077 12.7583 10.9938 12.6444 10.9289 12.5024C10.87 12.3737 10.87 12.2081 10.87 11.8771ZM8.80727 13.3852C8.75 13.5124 8.75 13.6756 8.75 14.002C8.75 14.3283 8.75 14.4915 8.80727 14.6187C8.87245 14.7636 8.9884 14.8795 9.13323 14.9447C9.26047 15.002 9.42365 15.002 9.75 15.002C10.0764 15.002 10.2395 15.002 10.3668 14.9447C10.5116 14.8795 10.6276 14.7636 10.6927 14.6187C10.75 14.4915 10.75 14.3283 10.75 14.002C10.75 13.6756 10.75 13.5124 10.6927 13.3852C10.6276 13.2404 10.5116 13.1244 10.3668 13.0592C10.2395 13.002 10.0764 13.002 9.75 13.002C9.42365 13.002 9.26047 13.002 9.13323 13.0592C8.9884 13.1244 8.87245 13.2404 8.80727 13.3852ZM13 9.75195C13 9.4256 13 9.26242 13.0573 9.13518C13.1224 8.99035 13.2384 8.8744 13.3832 8.80922C13.5105 8.75195 13.6736 8.75195 14 8.75195C14.3264 8.75195 14.4895 8.75195 14.6168 8.80922C14.7616 8.8744 14.8776 8.99035 14.9427 9.13518C15 9.26242 15 9.4256 15 9.75195C15 10.0783 15 10.2415 14.9427 10.3687C14.8776 10.5136 14.7616 10.6295 14.6168 10.6947C14.4895 10.752 14.3264 10.752 14 10.752C13.6736 10.752 13.5105 10.752 13.3832 10.6947C13.2384 10.6295 13.1224 10.5136 13.0573 10.3687C13 10.2415 13 10.0783 13 9.75195ZM13.0573 13.3852C13 13.5124 13 13.6756 13 14.002C13 14.3283 13 14.4915 13.0573 14.6187C13.1224 14.7636 13.2384 14.8795 13.3832 14.9447C13.5105 15.002 13.6736 15.002 14 15.002C14.3264 15.002 14.4895 15.002 14.6168 14.9447C14.7616 14.8795 14.8776 14.7636 14.9427 14.6187C15 14.4915 15 14.3283 15 14.002C15 13.6756 15 13.5124 14.9427 13.3852C14.8776 13.2404 14.7616 13.1244 14.6168 13.0592C14.4895 13.002 14.3264 13.002 14 13.002C13.6736 13.002 13.5105 13.002 13.3832 13.0592C13.2384 13.1244 13.1224 13.2404 13.0573 13.3852Z">'),Vc=e=>{let t=Zs();return(()=>{var n=Jc(),r=n.firstChild;return Aa((()=>Ss(r,"fill",e.fill||t.colors.icon.secondary))),n})()},Gc=ef.button`
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: transparent;
    border: none;
    cursor: pointer;

    transition: transform 0.125s ease-in-out;

    ${xf} {
        &:hover {
            transform: scale(1.04);
        }
    }

    &:active {
        transform: scale(0.96);
    }

    ${_f} {
        &:active {
            transform: scale(0.92);
        }
    }
`,zc=e=>{let t=vc(e),n=()=>e.icon||"close";return is(Gc,ls({get class(){return e.class},onClick:()=>e.onClick(),"data-tc-icon-button":"true"},t,{get children(){return[is(hs,{get when(){return!!e.children},get children(){return e.children}}),is(hs,{get when(){return!e.children},get children(){return is(ps,{get children(){return[is(gs,{get when(){return"close"===n()},get children(){return is(Nc,{get fill(){return e.fill}})}}),is(gs,{get when(){return"arrow"===n()},get children(){return is(Sc,{get fill(){return e.fill}})}}),is(gs,{get when(){return"question"===n()},get children(){return is(Hc,{get fill(){return e.fill}})}}),is(gs,{get when(){return"string"!=typeof n()},get children(){return n()}})]}})}})]}}))},Yc={m:"24px",s:"16px",none:"0"},Zc=ef.div`
  display: flex;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.4);
  padding: 20px 0;
  overflow-y: auto;

  ${Ef("mobile")} {
    padding-bottom: 0;
  }
`,Qc=Vs`
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08), 0 16px 64px rgba(0, 0, 0, 0.16);
  width: fit-content;
  margin: auto;

  ${Ef("mobile")} {
    width: 100%;
    height: fit-content;
    margin: auto 0 0 0;
  }
`,el=ef.div`
  position: relative;
  min-height: 100px;
  width: 416px;
  padding: 44px 56px 24px;

  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.04);

  background-color: ${e=>e.theme.colors.background.primary};
  border-radius: ${e=>Yc[e.theme.borderRadius]};

  ${Ef("mobile")} {
    width: 100%;
    border-radius: 24px 24px 0px 0px;
  }
`,tl=ef(zc)`
  position: absolute;
  right: 16px;
  top: 12px;
`;ef.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 16px 16px 18px;
  border-radius: 0 0 ${e=>Yc[e.theme.borderRadius]}
    ${e=>Yc[e.theme.borderRadius]};
`,ef(zc)`
  background-color: ${e=>sf(e.theme.colors.icon.secondary,.12)};
`;var nl=class{constructor(){la(this,"currentTime",0)}},rl=class{constructor(){la(this,"currentTime",0),la(this,"playbackRate",1),la(this,"startTime",null),la(this,"timeline",new nl),la(this,"finished",Promise.resolve(this)),la(this,"effect",null),la(this,"id",""),la(this,"pending",!1),la(this,"playState","finished"),la(this,"replaceState","active"),la(this,"ready",Promise.resolve(this)),la(this,"oncancel",null),la(this,"onfinish",null),la(this,"onremove",null)}static create(){return rl._instance||(function(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window?.okxLogDebug&&o.warn("[OKX_TON_CONNECT_UI]",...t)}catch{}}("Animation is not supported in this environment: please consider using the `web-animations-js` polyfill to provide a fallback implementation of the Web Animations API."),rl._instance=new rl),rl._instance}cancel(){}finish(){}pause(){}play(){}reverse(){}addEventListener(e,t,n){}dispatchEvent(e){return!1}removeEventListener(e,t,n){}updatePlaybackRate(e){}commitStyles(){}persist(){}},ol=rl;function il(e,t,n){return"animate"in e?e.animate(t,n):ol.create()}la(ol,"_instance",null);var al=xs("<div>"),sl=function(e,t){let n=n=>{var r;return!e.contains(n.target)&&(null==(r=t())?void 0:r())};document.body.addEventListener("click",n),La((()=>document.body.removeEventListener("click",n)))},fl=function(e,t){let n=e=>{var n,r;"Escape"===e.key&&(null==(n=document.activeElement)||n.blur(),null==(r=t())||r())};document.body.addEventListener("keydown",n),La((()=>document.body.removeEventListener("keydown",n)))},cl=function(e,t){let{isEnabled:n,onClose:r}=t();if(!n||"android"!==Gf().os)return;window.history.pushState(Ec,"");let o=e=>{e.preventDefault(),r()};window.addEventListener("popstate",o,{once:!0}),La((()=>{window.removeEventListener("popstate",o),qf((()=>{var e;!0===(null==(e=window.history.state)?void 0:e[wc])&&window.history.back()}))}))},ll=e=>{let t=Zs(),n=vc(e);return Ia((()=>{e.opened?document.documentElement.scrollHeight!==document.documentElement.clientHeight&&(document.body.style.top=ff(-document.documentElement.scrollTop),document.body.classList.add(rf)):(document.body.classList.remove(rf),document.documentElement.scrollTo({top:-parseFloat(getComputedStyle(document.body).top)}),document.body.style.top="auto")})),is(Oc,{onBeforeEnter:e=>{let t=wf("mobile")?200:100;il(e,[{opacity:0},{opacity:1}],{duration:t}),wf("mobile")&&il(e.firstElementChild,[{transform:"translateY(390px)"},{transform:"translateY(0)"}],{duration:t})},onExit:(e,t)=>{let n=wf("mobile")?200:100,r=il(e,[{opacity:1},{opacity:0}],{duration:n});if(wf("mobile")){let o=il(e.firstElementChild,[{transform:"translateY(0)"},{transform:"translateY(390px)"}],{duration:n});Promise.all([r.finished,o.finished]).then(t)}else r.finished.then(t)},get children(){return is(hs,{get when(){return e.opened},get children(){return is(Zc,ls({"data-tc-modal":"true"},n,{get children(){var n=al();return Ts(cl,n,(()=>({isEnabled:!0,onClose:()=>e.onClose()}))),Ts(fl,n,(()=>()=>e.onClose())),Ts(sl,n,(()=>()=>e.onClose())),ks(n,is(el,{get class(){return e.class},get children(){return[is(tl,{icon:"close",onClick:()=>e.onClose()}),Ka((()=>e.children))]}})),Aa((()=>Rs(n,(0,zi.default)(Qc,Vs`
                                border-radius: ${Yc[t.borderRadius]};
                                background-color: ${t.colors.background.tint};

                                ${Ef("mobile")} {
                                    border-radius: ${Yc[t.borderRadius]}
                                        ${Yc[t.borderRadius]} 0 0;
                                }
                            `)))),n}}))}})}})},dl={m:"22px",s:"12px",none:"0"},ul={m:"18px",s:"8px",none:"0"};ef.div`
    display: grid;
    grid-template: 1fr / 1fr 1fr;
    width: fit-content;
    justify-items: center;
    gap: 4px;

    position: relative;
    padding: 4px;
    border-radius: ${e=>dl[e.theme.borderRadius]};

    background-color: ${e=>e.theme.colors.background.secondary};
`,ef.div`
    position: absolute;
    top: 4px;
    left: 4px;

    height: calc(100% - 8px);
    width: calc(50% - 4px);

    border-radius: ${e=>ul[e.theme.borderRadius]};
    background-color: ${e=>e.theme.colors.background.segment};

    transform: ${e=>e.right?"translateX(100%)":"translateX(0)"};

    transition: transform 0.13s ease-in-out;
`,ef.input`
    display: none;
`,ef.label`
    padding: 9px 12px;
    z-index: 1;

    cursor: ${e=>e.isActive?"default":"pointer"};

    transition: transform 0.13s ease-in-out;

    &:hover {
        transform: ${e=>e.isActive?"none":"scale(1.025)"};
    }

    > * {
        ${e=>e.isActive?"":`color: ${e.theme.colors.text.secondary};`}
    }
`;var hl={m:"16px",s:"12px",none:"0"},pl={m:"12px",s:"8px",none:"0"},gl=ef.div`
    width: 52px;
    height: 52px;
    background: transparent;
    position: absolute;
    right: 0;
    bottom: 0;

    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.125s ease-in-out;
`,bl=ef.button`
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    background-color: ${e=>e.theme.colors.background.qr};
    border-radius: ${e=>hl[e.theme.borderRadius]};
    padding: ${ff(0)} 0;
    height: ${ff(263)};
    width: 100%;

    overflow: hidden;
    cursor: pointer;
    border: none;

    ${xf} {
        &:hover {
            ${gl.class} {
                transform: scale(1.04);
            }
        }
    }

    &:active {
        ${gl.class} {
            transform: scale(0.96);
        }
    }

    ${_f} {
        &:active {
            ${gl.class} {
                transform: scale(0.92);
            }
        }
    }
`,yl=ef.div`
    position: relative;
  
    width: fit-content;
    margin: 0 auto;

    > div:first-child {
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    rect {
        fill: transparent;
    }
    
    path {
        fill: ${e=>e.theme.colors.qrFill};
    }
`,vl=ef.div`
    position: absolute;
    width: ${ff(56)};
    height: ${ff(56)};
    background: ${e=>e.theme.colors.background.qr};

    display: flex;
    align-items: center;
    justify-content: center;
`,ml=ef(pc)`
    width: ${e=>ff(e.size)};
    height: ${e=>ff(e.size)};
    border-radius: ${e=>pl[e.theme.borderRadius]};
    background-color: ${e=>e.theme.colors.background.qr};
`;ef.div`
    position: absolute;
    bottom: 14px;
    left: 50%;
    transform: translate(-50%, 0);

    display: flex;
    gap: 6px;
    align-items: center;
    border-radius: 18px;
    min-width: 126px;
    padding: 9px 16px 9px 10px;

    filter: drop-shadow(0px 2px 8px rgba(0, 0, 0, 0.08));
    background-color: ${e=>e.theme.colors.background.segment};
`;var Cl={exports:{}};!function(e){var t=function(){var e=function(e,t){var n=e,r=i[t],o=null,a=0,s=null,f=[],c={},l=function(e,t){o=function(e){for(var t=new Array(e),n=0;n<e;n+=1){t[n]=new Array(e);for(var r=0;r<e;r+=1)t[n][r]=null}return t}(a=4*n+17),d(0,0),d(a-7,0),d(0,a-7),h(),u(),E(e,t),n>=7&&g(e),null==s&&(s=S(n,r,f)),_(s,t)},d=function(e,t){for(var n=-1;n<=7;n+=1)if(!(e+n<=-1||a<=e+n))for(var r=-1;r<=7;r+=1)t+r<=-1||a<=t+r||(o[e+n][t+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},u=function(){for(var e=8;e<a-8;e+=1)null==o[e][6]&&(o[e][6]=e%2==0);for(var t=8;t<a-8;t+=1)null==o[6][t]&&(o[6][t]=t%2==0)},h=function(){for(var e=p.getPatternPosition(n),t=0;t<e.length;t+=1)for(var r=0;r<e.length;r+=1){var i=e[t],a=e[r];if(null==o[i][a])for(var s=-2;s<=2;s+=1)for(var f=-2;f<=2;f+=1)o[i+s][a+f]=-2==s||2==s||-2==f||2==f||0==s&&0==f}},g=function(e){for(var t=p.getBCHTypeNumber(n),r=0;r<18;r+=1){var i=!e&&1==(t>>r&1);o[Math.floor(r/3)][r%3+a-8-3]=i}for(r=0;r<18;r+=1){i=!e&&1==(t>>r&1);o[r%3+a-8-3][Math.floor(r/3)]=i}},E=function(e,t){for(var n=r<<3|t,i=p.getBCHTypeInfo(n),s=0;s<15;s+=1){var f=!e&&1==(i>>s&1);s<6?o[s][8]=f:s<8?o[s+1][8]=f:o[a-15+s][8]=f}for(s=0;s<15;s+=1){f=!e&&1==(i>>s&1);s<8?o[8][a-s-1]=f:s<9?o[8][15-s-1+1]=f:o[8][15-s-1]=f}o[a-8][8]=!e},_=function(e,t){for(var n=-1,r=a-1,i=7,s=0,f=p.getMaskFunction(t),c=a-1;c>0;c-=2)for(6==c&&(c-=1);;){for(var l=0;l<2;l+=1)if(null==o[r][c-l]){var d=!1;s<e.length&&(d=1==(e[s]>>>i&1)),f(r,c-l)&&(d=!d),o[r][c-l]=d,-1==(i-=1)&&(s+=1,i=7)}if((r+=n)<0||a<=r){r-=n,n=-n;break}}},S=function(e,t,n){for(var r=y.getRSBlocks(e,t),o=v(),i=0;i<n.length;i+=1){var a=n[i];o.put(a.getMode(),4),o.put(a.getLength(),p.getLengthInBits(a.getMode(),e)),a.write(o)}var s=0;for(i=0;i<r.length;i+=1)s+=r[i].dataCount;if(o.getLengthInBits()>8*s)throw"code length overflow. ("+o.getLengthInBits()+">"+8*s+")";for(o.getLengthInBits()+4<=8*s&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*s||(o.put(236,8),o.getLengthInBits()>=8*s));)o.put(17,8);return function(e,t){for(var n=0,r=0,o=0,i=new Array(t.length),a=new Array(t.length),s=0;s<t.length;s+=1){var f=t[s].dataCount,c=t[s].totalCount-f;r=Math.max(r,f),o=Math.max(o,c),i[s]=new Array(f);for(var l=0;l<i[s].length;l+=1)i[s][l]=255&e.getBuffer()[l+n];n+=f;var d=p.getErrorCorrectPolynomial(c),u=b(i[s],d.getLength()-1).mod(d);for(a[s]=new Array(d.getLength()-1),l=0;l<a[s].length;l+=1){var h=l+u.getLength()-a[s].length;a[s][l]=h>=0?u.getAt(h):0}}var g=0;for(l=0;l<t.length;l+=1)g+=t[l].totalCount;var y=new Array(g),v=0;for(l=0;l<r;l+=1)for(s=0;s<t.length;s+=1)l<i[s].length&&(y[v]=i[s][l],v+=1);for(l=0;l<o;l+=1)for(s=0;s<t.length;s+=1)l<a[s].length&&(y[v]=a[s][l],v+=1);return y}(o,r)};c.addData=function(e,t){var n=null;switch(t=t||"Byte"){case"Numeric":n=m(e);break;case"Alphanumeric":n=C(e);break;case"Byte":n=O(e);break;case"Kanji":n=w(e);break;default:throw"mode:"+t}f.push(n),s=null},c.isDark=function(e,t){if(e<0||a<=e||t<0||a<=t)throw e+","+t;return o[e][t]},c.getModuleCount=function(){return a},c.make=function(){if(n<1){for(var e=1;e<40;e++){for(var t=y.getRSBlocks(e,r),o=v(),i=0;i<f.length;i++){var a=f[i];o.put(a.getMode(),4),o.put(a.getLength(),p.getLengthInBits(a.getMode(),e)),a.write(o)}var s=0;for(i=0;i<t.length;i++)s+=t[i].dataCount;if(o.getLengthInBits()<=8*s)break}n=e}l(!1,function(){for(var e=0,t=0,n=0;n<8;n+=1){l(!0,n);var r=p.getLostPoint(c);(0==n||e>r)&&(e=r,t=n)}return t}())},c.createTableTag=function(e,t){e=e||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(t=typeof t>"u"?4*e:t)+"px;",n+='">',n+="<tbody>";for(var r=0;r<c.getModuleCount();r+=1){n+="<tr>";for(var o=0;o<c.getModuleCount();o+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+e+"px;",n+=" height: "+e+"px;",n+=" background-color: ",n+=c.isDark(r,o)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>"},c.createSvgTag=function(e,t,n,r){var o={};"object"==typeof arguments[0]&&(e=(o=arguments[0]).cellSize,t=o.margin,n=o.alt,r=o.title),e=e||2,t=typeof t>"u"?4*e:t,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var i,a,s,f,l=c.getModuleCount()*e+2*t,d="";for(f="l"+e+",0 0,"+e+" -"+e+",0 0,-"+e+"z ",d+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',d+=o.scalable?"":' width="'+l+'px" height="'+l+'px"',d+=' viewBox="0 0 '+l+" "+l+'" ',d+=' preserveAspectRatio="xMinYMin meet"',d+=r.text||n.text?' role="img" aria-labelledby="'+R([r.id,n.id].join(" ").trim())+'"':"",d+=">",d+=r.text?'<title id="'+R(r.id)+'">'+R(r.text)+"</title>":"",d+=n.text?'<description id="'+R(n.id)+'">'+R(n.text)+"</description>":"",d+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',d+='<path d="',a=0;a<c.getModuleCount();a+=1)for(s=a*e+t,i=0;i<c.getModuleCount();i+=1)c.isDark(a,i)&&(d+="M"+(i*e+t)+","+s+f);return d+='" stroke="transparent" fill="black"/>',d+="</svg>"},c.createDataURL=function(e,t){e=e||2,t=typeof t>"u"?4*e:t;var n=c.getModuleCount()*e+2*t,r=t,o=n-t;return x(n,n,(function(t,n){if(r<=t&&t<o&&r<=n&&n<o){var i=Math.floor((t-r)/e),a=Math.floor((n-r)/e);return c.isDark(a,i)?0:1}return 1}))},c.createImgTag=function(e,t,n){e=e||2,t=typeof t>"u"?4*e:t;var r=c.getModuleCount()*e+2*t,o="";return o+="<img",o+=' src="',o+=c.createDataURL(e,t),o+='"',o+=' width="',o+=r,o+='"',o+=' height="',o+=r,o+='"',n&&(o+=' alt="',o+=R(n),o+='"'),o+="/>"};var R=function(e){for(var t="",n=0;n<e.length;n+=1){var r=e.charAt(n);switch(r){case"<":t+="&lt;";break;case">":t+="&gt;";break;case"&":t+="&amp;";break;case'"':t+="&quot;";break;default:t+=r}}return t};return c.createASCII=function(e,t){if((e=e||1)<2)return function(e){e=typeof e>"u"?2:e;var t,n,r,o,i,a=1*c.getModuleCount()+2*e,s=e,f=a-e,l={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},d={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},u="";for(t=0;t<a;t+=2){for(r=Math.floor((t-s)/1),o=Math.floor((t+1-s)/1),n=0;n<a;n+=1)i="\u2588",s<=n&&n<f&&s<=t&&t<f&&c.isDark(r,Math.floor((n-s)/1))&&(i=" "),s<=n&&n<f&&s<=t+1&&t+1<f&&c.isDark(o,Math.floor((n-s)/1))?i+=" ":i+="\u2588",u+=e<1&&t+1>=f?d[i]:l[i];u+="\n"}return a%2&&e>0?u.substring(0,u.length-a-1)+Array(a+1).join("\u2580"):u.substring(0,u.length-1)}(t);e-=1,t=typeof t>"u"?2*e:t;var n,r,o,i,a=c.getModuleCount()*e+2*t,s=t,f=a-t,l=Array(e+1).join("\u2588\u2588"),d=Array(e+1).join("  "),u="",h="";for(n=0;n<a;n+=1){for(o=Math.floor((n-s)/e),h="",r=0;r<a;r+=1)i=1,s<=r&&r<f&&s<=n&&n<f&&c.isDark(o,Math.floor((r-s)/e))&&(i=0),h+=i?l:d;for(o=0;o<e;o+=1)u+=h+"\n"}return u.substring(0,u.length-1)},c.renderTo2dContext=function(e,t){t=t||2;for(var n=c.getModuleCount(),r=0;r<n;r++)for(var o=0;o<n;o++)e.fillStyle=c.isDark(r,o)?"black":"white",e.fillRect(r*t,o*t,t,t)},c};e.stringToBytes=(e.stringToBytesFuncs={default:function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t.push(255&r)}return t}}).default,e.createStringToBytes=function(e,t){var n=function(){for(var n=_(e),r=function(){var e=n.read();if(-1==e)throw"eof";return e},o=0,i={};;){var a=n.read();if(-1==a)break;var s=r(),f=r()<<8|r();i[String.fromCharCode(a<<8|s)]=f,o+=1}if(o!=t)throw o+" != "+t;return i}();return function(e){for(var t=[],r=0;r<e.length;r+=1){var o=e.charCodeAt(r);if(o<128)t.push(o);else{var i=n[e.charAt(r)];"number"==typeof i?(255&i)==i?t.push(i):(t.push(i>>>8),t.push(255&i)):t.push(63)}}return t}};var t=1,n=2,r=4,o=8,i={L:1,M:0,Q:3,H:2},a=0,s=1,f=2,c=3,l=4,d=5,u=6,h=7,p=function(){var e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],i=1335,p=7973,y={},v=function(e){for(var t=0;0!=e;)t+=1,e>>>=1;return t};return y.getBCHTypeInfo=function(e){for(var t=e<<10;v(t)-v(i)>=0;)t^=i<<v(t)-v(i);return 21522^(e<<10|t)},y.getBCHTypeNumber=function(e){for(var t=e<<12;v(t)-v(p)>=0;)t^=p<<v(t)-v(p);return e<<12|t},y.getPatternPosition=function(t){return e[t-1]},y.getMaskFunction=function(e){switch(e){case a:return function(e,t){return(e+t)%2==0};case s:return function(e,t){return e%2==0};case f:return function(e,t){return t%3==0};case c:return function(e,t){return(e+t)%3==0};case l:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case d:return function(e,t){return e*t%2+e*t%3==0};case u:return function(e,t){return(e*t%2+e*t%3)%2==0};case h:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw"bad maskPattern:"+e}},y.getErrorCorrectPolynomial=function(e){for(var t=b([1],0),n=0;n<e;n+=1)t=t.multiply(b([1,g.gexp(n)],0));return t},y.getLengthInBits=function(e,i){if(1<=i&&i<10)switch(e){case t:return 10;case n:return 9;case r:case o:return 8;default:throw"mode:"+e}else if(i<27)switch(e){case t:return 12;case n:return 11;case r:return 16;case o:return 10;default:throw"mode:"+e}else{if(!(i<41))throw"type:"+i;switch(e){case t:return 14;case n:return 13;case r:return 16;case o:return 12;default:throw"mode:"+e}}},y.getLostPoint=function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r+=1)for(var o=0;o<t;o+=1){for(var i=0,a=e.isDark(r,o),s=-1;s<=1;s+=1)if(!(r+s<0||t<=r+s))for(var f=-1;f<=1;f+=1)o+f<0||t<=o+f||0==s&&0==f||a==e.isDark(r+s,o+f)&&(i+=1);i>5&&(n+=3+i-5)}for(r=0;r<t-1;r+=1)for(o=0;o<t-1;o+=1){var c=0;e.isDark(r,o)&&(c+=1),e.isDark(r+1,o)&&(c+=1),e.isDark(r,o+1)&&(c+=1),e.isDark(r+1,o+1)&&(c+=1),(0==c||4==c)&&(n+=3)}for(r=0;r<t;r+=1)for(o=0;o<t-6;o+=1)e.isDark(r,o)&&!e.isDark(r,o+1)&&e.isDark(r,o+2)&&e.isDark(r,o+3)&&e.isDark(r,o+4)&&!e.isDark(r,o+5)&&e.isDark(r,o+6)&&(n+=40);for(o=0;o<t;o+=1)for(r=0;r<t-6;r+=1)e.isDark(r,o)&&!e.isDark(r+1,o)&&e.isDark(r+2,o)&&e.isDark(r+3,o)&&e.isDark(r+4,o)&&!e.isDark(r+5,o)&&e.isDark(r+6,o)&&(n+=40);var l=0;for(o=0;o<t;o+=1)for(r=0;r<t;r+=1)e.isDark(r,o)&&(l+=1);return n+=10*(Math.abs(100*l/t/t-50)/5)},y}(),g=function(){for(var e=new Array(256),t=new Array(256),n=0;n<8;n+=1)e[n]=1<<n;for(n=8;n<256;n+=1)e[n]=e[n-4]^e[n-5]^e[n-6]^e[n-8];for(n=0;n<255;n+=1)t[e[n]]=n;var r={glog:function(e){if(e<1)throw"glog("+e+")";return t[e]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return e[t]}};return r}();function b(e,t){if(typeof e.length>"u")throw e.length+"/"+t;var n=function(){for(var n=0;n<e.length&&0==e[n];)n+=1;for(var r=new Array(e.length-n+t),o=0;o<e.length-n;o+=1)r[o]=e[o+n];return r}(),r={getAt:function(e){return n[e]},getLength:function(){return n.length},multiply:function(e){for(var t=new Array(r.getLength()+e.getLength()-1),n=0;n<r.getLength();n+=1)for(var o=0;o<e.getLength();o+=1)t[n+o]^=g.gexp(g.glog(r.getAt(n))+g.glog(e.getAt(o)));return b(t,0)},mod:function(e){if(r.getLength()-e.getLength()<0)return r;for(var t=g.glog(r.getAt(0))-g.glog(e.getAt(0)),n=new Array(r.getLength()),o=0;o<r.getLength();o+=1)n[o]=r.getAt(o);for(o=0;o<e.getLength();o+=1)n[o]^=g.gexp(g.glog(e.getAt(o))+t);return b(n,0).mod(e)}};return r}var y=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(e,t){var n={};return n.totalCount=e,n.dataCount=t,n},n={};return n.getRSBlocks=function(n,r){var o=function(t,n){switch(n){case i.L:return e[4*(t-1)+0];case i.M:return e[4*(t-1)+1];case i.Q:return e[4*(t-1)+2];case i.H:return e[4*(t-1)+3];default:return}}(n,r);if(typeof o>"u")throw"bad rs block @ typeNumber:"+n+"/errorCorrectionLevel:"+r;for(var a=o.length/3,s=[],f=0;f<a;f+=1)for(var c=o[3*f+0],l=o[3*f+1],d=o[3*f+2],u=0;u<c;u+=1)s.push(t(l,d));return s},n}(),v=function(){var e=[],t=0,n={getBuffer:function(){return e},getAt:function(t){var n=Math.floor(t/8);return 1==(e[n]>>>7-t%8&1)},put:function(e,t){for(var r=0;r<t;r+=1)n.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return t},putBit:function(n){var r=Math.floor(t/8);e.length<=r&&e.push(0),n&&(e[r]|=128>>>t%8),t+=1}};return n},m=function(e){var n=t,r=e,o={getMode:function(){return n},getLength:function(e){return r.length},write:function(e){for(var t=r,n=0;n+2<t.length;)e.put(i(t.substring(n,n+3)),10),n+=3;n<t.length&&(t.length-n==1?e.put(i(t.substring(n,n+1)),4):t.length-n==2&&e.put(i(t.substring(n,n+2)),7))}},i=function(e){for(var t=0,n=0;n<e.length;n+=1)t=10*t+a(e.charAt(n));return t},a=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-48;throw"illegal char :"+e};return o},C=function(e){var t=n,r=e,o={getMode:function(){return t},getLength:function(e){return r.length},write:function(e){for(var t=r,n=0;n+1<t.length;)e.put(45*i(t.charAt(n))+i(t.charAt(n+1)),11),n+=2;n<t.length&&e.put(i(t.charAt(n)),6)}},i=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-48;if("A"<=e&&e<="Z")return e.charCodeAt(0)-65+10;switch(e){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+e}};return o},O=function(t){var n=r,o=e.stringToBytes(t),i={getMode:function(){return n},getLength:function(e){return o.length},write:function(e){for(var t=0;t<o.length;t+=1)e.put(o[t],8)}};return i},w=function(t){var n=o,r=e.stringToBytesFuncs.SJIS;if(!r)throw"sjis not supported.";!function(){var e=r("\u53cb");if(2!=e.length||38726!=(e[0]<<8|e[1]))throw"sjis not supported."}();var i=r(t),a={getMode:function(){return n},getLength:function(e){return~~(i.length/2)},write:function(e){for(var t=i,n=0;n+1<t.length;){var r=(255&t[n])<<8|255&t[n+1];if(33088<=r&&r<=40956)r-=33088;else{if(!(57408<=r&&r<=60351))throw"illegal char at "+(n+1)+"/"+r;r-=49472}r=192*(r>>>8&255)+(255&r),e.put(r,13),n+=2}if(n<t.length)throw"illegal char at "+(n+1)}};return a},E=function(){var e=[],t={writeByte:function(t){e.push(255&t)},writeShort:function(e){t.writeByte(e),t.writeByte(e>>>8)},writeBytes:function(e,n,r){n=n||0,r=r||e.length;for(var o=0;o<r;o+=1)t.writeByte(e[o+n])},writeString:function(e){for(var n=0;n<e.length;n+=1)t.writeByte(e.charCodeAt(n))},toByteArray:function(){return e},toString:function(){var t="";t+="[";for(var n=0;n<e.length;n+=1)n>0&&(t+=","),t+=e[n];return t+="]"}};return t},_=function(e){var t=e,n=0,r=0,o=0,i={read:function(){for(;o<8;){if(n>=t.length){if(0==o)return-1;throw"unexpected end of file./"+o}var e=t.charAt(n);if(n+=1,"="==e)return o=0,-1;e.match(/^\s$/)||(r=r<<6|a(e.charCodeAt(0)),o+=6)}var i=r>>>o-8&255;return o-=8,i}},a=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(43==e)return 62;if(47==e)return 63;throw"c:"+e};return i},x=function(e,t,n){for(var r=function(e,t){var n=e,r=t,o=new Array(e*t),i={setPixel:function(e,t,r){o[t*n+e]=r},write:function(e){e.writeString("GIF87a"),e.writeShort(n),e.writeShort(r),e.writeByte(128),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(255),e.writeByte(255),e.writeByte(255),e.writeString(","),e.writeShort(0),e.writeShort(0),e.writeShort(n),e.writeShort(r),e.writeByte(0);var t=a(2);e.writeByte(2);for(var o=0;t.length-o>255;)e.writeByte(255),e.writeBytes(t,o,255),o+=255;e.writeByte(t.length-o),e.writeBytes(t,o,t.length-o),e.writeByte(0),e.writeString(";")}},a=function(e){for(var t=1<<e,n=1+(1<<e),r=e+1,i=s(),a=0;a<t;a+=1)i.add(String.fromCharCode(a));i.add(String.fromCharCode(t)),i.add(String.fromCharCode(n));var f=E(),c=function(e){var t=e,n=0,r=0,o={write:function(e,o){if(e>>>o)throw"length over";for(;n+o>=8;)t.writeByte(255&(e<<n|r)),o-=8-n,e>>>=8-n,r=0,n=0;r|=e<<n,n+=o},flush:function(){n>0&&t.writeByte(r)}};return o}(f);c.write(t,r);var l=0,d=String.fromCharCode(o[l]);for(l+=1;l<o.length;){var u=String.fromCharCode(o[l]);l+=1,i.contains(d+u)?d+=u:(c.write(i.indexOf(d),r),i.size()<4095&&(i.size()==1<<r&&(r+=1),i.add(d+u)),d=u)}return c.write(i.indexOf(d),r),c.write(n,r),c.flush(),f.toByteArray()},s=function(){var e={},t=0,n={add:function(r){if(n.contains(r))throw"dup key:"+r;e[r]=t,t+=1},size:function(){return t},indexOf:function(t){return e[t]},contains:function(t){return typeof e[t]<"u"}};return n};return i}(e,t),o=0;o<t;o+=1)for(var i=0;i<e;i+=1)r.setPixel(i,o,n(i,o));var a=E();r.write(a);for(var s=function(){var e=0,t=0,n=0,r="",o={},i=function(e){r+=String.fromCharCode(a(63&e))},a=function(e){if(!(e<0)){if(e<26)return 65+e;if(e<52)return e-26+97;if(e<62)return e-52+48;if(62==e)return 43;if(63==e)return 47}throw"n:"+e};return o.writeByte=function(r){for(e=e<<8|255&r,t+=8,n+=1;t>=6;)i(e>>>t-6),t-=6},o.flush=function(){if(t>0&&(i(e<<6-t),e=0,t=0),n%3!=0)for(var o=3-n%3,a=0;a<o;a+=1)r+="="},o.toString=function(){return r},o}(),f=a.toByteArray(),c=0;c<f.length;c+=1)s.writeByte(f[c]);return s.flush(),"data:image/gif;base64,"+s};return e}();t.stringToBytesFuncs["UTF-8"]=function(e){return function(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return t}(e)},e.exports=t}(Cl);var Ol=Cl.exports,wl=xs("<div>"),El=e=>{let t,n,r;Pa(!1);let[o,i]=Pa(54);return Ia((()=>{let o=Ol(0,"L");o.addData(e.sourceUrl),o.make(),t.innerHTML=o.createSvgTag(4,0);let a=t.firstElementChild.clientWidth,s=Math.round(263/a*1e5)/1e5;if(r){let e=4*Math.ceil(56/(4*s)),t=ff(4*Math.ceil((a-e)/8));r.style.top=t,r.style.left=t,r.style.height=ff(e),r.style.width=ff(e),i(Math.round(54/s))}n.style.transform=`scale(${s})`})),is(bl,{get class(){return e.class},get children(){return[is(yl,{ref(e){"function"==typeof n?n(e):n=e},get children(){return[(()=>{var e=wl();return"function"==typeof t?Ts(t,e):t=e,e})(),is(hs,{get when(){return e.imageUrl},get children(){return is(vl,{ref(e){"function"==typeof r?r(e):r=e},get children(){return is(ml,{get src(){return e.imageUrl},alt:"",get size(){return o()}})}})}})]}}),is(Oc,{onBeforeEnter:e=>{il(e,[{opacity:0,transform:"translate(-50%, 44px)"},{opacity:1,transform:"translate(-50%, 0)"}],{duration:150,easing:"ease-out"})},onExit:(e,t)=>{il(e,[{opacity:1,transform:"translate(-50%, 0)"},{opacity:0,transform:"translate(-50%, 44px)"}],{duration:150,easing:"ease-out"}).finished.then((()=>{t()}))}})]}})},_l=Symbol("store-raw"),xl=Symbol("store-node"),Sl=Symbol("store-has"),Rl=Symbol("store-self");function Nl(e){let t=e[ya];if(!t&&(Object.defineProperty(e,ya,{value:t=new Proxy(e,Il)}),!Array.isArray(e))){let n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,i=n.length;o<i;o++){let i=n[o];r[i].get&&Object.defineProperty(e,i,{enumerable:r[i].enumerable,get:r[i].get.bind(t)})}}return t}function Tl(e){let t;return null!=e&&"object"==typeof e&&(e[ya]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function kl(e){let t,n,r,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if(t=null!=e&&e[_l])return t;if(!Tl(e)||i.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):i.add(e);for(let t=0,o=e.length;t<o;t++)r=e[t],(n=kl(r,i))!==r&&(e[t]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):i.add(e);let t=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let s=0,f=t.length;s<f;s++)o=t[s],!a[o].get&&(r=e[o],(n=kl(r,i))!==r&&(e[o]=n))}return e}function Dl(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function Pl(e,t,n){if(e[t])return e[t];let[r,o]=Pa(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function Al(e){Wa()&&Pl(Dl(e,xl),Rl)()}var Il={get(e,t,n){if(t===_l)return e;if(t===ya)return n;if(t===ma)return Al(e),n;let r=Dl(e,xl),o=r[t],i=o?o():e[t];if(t===xl||t===Sl||"__proto__"===t)return i;if(!o){let n=Object.getOwnPropertyDescriptor(e,t);Wa()&&("function"!=typeof i||e.hasOwnProperty(t))&&(!n||!n.get)&&(i=Pl(r,t,i)())}return Tl(i)?Nl(i):i},has:(e,t)=>t===_l||t===ya||t===ma||t===xl||t===Sl||"__proto__"===t||(Wa()&&Pl(Dl(e,Sl),t)(),t in e),set:()=>!0,deleteProperty:()=>!0,ownKeys:function(e){return Al(e),Reflect.ownKeys(e)},getOwnPropertyDescriptor:function(e,t){let n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===ya||t===xl||(delete n.value,delete n.writable,n.get=()=>e[ya][t]),n}};function Kl(e,t,n){if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])&&e[t]===n)return;let r=e[t],o=e.length;void 0===n?(delete e[t],e[Sl]&&e[Sl][t]&&void 0!==r&&e[Sl][t].$()):(e[t]=n,e[Sl]&&e[Sl][t]&&void 0===r&&e[Sl][t].$());let i,a=Dl(e,xl);if((i=Pl(a,t,r))&&i.$((()=>n)),Array.isArray(e)&&e.length!==o){for(let t=e.length;t<o;t++)(i=a[t])&&i.$();(i=Pl(a,"length",o))&&i.$(e.length)}(i=a[Rl])&&i.$()}function Ml(e,t){let n=Object.keys(t);for(let r=0;r<n.length;r+=1){let o=n[r];Kl(e,o,t[o])}}function jl(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=e;if(t.length>1){n=t.shift();let i=typeof n,a=Array.isArray(e);if(Array.isArray(n)){for(let o=0;o<n.length;o++)jl(e,[n[o]].concat(t),r);return}if(a&&"function"===i){for(let o=0;o<e.length;o++)n(e[o],o)&&jl(e,[o].concat(t),r);return}if(a&&"object"===i){let{from:o=0,to:i=e.length-1,by:a=1}=n;for(let n=o;n<=i;n+=a)jl(e,[n].concat(t),r);return}if(t.length>1)return void jl(e[n],t,[n].concat(r));o=e[n],r=[n].concat(r)}let i=t[0];"function"==typeof i&&(i=i(o,r),i===o)||void 0===n&&null==i||(i=kl(i),void 0===n||Tl(o)&&Tl(i)&&!Array.isArray(i)?Ml(o,i):Kl(e,n,i))}function Ul(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r,o]=t,i=kl(r||{}),a=Array.isArray(i);return[Nl(i),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Ma((()=>{a&&1===t.length?function(e,t){if("function"==typeof t&&(t=t(e)),t=kl(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){let r=t[n];e[n]!==r&&Kl(e,n,r)}Kl(e,"length",r)}else Ml(e,t)}(i,t[0]):jl(i,t)}))}]}function Ll(e,t,n){let r=e[t]||t.trim().split(".").reduce(((e,t)=>e?e[t]:void 0),e);return void 0!==r?r:n}var Wl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:typeof navigator<"u"&&navigator.language in e?navigator.language:(t=>null!=(t=Object.keys(e)[0])?t:"")(),[n,r]=Pa(t),[o,i]=Ul(e);return[(e,t,r)=>{let i=Ll(o[n()],e,r||"");return"function"==typeof i?i(t):"string"==typeof i?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/{{([^{}]+)}}/g;return e.replace(n,((e,n)=>Ll(t,n,"")))}(i,t||{}):i},{add(e,t){i(e,(e=>Object.assign(e||{},t)))},locale:e=>e?r(e):n(),dict:e=>Ll(o,e)}]},Bl=Xa({}),Xl=()=>$a(Bl),$l=ef.div`
    font-style: normal;
    font-weight: ${e=>e.fontWeight};
    font-size: ${e=>e.fontSize};
    line-height: ${e=>e.lineHeight};

    color: ${e=>e.color};
`,Hl=e=>{let t,n=Zs(),[r]=Xl(),o=ls({fontSize:"14px",fontWeight:"510",lineHeight:"130%"},e);return Ia((()=>{t&&"unset"!==o.cursor&&"pointer"!==getComputedStyle(t).cursor&&(t.style.cursor="default")})),is($l,{get fontSize(){return o.fontSize},get fontWeight(){return o.fontWeight},get lineHeight(){return o.lineHeight},get color(){return e.color||n.colors.text.primary},get class(){return o.class},ref(e){"function"==typeof t?t(e):t=e},"data-tc-text":"true",get children(){var e;return Ka((()=>!!o.translationKey))()?r(o.translationKey,o.translationValues,null==(e=o.children)?void 0:e.toString()):o.children}})},ql=ef.div`
    position: relative;

    &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        border: 0.5px solid rgba(0, 0, 0, 0.08);

        border-radius: inherit;
    }
`,Fl=ef(pc)`
    width: 100%;
    height: 100%;
    border-radius: inherit;
`,Jl=e=>is(ql,{get class(){return e.class},get children(){return is(Fl,{get src(){return e.src}})}}),Vl={m:"16px",s:"12px",none:"0"},Gl={m:"6px",s:"6px",none:"0"};ef.button`
    position: relative;
    cursor: pointer;
    border: none;
    background-color: unset;
    padding: 8px 4px;
    width: 92px;
    display: flex;
    flex-direction: column;
    align-items: center;

    transition: transform 0.125s ease-in-out;

    ${xf} {
        &:hover {
            transform: scale(1.04);
        }
    }

    &:active {
        transform: scale(0.96);
    }

    ${Ef("mobile")} {
        padding: 8px 4px;
        width: 82px;
    }

    ${_f} {
        &:active {
            transform: scale(0.92);
        }
    }
`,ef(Jl)`
    width: 60px;
    height: 60px;
    border-radius: ${e=>Vl[e.theme.borderRadius]};

    margin-bottom: 8px;
`,ef(pc)`
    position: absolute;
    right: 10px;
    top: 50px;
    width: 24px;
    height: 24px;
    border-radius: ${e=>Gl[e.theme.borderRadius]};
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.08);
`,ef(Hl)`
    max-width: 90px;
    font-weight: 510;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;

    ${Ef("mobile")} {
        max-width: 80px;
    }
`,ef(Hl)`
    font-weight: ${e=>e.colorPrimary?"510":"400"};
    max-width: 90px;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    color: ${e=>e.colorPrimary?e.theme.colors.text.primary:e.theme.colors.text.secondary};

    ${Ef("mobile")} {
        max-width: 80px;
    }
`;var zl=ef.h1`
    font-style: normal;
    font-weight: 590;
    font-size: 20px;
    line-height: 28px;

    text-align: center;

    color: ${e=>e.theme.colors.text.primary};

    margin-top: 0;
    margin-bottom: 0;

    cursor: default;
`,Yl=e=>{let[t]=Xl();return is(zl,{get class(){return e.class},"data-tc-h1":"true",get children(){var n;return Ka((()=>!!e.translationKey))()?t(e.translationKey,e.translationValues,null==(n=e.children)?void 0:n.toString()):e.children}})},Zl=ef.h2`
    font-style: normal;
    font-weight: 400;
    font-size: 16px;
    line-height: 22px;

    text-align: center;

    color: ${e=>e.theme.colors.text.secondary};

    margin-top: 0;
    margin-bottom: 32px;

    cursor: default;
`,Ql=ef.h3`
    font-style: normal;
    font-weight: 510;
    font-size: 16px;
    line-height: 20px;

    color: ${e=>e.theme.colors.text.primary};

    margin-top: 0;
    margin-bottom: 0;

    cursor: default;
`,ed=e=>{let[t]=Xl();return is(Ql,{"data-tc-h3":"true",get class(){return e.class},get children(){var n;return Ka((()=>!!e.translationKey))()?t(e.translationKey,e.translationValues,null==(n=e.children)?void 0:n.toString()):e.children}})},td={m:"16px",s:"12px",none:"0"},nd={m:"6px",s:"6px",none:"0"};ef.div`
    width: 60px;
    height: 60px;
    padding: 8px;
    margin-bottom: 8px;
    border-radius: ${e=>td[e.theme.borderRadius]};
    background-color: ${e=>e.theme.colors.background.tint};
    display: grid;
    grid-template: 1fr 1fr / 1fr 1fr;
    gap: 4px;
`,ef(Jl)`
    width: 20px;
    height: 20px;
    border-radius: ${e=>nd[e.theme.borderRadius]};
`,ef.div`
    width: 100%;
    overflow-y: auto;
    max-height: ${e=>e.maxHeight};

    scrollbar-width: none;
    &&::-webkit-scrollbar {
        display: none;
    }

    &&::-webkit-scrollbar-track {
        background: transparent;
    }

    &&::-webkit-scrollbar-thumb {
        display: none;
    }
`,ef.div`
    height: 1px;
    margin: 0 -24px;
    width: calc(100% + 48px);
    opacity: 0.08;
    background: ${e=>e.isShown?e.theme.colors.icon.secondary:"transparent"};
    transition: background 0.15s ease-in-out;

    ${Ef("mobile")} {
        width: 100%;
        margin: 0;
    }
`;var[rd,od]=Pa((null==(Vi=Jf())?void 0:Vi.innerHeight)||0);Jf()&&window.addEventListener("resize",(()=>od(window.innerHeight)));var id=ef.a`
    display: block;
    text-decoration: unset;
`,ad=xs('<svg width=24 height=24 viewBox="0 0 24 24"fill=none xmlns=http://www.w3.org/2000/svg><path fill-rule=evenodd clip-rule=evenodd d="M7.76228 2.09998H10.2378C11.0458 2.09997 11.7067 2.09996 12.2438 2.14384C12.7997 2.18926 13.3017 2.28614 13.7706 2.52505C14.5045 2.89896 15.1011 3.49558 15.475 4.22941C15.7139 4.6983 15.8108 5.20038 15.8562 5.75629C15.9001 6.29337 15.9001 6.95422 15.9001 7.76227V8.1H16.2377C17.0457 8.09999 17.7066 8.09998 18.2437 8.14386C18.7996 8.18928 19.3017 8.28616 19.7705 8.52507C20.5044 8.89898 21.101 9.4956 21.4749 10.2294C21.7138 10.6983 21.8107 11.2004 21.8561 11.7563C21.9 12.2934 21.9 12.9542 21.9 13.7623V16.2377C21.9 17.0458 21.9 17.7066 21.8561 18.2437C21.8107 18.7996 21.7138 19.3017 21.4749 19.7706C21.101 20.5044 20.5044 21.101 19.7705 21.4749C19.3017 21.7138 18.7996 21.8107 18.2437 21.8561C17.7066 21.9 17.0458 21.9 16.2378 21.9H13.7623C12.9543 21.9 12.2934 21.9 11.7563 21.8561C11.2004 21.8107 10.6983 21.7138 10.2294 21.4749C9.49561 21.101 8.89898 20.5044 8.52508 19.7706C8.28616 19.3017 8.18928 18.7996 8.14386 18.2437C8.09998 17.7066 8.09999 17.0458 8.1 16.2377V15.9H7.76227C6.95426 15.9 6.29335 15.9 5.75629 15.8561C5.20038 15.8107 4.6983 15.7138 4.22941 15.4749C3.49558 15.101 2.89896 14.5044 2.52505 13.7705C2.28614 13.3017 2.18926 12.7996 2.14384 12.2437C2.09996 11.7066 2.09997 11.0458 2.09998 10.2377V7.76228C2.09997 6.95424 2.09996 6.29336 2.14384 5.75629C2.18926 5.20038 2.28614 4.6983 2.52505 4.22941C2.89896 3.49558 3.49558 2.89896 4.22941 2.52505C4.6983 2.28614 5.20038 2.18926 5.75629 2.14384C6.29336 2.09996 6.95425 2.09997 7.76228 2.09998ZM8.1 14.1V13.7623C8.09999 12.9542 8.09998 12.2934 8.14386 11.7563C8.18928 11.2004 8.28616 10.6983 8.52508 10.2294C8.89898 9.4956 9.49561 8.89898 10.2294 8.52507C10.6983 8.28616 11.2004 8.18928 11.7563 8.14386C12.2934 8.09998 12.9542 8.09999 13.7623 8.1H14.1001V7.79998C14.1001 6.94505 14.0994 6.35798 14.0622 5.90287C14.0259 5.45827 13.9593 5.21944 13.8712 5.0466C13.6699 4.65146 13.3486 4.3302 12.9535 4.12886C12.7806 4.04079 12.5418 3.97419 12.0972 3.93786C11.6421 3.90068 11.055 3.89998 10.2001 3.89998H7.79998C6.94505 3.89998 6.35798 3.90068 5.90287 3.93786C5.45827 3.97419 5.21944 4.04079 5.0466 4.12886C4.65146 4.3302 4.3302 4.65146 4.12886 5.0466C4.04079 5.21944 3.97419 5.45827 3.93786 5.90287C3.90068 6.35798 3.89998 6.94505 3.89998 7.79998V10.2C3.89998 11.0549 3.90068 11.642 3.93786 12.0971C3.97419 12.5417 4.04079 12.7805 4.12886 12.9534C4.3302 13.3485 4.65146 13.6698 5.0466 13.8711C5.21944 13.9592 5.45827 14.0258 5.90287 14.0621C6.35798 14.0993 6.94505 14.1 7.79998 14.1H8.1ZM11.0466 10.1289C11.2195 10.0408 11.4583 9.97421 11.9029 9.93788C12.358 9.9007 12.9451 9.9 13.8 9.9H16.2C17.0549 9.9 17.642 9.9007 18.0971 9.93788C18.5417 9.97421 18.7805 10.0408 18.9534 10.1289C19.3485 10.3302 19.6698 10.6515 19.8711 11.0466C19.9592 11.2195 20.0258 11.4583 20.0621 11.9029C20.0993 12.358 20.1 12.9451 20.1 13.8V16.2C20.1 17.0549 20.0993 17.642 20.0621 18.0971C20.0258 18.5417 19.9592 18.7805 19.8711 18.9534C19.6698 19.3485 19.3485 19.6698 18.9534 19.8711C18.7805 19.9592 18.5417 20.0258 18.0971 20.0621C17.642 20.0993 17.0549 20.1 16.2 20.1H13.8C12.9451 20.1 12.358 20.0993 11.9029 20.0621C11.4583 20.0258 11.2195 19.9592 11.0466 19.8711C10.6515 19.6698 10.3302 19.3485 10.1289 18.9534C10.0408 18.7805 9.97421 18.5417 9.93788 18.0971C9.9007 17.642 9.9 17.0549 9.9 16.2V13.8C9.9 12.9451 9.9007 12.358 9.93788 11.9029C9.97421 11.4583 10.0408 11.2195 10.1289 11.0466C10.3302 10.6515 10.6515 10.3302 11.0466 10.1289Z">'),sd=e=>{let t=Zs();return(()=>{var n=ad(),r=n.firstChild;return Aa((o=>{var i=e.class,a=e.fill||t.colors.icon.primary;return i!==o.e&&Ss(n,"class",o.e=i),a!==o.t&&Ss(r,"fill",o.t=a),o}),{e:void 0,t:void 0}),n})()},fd=xs('<svg width=24 height=24 viewBox="0 0 24 24"fill=none xmlns=http://www.w3.org/2000/svg><path d="M8.7624 3.10001C7.95435 3.1 7.29349 3.09999 6.75642 3.14387C6.2005 3.18929 5.69842 3.28617 5.22954 3.52508C4.4957 3.89899 3.89908 4.49561 3.52517 5.22944C3.28626 5.69833 3.18938 6.20041 3.14396 6.75632C3.10008 7.2934 3.10009 7.95424 3.1001 8.76229V15.2377C3.10009 16.0458 3.10008 16.7066 3.14396 17.2437C3.18938 17.7996 3.28626 18.3017 3.52517 18.7706C3.89908 19.5044 4.4957 20.101 5.22954 20.4749C5.69842 20.7138 6.2005 20.8107 6.75642 20.8561C7.29349 20.9 7.95434 20.9 8.76239 20.9H12.0001C12.4972 20.9 12.9001 20.4971 12.9001 20C12.9001 19.503 12.4972 19.1 12.0001 19.1H8.8001C7.94517 19.1 7.3581 19.0993 6.90299 19.0621C6.45839 19.0258 6.21956 18.9592 6.04672 18.8711C5.65158 18.6698 5.33032 18.3485 5.12898 17.9534C5.04092 17.7805 4.97431 17.5417 4.93798 17.0971C4.9008 16.642 4.9001 16.0549 4.9001 15.2V8.80001C4.9001 7.94508 4.9008 7.35801 4.93798 6.9029C4.97431 6.4583 5.04092 6.21947 5.12898 6.04663C5.33032 5.65149 5.65158 5.33023 6.04672 5.12889C6.21956 5.04082 6.45839 4.97422 6.90299 4.93789C7.3581 4.90071 7.94517 4.90001 8.8001 4.90001H12.0001C12.4972 4.90001 12.9001 4.49706 12.9001 4.00001C12.9001 3.50295 12.4972 3.10001 12.0001 3.10001H8.7624Z"></path><path d="M17.6364 7.3636C17.2849 7.01212 16.7151 7.01212 16.3636 7.3636C16.0121 7.71507 16.0121 8.28492 16.3636 8.63639L18.8272 11.1H9.00001C8.50295 11.1 8.10001 11.5029 8.10001 12C8.10001 12.497 8.50295 12.9 9.00001 12.9H18.8272L16.3636 15.3636C16.0121 15.7151 16.0121 16.2849 16.3636 16.6364C16.7151 16.9879 17.2849 16.9879 17.6364 16.6364L21.6364 12.6364C21.9879 12.2849 21.9879 11.7151 21.6364 11.3636L17.6364 7.3636Z">'),cd=e=>{let t=Zs(),n=()=>e.fill||t.colors.icon.primary;return(()=>{var e=fd(),t=e.firstChild,r=t.nextSibling;return Aa((e=>{var o=n(),i=n();return o!==e.e&&Ss(t,"fill",e.e=o),i!==e.t&&Ss(r,"fill",e.t=i),e}),{e:void 0,t:void 0}),e})()};function ld(e){return ua(this,null,(function*(){try{if(!navigator?.clipboard)throw new pa("Clipboard API not available");return yield navigator.clipboard.writeText(e)}catch{}!function(e){let t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}finally{document.body.removeChild(t)}}(e)}))}var dd={m:"8px",s:"4px",none:"0"},ud={m:"16px",s:"8px",none:"0"},hd=ef.div`
    width: 256px;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.16);
    border-radius: ${e=>ud[e.theme.borderRadius]};

    background-color: ${e=>e.theme.colors.background.primary}
           
    color: ${e=>e.theme.colors.text.primary}
`,pd=ef.ul`
    background-color: ${e=>e.theme.colors.background.primary};
    padding: 8px;
`,gd=ef.button`
    display: flex;
    align-items: center;
    gap: 8px;
    height: 40px;
    padding-left: 8px;
    width: 100%;

    background-color: ${e=>e.theme.colors.background.primary};
    border: none;
    border-radius: ${e=>dd[e.theme.borderRadius]};
    cursor: pointer;

    transition: background-color, transform 0.1s ease-in-out;

    &:hover {
        background-color: ${e=>e.theme.colors.background.secondary};
    }

    &:active {
        transform: scale(0.96);
    }
`,bd=Xa(),yd=xs("<li>"),vd=e=>is(Hl,{get translationKey(){return e.translationKey},fontSize:"15px",fontWeight:"590",get children(){return e.children}}),md=ef(mc)`
    background-color: ${e=>e.theme.colors.connectButton.background};
    color: ${e=>e.theme.colors.connectButton.foreground};
    box-shadow: ${e=>`0 4px 24px ${sf(e.theme.colors.constant.black,.16)}`};
    padding: 8px 16px 8px 12px;

    display: flex;
    align-items: center;
    gap: 4px;
    height: 40px;
`,Cd=ef(md)`
    padding: 12px 16px;
    min-width: 148px;
    justify-content: center;
    background-color: ${e=>e.theme.colors.background.primary};
`,Od=ef(mc)`
    min-width: 148px;
    height: 40px;

    background-color: ${e=>e.theme.colors.background.primary};
    color: ${e=>e.theme.colors.connectButton.foreground};
    box-shadow: ${e=>`0 4px 24px ${sf(e.theme.colors.constant.black,.16)}`};

    display: flex;
    align-items: center;
    justify-content: center;
`,wd=ef(Xc)`
    height: 18px;
    width: 18px;
`,Ed=ef.div`
    width: fit-content;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
`,_d=ef((e=>{let t=$a(bd),[n,r]=Pa(!1);return is(hd,{ref(t){var n=e.ref;"function"==typeof n?n(t):e.ref=t},get class(){return e.class},"data-tc-dropdown":"true",get children(){return is(pd,{get children(){return[(()=>{var e=yd();return ks(e,is(gd,{onClick:()=>ua(void 0,null,(function*(){let e=(0,Wi.toUserFriendlyAddress)(t.account.address);yield ld(e),r(!0),setTimeout((()=>r(!1)),1e3)})),get children(){return[is(sd,{}),is(hs,{get when(){return!n()},get children(){return is(vd,{translationKey:"button.dropdown.copy",children:"Copy address"})}}),is(hs,{get when(){return n()},get children(){return is(vd,{translationKey:"button.dropdown.copied",children:"Address copied!"})}})]}})),e})(),(()=>{var n=yd();return ks(n,is(gd,{onClick:()=>(t.disconnect(),void e.onClose()),get children(){return[is(cd,{}),is(vd,{translationKey:"button.dropdown.disconnect",children:"Disconnect"})]}})),n})()]}})}})}))`
    box-sizing: border-box;
    overflow: hidden;
    margin-top: 12px;
`,xd=Math.min,Sd=Math.max,Rd=Math.round,Nd=Math.floor,Td=e=>({x:e,y:e});function kd(e){return e.split("-")[0]}function Dd(e){return["top","bottom"].includes(kd(e))?"y":"x"}function Pd(e){let{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function Ad(e,t,n){let r,{reference:o,floating:i}=e,a=Dd(t),s=function(e){return function(e){return"x"===e?"y":"x"}(Dd(e))}(t),f=function(e){return"y"===e?"height":"width"}(s),c=kd(t),l="y"===a,d=o.x+o.width/2-i.width/2,u=o.y+o.height/2-i.height/2,h=o[f]/2-i[f]/2;switch(c){case"top":r={x:d,y:o.y-i.height};break;case"bottom":r={x:d,y:o.y+o.height};break;case"right":r={x:o.x+o.width,y:u};break;case"left":r={x:o.x-i.width,y:u};break;default:r={x:o.x,y:o.y}}switch(function(e){return e.split("-")[1]}(t)){case"start":r[s]-=h*(n&&l?-1:1);break;case"end":r[s]+=h*(n&&l?-1:1)}return r}function Id(){return typeof window<"u"}function Kd(e){return Ud(e)?(e.nodeName||"").toLowerCase():"#document"}function Md(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function jd(e){var t;return null==(t=(Ud(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Ud(e){return!!Id()&&(e instanceof Node||e instanceof Md(e).Node)}function Ld(e){return!!Id()&&(e instanceof Element||e instanceof Md(e).Element)}function Wd(e){return!!Id()&&(e instanceof HTMLElement||e instanceof Md(e).HTMLElement)}function Bd(e){return!(!Id()||typeof ShadowRoot>"u")&&(e instanceof ShadowRoot||e instanceof Md(e).ShadowRoot)}function Xd(e){let{overflow:t,overflowX:n,overflowY:r,display:o}=Vd(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function $d(e){return["table","td","th"].includes(Kd(e))}function Hd(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch{return!1}}))}function qd(e){let t=Fd(),n=Ld(e)?Vd(e):e;return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function Fd(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Jd(e){return["html","body","#document"].includes(Kd(e))}function Vd(e){return Md(e).getComputedStyle(e)}function Gd(e){return Ld(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function zd(e){if("html"===Kd(e))return e;let t=e.assignedSlot||e.parentNode||Bd(e)&&e.host||jd(e);return Bd(t)?t.host:t}function Yd(e){let t=zd(e);return Jd(t)?e.ownerDocument?e.ownerDocument.body:e.body:Wd(t)&&Xd(t)?t:Yd(t)}function Zd(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);let o=Yd(e),i=o===(null==(r=e.ownerDocument)?void 0:r.body),a=Md(o);if(i){let e=Qd(a);return t.concat(a,a.visualViewport||[],Xd(o)?o:[],e&&n?Zd(e):[])}return t.concat(o,Zd(o,[],n))}function Qd(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function eu(e){let t=Vd(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,o=Wd(e),i=o?e.offsetWidth:n,a=o?e.offsetHeight:r,s=Rd(n)!==i||Rd(r)!==a;return s&&(n=i,r=a),{width:n,height:r,$:s}}function tu(e){return Ld(e)?e:e.contextElement}function nu(e){let t=tu(e);if(!Wd(t))return Td(1);let n=t.getBoundingClientRect(),{width:r,height:o,$:i}=eu(t),a=(i?Rd(n.width):n.width)/r,s=(i?Rd(n.height):n.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}var ru=Td(0);function ou(e){let t=Md(e);return Fd()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ru}function iu(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);let o=e.getBoundingClientRect(),i=tu(e),a=Td(1);t&&(r?Ld(r)&&(a=nu(r)):a=nu(e));let s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Md(e))&&t}(i,n,r)?ou(i):Td(0),f=(o.left+s.x)/a.x,c=(o.top+s.y)/a.y,l=o.width/a.x,d=o.height/a.y;if(i){let e=Md(i),t=r&&Ld(r)?Md(r):r,n=e,o=Qd(n);for(;o&&r&&t!==n;){let e=nu(o),t=o.getBoundingClientRect(),r=Vd(o),i=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;f*=e.x,c*=e.y,l*=e.x,d*=e.y,f+=i,c+=a,n=Md(o),o=Qd(n)}}return Pd({width:l,height:d,x:f,y:c})}function au(e,t){let n=Gd(e).scrollLeft;return t?t.left+n:iu(jd(e)).left+n}function su(e,t,n){let r;if("viewport"===t)r=function(e,t){let n=Md(e),r=jd(e),o=n.visualViewport,i=r.clientWidth,a=r.clientHeight,s=0,f=0;if(o){i=o.width,a=o.height;let e=Fd();(!e||e&&"fixed"===t)&&(s=o.offsetLeft,f=o.offsetTop)}return{width:i,height:a,x:s,y:f}}(e,n);else if("document"===t)r=function(e){let t=jd(e),n=Gd(e),r=e.ownerDocument.body,o=Sd(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Sd(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),a=-n.scrollLeft+au(e),s=-n.scrollTop;return"rtl"===Vd(r).direction&&(a+=Sd(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:a,y:s}}(jd(e));else if(Ld(t))r=function(e,t){let n=iu(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=Wd(e)?nu(e):Td(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:o*i.x,y:r*i.y}}(t,n);else{let n=ou(e);r=ca(fa({},t),{x:t.x-n.x,y:t.y-n.y})}return Pd(r)}function fu(e,t){let n=zd(e);return!(n===t||!Ld(n)||Jd(n))&&("fixed"===Vd(n).position||fu(n,t))}function cu(e,t){let n=t.get(e);if(n)return n;let r=Zd(e,[],!1).filter((e=>Ld(e)&&"body"!==Kd(e))),o=null,i="fixed"===Vd(e).position,a=i?zd(e):e;for(;Ld(a)&&!Jd(a);){let t=Vd(a),n=qd(a);!n&&"fixed"===t.position&&(o=null),(i?!n&&!o:!n&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||Xd(a)&&!n&&fu(e,a))?r=r.filter((e=>e!==a)):o=t,a=zd(a)}return t.set(e,r),r}function lu(e,t,n){let r=Wd(t),o=jd(t),i="fixed"===n,a=iu(e,!0,i,t),s={scrollLeft:0,scrollTop:0},f=Td(0);if(r||!r&&!i)if(("body"!==Kd(t)||Xd(o))&&(s=Gd(t)),r){let e=iu(t,!0,i,t);f.x=e.x+t.clientLeft,f.y=e.y+t.clientTop}else o&&(f.x=au(o));let c=0,l=0;if(o&&!r&&!i){let e=o.getBoundingClientRect();l=e.top+s.scrollTop,c=e.left+s.scrollLeft-au(o,e)}return{x:a.left+s.scrollLeft-f.x-c,y:a.top+s.scrollTop-f.y-l,width:a.width,height:a.height}}function du(e){return"static"===Vd(e).position}function uu(e,t){if(!Wd(e)||"fixed"===Vd(e).position)return null;if(t)return t(e);let n=e.offsetParent;return jd(e)===n&&(n=n.ownerDocument.body),n}function hu(e,t){let n=Md(e);if(Hd(e))return n;if(!Wd(e)){let t=zd(e);for(;t&&!Jd(t);){if(Ld(t)&&!du(t))return t;t=zd(t)}return n}let r=uu(e,t);for(;r&&$d(r)&&du(r);)r=uu(r,t);return r&&Jd(r)&&du(r)&&!qd(r)?n:r||function(e){let t=zd(e);for(;Wd(t)&&!Jd(t);){if(qd(t))return t;if(Hd(t))return null;t=zd(t)}return null}(e)||n}var pu={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e,i="fixed"===o,a=jd(r),s=!!t&&Hd(t.floating);if(r===a||s&&i)return n;let f={scrollLeft:0,scrollTop:0},c=Td(1),l=Td(0),d=Wd(r);if((d||!d&&!i)&&(("body"!==Kd(r)||Xd(a))&&(f=Gd(r)),Wd(r))){let e=iu(r);c=nu(r),l.x=e.x+r.clientLeft,l.y=e.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-f.scrollLeft*c.x+l.x,y:n.y*c.y-f.scrollTop*c.y+l.y}},getDocumentElement:jd,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e,i=[..."clippingAncestors"===n?Hd(t)?[]:cu(t,this._c):[].concat(n),r],a=i[0],s=i.reduce(((e,n)=>{let r=su(t,n,o);return e.top=Sd(r.top,e.top),e.right=xd(r.right,e.right),e.bottom=xd(r.bottom,e.bottom),e.left=Sd(r.left,e.left),e}),su(t,a,o));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:hu,getElementRects:function(e){return ua(this,null,(function*(){let t=this.getOffsetParent||hu,n=this.getDimensions,r=yield n(e.floating);return{reference:lu(e.reference,yield t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}}))},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:n}=eu(e);return{width:t,height:n}},getScale:nu,isElement:Ld,isRTL:function(e){return"rtl"===Vd(e).direction}};function gu(e,t,n,r){void 0===r&&(r={});let{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:f=!1}=r,c=tu(e),l=o||i?[...c?Zd(c):[],...Zd(t)]:[];l.forEach((e=>{o&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)}));let d=c&&s?function(e,t){let n,r=null,o=jd(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(s,f){void 0===s&&(s=!1),void 0===f&&(f=1),i();let{left:c,top:l,width:d,height:u}=e.getBoundingClientRect();if(s||t(),!d||!u)return;let h={rootMargin:-Nd(l)+"px "+-Nd(o.clientWidth-(c+d))+"px "+-Nd(o.clientHeight-(l+u))+"px "+-Nd(c)+"px",threshold:Sd(0,xd(1,f))||1},p=!0;function g(e){let t=e[0].intersectionRatio;if(t!==f){if(!p)return a();t?a(!1,t):n=setTimeout((()=>{a(!1,1e-7)}),1e3)}p=!1}try{r=new IntersectionObserver(g,ca(fa({},h),{root:o.ownerDocument}))}catch{r=new IntersectionObserver(g,h)}r.observe(e)}(!0),i}(c,n):null,u=-1,h=null;a&&(h=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(u),u=requestAnimationFrame((()=>{var e;null==(e=h)||e.observe(t)}))),n()})),c&&!f&&h.observe(c),h.observe(t));let p,g=f?iu(e):null;return f&&function t(){let r=iu(e);g&&(r.x!==g.x||r.y!==g.y||r.width!==g.width||r.height!==g.height)&&n(),g=r,p=requestAnimationFrame(t)}(),n(),()=>{var e;l.forEach((e=>{o&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)})),d?.(),null==(e=h)||e.disconnect(),h=null,f&&cancelAnimationFrame(p)}}var bu=(e,t,n)=>{let r=new Map,o=fa({platform:pu},n),i=ca(fa({},o.platform),{_c:r});return((e,t,n)=>ua(void 0,null,(function*(){let{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:a}=n,s=i.filter(Boolean),f=yield null==a.isRTL?void 0:a.isRTL(t),c=yield a.getElementRects({reference:e,floating:t,strategy:o}),{x:l,y:d}=Ad(c,r,f),u=r,h={},p=0;for(let n=0;n<s.length;n++){let{name:i,fn:g}=s[n],{x:b,y:y,data:v,reset:m}=yield g({x:l,y:d,initialPlacement:r,placement:u,strategy:o,middlewareData:h,rects:c,platform:a,elements:{reference:e,floating:t}});l=b??l,d=y??d,h=ca(fa({},h),{[i]:fa(fa({},h[i]),v)}),m&&p<=50&&(p++,"object"==typeof m&&(m.placement&&(u=m.placement),m.rects&&(c=!0===m.rects?yield a.getElementRects({reference:e,floating:t,strategy:o}):m.rects),({x:l,y:d}=Ad(c,u,f))),n=-1)}return{x:l,y:d,placement:u,strategy:o,middlewareData:h}})))(e,t,ca(fa({},o),{platform:i}))};var yu=Xa(),vu=Xa(),mu=xs("<okxc-root data-tc-dropdown-container=true>",!0,!1),Cu=()=>{let e,t=Zs(),n=$a(yu),r=$a(bd),[o,i]=Pa(!1),[a,s]=Pa(n.account),[f,c]=Pa(!n.account),[l,d]=Pa(),[u,h]=Pa(),p=function(e,t,n){let r=()=>{var e;return null!=(e=n?.placement)?e:"bottom"},o=()=>{var e;return null!=(e=n?.strategy)?e:"absolute"},[i,a]=Pa({x:null,y:null,placement:r(),strategy:o(),middlewareData:{}}),[s,f]=Pa();Ia((()=>{let e=s();if(e)throw e.value}));let c=Ka((()=>(e(),t(),{})));function l(){let i=e(),s=t();if(i&&s){let e=c();bu(i,s,{middleware:n?.middleware,placement:r(),strategy:o()}).then((t=>{e===c()&&a(t)}),(e=>{f(e)}))}}return Ia((()=>{let i=e(),a=t();if(r(),o(),i&&a)if(null!=n&&n.whileElementsMounted){let e=n.whileElementsMounted(i,a,l);e&&La(e)}else l()})),{get x(){return i().x},get y(){return i().y},get placement(){return i().placement},get strategy(){return i().strategy},get middlewareData(){return i().middlewareData},update:l}}(u,l,{whileElementsMounted:gu,placement:"bottom-end"});r.connectionRestored.then((()=>c(!1)));let g=n.onStatusChange((e=>{if(!e)return i(!1),s(null),void c(!1);s(e.account),c(!1)})),b=t=>{if(!a()||!o())return;let n=u().contains(t.target),r=e.contains(t.target);!n&&!r&&i(!1)};return Ua((()=>{document.body.addEventListener("click",b)})),La((()=>{document.body.removeEventListener("click",b),g()})),is(Ws,{component:nf,get children(){return[is(hs,{get when(){return f()},get children(){return is(Od,{disabled:!0,"data-tc-connect-button-loading":"true",get children(){return is(wd,{})}})}}),is(hs,{get when(){return!f()},get children(){return[is(hs,{get when(){return!a()},get children(){return is(md,{onClick:()=>r.openModal(),"data-tc-connect-button":"true",scale:"s",get children(){return[is(kc,{get fill(){return t.colors.connectButton.foreground}}),is(Hl,{translationKey:"button.connectWallet",fontSize:"15px",lineHeight:"18px",fontWeight:"590",get color(){return t.colors.connectButton.foreground},children:"Connect wallet"})]}})}}),is(hs,{get when(){return a()},get children(){return is(Ed,{get children(){return[is(Cd,{onClick:()=>i((e=>!e)),ref:h,"data-tc-dropdown-button":"true",scale:"s",get children(){return[is(Hl,{fontSize:"15px",fontWeight:"590",lineHeight:"18px",get children(){return(()=>{let e=a();if(e){let t=(0,Wi.toUserFriendlyAddress)(e.address);return t.slice(0,4)+"\u2026"+t.slice(-4)}return""})()}}),is(Sc,{direction:"bottom"})]}}),is(Ls,{get children(){var t=mu();return Ts(d,t),t.style.setProperty("z-index","999"),t._$owner=Ba(),ks(t,is(Oc,{onBeforeEnter:e=>{il(e,[{opacity:0,transform:"translateY(-8px)"},{opacity:1,transform:"translateY(0)"}],{duration:150})},onExit:(e,t)=>{il(e,[{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(-8px)"}],{duration:150}).finished.then(t)},get children(){return is(hs,{get when(){return o()},get children(){return is(_d,{get hidden(){return!o()},onClose:()=>i(!1),ref(t){"function"==typeof e?e(t):e=t}})}})}})),Aa((e=>{var n,r,o=p.strategy,i=`${null!=(n=p.y)?n:0}px`,a=`${null!=(r=p.x)?r:0}px`;return o!==e.e&&(null!=(e.e=o)?t.style.setProperty("position",o):t.style.removeProperty("position")),i!==e.t&&(null!=(e.t=i)?t.style.setProperty("top",i):t.style.removeProperty("top")),a!==e.a&&(null!=(e.a=a)?t.style.setProperty("left",a):t.style.removeProperty("left")),e}),{e:void 0,t:void 0,a:void 0}),t}})]}})}})]}})]}})},[Ou,wu]=Ul({buttonRootId:null,language:"en_US",returnStrategy:"none"}),Eu=ef(ll)`
  padding-left: 0;
  padding-right: 0;
  padding-top: 0;

  ${Ef("mobile")} {
    padding-left: 0;
    padding-right: 0;
    min-height: 364px;
  }
`,_u=ef(Yl)`
  padding: 12px 64px;
`,xu=ef.div``,Su=ef.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 325px;
  gap: 24px;
`,Ru=ef(zc)`
  position: absolute;
  top: 12px;
  left: 16px;
`,Nu=ef((e=>{let[t]=Xl();return is(Zl,{get class(){return e.class},"data-tc-h2":"true",get children(){var n;return Ka((()=>!!e.translationKey))()?t(e.translationKey,e.translationValues,null==(n=e.children)?void 0:n.toString()):e.children}})}))`
  margin-bottom: 0;
  padding: 16px 24px 24px 24px;
  min-height: 44px;
`,Tu=ef.div`
  margin-top: 24px;
  margin-left: 24px;
  margin-right: 24px;
`,ku=ef.div`
  display: flex;
  justify-content: center;
  align-items: center;
`;function Du(e,t){let n;n="string"==typeof t?t:t.returnStrategy;let r=function(e,t,n){let r=new URL(e);return r.searchParams.append(t,n),r.toString()}(e,"ret",n);if(!(0,Li.isTelegramUrl)(e))return r;let o=r.slice(r.lastIndexOf("&")+1);return r.slice(0,r.lastIndexOf("&"))+"-"+(0,Li.encodeTelegramUrlParameters)(o)}function Pu(e,t){zf("android")?Wf(t,(()=>{})):Lf(e)}var Au="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAleSURBVHgB7V27chNJFG3LPGweLhkDZV7l2S9Yk5FhZ2TY4UaGbDPwFxhHSwZkZLa/wHZGJpGx0Wq/YIcqMK7iJYN5G7TnNH1Fe/TW9IzGUp+qUc+MJXl0T/e5/bw9pDKKIAjye3t705VKZRqXU0gD3saRHxoayuM6b78f98q4V0YaSorbT5GWDh06VArDsKwyiCGVEdDg3759m8PpVRhwRv00tkuUSAbSx4cPHy6CkFBlAD0lwBj9Bk6vG6NXgWv1/ft3hb/r48ePHzrlfZ7zsJHL5fQxPDxcTXnA2OrIkSM1/xtkFJGs9ZqMnhBw8eLFGRhyyTY6DUsDf/78WX358kWfu8TRo0c1GSMjI/UI2cCxtrW1taFSRmoESG6HoW8pIy9i9A8fPmijR3N1UmAJISGjo6OaEAshSsby8+fPV1VKSIUA5PhbMPYdcZyUlo8fP2rDp2X0RqBMkYyTJ0/qc4PUiEiUAEoNDLyiTI7/+vWrev/+vc7tWcSxY8dSJyIRAiA3AYx9D6es1egcXy6XM2v4KKJEgIRV+I/lJJz1sHKMCxcuLCDX05mxDq92d3fVmzdvNAkHBeKX+PzGYU/j+efGxsZ2UIJLyiGcEUAne/z48b/w0HdxOUK5ef36ta7VHFTwN3z69Ek7bZQA+i+SkJ+YmPgbJdrJD3MiQUZyCjxlrnn37p3OQf2EEydOaFmCHPEyRMmYdSFJsQmA5LCroMAaDmXm1atXB0puOgF9wunTp8U30EHPw0HHkqRYEkS9h+Ef4XSEUkOt73W1MkmwdFOS0LfEg5L0JyQphF/4V3WJrgkwdfuHPGfVcmdnRz9gv0NIINh+AOYgTzuobDxRXaArAmh85PT7PKfxeQwa6KAJkgAputYtCR0TYGSnmvMH0fiCKAndyFFHTpgOF8b/h+eDbnwbrB3xIEDE5U4cc67dN7KqCeOv89wbfz9se8BGBdqq3c+2RQAbWVLPZ23HG78WtIlpdGpb0WbtfK4tAtA0X0ISSJ+OR33QNqYNFBibtURLJwzdZx/+XVa/Xr582df1/LigjVgK0CXDyyvtOOWmJcDovmaS3QvttnDX19f1w8Q5+B2ukObz0EaWP7jfyh80rQUh96/gS25w8KQT6XHVIDP9LrHRi+dhl4XpSd3AUOd8o/c1LAFGenh4p9sF3r59K8TPcWCq0fsaEtCN9Hj8Am3GsRDCjArWRV0CmPuVqfX0W7dymqBySK3o3Llzt+u9py4Bkvu99MSH+E74j6V6bYMaAuzcT+frEQ8cBzd9Rnmc34j+vYYAn/vdQ2yJUnAr+rd9BFy6dImzGHzudwyWAvEF0RrRPgKQ+xeY+tzvHpKhRWEEVQLYYkN1Sc/jOSjzdw4SZJoL58PazrhKADqPZpiyL8PX+91DZncTtjO2JUjLj9f+5CBtqlwud13uaQJMp9sMz2WYzcM9KO1RGdIEiPzQ+L67OTnYMmRWA1Ul6CpfZLqFR3KQqZooBdrmQgBnt6m9vT3lkSwsiZ/hS45aZFYiOqt+bmzEX+nj4jtcfper5yEBpps60H6ALbPz589XMIDAu5k6VlY4HhQPhUIhc7/r7NmzFdqcth9C59ttPOc9VpE4vTBLyNrImivk83m9CAS/b5E+IOBNr//pQWyN9kCQQ+6Y4oVv/aYHqeqjBAS5ilm56Kq4e7SGpTZTJCCI3PRIGJba5ClBvgSkDMvW+aoE+S6I9GDZOt/27GiPZOAJ6DE8AT0GnbCeuMLFyB7pwLJ1mU5YE5C15no/w7J12ZeAHoDrjAnGtcuZ4HY6mpRHOpDMDvXZoQQ95YWXoPRghcEJSUXIC18C0oMQgAaZliC9pjWLBKytram4KBaLKmsQW4OIkl6CytGZyclJZyM+6+vrlbjgd/Tr89DePGh7Lfy4+A9JwFWQLsJFVvwasYZgWIOJiQmelra2ti5L3fMxX+oFOPVwC0vqtfRrAkwUWR1H0yNZSJxS2Fxnek0AWNFzLthA8A2y5EDbispgUKao7/GFkcVZCuw3eLiHCfCkFWd7ezvkuZ3dN/nC4HQeyYBTUQyq9esqAZChVaZehpIB7SolQOSHqFraliETbMLDISxp3xT5IfZldcZJZmoVFQ9HkIhawKp9fx8Bz549KyIJJaK4hxswQ0us0egeBTVij1LwgKnFmEdMWPHklqN/qyGAzpiDNNQsXwriw8799cLg1xBgdhvSTHEWr0c8NMv9+n6jD0oHXTcREn1n3E+wTTU2NsZTav9v9d7TsMKP6uhNpqySyhimR/ugzVrlfqIhAaZGtMF2gZeizmGFul9ttgVK0yYvhswWxSF30jgb9DVilB7TsxzChsvN3ttS1EzsuBVOKOXeAH4ae3NQes6cOaNzP46brTYAahk3lHumwJGM48uusC+ba4krfip7XVCuGS2RKdtTMP7dlp9RbQBtgzvKtJC9P2gM2kbq/MZmLdEWAWwbQIJm6Q9YCnwruRa0iRntou7Ptrt7a9v9zqYHb1b+mSfhFyLh6+ft3s5W6GgDB/iDbfgDzqSbk26KQY+uEjE+ne6jTj7f8Q4axilzRfe1QSfBNj4qJoto7T5UHaKrPWRAwpNBJyFq/BcvXtxXXaDrXZQMCVU54nwXCUjUz2AVc3x8vNowpex0k/MFTjZyq/zc2kSHu+T2hf3aWGMji7PaWNU06ypm427k5qS7cXJyMkDOKOCUkRd172m/b2XIqmYntZ1GcLKZ5+7ubhk5Yw0PNSotZuYWloSDvv6Yv+PUqVN6YMV0LzxA39gf6KzcVg7gfFWG6TtaUn1QGpjjmfON4Sk5i643d3a+nzCrqXBQm3hg9h9NszSY2DhOZl6nAVYq2KfDZzeSs4HMNI+aTlE5RqLrkuzSwGvZXyWrsUllb3lrDk/IgSkzNpIIUlkY1ogIth16XWOSiWjW4LmWG/bjd1u37wSprsyLEkEwjCNLRJoxS2USMvWd7RdrrJd7BD/gzJB2O9PioidLIxkmH6VgAadz9n2SQELoK1wHEKehKTHU9YjR9WxljtsmKTWN0NO1qWw/oNjP4HShYkIn2yAhJIOSRamiI+c5S0q0tDBXm4EQbWCzD7xsvlwzo8EsStlMM7fXQ2YWBwsZJALG+b1iYpk6RGiM/pgLUnppdBuZXZ3NFYTI9dOGCAYXn2J0L6SBSfcNzdFx4l7ZpDQ2+6mYllACSlkxeBT/A6Mt6rTZ7SrDAAAAAElFTkSuQmCC",Iu=xs('<svg><path fill-rule=evenodd clip-rule=evenodd d="M96 51C96 75.8528 75.8528 96 51 96C26.1472 96 6 75.8528 6 51C6 26.1472 26.1472 6 51 6C75.8528 6 96 26.1472 96 51ZM102 51C102 79.1665 79.1665 102 51 102C22.8335 102 0 79.1665 0 51C0 22.8335 22.8335 0 51 0C79.1665 0 102 22.8335 102 51Z"fill-opacity=0.2></svg>',!1,!0),Ku=xs('<svg><path fill-rule=evenodd clip-rule=evenodd d="M6 51H0C0 79.1665 22.8335 102 51 102V96C26.1472 96 6 75.8528 6 51Z"></svg>',!1,!0),Mu=e=>is(Uu,{get children(){return[is(Lu,{}),is(Wu,{src:Au})]}}),ju=e=>is(Uu,{get children(){return is(Wu,{src:Au})}}),Uu=ef.div`
  position: relative;
  height: 102px;
  width: 102px;
`,Lu=ef((e=>{let t=Zs(),n=Gs`
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    `;return is(ef.svg`
    animation: ${n} 2s linear infinite;
    transform-origin: center;
  `,{xmlns:"http://www.w3.org/2000/svg",width:"102",height:"102",viewBox:"0 0 102 102",fill:"none",get children(){return[(()=>{var e=Iu();return Aa((()=>Ss(e,"fill",t.colors.text.primary))),e})(),(()=>{var e=Ku();return Aa((()=>Ss(e,"fill",t.colors.text.primary))),e})()]}})}))`
  height: 102px;
  width: 102px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
`,Wu=ef(pc)`
  position: absolute;
  width: 86px;
  height: 86px;
  border-radius: 44px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
`,Bu=e=>[is(_u,{translationKey:"walletModal.mobileConnectionModal.OKXConnect"}),is(Tu,{get children(){return[is(hs,{get when(){return null===e.universalLink},get children(){return is(ku,{get children(){return is(Mu,{})}})}}),is(hs,{get when(){return null!==e.universalLink},get children(){return is(El,{imageUrl:Au,get sourceUrl(){return Du(e.universalLink,"none")},disableCopy:!0})}})]}}),is(Nu,{translationKey:"walletModal.mobileConnectionModal.scanQR",get translationValues(){return{name:e.walletInfo.name}},get children(){return["Scan the QR code below with your phone\u2019s or ",Ka((()=>e.walletInfo.name)),"\u2019s camera"]}})];ef(Yl)`
  padding: 12px 64px;
`;var Xu=ef(Yl)`
  max-width: 262px;
`,$u=ef(Xu)`
  font-size: 14px;
  color: ${e=>e.theme.colors.text.primary};
`,Hu=ef(mc)`
  background-color: transparent;
  color: ${e=>e.theme.colors.text.primary};
  padding: 0px;
`,qu=ef.div`
  margin: 30px 0;
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 16px;

  ${Ef("mobile")} {
    height: 160px;
    align-items: center;
  }
`,Fu=ef(Uc)`
  margin-bottom: 16px;
`,Ju=ef.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 12px;
`,Vu=ef.div`
  background-color: ${e=>e.theme.colors.text.primary};
  height: 48px;
  width: 262px;
  justify-content: center;
  border-radius: 24px;
  display: flex;
  align-items: center;
  gap: 8px;
`,Gu=ef(Hl)`
  max-width: 262px;
  font-weight: 400;
  font-size: 16px;
  line-height: 20px;
  text-align: center;
  margin-top: 10px;
  color: ${e=>e.theme.colors.text.contrast};
`,zu=ef(mc)`
  height: 48px;
  width: 262px;
  border-radius: 999px;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 12px 24px;
`,Yu=ef(zu)`
  background-color: ${e=>e.theme.colors.text.primary};
`;ef(zu)`
  background-color: transparent;
  border-color: ${e=>e.theme.colors.border.secondary};
  border-width: 0.5px;
  border-style: solid;
`;var Zu=ef(Xu)`
  font-size: 14px;
  color: ${e=>e.theme.colors.background.primary};
`;ef(Xu)`
  font-size: 14px;
  color: ${e=>e.theme.colors.text.primary};
`;var Qu=ef.div`
  padding: 16px;
  display: flex;
  align-items: center;
  gap: 12px;
  border-top: 0.5px solid
    ${e=>sf(e.theme.colors.icon.secondary,.2)};
  margin-top: 32px;
`,eh=ef(pc)`
  width: 32px;
  height: 32px;
  border-radius: 16px;
`,th=ef((e=>is(id,ls({get href(){return e.href},get target(){return e.blank?"_blank":"_self"},get class(){return e.class}},(()=>e.blank?{rel:"noreferrer noopener"}:{}),{get children(){return e.children}}))))`
  margin-left: auto;
  display: flex;
`,nh=ef.div`
  display: flex;
  gap: 8px;
  align-items: center;
  justify-content: center;
`,rh=e=>[is(Ju,{get children(){return[is(ju,{}),is(Gu,{translationKey:"walletModal.mobileConnectionModal.appAndTelegram.text",children:"OKX Wallet supports OKX app and Telegram Mini Apps"})]}}),is(Ju,{get children(){return[is(Yu,{get onClick(){return e.onConnectApp},get children(){return is(Zu,{translationKey:"walletModal.mobileConnectionModal.connectApp",children:"Connect to OKX app"})}}),is(Yu,{get onClick(){return e.onConnectMini},get children(){return is(Zu,{translationKey:"walletModal.mobileConnectionModal.connectMini",children:"Connect to Mini Apps"})}})]}})],oh=e=>is(qu,{get children(){return[is(Mu,{}),is(hs,{get when(){return e.loadingTextTranslationKey||e.loadingTextTranslationKey},get children(){return is(Xu,{get translationKey(){return e.loadingTextTranslationKey},get children(){return e.loadingText}})}})]}}),ih=e=>{let[t]=Xl();return Ka((()=>{var n;return t(e.translationKey,e.translationValues,null==(n=e.children)?void 0:n.toString())}))},ah=xs('<svg width=40 height=12 viewBox="0 0 40 12"fill=none xmlns=http://www.w3.org/2000/svg><g clip-path=url(#clip0_4356_43883)><path d="M11.7336 0H0.269322C0.198282 0 0.130151 0.0282212 0.0799182 0.0784542C0.0296852 0.128687 0.00146484 0.196817 0.00146484 0.267857V11.7321C0.00146484 11.8032 0.0296852 11.8713 0.0799182 11.9215C0.130151 11.9718 0.198282 12 0.269322 12H11.7336C11.8046 12 11.8728 11.9718 11.923 11.9215C11.9732 11.8713 12.0015 11.8032 12.0015 11.7321V0.267857C12.0015 0.196817 11.9732 0.128687 11.923 0.0784542C11.8728 0.0282212 11.8046 0 11.7336 0ZM8.00129 7.73303C8.00129 7.80407 7.97307 7.87221 7.92283 7.92244C7.8726 7.97267 7.80447 8.00089 7.73343 8.00089H4.26736C4.19632 8.00089 4.12819 7.97267 4.07795 7.92244C4.02772 7.87221 3.9995 7.80407 3.9995 7.73303V4.26643C3.9995 4.19539 4.02772 4.12726 4.07795 4.07702C4.12819 4.02679 4.19632 3.99857 4.26736 3.99857H7.73343C7.80447 3.99857 7.8726 4.02679 7.92283 4.07702C7.97307 4.12726 8.00129 4.19539 8.00129 4.26643V7.73303Z"></path><path d="M35.7391 4.00018H32.2725C32.2015 4.00018 32.1333 4.0284 32.0831 4.07864C32.0329 4.12887 32.0046 4.197 32.0046 4.26804V7.73465C32.0046 7.80569 32.0329 7.87382 32.0831 7.92405C32.1333 7.97428 32.2015 8.0025 32.2725 8.0025H35.7391C35.8101 8.0025 35.8783 7.97428 35.9285 7.92405C35.9787 7.87382 36.007 7.80569 36.007 7.73465V4.26697C36.0067 4.19611 35.9783 4.12826 35.9281 4.07826C35.8779 4.02825 35.81 4.00018 35.7391 4.00018Z"></path><path d="M31.7379 0H28.2713C28.2002 0 28.1321 0.0282212 28.0819 0.0784542C28.0316 0.128687 28.0034 0.196817 28.0034 0.267857V3.73446C28.0034 3.8055 28.0316 3.87364 28.0819 3.92387C28.1321 3.9741 28.2002 4.00232 28.2713 4.00232H31.7379C31.8089 4.00232 31.8771 3.9741 31.9273 3.92387C31.9775 3.87364 32.0057 3.8055 32.0057 3.73446V0.267857C32.0057 0.196817 31.9775 0.128687 31.9273 0.0784542C31.8771 0.0282212 31.8089 0 31.7379 0Z"></path><path d="M39.7376 0H36.271C36.2 0 36.1319 0.0282212 36.0816 0.0784542C36.0314 0.128687 36.0032 0.196817 36.0032 0.267857V3.73446C36.0032 3.8055 36.0314 3.87364 36.0816 3.92387C36.1319 3.9741 36.2 4.00232 36.271 4.00232H39.7376C39.8087 4.00232 39.8768 3.9741 39.927 3.92387C39.9773 3.87364 40.0055 3.8055 40.0055 3.73446V0.267857C40.0055 0.232682 39.9986 0.19785 39.9851 0.165352C39.9716 0.132854 39.9519 0.103327 39.927 0.0784542C39.9022 0.0535813 39.8726 0.0338512 39.8401 0.0203901C39.8076 0.00692902 39.7728 0 39.7376 0Z"></path><path d="M31.7379 7.99982H28.2713C28.2002 7.99982 28.1321 8.02804 28.0819 8.07827C28.0316 8.1285 28.0034 8.19663 28.0034 8.26767V11.7321C28.0034 11.8032 28.0316 11.8713 28.0819 11.9215C28.1321 11.9718 28.2002 12 28.2713 12H31.7379C31.8089 12 31.8771 11.9718 31.9273 11.9215C31.9775 11.8713 32.0057 11.8032 32.0057 11.7321V8.2666C32.0055 8.19575 31.9771 8.12789 31.9269 8.07789C31.8767 8.02789 31.8087 7.99982 31.7379 7.99982Z"></path><path d="M39.7376 7.99982H36.271C36.2 7.99982 36.1319 8.02804 36.0816 8.07827C36.0314 8.1285 36.0032 8.19663 36.0032 8.26767V11.7321C36.0032 11.8032 36.0314 11.8713 36.0816 11.9215C36.1319 11.9718 36.2 12 36.271 12H39.7376C39.8087 12 39.8768 11.9718 39.927 11.9215C39.9773 11.8713 40.0055 11.8032 40.0055 11.7321V8.2666C40.0052 8.19575 39.9769 8.12789 39.9267 8.07789C39.8765 8.02789 39.8085 7.99982 39.7376 7.99982Z"></path><path d="M25.733 0H22.2664C22.1954 0 22.1272 0.0282212 22.077 0.0784542C22.0268 0.128687 21.9985 0.196817 21.9985 0.267857V3.73446C21.9985 3.8055 22.0268 3.87364 22.077 3.92387C22.1272 3.9741 22.1954 4.00232 22.2664 4.00232H25.733C25.804 4.00232 25.8722 3.9741 25.9224 3.92387C25.9726 3.87364 26.0009 3.8055 26.0009 3.73446V0.267857C26.0009 0.196817 25.9726 0.128687 25.9224 0.0784542C25.8722 0.0282212 25.804 0 25.733 0Z"></path><path d="M25.733 7.99982H22.2664C22.1954 7.99982 22.1272 8.02804 22.077 8.07827C22.0268 8.1285 21.9985 8.19663 21.9985 8.26767V11.7321C21.9985 11.8032 22.0268 11.8713 22.077 11.9215C22.1272 11.9718 22.1954 12 22.2664 12H25.733C25.804 12 25.8722 11.9718 25.9224 11.9215C25.9726 11.8713 26.0009 11.8032 26.0009 11.7321V8.2666C26.0006 8.19575 25.9722 8.12789 25.922 8.07789C25.8718 8.02789 25.8039 7.99982 25.733 7.99982Z"></path><path d="M21.9996 4.26375C21.9996 4.19271 21.9714 4.12458 21.9212 4.07435C21.8709 4.02411 21.8028 3.99589 21.7317 3.99589H17.9994V0.267857C17.9994 0.196817 17.9712 0.128687 17.921 0.0784542C17.8707 0.0282212 17.8026 0 17.7316 0H14.2687C14.1977 0 14.1295 0.0282212 14.0793 0.0784542C14.0291 0.128687 14.0009 0.196817 14.0009 0.267857V11.7273C14.0009 11.7984 14.0291 11.8665 14.0793 11.9167C14.1295 11.967 14.1977 11.9952 14.2687 11.9952H17.7353C17.8064 11.9952 17.8745 11.967 17.9247 11.9167C17.975 11.8665 18.0032 11.7984 18.0032 11.7273V7.99661H21.7366C21.8076 7.99661 21.8757 7.96839 21.926 7.91815C21.9762 7.86792 22.0044 7.79979 22.0044 7.72875L21.9996 4.26375Z"></path></g><defs><clipPath id=clip0_4356_43883><rect width=40.0039 height=12 fill=white>'),sh=e=>{let t=Zs(),n=()=>e.fill||t.colors.disable;return(()=>{var e=ah(),t=e.firstChild.firstChild,r=t.nextSibling,o=r.nextSibling,i=o.nextSibling,a=i.nextSibling,s=a.nextSibling,f=s.nextSibling,c=f.nextSibling,l=c.nextSibling;return Aa((e=>{var d=n(),u=n(),h=n(),p=n(),g=n(),b=n(),y=n(),v=n(),m=n();return d!==e.e&&Ss(t,"fill",e.e=d),u!==e.t&&Ss(r,"fill",e.t=u),h!==e.a&&Ss(o,"fill",e.a=h),p!==e.o&&Ss(i,"fill",e.o=p),g!==e.i&&Ss(a,"fill",e.i=g),b!==e.n&&Ss(s,"fill",e.n=b),y!==e.s&&Ss(f,"fill",e.s=y),v!==e.h&&Ss(c,"fill",e.h=v),m!==e.r&&Ss(l,"fill",e.r=m),e}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e})()},fh=e=>{let t=Zs();return[is(Qu,{get children(){return[is(eh,{src:Au}),is(ed,{get children(){return e.wallet.name}}),is(th,{get href(){return e.wallet.aboutUrl},blank:!0,get children(){return[is(Hl,{get color(){return t.colors.text.contrast},get children(){return is(ih,{translationKey:"common.get",children:"GET"})}}),is(Sc,{direction:"right"})]}})]}}),is(nh,{get children(){return[is(Hl,{get color(){return t.colors.disable},get children(){return is(ih,{translationKey:"walletModal.mobileConnectionModal.PoweredBy",children:"PoweredBy"})}}),is(sh,{})]}})]},ch=e=>is(Hu,{get leftIcon(){return is(Fc,{})},get onClick(){return e.onRetry},get children(){return is($u,{translationKey:"common.retry",children:"Retry"})}}),lh=e=>[is(Fu,{size:"s"}),is(Xu,{translationKey:"walletModal.mobileConnectionModal.connectionDeclined",children:"Connection declined"}),is(Ju,{get children(){return is(ch,{get onRetry(){return e.onRetry}})}})],dh=e=>{let t=Zs();return[is(Ju,{get children(){return[is(Mu,{}),is(Xu,{translationKey:"walletModal.mobileConnectionModal.continueIn",children:"Continue the transaction in OKX Wallet"})]}}),is(Ju,{get children(){return[is(Vu,{get onClick(){return e.onOpenQR},get children(){return[is(Vc,{get fill(){return t.colors.background.primary}}),is(Zu,{translationKey:"walletModal.mobileConnectionModal.showQR",children:"Show QR Codes"})]}}),is(ch,{get onRetry(){return e.onRetry}})]}})]},uh=e=>{Zs();let[t,n]=Pa(!0),[r,i]=Pa(!1),[a,s]=Pa(!1),f=Ka((()=>!e.isSingleWallet&&!a())),[c,l]=Pa(!1),d=$a(yu),[u,h]=Pa(null),[p,g]=Pa(null),[b,y]=Pa(null),v=$a(bd),m=d?.onStatusChange((()=>{}),(()=>{l(!0);let t=e.lastSelectedWalletInfo;t&&t.openMethod&&"qrcode"===t.openMethod&&r()&&w()}));Ia((()=>{var t,n,r=e.universalLinkParams();if(r){e.setLastSelectedWalletInfo(ca(fa({},e.wallet),{openMethod:"universal-link"})),(0,Li.logDebug)(`createEffect  ${JSON.stringify(r)}`);var o=r.connectRequest,i=r.tonConnectRequest;if(i||(i=o),o){var a=(0,Li.encodeConnectParams)(ca(fa({},i),{redirect:"none"})),s=(0,Li.getUniversalLink)((0,Li.getAppWalletDeepLink)(a));y(s);var f=(0,Li.encodeConnectParams)(ca(fa({},i),{redirect:null!=(t=r.redirect)?t:"none"})),c=(0,Li.getAppWalletDeepLink)(f);h(c);var l=(0,Li.encodeTWAConnectURLParams)(ca(fa({},o),{redirect:"none"})),d=(0,Li.getTelegramWalletTWAUrl)(l,null!=(n=r.tmaReturnUrl)?n:"back");g(d),(0,Li.logDebug)(`setUniversalLink  ${c}   tgUrl  ${d}    qrLink ${s}`)}}})),Ua((()=>ua(void 0,null,(function*(){try{yield e.connect().catch((e=>(0,Li.logDebug)(`MobileConnectionModal onMount error ${JSON.stringify(e)}`)))}catch(t){o.error("Error while connecting:",t)}}))));let C=()=>{l(!1),s(!1),t(),n(!1);try{e.connect()}catch(r){o.error("Error while connecting:",r)}},O=()=>{l(!1),i(!0),e.setLastSelectedWalletInfo(ca(fa({},e.wallet),{openMethod:"qrcode"}))},w=()=>{i(!1),e.setLastSelectedWalletInfo(ca(fa({},e.wallet),{openMethod:"universal-link"}))},E=()=>{r()?w():e.onBackClick()},_=()=>{s(!0),(0,Li.openOKXDeeplinkWithFallback)(u())},x=()=>{v?.closeModal(),(0,Li.openOKXTMAWalletlinkWithFallback)(p())};return m&&La(m),is(xu,{"data-tc-wallets-modal-connection-mobile":"true",get children(){return[is(hs,{get when(){return!e.backDisabled||r()},get children(){return is(Ru,{icon:"arrow",onClick:E})}}),is(hs,{get when(){return null===e.universalLinkParams()},get children(){return[is(_u,{children:"OKX Connect"}),is(oh,{}),is(fh,{get wallet(){return e.wallet}})]}}),is(hs,{get when(){return null!==e.universalLinkParams()},get children(){return[is(hs,{get when(){return r()},get children(){return is(Bu,{get universalLink(){return b()},get walletInfo(){return e.wallet}})}}),is(hs,{get when(){return!r()},get children(){return[is(_u,{children:"OKX Connect"}),is(Su,{get children(){return[is(hs,{get when(){return c()},get children(){return is(lh,{onRetry:C})}}),is(hs,{get when(){return!c()},get children(){return[is(hs,{get when(){return f()},get children(){return is(rh,{onConnectApp:_,onConnectMini:x})}}),is(hs,{get when(){return!f()},get children(){return is(dh,{onOpenQR:O,onRetry:C})}})]}})]}}),is(fh,{get wallet(){return e.wallet}})]}})]}})]}})},hh=ef.div``,ph=ef.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 325px;
  gap: 24px;
`,gh=e=>{Zs();let[t,n]=Pa(!0),[r,i]=Pa(!1),[a,s]=Pa(null),f=Ka((()=>!e.isSingleWallet&&null===a())),[c,l]=Pa(!1),d=$a(yu),[u,h]=Pa(null),p=$a(bd);Ia((()=>{var t;(0,Li.logDebug)("TON customEvent.detail  :::",Ia);var n=e.universalLinkParams();if((0,Li.logDebug)("TON customEvent.detail  :::",JSON.stringify(n)),n){e.setLastSelectedWalletInfo(ca(fa({},e.wallet),{openMethod:"universal-link"}));var r=n.connectRequest,o=n.tonConnectRequest;if(o||(o=r),r){var i=(0,Li.encodeConnectParams)(ca(fa({},o),{redirect:"none"})),a=(0,Li.getUniversalLink)((0,Li.getAppWalletDeepLink)(i));b(a);var s=(0,Li.encodeTWAConnectURLParams)(r),f=(0,Li.getTelegramWalletTWAUrl)(s,null!=(t=n.tmaReturnUrl)?t:"back",Mf());h(f),(0,Li.logDebug)(`DesktopConnectionModal  setUniversalLink  tgUrl  ${f}    qrLink ${a}`)}}}));let[g,b]=Pa(null),y=d?.onStatusChange((()=>{}),(()=>{l(!0);let t=e.lastSelectedWalletInfo;t&&t.openMethod&&"qrcode"===t.openMethod&&r()&&m()}));Ua((()=>ua(void 0,null,(function*(){try{yield e.connect().catch((e=>(0,Li.logDebug)("DesktopConnectionModal connect catch error ",JSON.stringify(e))))}catch(t){(0,Li.logDebug)("DesktopConnectionModal connect  error ",JSON.stringify(t))}}))));let v=()=>{l(!1),s(null),t(),n(!1);try{e.connect()}catch(r){o.error("Error while connecting:",r)}},m=()=>{i(!1),e.setLastSelectedWalletInfo(ca(fa({},e.wallet),{openMethod:"universal-link"}))},C=()=>{b(g()),s("app"),l(!1),i(!0),e.setLastSelectedWalletInfo(ca(fa({},e.wallet),{openMethod:"qrcode"}))},O=()=>{(0,Li.logDebug)("desktop on connect mini"),p?.closeModal(),(0,Li.openOKXTMAWalletlinkWithFallback)(u(),Mf())};return y&&La(y),is(hh,{"data-tc-wallets-modal-connection-mobile":"true",get children(){return[is(hs,{get when(){return null===e.universalLinkParams()||c()||f()},get children(){return is(_u,{children:"OKX Connect"})}}),is(hs,{get when(){return null===e.universalLinkParams()},get children(){return[is(oh,{}),is(fh,{get wallet(){return e.wallet}})]}}),is(hs,{get when(){return null!==e.universalLinkParams()},get children(){return[is(hs,{get when(){return c()},get children(){return is(ph,{get children(){return is(lh,{onRetry:v})}})}}),is(hs,{get when(){return!c()},get children(){return[is(hs,{get when(){return!f()},get children(){return is(Bu,{get universalLink(){return g()},get walletInfo(){return e.wallet}})}}),is(hs,{get when(){return f()},get children(){return is(ph,{get children(){return is(rh,{onConnectApp:C,onConnectMini:O})}})}})]}}),is(fh,{get wallet(){return e.wallet}})]}})]}})},bh=e=>{let{locale:t}=Xl()[1];return Ia((()=>t(Ou.language))),Ia((()=>{e.opened&&Nf()})),is(Eu,{get opened(){return e.opened},onClose:()=>e.onClose("action-cancelled"),"data-tc-wallets-modal-container":"true",get children(){return[is(hs,{get when(){return e.loadingBeforeConnect()},get children(){return[is(_u,{get children(){var t;return null==(t=e.walletInfo)?void 0:t.name}}),is(oh,{})]}}),is(hs,{get when(){return!e.loadingBeforeConnect()},get children(){return is(Ws,{get component(){return Sf()?uh:gh},get wallet(){return e.walletInfo},onBackClick:()=>{},backDisabled:!0,get connect(){return e.connect},get isSingleWallet(){return e.isSingleWallet},get universalLinkParams(){return e.universalLinkParams},get lastSelectedWalletInfo(){return e.lastSelectedWalletInfo},get setLastSelectedWalletInfo(){return e.setLastSelectedWalletInfo}})}})]}})},yh=()=>{let e=$a(bd),t=$a(yu),[n,r]=Pa(null);window.addEventListener("okx-ton-connect-connection-info-before-jump",(e=>{let t=e;(0,Li.logDebug)("TON   :::",JSON.stringify(t.detail)),t.detail&&"connectInfo"in t.detail&&r(t.detail.connectInfo)}));let o=Ka((()=>{var e;if(!(()=>{var e;return"loading"===(null==(e=Ou.connectRequestParameters)?void 0:e.state)})())return null==(e=Ou.connectRequestParameters)?void 0:e.value})),i=t=>{e.closeModal(t)};return La(t.onStatusChange((e=>{e&&i("wallet-selected")}))),is(bh,{get opened(){return ic()},get walletInfo(){return ac()},loadingBeforeConnect:()=>{var e;return"loading"===(null==(e=Ou.connectRequestParameters)?void 0:e.state)},connect:()=>new Promise(((n,i)=>{r(null),e.handleConnect((e=>{var n;return t.connect({openUniversalLink:!Df()&&Sf(),tonProof:null==(n=o())?void 0:n.tonProof,redirect:e?.returnStrategy,tmaReturnUrl:Ou.tmaReturnUrl})})).then((e=>{n(e)})).catch((e=>{i(e),r(null)}))})),onClose:i,universalLinkParams:n,get isSingleWallet(){return!Df()},get lastSelectedWalletInfo(){return fc()},setLastSelectedWalletInfo:lc})},vh={common:{openWallet:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u043e\u0448\u0435\u043b\u0435\u043a",get:"\u041f\u041e\u041b\u0423\u0427\u0418\u0422\u042c",close:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",retry:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u043e\u043f\u044b\u0442\u043a\u0443"},button:{connectWallet:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043a\u043e\u0448\u0435\u043b\u0435\u043a",dropdown:{copy:"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0434\u0440\u0435\u0441",copied:"\u0410\u0434\u0440\u0435\u0441 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d.",disconnect:"\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c"}},notifications:{confirm:{header:"\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 {{ name }} \u0434\u043b\u044f \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438."},transactionSent:{header:"\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430",text:"\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f \u0431\u0443\u0434\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u0430 \u0447\u0435\u0440\u0435\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434."},transactionCanceled:{header:"\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430",text:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0435 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442."}},walletModal:{mobileConnectionModal:{showQR:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c QR-\u043a\u043e\u0434",scanQR:"\u041e\u0442\u0441\u043a\u0430\u043d\u0438\u0440\u0443\u0439\u0442\u0435 QR-\u043a\u043e\u0434 \u043d\u0438\u0436\u0435 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u0430\u043c\u0435\u0440\u044b \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0435 \u0438\u043b\u0438 {{ name }}",continueIn:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0432 \u041a\u043e\u0448\u0435\u043b\u044c\u043a\u0435 OKX",connectionDeclined:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"\u041a\u043e\u0448\u0435\u043b\u0435\u043a OKX \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 OKX \u0438 \u0432 Telegram"},connectApp:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e OKX",connectMini:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u043c\u0438\u043d\u0438-\u041a\u043e\u0448\u0435\u043b\u044c\u043a\u0443 OKX"}},actionModal:{confirmTransaction:{header:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e \u0432 {{ name }}",text:"\u042d\u0442\u043e \u0437\u0430\u0439\u043c\u0435\u0442 \u0432\u0441\u0435\u0433\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434."},transactionSent:"$notifications.transactionSent",transactionCanceled:"$notifications.transactionCanceled"}},mh={common:{openWallet:"\u6253\u5f00\u94b1\u5305",get:"\u83b7\u53d6",close:"\u5173\u95ed",retry:"\u518d\u8bd5\u4e00\u6b21"},button:{connectWallet:"\u8fde\u63a5\u94b1\u5305",dropdown:{copy:"\u590d\u5236\u5730\u5740",copied:"\u5730\u5740\u5df2\u590d\u5236",disconnect:"\u65ad\u5f00\u8fde\u63a5"}},notifications:{confirm:{header:"\u6253\u5f00 {{ name }} \u4ee5\u786e\u8ba4\u4ea4\u6613"},transactionSent:{header:"\u4ea4\u6613\u5df2\u53d1\u9001",text:"\u4ea4\u6613\u5373\u5c06\u5b8c\u6210\uff0c\u8bf7\u7a0d\u5019"},transactionCanceled:{header:"\u4ea4\u6613\u5df2\u53d6\u6d88",text:"\u8d26\u6237\u672a\u53d1\u751f\u4efb\u4f55\u66f4\u6539"}},walletModal:{mobileConnectionModal:{OKXConnect:"OKX Connect",showQR:"\u5c55\u793a\u4e8c\u7ef4\u7801",scanQR:"\u4f7f\u7528\u624b\u673a\u6216\u6b27\u6613\u94b1\u5305\u7684\u76f8\u673a\u626b\u63cf\u4e0b\u65b9\u4e8c\u7ef4\u7801",continueIn:"\u5728\u6b27\u6613\u94b1\u5305\u4e2d\u7ee7\u7eed\u5b8c\u6210",connectionDeclined:"\u8fde\u63a5\u5931\u8d25",PoweredBy:"Powered by",appAndTelegram:{header:"\u8fde\u63a5 OKX \u94b1\u5305",text:"OKX \u94b1\u5305\u652f\u6301 App \u548c Telegram \u5c0f\u7a0b\u5e8f"},connectApp:"\u8fde\u63a5\u6b27\u6613 App",connectMini:"\u8fde\u63a5\u6b27\u6613 Mini Wallet"}},actionModal:{confirmTransaction:{header:"\u5728 {{ name }} \u4e2d\u786e\u8ba4\u4ea4\u6613",text:"\u8bf7\u7a0d\u5019"},transactionSent:"$notifications.transactionSent",transactionCanceled:"$notifications.transactionCanceled"}},Ch={common:{openWallet:"\u0641\u062a\u062d \u0645\u062d\u0641\u0638\u0629",get:"\u062d\u0635\u0648\u0644",close:"\u0625\u063a\u0644\u0627\u0642",retry:"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629"},button:{connectWallet:"\u0631\u0628\u0637 \u0627\u0644\u0645\u062d\u0641\u0638\u0629",dropdown:{copy:"\u0646\u0633\u062e \u0627\u0644\u0639\u0646\u0648\u0627\u0646",copied:"\u062a\u0645 \u0646\u0633\u062e \u0627\u0644\u0639\u0646\u0648\u0627\u0646",disconnect:"\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0631\u0628\u0637"}},notifications:{confirm:{header:"\u0627\u0641\u062a\u062d {{ name }} \u0644\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629."},transactionSent:{header:"\u0623\u064f\u0631\u0633\u0644\u062a \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629",text:"\u0633\u062a\u062a\u0645 \u0645\u0639\u0627\u0644\u062c\u0629 \u0645\u0639\u0627\u0645\u0644\u062a\u0643 \u0641\u064a \u063a\u0636\u0648\u0646 \u062b\u0648\u0627\u0646\u064d \u0642\u0644\u064a\u0644\u0629."},transactionCanceled:{header:"\u0623\u064f\u0644\u063a\u064a\u062a \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629",text:"\u0644\u0646 \u062a\u0637\u0631\u0623 \u0623\u064a\u0629 \u062a\u063a\u064a\u064a\u0631\u0627\u062a \u0639\u0644\u0649 \u062d\u0633\u0627\u0628\u0643."}},walletModal:{mobileConnectionModal:{showQR:"\u0639\u0631\u0636 \u0631\u0645\u0632 QR",scanQR:"\u0627\u0645\u0633\u062d \u0631\u0645\u0632 QR \u0623\u062f\u0646\u0627\u0647 \u0628\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0643\u0627\u0645\u064a\u0631\u0627 \u0647\u0627\u062a\u0641\u0643 \u0623\u0648 \u0643\u0627\u0645\u064a\u0631\u0627 \u0647\u0627\u062a\u0641 {{ name }}",continueIn:"\u0645\u062a\u0627\u0628\u0639\u0629 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629 \u0641\u064a \u0645\u062d\u0641\u0638\u0629 OKX",connectionDeclined:"\u0641\u0634\u0644 \u0627\u0644\u0627\u062a\u0635\u0627\u0644",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"\u0645\u062d\u0641\u0638\u0629 OKX \u0645\u062a\u0627\u062d\u0629 \u0639\u0644\u0649 \u062a\u0637\u0628\u064a\u0642 OKX \u0648Telegram"},connectApp:"\u0627\u0644\u0631\u0628\u0637 \u0628\u062a\u0637\u0628\u064a\u0642 OKX",connectMini:"\u0627\u0644\u0631\u0628\u0637 \u0628\u0645\u062d\u0641\u0638\u0629 OKX \u0627\u0644\u0645\u0635\u063a\u0631\u0629"}},actionModal:{confirmTransaction:{header:"\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629 \u0641\u064a {{ name }}",text:"\u0644\u0646 \u064a\u0633\u062a\u063a\u0631\u0642 \u0627\u0644\u0623\u0645\u0631 \u0633\u0648\u0649 \u0644\u062d\u0638\u0627\u062a."}}},Oh={common:{openWallet:"Otev\u0159\xedt pen\u011b\u017eenku",get:"Z\xedskat",close:"Zav\u0159\xedt",retry:"Zkusit znovu"},button:{connectWallet:"P\u0159ipojit pen\u011b\u017eenku",dropdown:{copy:"Kop\xedrovat adresu",copied:"Adresa zkop\xedrov\xe1na",disconnect:"Odpojit"}},notifications:{confirm:{header:"Otev\u0159ete {{ name }} a potvr\u010fte transakci."},transactionSent:{header:"Transakce odesl\xe1na",text:"Va\u0161e transakce bude zru\u0161ena b\u011bhem n\u011bkolika sekund."},transactionCanceled:{header:"Transakce zru\u0161ena",text:"Na va\u0161em \xfa\u010dtu nedojde k \u017e\xe1dn\xfdm zm\u011bn\xe1m."}},walletModal:{mobileConnectionModal:{showQR:"Zobrazit QR k\xf3d",scanQR:"Naskenujte n\xed\u017ee uveden\xfd QR k\xf3d pomoc\xed kamery telefonu nebo {{ name }}",continueIn:"Potvr\u010fte transakci v OKX Pen\u011b\u017eence.",connectionDeclined:"P\u0159ipojen\xed selhalo",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Pen\u011b\u017eenka je k dispozici v aplikaci OKX a na s\xedti Telegram."},connectApp:"P\u0159ipojit k aplikaci OKX",connectMini:"P\u0159ipojit k minipen\u011b\u017eence OKX"}},actionModal:{confirmTransaction:{header:"Potvr\u010fte transakci na {{ name }}.",text:"Zabere to jen chvilku."}}},wh={common:{openWallet:"Wallet \xf6ffnen",get:"Erhalten",close:"Schlie\xdfen",retry:"Wiederholen"},button:{connectWallet:"Wallet verkn\xfcpfen",dropdown:{copy:"Adresse kopieren",copied:"Adresse kopiert",disconnect:"Trennen"}},notifications:{confirm:{header:"{{ name }} \xf6ffnen und Transaktion best\xe4tigen."},transactionSent:{header:"Transaktion gesendet",text:"Ihre Transaktion wird in wenigen Sekunden bearbeitet."},transactionCanceled:{header:"Transaktion storniert",text:"Es werden keine \xc4nderungen an Ihrem Konto vorgenommen."}},walletModal:{mobileConnectionModal:{showQR:"QR-Code anzeigen",scanQR:"Scannen Sie den QR-Code unten mit der Kamera Ihres Telefons oder {{ name }}",continueIn:"Setzen Sie die Transaktion in der OKX Wallet fort",connectionDeclined:"Verbindung fehlgeschlagen",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet ist in der OKX App und auf Telegram verf\xfcgbar"},connectApp:"Mit der OKX-App verbinden",connectMini:"Mit der OKX-Mini-Wallet verbinden"}},actionModal:{confirmTransaction:{header:"Transaktion in {{ name }} best\xe4tigen",text:"Es dauert nur einen Augenblick."}}},Eh={common:{openWallet:"Abrir wallet",get:"Consigue",close:"Cerrar",retry:"Volver a intentar"},button:{connectWallet:"Conectar billetera",dropdown:{copy:"Copiar direcci\xf3n",copied:"Direcci\xf3n copiada",disconnect:"Desconectar"}},notifications:{confirm:{header:"Abre {{ name }} para confirmar la transacci\xf3n."},transactionSent:{header:"Transacci\xf3n enviada",text:"Tu transacci\xf3n se procesar\xe1 en unos segundos."},transactionCanceled:{header:"Transacci\xf3n cancelada",text:"No se realizar\xe1n cambios en tu cuenta."}},walletModal:{mobileConnectionModal:{showQR:"Mostrar c\xf3digo QR",scanQR:"Escanea el siguiente c\xf3digo QR con la c\xe1mara de tu tel\xe9fono o de tu {{ name }}",continueIn:"Continuar con la transacci\xf3n en OKX Wallet",connectionDeclined:"Error de conexi\xf3n",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet est\xe1 disponible en la OKX app y en Telegram"},connectApp:"Conectarse a la OKX app",connectMini:"Conectarse a la OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"Confirma la transacci\xf3n de {{ name }}",text:"Solo te llevar\xe1 un momento."}}},_h={common:{openWallet:"Abrir billetera",get:"Obtener",close:"Cerrar",retry:"Reintentar"},button:{connectWallet:"Conectar billetera",dropdown:{copy:"Copiar direcci\xf3n",copied:"Direcci\xf3n copiada",disconnect:"Desconectar"}},notifications:{confirm:{header:"Abre {{ name }} para confirmar la transacci\xf3n."},transactionSent:{header:"Transacci\xf3n enviada",text:"Tu transacci\xf3n se procesar\xe1 en unos segundos."},transactionCanceled:{header:"Transacci\xf3n cancelada",text:"No habr\xe1 cambios en tu cuenta."}},walletModal:{mobileConnectionModal:{showQR:"Mostrar c\xf3digo QR",scanQR:"Escanea el siguiente c\xf3digo QR con la c\xe1mara de tu tel\xe9fono o {{ name }}",continueIn:"Contin\xfaa la transacci\xf3n en OKX Wallet",connectionDeclined:"Error de conexi\xf3n",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet est\xe1 disponible en la aplicaci\xf3n de OKX y Telegram"},connectApp:"Con\xe9ctate a la aplicaci\xf3n de OKX",connectMini:"Con\xe9ctate a la OKX\xa0Mini Wallet"}},actionModal:{confirmTransaction:{header:"Confirmar la transacci\xf3n en {{ name }}",text:"Solo tomar\xe1 un momento."}}},xh={common:{openWallet:"Portefeuille ouvert",get:"Obtenir",close:"Fermer",retry:"R\xe9essayer"},button:{connectWallet:"Connecter le portefeuille",dropdown:{copy:"Copier l\u2019adresse",copied:"Adresse copi\xe9e",disconnect:"D\xe9connecter"}},notifications:{confirm:{header:"Ouvrir {{ name }} pour confirmer la transaction."},transactionSent:{header:"Transaction envoy\xe9e",text:"Votre transaction sera trait\xe9e en quelques secondes."},transactionCanceled:{header:"Transaction annul\xe9e",text:"Aucun changement ne sera apport\xe9 \xe0 votre compte."}},walletModal:{mobileConnectionModal:{showQR:"Afficher le code QR",scanQR:"Scannez le code QR ci-dessous avec la cam\xe9ra de votre t\xe9l\xe9phone ou de votre {{ name }}.",continueIn:"Poursuivre la transaction dans OKX Wallet",connectionDeclined:"\xc9chec de la connexion",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet est disponible sur OKX App et Telegram"},connectApp:"Se connecter \xe0 l\u2019appli OKX",connectMini:"Se connecter \xe0 OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"Confirmer la transaction dans {{ name }}",text:"Cela ne prendra qu'un instant."}}},Sh={common:{openWallet:"Buka wallet",get:"Dapatkan",close:"Tutup",retry:"Coba lagi"},button:{connectWallet:"Hubungkan wallet",dropdown:{copy:"Salin alamat",copied:"Alamat disalin",disconnect:"Putuskan sambungan"}},notifications:{confirm:{header:"Buka {{ name }} untuk mengonfirmasi transaksi."},transactionSent:{header:"Transaksi terkirim",text:"Transaksi Anda akan diproses dalam beberapa detik."},transactionCanceled:{header:"Transaksi dibatalkan",text:"Tidak akan ada perubahan pada akun Anda."}},walletModal:{mobileConnectionModal:{showQR:"Tampilkan Kode QR",scanQR:"Pindai kode QR di bawah dengan kamera ponsel atau {{ name }} Anda",continueIn:"Lanjutkan transaksi di OKX Wallet",connectionDeclined:"Koneksi gagal",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet tersedia di OKX App dan Telegram"},connectApp:"Hubungkan ke OKX App",connectMini:"Hubungkan ke OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"Konfirmasi transaksi pada {{ name }}",text:"Hanya perlu beberapa saat."}}},Rh={common:{openWallet:"Apri portafoglio",get:"Ottieni",close:"Chiudi",retry:"Riprova"},button:{connectWallet:"Connetti il portafoglio",dropdown:{copy:"Copia indirizzo",copied:"Indirizzo copiato",disconnect:"Disconnetti"}},notifications:{confirm:{header:"Apri {{ name }} per confermare la transazione."},transactionSent:{header:"Transazione inviata",text:"La transazione verr\xe0 elaborata in pochi secondi."},transactionCanceled:{header:"Transazione annullata",text:"Il tuo conto non subir\xe0 modifiche."}},walletModal:{mobileConnectionModal:{showQR:"Mostra il codice QR",scanQR:"Scansiona il codice QR di seguito con la fotocamera del tuo smartphone o {{ name }}",continueIn:"Continua la transazione in OKX Wallet",connectionDeclined:"Collegamento non riuscito",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet \xe8 disponibile sull'app OKX e Telegram"},connectApp:"Connettiti all'app OKX",connectMini:"Connettiti a OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"Conferma la transazione in {{ name }}",text:"Ci vorr\xe0 solo un secondo."}}},Nh={common:{openWallet:"Wallet openen",get:"Krijgen",close:"Sluiten",retry:"Opnieuw proberen"},button:{connectWallet:"Wallet koppelen",dropdown:{copy:"Adres kopi\xebren",copied:"Adres gekopieerd",disconnect:"Verbinding verbreken"}},notifications:{confirm:{header:"Open {{ name }} om de transactie te bevestigen."},transactionSent:{header:"Transactie verstuurd",text:"Je transactie wordt binnen een paar seconden verwerkt."},transactionCanceled:{header:"Transactie geannuleerd",text:"Er verandert niets aan je account."}},walletModal:{mobileConnectionModal:{showQR:"QR-code weergeven",scanQR:"Scan de QR-code hieronder met de camera van je telefoon of de camera van{{ name }}",continueIn:"Ga verder met de transactie in OKX Wallet",connectionDeclined:"Koppelen mislukt",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet is beschikbaar op OKX App en Telegram"},connectApp:"Koppelen met de OKX-app",connectMini:"Koppelen met OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"De transactie in {{ name }} bevestigen",text:"Het is zo gebeurd."}}},Th={common:{openWallet:"Otw\xf3rz portfel",get:"Otrzymaj",close:"Zamknij",retry:"Spr\xf3buj ponownie"},button:{connectWallet:"Po\u0142\u0105cz portfel",dropdown:{copy:"Kopiuj adres",copied:"Adres skopiowany",disconnect:"Roz\u0142\u0105cz"}},notifications:{confirm:{header:"Otw\xf3rz {{ name }}, aby potwierdzi\u0107 transakcj\u0119."},transactionSent:{header:"Wys\u0142ano transakcj\u0119",text:"Transakcja zostanie przetworzona w ci\u0105gu kilku sekund."},transactionCanceled:{header:"Anulowano transakcj\u0119",text:"Na koncie nie zostan\u0105 wprowadzone \u017cadne zmiany."}},walletModal:{mobileConnectionModal:{showQR:"Poka\u017c kod QR",scanQR:"Zeskanuj poni\u017cszy kod QR za pomoc\u0105 aparatu w telefonie lub {{ name }}",continueIn:"Kontynuuj transakcj\u0119 w OKX Wallet",connectionDeclined:"Po\u0142\u0105czenie nieudane",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet jest dost\u0119pny w aplikacji OKX i Telegramie"},connectApp:"Po\u0142\u0105cz z aplikacj\u0105 OKX",connectMini:"Po\u0142\u0105cz z OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"Potwierd\u017a transakcj\u0119 w {{ name }}",text:"To zajmie tylko chwil\u0119."}}},kh={common:{openWallet:"Abrir carteira",get:"Receber",close:"Fechar",retry:"Tentar novamente"},button:{connectWallet:"Conectar carteira",dropdown:{copy:"Copiar endere\xe7o",copied:"Endere\xe7o copiado",disconnect:"Desconectar"}},notifications:{confirm:{header:"Abrir {{ name }} para confirmar a transa\xe7\xe3o."},transactionSent:{header:"Transa\xe7\xe3o enviada",text:"Sua transa\xe7\xe3o ser\xe1 processada em alguns segundos."},transactionCanceled:{header:"Transa\xe7\xe3o cancelada",text:"N\xe3o haver\xe1 altera\xe7\xf5es em sua conta."}},walletModal:{mobileConnectionModal:{showQR:"Mostrar C\xf3digo QR",scanQR:"Digitalize o c\xf3digo QR abaixo com a c\xe2mera do seu telefone ou do {{ name }}",continueIn:"Continuar a transa\xe7\xe3o na OKX Wallet",connectionDeclined:"Falha na conex\xe3o",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"A OKX Wallet est\xe1 dispon\xedvel na OKX App e no Telegram"},connectApp:"Conecte-se \xe0 OKX App",connectMini:"Conecte-se \xe0 OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"Confirmar a transa\xe7\xe3o em {{ name }}",text:"Isso levar\xe1 apenas um momento."}}},Dh={common:{openWallet:"Abrir carteira",get:"Receber",close:"Fechar",retry:"Tentar novamente"},button:{connectWallet:"Associar carteira",dropdown:{copy:"Copiar endere\xe7o",copied:"Endere\xe7o copiado",disconnect:"Desassociar"}},notifications:{confirm:{header:"Abra {{ name }} para confirmar a transa\xe7\xe3o."},transactionSent:{header:"Transa\xe7\xe3o efetuada",text:"A sua transa\xe7\xe3o ser\xe1 processada dentro de poucos segundos."},transactionCanceled:{header:"Transa\xe7\xe3o cancelada",text:"N\xe3o ser\xe3o feitas altera\xe7\xf5es \xe0 sua conta."}},walletModal:{mobileConnectionModal:{showQR:"Mostrar c\xf3digo QR",scanQR:"Leia o c\xf3digo QR abaixo com a c\xe2mara do seu telem\xf3vel ou {{ name }}",continueIn:"Continuar a transa\xe7\xe3o na OKX Wallet",connectionDeclined:"Falha na liga\xe7\xe3o",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"A OKX Wallet est\xe1 dispon\xedvel na Aplica\xe7\xe3o da OKX e no Telegram"},connectApp:"Associar \xe0 Aplica\xe7\xe3o da OKX",connectMini:"Associar \xe0 OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"Confirmar a transa\xe7\xe3o na {{ name }}",text:"Demora apenas um momento."}}},Ph={common:{openWallet:"Deschide\u021bi portofelul",get:"Primi\u021bi",close:"\xcenchide\u021bi",retry:"Re\xeencerca\u021bi"},button:{connectWallet:"Conecta\u021bi portofelul",dropdown:{copy:"Copia\u021bi adresa",copied:"Adres\u0103 copiat\u0103",disconnect:"Deconecta\u021bi"}},notifications:{confirm:{header:"Deschide\u021bi {{ name }} pentru a confirma tranzac\u021bia."},transactionSent:{header:"Tranzac\u021bie trimis\u0103",text:"Tranzac\u021bia dvs. va fi procesat\u0103 \xeen c\xe2teva secunde."},transactionCanceled:{header:"Tranzac\u021bie anulat\u0103",text:"Nu va exista nicio modificare \xeen cont."}},walletModal:{mobileConnectionModal:{showQR:"Scana\u021bi codul QR",scanQR:"Scana\u021bi codul QR mai jos cu camera telefonului sau a {{ name }}",continueIn:"Continua\u021bi tranzac\u021bia \xeen OKX Wallet",connectionDeclined:"Conexiunea a e\u0219uat",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet este disponibil din aplica\u021bia OKX \u0219i Telegram"},connectApp:"Conecta\u021bi-v\u0103 la aplica\u021bia OKX",connectMini:"Conecta\u021bi-v\u0103 la OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"Confirma\u021bi tranzac\u021bia \xeen {{ name }}",text:"Va dura doar un moment."}}},Ah={common:{openWallet:"C\xfczdan\u0131 a\xe7",get:"Al",close:"Kapat",retry:"Tekrar Dene"},button:{connectWallet:"C\xfczdan\u0131 ba\u011fla",dropdown:{copy:"Adresi kopyala",copied:"Adres kopyaland\u0131!",disconnect:"Ba\u011flant\u0131y\u0131 kes"}},notifications:{confirm:{header:"\u0130\u015flemi onaylamak i\xe7in {{ name }} \xf6gesini a\xe7\u0131n."},transactionSent:{header:"\u0130\u015flem g\xf6nderildi.",text:"\u0130\u015fleminiz birka\xe7 saniye i\xe7inde ger\xe7ekle\u015ftirilecek."},transactionCanceled:{header:"\u0130\u015flem iptal edildi!",text:"Hesab\u0131n\u0131zda de\u011fi\u015fiklik olmayacak."}},walletModal:{mobileConnectionModal:{showQR:"QR Kodunu G\xf6ster",scanQR:"A\u015fa\u011f\u0131daki QR kodunu telefonunuzun veya {{ name }} cihaz\u0131n\u0131z\u0131n kameras\u0131yla taray\u0131n.",continueIn:"\u0130\u015fleme OKX Web3 C\xfczdan\u2019da devam edin.",connectionDeclined:"Ba\u011flant\u0131 ba\u015far\u0131s\u0131z.",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Web3 C\xfczdan, OKX Uygulamas\u0131nda ve Telegram\u2019da kullan\u0131ma sunuldu"},connectApp:"OKX Uygulamas\u0131na Ba\u011flan",connectMini:"OKX Mini C\xfczdan\u0131na Ba\u011flan"}},actionModal:{confirmTransaction:{header:"{{ name }} Konumunda \u0130\u015flemi Onaylay\u0131n",text:"Bu yaln\u0131zca bir dakikan\u0131z\u0131 alacak."}}},Ih={common:{openWallet:"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0438\u0439 \u0433\u0430\u043c\u0430\u043d\u0435\u0446\u044c",get:"\u041e\u0442\u0440\u0438\u043c\u0430\u0442\u0438",close:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438",retry:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0438 \u0441\u043f\u0440\u043e\u0431\u0443"},button:{connectWallet:"\u041f\u0456\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0438 \u0433\u0430\u043c\u0430\u043d\u0435\u0446\u044c",dropdown:{copy:"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438 \u0430\u0434\u0440\u0435\u0441\u0443",copied:"\u0410\u0434\u0440\u0435\u0441\u0443 \u0441\u043a\u043e\u043f\u0456\u0439\u043e\u0432\u0430\u043d\u043e",disconnect:"\u0412\u0456\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0438"}},notifications:{confirm:{header:"\u0412\u0456\u0434\u043a\u0440\u0438\u0439\u0442\u0435 {{ name }}, \u0449\u043e\u0431 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u044e."},transactionSent:{header:"\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u044e \u043d\u0430\u0434\u0456\u0441\u043b\u0430\u043d\u043e",text:"\u0412\u0430\u0448\u0443 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u044e \u0431\u0443\u0434\u0435 \u043e\u0431\u0440\u043e\u0431\u043b\u0435\u043d\u043e \u0447\u0435\u0440\u0435\u0437 \u043a\u0456\u043b\u044c\u043a\u0430 \u0441\u0435\u043a\u0443\u043d\u0434."},transactionCanceled:{header:"\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u044e \u0441\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e",text:"\u0423 \u0432\u0430\u0448\u043e\u043c\u0443 \u0430\u043a\u0430\u0443\u043d\u0442\u0456 \u043d\u0435 \u0431\u0443\u0434\u0435 \u0437\u043c\u0456\u043d."}},walletModal:{mobileConnectionModal:{showQR:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 QR-\u043a\u043e\u0434",scanQR:"\u0412\u0456\u0434\u0441\u043a\u0430\u043d\u0443\u0439\u0442\u0435 \u043d\u0430\u0432\u0435\u0434\u0435\u043d\u0438\u0439 \u043d\u0438\u0436\u0447\u0435 QR-\u043a\u043e\u0434 \u0437\u0430 \u0434\u043e\u043f\u043e\u043c\u043e\u0433\u043e\u044e \u043a\u0430\u043c\u0435\u0440\u0438 \u0441\u0432\u043e\u0433\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0430\u0431\u043e {{ name }}",continueIn:"\u041f\u0440\u043e\u0434\u043e\u0432\u0436\u0442\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u044e \u0432 OKX Wallet",connectionDeclined:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0456\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044f",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX \u0413\u0430\u043c\u0430\u043d\u0435\u0446\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0439 \u0443 \u0437\u0430\u0441\u0442\u043e\u0441\u0443\u043d\u043a\u0443 OKX \u0456 Telegram"},connectApp:"\u041f\u0456\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0438\u0441\u044f \u0434\u043e \u0437\u0430\u0441\u0442\u043e\u0441\u0443\u043d\u043a\u0430 OKX",connectMini:"\u041f\u0456\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0438\u0441\u044f \u0434\u043e \u043c\u0456\u043d\u0456\u0433\u0430\u043c\u0430\u043d\u0446\u044f OKX"}},actionModal:{confirmTransaction:{header:"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u044c\u0442\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u044e \u0432 {{ name }}",text:"\u0426\u0435 \u0437\u0430\u0439\u043c\u0435 \u043b\u0438\u0448\u0435 \u043c\u0438\u0442\u044c."}}},Kh={common:{openWallet:"M\u1edf v\xed",get:"Nh\u1eadn",close:"\u0110\xf3ng",retry:"Th\u1eed l\u1ea1i"},button:{connectWallet:"K\u1ebft n\u1ed1i v\xed",dropdown:{copy:"Sao ch\xe9p \u0111\u1ecba ch\u1ec9",copied:"\u0110\xe3 sao ch\xe9p \u0111\u1ecba ch\u1ec9",disconnect:"Ng\u1eaft k\u1ebft n\u1ed1i"}},notifications:{confirm:{header:"M\u1edf {{ name }} \u0111\u1ec3 x\xe1c nh\u1eadn giao d\u1ecbch."},transactionSent:{header:"\u0110\xe3 g\u1eedi giao d\u1ecbch",text:"Giao d\u1ecbch c\u1ee7a b\u1ea1n s\u1ebd \u0111\u01b0\u1ee3c x\u1eed l\xfd trong v\xe0i gi\xe2y."},transactionCanceled:{header:"\u0110\xe3 h\u1ee7y giao d\u1ecbch",text:"Kh\xf4ng c\xf3 thay \u0111\u1ed5i n\xe0o v\u1edbi t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n."}},walletModal:{mobileConnectionModal:{showQR:"Hi\u1ec3n th\u1ecb m\xe3 QR",scanQR:"Qu\xe9t m\xe3 QR b\xean d\u01b0\u1edbi b\u1eb1ng m\xe1y \u1ea3nh \u0111i\u1ec7n tho\u1ea1i ho\u1eb7c {{ name }} c\u1ee7a b\u1ea1n",continueIn:"Ti\u1ebfp t\u1ee5c giao d\u1ecbch tr\xean V\xed Web3 OKX",connectionDeclined:"K\u1ebft n\u1ed1i kh\xf4ng th\xe0nh c\xf4ng",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"V\xed Web3 OKX hi\u1ec7n c\xf3 tr\xean c\u1ea3 \u1ee8ng d\u1ee5ng OKX v\xe0 Telegram"},connectApp:"K\u1ebft n\u1ed1i \u1ee8ng d\u1ee5ng OKX",connectMini:"K\u1ebft n\u1ed1i V\xed Web3 OKX Mini"}},actionModal:{confirmTransaction:{header:"X\xe1c nh\u1eadn giao d\u1ecbch trong {{ name }}",text:"N\xf3 ch\u1ec9 m\u1ea5t ch\xfat th\u1eddi gian."}}},Mh={en_US:jh({common:{openWallet:"Open wallet",get:"Get",close:"Close",retry:"Retry"},button:{connectWallet:"Connect wallet",dropdown:{copy:"Copy address",copied:"Address copied",disconnect:"Disconnect"}},notifications:{confirm:{header:"Open {{ name }} to\xa0confirm the\xa0transaction."},transactionSent:{header:"Transaction sent",text:"Your transaction\xa0will be\xa0processed in\xa0a\xa0few seconds."},transactionCanceled:{header:"Transaction canceled",text:"There\u2019ll be no changes to your account."}},walletModal:{mobileConnectionModal:{OKXConnect:"OKX Connect",showQR:"Show QR Code",scanQR:"Scan the\xa0QR code below with your phone\u2019s\xa0or\xa0{{ name }}\u2019s camera",continueIn:"Proceed in OKX Wallet",connectionDeclined:"Connection failed",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet is available on OKX App and Telegram"},connectApp:"Connect to OKX App",connectMini:"Connect to OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"Confirm the\xa0transaction in\xa0{{ name }}",text:"It\u2019ll only take a moment."},transactionSent:"$notifications.transactionSent",transactionCanceled:"$notifications.transactionCanceled"}}),ru_RU:jh(vh),zh_CN:jh(mh),zh:jh(mh),ar_AE:jh(Ch),cs_CZ:jh(Oh),de_DE:jh(wh),es_ES:jh(Eh),es_LAT:jh(_h),fr_FR:jh(xh),id_ID:jh(Sh),it_IT:jh(Rh),nl_NL:jh(Nh),pl_PL:jh(Th),pt_BR:jh(kh),pt_PT:jh(Dh),ro_RO:jh(Ph),tr_TR:jh(Ah),uk_UA:jh(Ih),vi_VN:jh(Kh)};function jh(e){let t=n=>{Object.entries(n).forEach((r=>{let[o,i]=r;if("object"==typeof i&&i)return t(i);if("string"==typeof i){if("$"===i[0]){let t=i.slice(1).split("."),r=e;t.forEach((e=>{if(!(e in r))throw new Error(`Cannot parse translations: there is no property ${e} in translation`);r=r[e]})),n[o]=r}"\\$"===i.slice(0,2)&&(n[o]=i.slice(1))}}))};return t(e),e}var Uh={constant:{black:"#000000",white:"#FFFFFF"},connectButton:{background:"#0098EA",foreground:"#FFFFFF"},accent:"#0098EA",telegramButton:"#0098EA",qrFill:"#000000",icon:{primary:"#0F0F0F",secondary:"#7A8999",tertiary:"#C1CAD2",success:"#29CC6A",error:"#F5A73B"},background:{primary:"#FFFFFF",secondary:"#F1F3F5",segment:"#FFFFFF",tint:"#F1F3F5",qr:"#FFFFFF"},text:{primary:"#000000",secondary:"#6A7785",contrast:"#909090"},border:{primary:"#00000014",secondary:"#00000024"},disable:"#B3B3B3"},[Lh,Wh]=Ul({theme:ha.LIGHT,colors:Uh,borderRadius:"m"}),Bh={[ha.LIGHT]:Uh,[ha.DARK]:{constant:{black:"#000000",white:"#FFFFFF"},connectButton:{background:"#0098EA",foreground:"#FFFFFF"},accent:"#E5E5EA",telegramButton:"#31A6F5",qrFill:"#FFFFFF",icon:{primary:"#E5E5EA",secondary:"#909099",tertiary:"#434347",success:"#29CC6A",error:"#F5A73B"},background:{primary:"#121214",secondary:"#18181A",segment:"#262629",tint:"#222224",qr:"#121214"},text:{primary:"#FFFFFF",secondary:"#7D7D85",contrast:"#909090"},border:{primary:"#FFFFFF1F",secondary:"#FFFFFF30"},disable:"#5B5B5B"}};function Xh(e){Wh({theme:e,colors:Bh[e]})}ha.LIGHT,ha.DARK;var $h=ef.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-bottom: 8px;
`,Hh=ef(Yl)`
    margin-top: 16px;
`,qh=ef(Hl)`
    font-weight: 400;
    font-size: 16px;
    line-height: 20px;
    text-align: center;
    max-width: 250px;
    margin-top: 10px;
    color: ${e=>e.theme.colors.text.contrast};
`;ef(mc)`
    min-width: 112px;
    margin-top: 32px;
`,ef(Xc)`
    height: 16px;
    width: 16px;
`;var Fh=ef.div`
    margin-top: 24px;
  background-color: ${e=>e.theme.colors.text.primary};
  height: 48px;
  width: 262px;
  justify-content: center;
  border-radius: 24px;
  display: flex;
  align-items: center;
  gap: 8px;
`,Jh=e=>{let t=vc(e),n=$a(bd),[r,o]=Pa(!0),[i,a]=Pa(!1),s=Zs(),{action:f}=$a(Yh);Ia((()=>{a(!!f&&"sent"in f&&f.sent)}));let c=n?.universalLink,l=()=>{(0,Wi.logDebug)("ActionModal ====> onOpenWallet "),r(),o(!1),function(e,t,n,r){if(t||(t=Li.standardDeeplink),n=fa({},n),yf())zf("ios","android")?("back"===n.returnStrategy&&(n.returnStrategy="tg://resolve"),r("universal-link"),Pu(e,t)):(r("universal-link"),Lf(Du(e,n.returnStrategy)));else if(bf())if(gf("ios","android"))"back"===n.returnStrategy&&(n.returnStrategy="tg://resolve"),r("universal-link"),Pu(e,t);else if(gf("macos","tdesktop")){"back"===n.returnStrategy&&(n.returnStrategy="tg://resolve");let o=Du(e,n.returnStrategy);t&&!n.forceRedirect?(r("custom-deeplink"),Wf(Zf(o,t),(()=>{r("universal-link"),Lf(o)}))):(r("universal-link"),Lf(o))}else if(gf("weba")){"back"===n.returnStrategy&&(Yf("safari")?n.returnStrategy=location.href:Yf("chrome")?n.returnStrategy="googlechrome://":Yf("firefox")?n.returnStrategy="firefox://":Yf("opera")?n.returnStrategy="opera-http://":n.returnStrategy=location.href);let o=Du(e,n.returnStrategy);t&&!n.forceRedirect?(r("custom-deeplink"),Wf(Zf(o,t),(()=>{r("universal-link"),Lf(o)}))):(r("universal-link"),Lf(o))}else if(gf("web")){"back"===n.returnStrategy&&(Yf("safari")?n.returnStrategy=location.href:Yf("chrome")?n.returnStrategy="googlechrome://":Yf("firefox")?n.returnStrategy="firefox://":Yf("opera")?n.returnStrategy="opera-http://":n.returnStrategy=location.href);let o=Du(e,n.returnStrategy);t&&!n.forceRedirect?(r("custom-deeplink"),Wf(Zf(o,t),(()=>{r("universal-link"),Lf(o)}))):(r("universal-link"),Lf(o))}else r("universal-link"),Lf(Du(e,n.returnStrategy));else if(zf("ios"))"back"===n.returnStrategy&&(Yf("safari")?n.returnStrategy="none":Yf("chrome")?n.returnStrategy="googlechrome://":Yf("firefox")?n.returnStrategy="firefox://":Yf("opera")?n.returnStrategy="opera-http://":n.returnStrategy=location.href),r("universal-link"),Pu(e,t);else if(zf("android"))"back"===n.returnStrategy&&(Yf("chrome")?n.returnStrategy="googlechrome://":Yf("firefox")?n.returnStrategy="firefox://":Yf("opera")?n.returnStrategy="opera-http://":n.returnStrategy=location.href),r("universal-link"),(0,Li.logDebug)("url-strategy-helpers 489"),Pu(e,t);else if(zf("ipad"))"back"===n.returnStrategy&&(Yf("safari")?n.returnStrategy="none":Yf("chrome")?n.returnStrategy="googlechrome://":Yf("firefox")?n.returnStrategy="firefox://":Yf("opera")?n.returnStrategy="opera-http://":n.returnStrategy=location.href),Pu(e,t);else if(zf("macos","windows","linux")){"back"===n.returnStrategy&&(Yf("safari")?n.returnStrategy="none":Yf("chrome")?n.returnStrategy="googlechrome://":Yf("firefox")?n.returnStrategy="firefox://":Yf("opera")?n.returnStrategy="opera-http://":n.returnStrategy="none");let o=Du(e,n.returnStrategy);t&&!n.forceRedirect?(r("custom-deeplink"),Wf(Zf(o,t),(()=>{r("universal-link"),Lf(o)}))):(r("universal-link"),Lf(o))}else r("universal-link"),Lf(Du(e,n.returnStrategy))}(c,"okx://web3?stack=true",{returnStrategy:"none",forceRedirect:!1},(()=>{}))};return is($h,ls(t,{get children(){return[Ka((()=>e.icon)),is(Hh,{get translationKey(){return e.headerTranslationKey},get translationValues(){return e.headerTranslationValues}}),is(qh,{get translationKey(){return e.textTranslationKey},get translationValues(){return e.textTranslationValues}}),is(hs,{get when(){return n?.showActionButton()},get children(){return[is(hs,{get when(){return"close"===e.showButton},get children(){return is(Fh,{onClick:()=>e.onClose(),get children(){return is(Hl,{fontWeight:700,fontSize:"16px",get color(){return s.colors.background.primary},get children(){return is(ih,{translationKey:"common.close",children:"Close"})}})}})}}),is(hs,{get when(){return"open-wallet"===e.showButton},get children(){return is(Fh,{onClick:l,get children(){return is(Hl,{fontWeight:700,fontSize:"16px",get color(){return s.colors.background.primary},get children(){return is(ih,{translationKey:"common.openWallet",children:"Open wallet"})}})}})}})]}})]}}))},Vh=e=>{let t=$a(bd),[n]=Xl();return is(Jh,{headerTranslationKey:"actionModal.confirmTransaction.header",get headerTranslationValues(){return{name:t.walletName?t.walletName:n("common.yourWallet",{},"Your wallet")}},textTranslationKey:"actionModal.confirmTransaction.text",get icon(){return is(Mu,{})},onClose:()=>e.onClose(),get showButton(){return Sf()?"open-wallet":void 0},"data-tc-confirm-modal":"true"})},Gh=e=>is(Jh,{headerTranslationKey:"actionModal.transactionCanceled.header",textTranslationKey:"actionModal.transactionCanceled.text",get icon(){return is(Uc,{size:"m"})},onClose:()=>e.onClose(),get showButton(){return Sf()?"close":void 0},"data-tc-transaction-canceled-modal":"true"}),zh=e=>is(Jh,{headerTranslationKey:"actionModal.transactionSent.header",textTranslationKey:"actionModal.transactionSent.text",get icon(){return is(Ic,{size:"m"})},onClose:()=>e.onClose(),get showButton(){return Sf()?"close":void 0},"data-tc-transaction-sent-modal":"true"}),Yh=Xa({action:null}),Zh=e=>(Ia((()=>{o.log("ActionsModal",e.action)})),is(Yh.Provider,{get value(){return{action:e.action}},get children(){return is(ll,{get opened(){var t;return null!==e.action&&!0===(null==(t=e.action)?void 0:t.openModal)},onClose:()=>e.setAction(null),"data-tc-actions-modal-container":"true",get children(){return is(ps,{get children(){return[is(gs,{get when(){return"transaction-sent"===e.action.name},get children(){return is(zh,{onClose:()=>e.setAction(null)})}}),is(gs,{get when(){return"transaction-canceled"===e.action.name},get children(){return is(Gh,{onClose:()=>e.setAction(null)})}}),is(gs,{get when(){return"confirm-transaction"===e.action.name},get children(){return is(Vh,{onClose:()=>e.setAction(null)})}})]}})}})}})),Qh=e=>{let t=Wl(Mh,Ou.language);return Hf(),$f(),wu({contextType:"TONContext"}),is(Bl.Provider,{value:t,get children(){return is(bd.Provider,{get value(){return e.connectUI},get children(){return is(yu.Provider,{get value(){return Ou.tonConnector},get children(){return[is(af,{}),is(Ys,{theme:Lh,get children(){return[is(hs,{get when(){return Ou.buttonRootId},get children(){return is(Ls,{get mount(){return document.getElementById(Ou.buttonRootId)},get children(){return is(Cu,{})}})}}),is(Ws,{component:nf,get children(){return[is(yh,{}),is(Zh,{get action(){return dc()},setAction:uc})]}})]}})]}})}})}})},[ep,tp]=Pa({status:"closed",closeReason:null});Ka((()=>"opened"===ep().status));var[np,rp]=Pa({status:"closed",closeReason:null}),op=Ka((()=>"opened"===np().status)),ip=Ka((()=>{let e=np();return"opened"===e.status?e.walletInfo:null})),ap=typeof window<"u"?new ec:void 0,[sp,fp]=Pa(ap?.getLastSelectedWalletInfo()||null),cp=e=>{ap||(ap=new ec),e?(df(`modals-state.ts: setLastSelectedWalletInfo ${JSON.stringify(e)}`),ap.setLastSelectedWalletInfo(e)):(df("modals-state.ts: setLastSelectedWalletInfo    removeLastSelectedWalletInfo"),ap.removeLastSelectedWalletInfo()),fp(e)},[lp,dp]=Pa(null),up=()=>{let e=$a(bd),t=$a(vu),[n,r]=Pa(null),o=t=>{e.closeModal(t)};return t?.on("okx_engine_connect_params",(e=>{(0,Li.logDebug)(`UniversalSigneWalletModal  okx_engine_connect_params  ${JSON.stringify(e)}`),r(e)})),is(bh,{get opened(){return op()},get walletInfo(){return ip()},loadingBeforeConnect:()=>!1,connect:()=>new Promise(((n,i)=>{var a,s;Ou.universalConnectRequestParameters&&new pa("connect params is nil");let f=fa({},JSON.parse(JSON.stringify(Ou.universalConnectRequestParameters)));f.sessionConfig={},f.sessionConfig.openUniversalUrl=(null==(a=Ou.universalConnectRequestParameters)||a.namespaces,null==(s=Ou.universalConnectRequestParameters)||s.optionalNamespaces,!Pf()&&Sf()),r(null),e.handleConnect((e=>(f.sessionConfig.tmaReturnUrl=e?.tmaReturnUrl,f.sessionConfig.redirect=e?.returnStrategy,t.connect(f)))).then((e=>{e?(o("wallet-selected"),n(e)):o("action-cancelled")})).catch((e=>{o("action-cancelled"),(0,Li.logDebug)("UniversalSingleWalletModal connect  error",JSON.stringify(e)),r(null),i(e)}))})),onClose:o,universalLinkParams:n,get isSingleWallet(){var e,t;return!Pf(null==(e=Ou.universalConnectRequestParameters)||e.namespaces,null==(t=Ou.universalConnectRequestParameters)||t.optionalNamespaces)},get lastSelectedWalletInfo(){return sp()},setLastSelectedWalletInfo:cp})},hp=e=>{let t=Wl(Mh,Ou.language);return Hf(),$f(),wu({contextType:"UniversalContext"}),is(Bl.Provider,{value:t,get children(){return is(bd.Provider,{get value(){return e.connectUI},get children(){return is(vu.Provider,{get value(){return Ou.universalConnector},get children(){return[is(af,{}),is(Ys,{theme:Lh,get children(){return is(Ws,{component:nf,get children(){return[is(up,{}),is(Zh,{get action(){return lp()},setAction:dp})]}})}})]}})}})}})},pp=e=>{(0,Li.logDebug)(`tonWidgetController : openSingleWalletModal : ${JSON.stringify(e)}`),setTimeout((()=>oc({status:"opened",closeReason:null,walletInfo:e})))},gp=e=>{setTimeout((()=>oc({status:"closed",closeReason:e})))},bp=e=>{setTimeout((()=>uc(e)))},yp=()=>{setTimeout((()=>{o.log("clearAction"),uc(null)}))},vp=()=>fc(),mp=()=>lc(null),Cp=(e,t)=>_s((()=>is(Qh,{connectUI:t})),document.getElementById(e));function Op(e){return"[object Object]"===Object.prototype.toString.call(e)}function wp(e){var t,n;return!1!==Op(e)&&(void 0===(t=e.constructor)||!(!1===Op(n=t.prototype)||!1===n.hasOwnProperty("isPrototypeOf")))}function Ep(e,t){return e?(0,Yi.default)(t,e,{arrayMerge:(e,t,n)=>t,isMergeableObject:wp}):t}var _p=class{constructor(){la(this,"consumers",[]),Ia((()=>{let e=dc();this.consumers.forEach((t=>t(e)))}))}onStateChange(e){return this.consumers.push(e),()=>{this.consumers=this.consumers.filter((t=>t!==e))}}},xp=(e=>(e.OKX_UI_CONNECTION_STARTED="okx-connect-ui-connection-started",e.OKX_UI_CONNECTION_COMPLETED="okx-connect-ui-connection-completed",e.OKX_UI_CONNECTION_ERROR="okx-connect-ui-connection-error",e.OKX_UI_CONNECTION_RESTORING_STARTED="okx-connect-ui-connection-restoring-started",e.OKX_UI_CONNECTION_RESTORING_COMPLETED="okx-connect-ui-connection-restoring-completed",e.OKX_UI_CONNECTION_RESTORING_ERROR="okx-connect-ui-connection-restoring-error",e.OKX_UI_DISCONNECTION="okx-connect-ui-disconnection",e.OKX_UI_TRANSACTION_SENT_FOR_SIGNATURE="okx-connect-ui-transaction-sent-for-signature",e.OKX_UI_TRANSACTION_SIGNED="okx-connect-ui-transaction-signed",e.OKX_UI_TRANSACTION_SIGNING_FAILED="okx-connect-ui-transaction-signing-failed",e))(xp||{}),Sp=class{constructor(e){var t;la(this,"eventPrefix","okx-connect-ui-"),la(this,"OKXConnectUiVersion"),la(this,"OKXtonConnectSdkVersion",null),la(this,"eventDispatcher"),this.eventDispatcher=null!=(t=e?.eventDispatcher)?t:new Wi.BrowserEventDispatcher,this.OKXConnectUiVersion=e.tonConnectUiVersion,this.init().catch()}get version(){return(0,Wi.createVersionInfo)({okx_ton_connect_sdk_lib:this.OKXtonConnectSdkVersion,okx_connect_ui_lib:this.OKXConnectUiVersion})}init(){return ua(this,null,(function*(){try{yield this.setRequestVersionHandler(),this.OKXtonConnectSdkVersion=yield this.requestTonConnectSdkVersion()}catch{o.log("okx-ton-connect-response-version  init error  ====> requestTonConnectSdkVersion")}}))}setRequestVersionHandler(){return ua(this,null,(function*(){yield this.eventDispatcher.addEventListener("okx-connect-ui-request-version",(()=>ua(this,null,(function*(){yield this.eventDispatcher.dispatchEvent("okx-connect-ui-response-version",(0,Wi.createResponseVersionEvent)(this.OKXConnectUiVersion))}))))}))}requestTonConnectSdkVersion(){return ua(this,null,(function*(){return new Promise(((e,t)=>ua(this,null,(function*(){try{yield this.eventDispatcher.addEventListener("okx-ton-connect-response-version",(t=>{e(t.detail.version)}),{once:!0}),yield this.eventDispatcher.dispatchEvent("okx-ton-connect-request-version",(0,Wi.createRequestVersionEvent)())}catch(n){o.log(`okx-ton-connect-response-version    ====> ${n.message}`),t(n)}}))))}))}dispatchUserActionEvent(e){var t;try{null==(t=this.eventDispatcher)||t.dispatchEvent(`${this.eventPrefix}${e.type}`,e).catch()}catch{}}trackConnectionStarted(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=(0,Wi.createConnectionStartedEvent)(this.version,...t);this.dispatchUserActionEvent(r)}catch{}}trackConnectionCompleted(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=(0,Wi.createConnectionCompletedEvent)(this.version,...t);this.dispatchUserActionEvent(r)}catch{}}trackConnectionError(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=(0,Wi.createConnectionErrorEvent)(this.version,...t);this.dispatchUserActionEvent(r)}catch{}}trackConnectionRestoringStarted(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=(0,Wi.createConnectionRestoringStartedEvent)(this.version,...t);this.dispatchUserActionEvent(r)}catch{}}trackConnectionRestoringCompleted(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=(0,Wi.createConnectionRestoringCompletedEvent)(this.version,...t);this.dispatchUserActionEvent(r)}catch{}}trackConnectionRestoringError(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=(0,Wi.createConnectionRestoringErrorEvent)(this.version,...t);this.dispatchUserActionEvent(r)}catch{}}trackDisconnection(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=(0,Wi.createDisconnectionEvent)(this.version,...t);this.dispatchUserActionEvent(r)}catch{}}trackTransactionSentForSignature(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=(0,Wi.createTransactionSentForSignatureEvent)(this.version,...t);this.dispatchUserActionEvent(r)}catch{}}trackTransactionSigned(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=(0,Wi.createTransactionSignedEvent)(this.version,...t);this.dispatchUserActionEvent(r)}catch{}}trackTransactionSigningFailed(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=(0,Wi.createTransactionSigningFailedEvent)(this.version,...t);this.dispatchUserActionEvent(r)}catch{}}},Rp=class{constructor(e){la(this,"consumers",[]),la(this,"getWalltsInfo"),la(this,"state",rc()),this.getWalltsInfo=e.getWalltsInfo,Ia((()=>{let e=rc();this.state=e,this.consumers.forEach((t=>t(e)))}))}open(e){return ua(this,null,(function*(){let t=this.getWalltsInfo().find((t=>Tf(t,e)));if(t)return this.openSingleWalletModal(t);throw new pa(`Trying to open modal window with unknown wallet "${e}".`)}))}close(){gp(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"action-cancelled")}onStateChange(e){return this.consumers.push(e),()=>{this.consumers=this.consumers.filter((t=>t!==e))}}handleConnect(e,t){return ua(this,null,(function*(){return new Promise(((n,r)=>{try{e(t).then((e=>{n(e),(0,Li.logDebug)("TonSingleWalletModalManager  result >>>",JSON.stringify(e))})).catch((e=>{r(e),(0,Li.logDebug)("TonSingleWalletModalManager  error >>>",JSON.stringify(e))}))}catch(o){r(o),(0,Li.logDebug)("TonSingleWalletModalManager  catch error >>>",JSON.stringify(o))}}))}))}openSingleWalletModal(e){return ua(this,null,(function*(){return bf()&&vf(),pp(e),new Promise((e=>{let t=this.onStateChange((n=>{let{status:r}=n;"opened"===r&&(t(),e())}))}))}))}},Np=["en_US","ru_RU","zh_CN","zh","ar_AE","cs_CZ","de_DE","es_ES","es_LAT","fr_FR","id_ID","it_IT","nl_NL","pl_PL","pt_BR","pt_PT","ro_RO","tr_TR","uk_UA","vi_VN"];function Tp(e){return Np.includes(e)}var kp=class{constructor(e){if(la(this,"walletInfoStorage",new Qf("okx-wallet-connect-ui-ton_wallet-info")),la(this,"tracker"),la(this,"walletInfo",null),la(this,"systemThemeChangeUnsubscribe",null),la(this,"actionsConfiguration"),la(this,"walletsList"),la(this,"connectRequestParametersCallback"),la(this,"connector"),la(this,"singleWalletModal"),la(this,"transactionModal"),la(this,"connectionRestored",Promise.resolve(!1)),la(this,"dispose"),!(e&&"dappMetaData"in e&&e.dappMetaData))throw new pa("You have to specify a `dappMetaData`in the options.");this.connector=new Wi.OKXTonConnect({metaData:e.dappMetaData}),e.language&&!Tp(e.language.toString())&&(e.language="en_US"),this.tracker=new Sp({eventDispatcher:null,tonConnectUiVersion:"1"}),this.singleWalletModal=new Rp({getWalltsInfo:()=>Wi.OKXTonConnect.getWallets()}),this.transactionModal=new _p,this.walletsList=this.getWallets(),Ff(function(e){return[...new Set(e)]}(this.walletsList.map((e=>e.imageUrl))));let t=this.normalizeWidgetRoot(void 0);this.subscribeToWalletChange(),!1!==e?.restoreConnection&&(this.connectionRestored=function(e){return ua(this,null,(function*(){return yield new Promise((e=>requestAnimationFrame(e))),e()}))}((()=>ua(this,null,(function*(){return this.tracker.trackConnectionRestoringStarted(),yield this.connector.restoreConnection(),this.connector.connected?this.tracker.trackConnectionRestoringCompleted(this.wallet):(this.tracker.trackConnectionRestoringError("Connection was not restored"),this.walletInfoStorage.removeWalletInfo()),this.connector.connected}))))),this.uiOptions=Ep(e,{uiPreferences:{theme:"SYSTEM"}}),wu({tonConnector:this.connector,preferredWalletAppName:void 0}),this.dispose=Cp(t,this)}static getWallets(){return Wi.OKXTonConnect.getWallets()}get connected(){return this.connector.connected}get account(){return this.connector.account}get wallet(){return this.connector.wallet?fa(fa({},this.connector.wallet),this.walletInfo):null}get universalLink(){if(this.wallet&&"universalLink"in this.wallet)return this.wallet.universalLink}get deepLink(){if(this.wallet&&"deepLink"in this.wallet)return this.wallet.deepLink}get walletName(){if(this.wallet&&"name"in this.wallet)return this.wallet.name}set uiOptions(e){var t,n,r;this.checkButtonRootExist(e.buttonRootId),this.actionsConfiguration=e.actionsConfiguration,null!=(t=e.uiPreferences)&&t.theme&&("SYSTEM"!==(null==(n=e.uiPreferences)?void 0:n.theme)?(null==(r=this.systemThemeChangeUnsubscribe)||r.call(this),Xh(e.uiPreferences.theme)):(Xh(Bf()),this.systemThemeChangeUnsubscribe||(this.systemThemeChangeUnsubscribe=Xf(Xh)))),wu((t=>{var n,r;let o=Ep(fa(fa(fa({},e.language&&{language:e.language}),!(null==(n=e.actionsConfiguration)||!n.returnStrategy)&&{returnStrategy:e.actionsConfiguration.returnStrategy}),(null==(r=e.actionsConfiguration)?void 0:r.tmaReturnUrl)&&{tmaReturnUrl:e.actionsConfiguration.tmaReturnUrl}),kl(t));return void 0!==e.buttonRootId&&(o.buttonRootId=e.buttonRootId),o}))}destory(){this.dispose&&this.dispose()}setConnectRequestParameters(e){var t;wu({connectRequestParameters:e}),("ready"===e?.state||!e)&&(null==(t=this.connectRequestParametersCallback)||t.call(this,{tonProof:e.value.tonProof}))}getWallets(){return[(0,Li.creatOKXWalletInfo)(),(0,Li.creatOKXMiniAppWalletInfo)()]}onStatusChange(e,t){return this.connector.onStatusChange((t=>ua(this,null,(function*(){if(t){yield this.getSelectedWalletInfo(t);let n=this.getWalletInfo(t);(0,Li.logDebug)("OKXTonConnectUI onStatusChange info :",JSON.stringify(n)),(0,Li.logDebug)("OKXTonConnectUI onStatusChange wallet :",JSON.stringify(t)),e(fa(fa({},t),n||this.getWallets()[0]))}else e(t)}))),t)}handleConnect(e){return ua(this,null,(function*(){return this.singleWalletModal.handleConnect(e,this.actionsConfiguration)}))}openModal(){return ua(this,null,(function*(){return new Promise(((e,t)=>ua(this,null,(function*(){yield Promise.all([this.waitForWalletConnection({}),this.openSingleWalletModal("okxAppWallet")]).catch((e=>{t(e)}))}))))}))}closeModal(e){this.closeSingleWalletModal(e)}waitForWalletConnection(e){return ua(this,null,(function*(){return new Promise(((e,t)=>{let n=n=>ua(this,null,(function*(){n?(this.tracker.trackConnectionCompleted(n),o(),e(n)):(this.tracker.trackConnectionError("Connection was cancelled"),o(),t(new pa("Wallet was not connected")))})),r=e=>{this.tracker.trackConnectionError(e.message),o(),t(e)},o=this.onStatusChange((e=>n(e)),(e=>r(e)))}))}))}onModalStateChange(e){return this.onSingleWalletModalStateChange(e)}get modalState(){return this.singleWalletModalState}openSingleWalletModal(e){return ua(this,null,(function*(){this.tracker.trackConnectionStarted();try{return this.singleWalletModal.open(e)}catch(Ui){throw this.tracker.trackConnectionError(Ui.message),Ui}}))}closeSingleWalletModal(e){"action-cancelled"===e&&this.tracker.trackConnectionError("Connection was cancelled"),this.singleWalletModal.close(e)}onSingleWalletModalStateChange(e){return this.singleWalletModal.onStateChange(e)}get singleWalletModalState(){return this.singleWalletModal.state}disconnect(){return this.tracker.trackDisconnection(this.wallet,"dapp"),yp(),mp(),this.walletInfoStorage.removeWalletInfo(),this.connector.disconnect()}sendTransaction(e,t){return ua(this,null,(function*(){return this.sendTransactionInner(e,{returnStrategy:t?.returnStrategy,modals:t?.modals})}))}sendTransactionInner(e,t){return ua(this,null,(function*(){var n,r;if(this.tracker.trackTransactionSentForSignature(this.wallet,e),!this.connected)throw this.tracker.trackTransactionSigningFailed(this.wallet,e,"Wallet was not connected"),new pa("Connect wallet to send a transaction.");bf()&&vf();let o={returnStrategy:wf("mobile")&&"qrcode"!==(null==(n=fc())?void 0:n.openMethod)?t?.returnStrategy:"none",modals:t?.modals,tmaReturnUrl:null!=(r=t?.tmaReturnUrl)?r:"back"},{modals:i,returnStrategy:a,tmaReturnUrl:s}=this.getModalsAndNotificationsConfiguration(o);bp({name:"confirm-transaction",openModal:i.includes("before"),sent:!1});let f=()=>{var e;c.signal.aborted||(!this.connector.openUniversalLink&&jf(this.walletInfo,null==(e=fc())?void 0:e.openMethod)&&function(e,t){(0,Li.logDebug)("wallets openTonWallet"),Df()&&Kf(e,t)}(this.walletInfo,s),bp({name:"confirm-transaction",openModal:i.includes("before"),sent:!0}))},c=new AbortController,l=this.onTransactionModalStateChange((e=>{e?.openModal||l()})),d=ca(fa({},e),{redirect:a});try{let t=yield this.waitForSendTransaction({transaction:d,signal:c.signal},f);return this.tracker.trackTransactionSigned(this.wallet,e,t),bp({name:"transaction-sent",openModal:i.includes("success")}),t}catch(u){throw bp({name:"transaction-canceled",openModal:i.includes("error")}),u instanceof Li.OKXConnectError?u:new pa("Unhandled error:"+u)}finally{l()}}))}waitForSendTransaction(e,t){return ua(this,null,(function*(){return new Promise(((n,r)=>{var o;let{transaction:i,signal:a}=e;if(a.aborted)return this.tracker.trackTransactionSigningFailed(this.wallet,i,"Transaction was cancelled"),r(new pa("Transaction was not sent"));let s=e=>ua(this,null,(function*(){n(e)})),f=()=>{this.tracker.trackTransactionSigningFailed(this.wallet,i,"Transaction was cancelled"),r(new pa("Transaction was not sent"))};a.addEventListener("abort",f,{once:!0}),this.connector.sendTransaction(i,{doNotOpenWallet:!(Sf()&&"qrcode"!==(null==(o=fc())?void 0:o.openMethod)),onRequestSent:t}).then((e=>(a.removeEventListener("abort",f),s(e)))).catch((e=>(this.tracker.trackTransactionSigningFailed(this.wallet,i,e.message),a.removeEventListener("abort",f),(e=>{r(e)})(e))))}))}))}onTransactionModalStateChange(e){return this.transactionModal.onStateChange(e)}subscribeToWalletChange(){this.connector.onStatusChange((e=>ua(this,null,(function*(){var t;e?(yield this.updateWalletInfo(e),this.setPreferredWalletAppName((null==(t=this.walletInfo)?void 0:t.appName)||e.device.appName)):this.walletInfoStorage.removeWalletInfo()}))))}setPreferredWalletAppName(e){wu({preferredWalletAppName:e})}getSelectedWalletInfo(e){return ua(this,null,(function*(){let t,n=vp();if(!n)return null;if("name"in n)t=n;else{let r=this.walletsList.find((t=>Tf(t,e.device.appName)));if(!r)throw new pa(`Cannot find WalletInfo for the '${e.device.appName}' wallet`);t=fa(fa({},r),n)}return t}))}updateWalletInfo(e){return ua(this,null,(function*(){this.walletInfo=this.getWalletInfo(e),(0,Li.logDebug)("updateWalletInfo ---this.walletInfo -",JSON.stringify(this.walletInfo))}))}getWalletInfo(e){(0,Li.logDebug)("getWalletInfo ----",JSON.stringify(e));let t=this.walletsList.find((t=>Tf(t,e.device.appName)))||null;return(0,Li.logDebug)("getWalletInfo ---info -",JSON.stringify(t)),t}normalizeWidgetRoot(e){if(!e||!document.getElementById(e)){e="tc-widget-root";let t=document.createElement("div");t.id=e,document.body.appendChild(t)}return e}checkButtonRootExist(e){if(null!=e&&!document.getElementById(e))throw new pa(`${e} element not found in the document.`)}getModalsAndNotificationsConfiguration(e){var t,n,r;let o=["before","success","error"],i=["before"];null!=(t=this.actionsConfiguration)&&t.modals&&(i="all"===this.actionsConfiguration.modals?o:this.actionsConfiguration.modals),e?.modals&&(i="all"===e.modals?o:e.modals);let a=e?.returnStrategy||(null==(n=this.actionsConfiguration)?void 0:n.returnStrategy)||"back";return{modals:i,tmaReturnUrl:e?.tmaReturnUrl||(null==(r=this.actionsConfiguration)?void 0:r.tmaReturnUrl)||"back",returnStrategy:a}}showActionButton(){return Af(this.walletInfo)&&Sf()}},Dp=e=>{(0,Li.logDebug)(`universalWidgetController : openSingleWalletModal : ${JSON.stringify(e)}`),setTimeout((()=>rp({status:"opened",closeReason:null,walletInfo:e})))},Pp=e=>{setTimeout((()=>rp({status:"closed",closeReason:e})))},Ap=e=>{setTimeout((()=>dp(e)))},Ip=(e,t)=>_s((()=>is(hp,{connectUI:t})),document.getElementById(e)),Kp=class{constructor(){la(this,"listeners",[])}listen(e){this.listeners.push(e)}trigger(e){this.listeners.forEach((t=>t(e)))}},Mp=class{constructor(e){la(this,"consumers",[]),la(this,"getWalltsInfo"),la(this,"connectSignal",new Kp),la(this,"state",np()),this.getWalltsInfo=e.getWalltsInfo,Ia((()=>{let e=np();this.state=e,this.consumers.forEach((t=>t(e)))}))}open(e,t){return ua(this,null,(function*(){(0,Li.logDebug)(`UniversalSingleWalletModalManager : open : ${JSON.stringify(t)}`);let n=this.getWalltsInfo().find((t=>Tf(t,e)));if(n)return this.openSingleWalletModal(n,t);throw new pa(`Trying to open modal window with unknown wallet "${e}".`)}))}close(){Pp(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"action-cancelled")}onStateChange(e){return this.consumers.push(e),()=>{this.consumers=this.consumers.filter((t=>t!==e))}}handleConnect(e,t){return ua(this,null,(function*(){return new Promise(((n,r)=>{try{e(t).then((e=>{n(e),(0,Li.logDebug)("UniversalSingleWalletModalManager  result >>>",JSON.stringify(e)),this.connectSignal.trigger(e)})).catch((e=>{r(e),(0,Li.logDebug)("UniversalSingleWalletModalManager  error >>>",JSON.stringify(e)),this.connectSignal.trigger(e)}))}catch(o){r(o),(0,Li.logDebug)("UniversalSingleWalletModalManager  catch error >>>",JSON.stringify(o)),this.connectSignal.trigger(o)}}))}))}openSingleWalletModal(e,t){return ua(this,null,(function*(){return(0,Li.logDebug)(`UniversalSingleWalletModalManager : openSingleWalletModal : ${JSON.stringify(t)}`),bf()&&vf(),wu({universalConnectRequestParameters:t}),Dp(e),new Promise(((e,t)=>{this.connectSignal.listen((n=>{n instanceof Error?t(n):e(n)}))}))}))}},jp=class e extends Zi.OKXUniversalProvider{constructor(t){super({dappMetaData:t.dappMetaData}),la(this,"singleWalletModal"),la(this,"actionsConfiguration"),la(this,"systemThemeChangeUnsubscribe",null),la(this,"dispose"),this.singleWalletModal=new Mp({getWalltsInfo:()=>e.getWallets()});let n=this.normalizeWidgetRoot(void 0);this.uiOptions=Ep(t,{uiPreferences:{theme:"SYSTEM"},dappMetaData:t.dappMetaData}),wu({universalConnector:this,preferredWalletAppName:void 0}),this.dispose=Ip(n,this)}static getWallets(){return[(0,Li.creatOKXWalletInfo)(),(0,Li.creatOKXMiniAppWalletInfo)()]}getConnectWallet(){var e,t;return(0,Li.logDebug)(`this.session?.wallet?.appName ${null==(t=null==(e=this.session)?void 0:e.wallet)?void 0:t.appName}`),this.getWallets().find((e=>{var t,n;return Tf(e,null==(n=null==(t=this.session)?void 0:t.wallet)?void 0:n.appName)}))}get universalLink(){var e,t;return(0,Li.logDebug)(`this.getConnectWallet()?.universalLink ${null==(e=this.getConnectWallet())?void 0:e.universalLink}`),null==(t=this.getConnectWallet())?void 0:t.universalLink}get deepLink(){var e;return null==(e=this.getConnectWallet())?void 0:e.deepLink}get walletName(){var e,t;return(0,Li.logDebug)(`this.getConnectWallet()?.walletName ${null==(e=this.getConnectWallet())?void 0:e.name}`),null==(t=this.getConnectWallet())?void 0:t.name}set uiOptions(e){var t,n,r;this.actionsConfiguration=e.actionsConfiguration,null!=(t=e.uiPreferences)&&t.theme&&("SYSTEM"!==(null==(n=e.uiPreferences)?void 0:n.theme)?(null==(r=this.systemThemeChangeUnsubscribe)||r.call(this),Xh(e.uiPreferences.theme)):(Xh(Bf()),this.systemThemeChangeUnsubscribe||(this.systemThemeChangeUnsubscribe=Xf(Xh)))),e.language&&!Tp(e.language.toString())&&(e.language="en_US"),wu((t=>{var n;return Ep(fa(fa({},e.language&&{language:e.language}),!(null==(n=e.actionsConfiguration)||!n.returnStrategy)&&{returnStrategy:e.actionsConfiguration.returnStrategy}),kl(t))}))}destory(){this.dispose&&this.dispose()}request(t,n,r){return ua(this,null,(function*(){var o,i,a,s,f;if(!this.session)throw new pa("Connect wallet to send a transaction.");let c={returnStrategy:wf("mobile")&&"qrcode"!==(null==(o=sp())?void 0:o.openMethod)?r?.returnStrategy:"none",modals:r?.modals,tmaReturnUrl:null!=(i=r?.tmaReturnUrl)?i:"back"},{modals:l,returnStrategy:d,tmaReturnUrl:u}=this.getModalsAndNotificationsConfiguration(c),h=ca(fa({},t),{redirect:d}),p=da(e.prototype,this,"showRequestModal").call(this,h,n);Ap({name:"confirm-transaction",openModal:l.includes("before")&&p,sent:!1}),!(null!=(a=this.session.sessionConfig)&&a.openUniversalUrl)&&p&&jf(this.getConnectWallet(),null==(s=sp())?void 0:s.openMethod)&&If(this.getConnectWallet(),u,this.session.namespaces),this.session.sessionConfig&&(this.session.sessionConfig.openUniversalUrl=this.session.sessionConfig.openUniversalUrl&&Sf()&&"qrcode"!==(null==(f=sp())?void 0:f.openMethod));try{let t=yield da(e.prototype,this,"request").call(this,h,n);return Ap({name:"transaction-sent",openModal:l.includes("success")&&p}),t}catch(g){throw(0,Li.logDebug)(`OKXUniversalConnectUI  request  ==>  ${typeof g} ==> is core OKXConnectError: ${g instanceof Li.OKXConnectError} ==> is universal-provider OKXConnectError: ${g instanceof Zi.OKXConnectError} ==>  ${JSON.stringify(g)}`),Ap({name:"transaction-canceled",openModal:l.includes("error")&&p}),g instanceof Li.OKXConnectError||g instanceof Zi.OKXConnectError?((0,Li.logDebug)(`OKXUniversalConnectUI  request  ==> ${JSON.stringify(g)}`),g):new pa("Unhandled error:"+g)}}))}getModalsAndNotificationsConfiguration(e){var t,n,r;let o=["before","success","error"],i=["before"];null!=(t=this.actionsConfiguration)&&t.modals&&(i="all"===this.actionsConfiguration.modals?o:this.actionsConfiguration.modals),e?.modals&&(i="all"===e.modals?o:e.modals);let a=e?.returnStrategy||(null==(n=this.actionsConfiguration)?void 0:n.returnStrategy)||"back";return{modals:i,tmaReturnUrl:e?.tmaReturnUrl||(null==(r=this.actionsConfiguration)?void 0:r.tmaReturnUrl)||"back",returnStrategy:a}}static init(t){return ua(this,null,(function*(){if(t&&"dappMetaData"in t&&t.dappMetaData){let n=new e(t);return yield n.initialize(),n}throw new pa("You have to specify a `dappMetaData`in the options.")}))}normalizeWidgetRoot(e){if(!e||!document.getElementById(e)){e="universal-widget-root";let t=document.createElement("div");t.id=e,document.body.appendChild(t)}return e}getWallets(){return e.getWallets()}handleConnect(e){return ua(this,null,(function*(){return this.singleWalletModal.handleConnect(e,this.actionsConfiguration)}))}openModal(e){return ua(this,null,(function*(){try{return this.connected()?this.session:this.singleWalletModal.open("okxAppWallet",e)}catch(Ui){throw Ui}}))}closeModal(e){this.singleWalletModal.close(e)}showActionButton(){return Af(this.getConnectWallet())&&Sf()}},Up=class e{static instance=null;level;constructor(){this.level=2}static getInstance(){return e.instance||(e.instance=new e),e.instance}static setLevel(t){e.getInstance().level=t}log(e,t,n){if(e>=this.level){let s=t?`[${t}] ${n}`:n;for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];switch(e){case 0:case 1:o.info(s,...i);break;case 2:o.warn(s,...i);break;case 3:o.error(s,...i)}}}createScopedLogger(e){var t=this;return{debug:function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.log(0,e,n,...o)},info:function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.log(1,e,n,...o)},warn:function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.log(2,e,n,...o)},error:function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.log(3,e,n,...o)}}}debug(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(0,void 0,e,...n)}info(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(1,void 0,e,...n)}warn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(2,void 0,e,...n)}error(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(3,void 0,e,...n)}},Lp=(Up.getInstance(),class extends Ai{okxUniversalProvider;logger;constructor(e){super(),this.logger=this.initializeLogger(),this.okxUniversalProvider=e,this.logger.debug("Adapter initialized")}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.logger.debug("Emitting event",e,n),super.emit(e,...n)}getLogger(){return this.logger}initializeLogger(){let e=Up.getInstance();return Up.setLevel(0),e.createScopedLogger(this.constructor.name)}});var Wp=()=>typeof window?.TelegramWebviewProxy<"u",Bp=()=>void 0!==window?.Telegram,Xp=e=>Wp()?0:(e=>/Android|iPhone|Mobile/i.test(e))(e)?1:2,$p={uuid:"0asdf-asdf-7982-8fef-341bf2a6eb2e",name:"OKX Mini Wallet"};function Hp(){if(2===Xp(navigator.userAgent)){let e=[];return function(e){window.addEventListener("eip6963:announceProvider",(t=>{o.log("eip6963:announceProvider",t);let n=t.detail.info;e.some((e=>e.uuid===n.uuid))||e.push(n)})),window.dispatchEvent(new Event("eip6963:requestProvider"))}(e),[$p,...e]}return[$p]}var qp,Fp,Jp,Vp,Gp,zp,Yp="personal_sign",Zp="eth_signTypedData_v4",Qp=class e extends Lp{static EVM_SUPPORTED_METHODS=["personal_sign","eth_signTypedData_v4","eth_sendTransaction","eth_accounts","eth_requestAccounts","eth_chainId","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_watchAsset"];eip6963ProviderInfo;connect;constructor(e,t){super(e),this.eip6963ProviderInfo=$p,this.connect=t&&t.connectCallback,this.getLogger().debug("init okxUniversalProvider: ",this.okxUniversalProvider)}async request(t){if(!e.EVM_SUPPORTED_METHODS.includes(t.method))return this.logger.info(`Method ${t.method} not supported`),Promise.reject(`Method ${t.method} not supported`);let{method:n,params:r}=t,o=r?{method:n,params:r}:{method:n};switch(n){case"eth_requestAccounts":return await this.handleRequestAccounts();case Yp:o={method:Yp,params:[r[0],r[1]]};break;case Zp:o={method:Zp,params:[r[0],JSON.parse(r[1])]}}try{let e=await this.okxUniversalProvider.request(o,"eip155:1");return this.getLogger().debug("Requesting accounts result: ",n,e),Promise.resolve(e)}catch(i){return this.getLogger().error(`Requesting accounts error: ${i.message}`),Promise.reject(i)}}isConnected(){return this.okxUniversalProvider.connected()}async disconnect(){await this.okxUniversalProvider.disconnect()}on(e,t,n){return this.getLogger().debug("eventemitter - on",e,t),super.on(e,t,n)}removeListener(e,t,n,r){return super.removeListener(e,t,n,r)}lastSession=null;sessionUpdateCallback(e){let t,n;if(this.getLogger().info("session: ",e,e?.namespaces?.eip155?.defaultChain,this),this.emit("chainChanged",e?.namespaces?.eip155?.defaultChain),this.lastSession)if(e?.namespaces?.eip155?.defaultChain!==this?.lastSession?.namespaces?.eip155?.defaultChain)t="chainChanged",n=e?.namespaces?.eip155?.defaultChain;else{t="accountChanged";let r=e?.namespaces?.eip155?.accounts,o=function(e){let t={};for(let n=0;n<e.length;n++){let r=e[n]?.split(":"),o=r?.[0],i=r?.[1],a=r?.[2],s=`${o}:${i}`;t[s]||(t[s]=[]),a&&t[s].push(a)}return t}(r),i=e?.namespaces?.eip155?.defaultChain;n=o[i]}else t="connect",n={chainId:e?.namespaces?.eip155?.defaultChain};this.lastSession=e}sessionDeleteCallback(e){o.log(e),this.lastSession=null,this.emit("accountChanged",[])}async handleRequestAccounts(){if(!this.connect)return Promise.reject("connectCallback not provided");try{await this.connect(this.eip6963ProviderInfo);let e=await this.okxUniversalProvider.request({method:"eth_accounts"});return this.getLogger().debug("Requesting accounts result: ",e),Promise.resolve(e)}catch(ji){return this.getLogger().error(`Requesting accounts error: ${ji.message}`),Promise.reject(ji)}}},eg=class e extends Ai{static sdk;static initialized=!1;options={};okxUniversalProvider=null;proxies={Ethereum:null,Solana:null,Bitcoin:null,TON:null,Aptos:null,Sui:null};logger;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.logger=this.initializeLogger(),this.options=e}getLogger(){return this.logger}static hackOKXConnectUI(){let e=document.createElement("style");e.innerHTML="\n      #universal-widget-root {\n        position: relative;\n        z-index: -999;\n        opacity: 0;\n      }\n    ",document.head.appendChild(e)}static async init(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.initialized||(e.hackOKXConnectUI(),e.sdk=new e(t),await e.sdk.initialize()),e.sdk}static async connect(t){e.initialized?(this.sdk.getLogger().info(`Connecting to wallet: ${t}`),this.sdk.getLogger().info("OKX Universal Provider connected: ",this.sdk.okxUniversalProvider?.connected()),this.sdk.okxUniversalProvider?.connected()||await this.sdk.connectOkxWallet()):this.sdk.getLogger().error("OKX Connect SDK not initialized")}async disconnect(){this.logger.info("Disconnecting from wallet"),e.initialized&&null!==this.okxUniversalProvider?this.okxUniversalProvider.disconnect():this.logger.error("OKX Connect SDK not initialized")}async initialize(){this.logger.info("Initializing OKX Connect SDK");try{await e.sdk.initUniversalProvider(),await e.sdk.initProxies(),window.ethereum||e.sdk.proxyEthereumProvider(),e.initialized=!0,this.logger.info("OKX Connect SDK initialized")}catch(ji){throw this.logger.error(`Failed to initialize OKX Connect SDK: ${ji}`),ji}}async initUniversalProvider(){this.logger.info("Initializing OKX Universal Provider: ",Ii.OKXUniversalProvider),this.logger.info("Initializing OKX UI: ",jp),this.okxUniversalProvider=await jp.init({dappMetaData:{icon:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",name:"OKX WalletConnect UI Demo"},actionsConfiguration:{returnStrategy:"tg://resolve",modals:"all",tmaReturnUrl:"back"},language:"en_US",uiPreferences:{theme:ha.LIGHT}}),this.logger.info("Connecting OKX Universal Provider to EVM: ",this.okxUniversalProvider),this.logger.info("OKX Universal Provider initialized"),this.subscribeToProvider()}async connectOkxWallet(){if(!this.okxUniversalProvider)return void this.logger.error("OKX Universal Provider not initialized");if(this.logger.info("Check hasTelegramSDK: ",Bp()),!Bp())return void this.logger.error("Telegram SDK not found");this.logger.info("Connecting to OKX Wallet");let e=setInterval((()=>{if(document.getElementById("universal-widget-root")){let t=document.querySelectorAll('#universal-widget-root [data-tc-wallets-modal-connection-mobile="true"] button')[1];t&&(t.click(),clearInterval(e))}}),200),t=await this.okxUniversalProvider.openModal({namespaces:{eip155:{chains:["eip155:1"],rpcMap:{1:"https://rpc.flashbots.net"},defaultChain:"1"}},optionalNamespaces:{eip155:{chains:["eip155:43114"]}}});this.logger.info("trigger session_update callback: ",this.proxies),Object.keys(this.proxies).forEach((e=>{let n=this.proxies[e];this.logger.info("trigger session_update - proxy: ",n),n&&n?.sessionUpdateCallback&&n.sessionUpdateCallback(t)})),this.logger.info("OKX Wallet session: ",t)}subscribeToProvider(){this.okxUniversalProvider?(this.okxUniversalProvider.on("display_uri",(e=>{this.logger.info("on - Display URI: ",e)})),this.okxUniversalProvider.on("session_update",(e=>{this.logger.info("on - Session updated: ",e),Object.keys(this.proxies).forEach((t=>{let n=this.proxies[t];n&&n?.sessionUpdateCallback&&n.sessionUpdateCallback(e)}))})),this.okxUniversalProvider.on("session_delete",(e=>{let{topic:t}=e;this.logger.info("on - Session deleted: ",t),Object.keys(this.proxies).forEach((e=>{let n=this.proxies[e];n&&n?.sessionDeleteCallback&&n.sessionDeleteCallback(t)}))})),this.okxUniversalProvider.on("default_chain_changed",(e=>{this.logger.info("on - Default chain changed: ",e),Object.keys(this.proxies).forEach((t=>{let n=this.proxies[t];n&&n?.defaultChainChangeCallback&&n.defaultChainChangeCallback(e)}))})),this.okxUniversalProvider.on("okx_engine_connect_params",(e=>{this.logger.info("on - OKX engine connect params: ",e),Object.keys(this.proxies).forEach((t=>{let n=this.proxies[t];n&&n?.okxEngineConnectParamsCallback&&n.okxEngineConnectParamsCallback(e)}))})),this.okxUniversalProvider.on("update_name_spaces",(e=>{this.logger.info("on - Update namespaces: ",e),Object.keys(this.proxies).forEach((t=>{let n=this.proxies[t];n&&n?.updateNamespacesCallback&&n.updateNamespacesCallback(e)}))}))):this.logger.error("OKX Universal Provider not initialized")}async initProxies(){this.okxUniversalProvider?this.proxies.Ethereum=new Qp(this.okxUniversalProvider,{connectCallback:async()=>{await this.connectOkxWallet()}}):this.logger.error("OKX Universal Provider not initialized")}initializeLogger(){let e=Up.getInstance();return Up.setLevel(0),e.createScopedLogger("OKXConnectSdk")}async proxyEthereumProvider(){if(window.ethereum)return void this.logger.info("Already proxied Ethereum provider");if(!this.proxies.Ethereum)return void this.logger.error("Ethereum proxy not initialized");let e=new Proxy(this.proxies.Ethereum,{get:(e,t)=>(o.log(`get: ${t}`),Reflect.get(e,t)),set:(e,t,n)=>Reflect.set(e,t,n),deleteProperty:(e,t)=>Reflect.deleteProperty(e,t)});Object.defineProperty(window,"ethereum",{value:e,writable:!1,configurable:!1});let t=new CustomEvent("eip6963:announceProvider",{detail:Object.freeze({info:this.proxies.Ethereum?.eip6963ProviderInfo,provider:e})});this.logger.info("dispatch eip6963: ",window.ethereum),window.dispatchEvent(t),window.addEventListener("eip6963:requestProvider",(()=>{this.logger.info("eip6963:requestProvider: ",t),window.dispatchEvent(t)}))}},tg=Object.getPrototypeOf,ng={isConnected:1},rg={},og=tg(ng),ig=tg(tg),ag=(e,t,n,r)=>(e??(setTimeout(n,r),new Set)).add(t),sg=(e,t,n)=>{let r=Jp;Jp=t;try{return e(n)}catch(i){return o.error(i),n}finally{Jp=r}},fg=e=>e.filter((e=>e._dom?.isConnected)),cg=e=>Gp=ag(Gp,e,(()=>{for(let e of Gp)e._bindings=fg(e._bindings),e._listeners=fg(e._listeners);Gp=zp}),1e3),lg={get val(){return Jp?._getters?.add(this),this.rawVal},get oldVal(){return Jp?._getters?.add(this),this._oldVal},set val(e){Jp?._setters?.add(this),e!==this.rawVal&&(this.rawVal=e,this._bindings.length+this._listeners.length?(Fp?.add(this),qp=ag(qp,this,vg)):this._oldVal=e)}},dg=e=>({__proto__:lg,rawVal:e,_oldVal:e,_bindings:[],_listeners:[]}),ug=(e,t)=>{let n={_getters:new Set,_setters:new Set},r={f:e},o=Vp;Vp=[];let i=sg(e,n,t);i=(i??document).nodeType?i:new Text(i);for(let a of n._getters)n._setters.has(a)||(cg(a),a._bindings.push(r));for(let a of Vp)a._dom=i;return Vp=o,r._dom=i},hg=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dg(),n=arguments.length>2?arguments[2]:void 0,r={_getters:new Set,_setters:new Set},o={f:e,s:t};o._dom=n??Vp?.push(o)??ng,t.val=sg(e,r,t.rawVal);for(let i of r._getters)r._setters.has(i)||(cg(i),i._listeners.push(o));return t},pg=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let o of n.flat(1/0)){let t=tg(o??0),n=t===lg?ug((()=>o.val)):t===ig?ug(o):o;n!=zp&&e.append(n)}return e},gg=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];let[i,...a]=tg(r[0]??0)===og?r:[{},...r],s=e?document.createElementNS(e,t):document.createElement(t);for(let[f,c]of Object.entries(i)){let e=t=>t?Object.getOwnPropertyDescriptor(t,f)??e(tg(t)):zp,n=t+","+f,r=rg[n]??=e(tg(s))?.set??0,o=f.startsWith("on")?(e,t)=>{let n=f.slice(2);s.removeEventListener(n,t),s.addEventListener(n,e)}:r?r.bind(s):s.setAttribute.bind(s,f),i=tg(c??0);f.startsWith("on")||i===ig&&(c=hg(c),i=lg),i===lg?ug((()=>(o(c.val,c._oldVal),s))):o(c)}return pg(s,a)},bg=e=>({get:(t,n)=>gg.bind(zp,e,n)}),yg=(e,t)=>t?t!==e&&e.replaceWith(t):e.remove(),vg=()=>{let e=0,t=[...qp].filter((e=>e.rawVal!==e._oldVal));do{Fp=new Set;for(let e of new Set(t.flatMap((e=>e._listeners=fg(e._listeners)))))hg(e.f,e.s,e._dom),e._dom=zp}while(++e<100&&(t=[...Fp]).length);let n=[...qp].filter((e=>e.rawVal!==e._oldVal));qp=zp;for(let r of new Set(n.flatMap((e=>e._bindings=fg(e._bindings)))))yg(r._dom,ug(r.f,r._dom)),r._dom=zp;for(let r of n)r._oldVal=r.rawVal},mg={tags:new Proxy((e=>new Proxy(gg,bg(e))),bg()),hydrate:(e,t)=>yg(e,ug(t,e)),add:pg,state:dg,derive:hg},{button:Cg,div:Og,header:wg,input:Eg,label:_g,span:xg,style:Sg}=mg.tags,Rg=e=>Object.entries(e).map((e=>{let[t,n]=e;return`${t}: ${n};`})).join(""),Ng=(Object.getPrototypeOf(mg.state(null)),function(e){let{closed:t,backgroundColor:n="rgba(0,0,0,.5)",blurBackground:r=!1,backgroundClass:o="",backgroundStyleOverrides:i={},modalClass:a="",modalStyleOverrides:s={}}=e;for(var f=arguments.length,c=new Array(f>1?f-1:0),l=1;l<f;l++)c[l-1]=arguments[l];let d={display:"flex","align-items":"center","justify-content":"center",left:0,right:0,top:0,bottom:0,position:"fixed","z-index":1e4,"background-color":n,"backdrop-filter":r?"blur(0.25rem)":"none",...i},u={"border-radius":"0.5rem",padding:"1rem",display:"block","background-color":"white",...s};return()=>t.val?null:Og({class:o,style:Rg(d)},Og({class:a,style:Rg(u)},c))}),{button:Tg,div:kg,p:Dg,h3:Pg}=mg.tags;function Ag(){if(Wp())return void Ig($p);let e=Hp(),t=mg.state(!1),n=kg(Pg({style:"font-size:24px;"},"Connect Wallet"),kg({style:"display: flex; flex-direction: column; padding-top: 15px;min-width: 280px;font-size:15px;"},e.map((e=>kg({style:"display: flex; justify-content: space-between; align-items:center; padding-bottom:13px;"},Dg(e.name),Tg({onclick:()=>{t.val=!0,Ig(e)},style:"padding:5px;font-size:15px;"},"Connect"))))));mg.add(document.body,Ng({closed:t,blurBackground:!0,modalStyleOverrides:{padding:"26px","border-radius":"12px"}},n,Dg({style:"display: flex; justify-content: space-evenly;"},Tg({onclick:()=>t.val=!0,style:"padding:5px 25px;font-size:15px;"},"Cancel"))))}async function Ig(e){o.table(e),await eg.connect(e.name)}var Kg=eg},70420:()=>{},11714:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=11714,e.exports=t},81798:()=>{},72193:()=>{},39322:()=>{},44507:()=>{},97283:()=>{},99603:()=>{},87679:()=>{},33541:()=>{},76429:()=>{},7055:()=>{},94355:()=>{}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdO={},(()=>{var e="function"===typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"===typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"===typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))};n.a=(n,i,a)=>{var s;a&&((s=[]).d=-1);var f,c,l,d=new Set,u=n.exports,h=new Promise(((e,t)=>{l=t,c=e}));h[t]=u,h[e]=e=>(s&&e(s),d.forEach(e),h.catch((e=>{}))),n.exports=h,i((n=>{var i;f=(n=>n.map((n=>{if(null!==n&&"object"===typeof n){if(n[e])return n;if(n.then){var i=[];i.d=0,n.then((e=>{a[t]=e,o(i)}),(e=>{a[r]=e,o(i)}));var a={};return a[e]=e=>e(i),a}}var s={};return s[e]=e=>{},s[t]=n,s})))(n);var a=()=>f.map((e=>{if(e[r])throw e[r];return e[t]})),c=new Promise((t=>{(i=()=>t(a)).r=0;var n=e=>e!==s&&!d.has(e)&&(d.add(e),e&&!e.d&&(i.r++,e.push(i)));f.map((t=>t[e](n)))}));return i.r?c:a()}),(e=>(e?l(h[r]=e):c(u),o(s)))),s&&s.d<0&&(s.d=0)}})(),(()=>{var e=[];n.O=(t,r,o,i)=>{if(!r){var a=1/0;for(l=0;l<e.length;l++){r=e[l][0],o=e[l][1],i=e[l][2];for(var s=!0,f=0;f<r.length;f++)(!1&i||a>=i)&&Object.keys(n.O).every((e=>n.O[e](r[f])))?r.splice(f--,1):(s=!1,i<a&&(a=i));if(s){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[r,o,i]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/dapp-demo/",(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,i,a=r[0],s=r[1],f=r[2],c=0;if(a.some((t=>0!==e[t]))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(f)var l=f(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(l)},r=self.webpackChunk_repo_dapp_demo=self.webpackChunk_repo_dapp_demo||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.nc=void 0;var r=n.O(void 0,[96,738],(()=>n(78438)));r=n.O(r)})();